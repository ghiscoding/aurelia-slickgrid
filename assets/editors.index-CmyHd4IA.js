import{j as g,Q as A,a as O,aa as F,R as x,V as I,ab as T,W as _,ac as Q,X as Y,ad as J,ae as Z,af as U,ag as tt,ah as N,ai as j,k as z,aj as et,ak as P,z as M,al as H,am as L,an as it,x as st,m as K,P as lt,ao as nt,ap as ot,aq as at,ar as rt}from"./index-Bz3uuwsZ.js";function k(f,t){const e=t.errorMessage,i=t.required,s=t.minLength,l=t.maxLength,n=t.operatorConditionalType||"inclusive",o={"{{minLength}}":s,"{{maxLength}}":l};let a=!0,r="";const u=(f==null?void 0:f.length)??0;if(t.validator)return t.validator(f,t.editorArgs);if(i&&f==="")a=!1,r=e||g.VALIDATION_REQUIRED_FIELD;else if(s!==void 0&&l!==void 0&&(n==="exclusive"&&(u<=s||u>=l)||n==="inclusive"&&(u<s||u>l)))a=!1,r=e||g.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN.replace(/{{minLength}}|{{maxLength}}/gi,h=>o[h]);else if(s!==void 0&&u!==null&&(n==="exclusive"&&u<=s||n==="inclusive"&&u!==null&&u<s)){a=!1;const h=n==="inclusive"?g.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE:g.VALIDATION_EDITOR_TEXT_MIN_LENGTH;r=e||h.replace(/{{minLength}}/gi,d=>o[d])}else if(l!==void 0&&u!==null&&(n==="exclusive"&&u>=l||n==="inclusive"&&u!==null&&u>l)){a=!1;const h=n==="inclusive"?g.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE:g.VALIDATION_EDITOR_TEXT_MAX_LENGTH;r=e||h.replace(/{{maxLength}}/gi,d=>o[d])}return{valid:a,msg:r}}const ut=3;class ht{constructor(t){var e,i;if(this.args=t,this._isValueTouched=!1,this._lastTriggeredByClearInput=!1,this.disabled=!1,this.forceUserInput=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this._bindEventService=new A,(e=this.gridOptions)!=null&&e.translater&&(this._translater=this.gridOptions.translater),this._locales=((i=this.gridOptions)==null?void 0:i.locales)||g.locales,this.init()}get autocompleterOptions(){return this._autocompleterOptions||{}}get collection(){var t;return((t=this.columnEditor)==null?void 0:t.collection)??[]}get editorDomElement(){return this._inputElm}get elementCollection(){return this._elementCollection}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)||{}}get customStructure(){var i,s,l,n,o;let t=(i=this.columnEditor)==null?void 0:i.customStructure;const e=((s=this.columnEditor)==null?void 0:s.type)??((l=this.columnDef)==null?void 0:l.type);return!t&&e===O.object&&((n=this.columnDef)!=null&&n.dataKey)&&((o=this.columnDef)!=null&&o.labelKey)&&(t={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),t}get dataContext(){return this.args.item}get editorOptions(){var t,e;return{...(t=this.gridOptions.defaultEditorOptions)==null?void 0:t.autocompleter,...(e=this.columnEditor)==null?void 0:e.editorOptions}}get gridOptions(){var t;return((t=this.grid)==null?void 0:t.getOptions())??{}}get instance(){return this._instance}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var e,i,s,l,n,o;this.labelName=((e=this.customStructure)==null?void 0:e.label)??"label",this.valueName=((i=this.customStructure)==null?void 0:i.value)??"value",this.labelPrefixName=((s=this.customStructure)==null?void 0:s.labelPrefix)??"labelPrefix",this.labelSuffixName=((l=this.customStructure)==null?void 0:l.labelSuffix)??"labelSuffix";let t=this.columnEditor.collection;(n=this.columnEditor)!=null&&n.collectionAsync&&!t&&(t=[]),this.renderDomElement(t),(this.disabled||(o=this.columnEditor)!=null&&o.collectionAsync&&Array.isArray(t)&&t.length===0)&&this.disable(!0)}destroy(){var t,e,i;this._bindEventService.unbindAll(),typeof((t=this._instance)==null?void 0:t.destroy)=="function"&&this._instance.destroy(),(i=(e=this._inputElm)==null?void 0:e.remove)==null||i.call(e),this._elementCollection=null}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==""&&this.clear(!0)}else this._inputElm.disabled=!1}focus(){this.grid.focus(),this._inputElm&&(this._inputElm.focus(),this._inputElm.select())}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,i=!0){if(this._inputElm.value=t!=null&&t.hasOwnProperty(this.labelName)?t[this.labelName]:t,e){this._currentValue=t,this._defaultTextValue=typeof t=="string"?t:(t==null?void 0:t[this.labelName])??"",this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(null,s,"system")}}applyValue(t,e){var l,n;let i=e;const s=(l=this.columnDef)==null?void 0:l.field;if(s!==void 0){Array.isArray(this.collection)&&this.collection.length>0&&(i=F(this.collection,r=>r&&tt(e)&&r.hasOwnProperty(this.valueName)?r[this.valueName].toString()===(e.hasOwnProperty(this.valueName)&&e[this.valueName].toString()):r&&typeof e=="string"&&r.hasOwnProperty(this.valueName)?r[this.valueName].toString()===e:(r==null?void 0:r.toString())===e,""));const o=(s==null?void 0:s.indexOf("."))>0,a=this.validate(null,i);if(i=a!=null&&a.valid?i:"",o){const r=((n=this.columnEditor)==null?void 0:n.complexObjectPath)??s??"";x(t,r,i)}else t[s]=i}}isValueChanged(){var s,l;const t=this._inputElm.value,e=(s=this._lastInputKeyEvent)==null?void 0:s.key;if((l=this.columnEditor)!=null&&l.alwaysSaveOnEnterKey&&e==="Enter")return!0;const i=!(t===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&t!==this._defaultTextValue;return this._lastTriggeredByClearInput||i}isValueTouched(){return this._isValueTouched}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&e!==void 0){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e];this._currentValue=l,this._originalValue=l,this._defaultTextValue=typeof l=="string"?l:(l==null?void 0:l[this.labelName])??"",this._inputElm.value=this._defaultTextValue,this._inputElm.select()}}clear(t=!1){this._inputElm&&(this._currentValue="",this._defaultTextValue="",this.setValue("",!0)),this._isValueTouched=!0,this._lastTriggeredByClearInput=!0;const e=this.args.compositeEditorOptions;if(e){const i=!t;this.handleChangeOnCompositeEditor(null,e,"user",i)}else this.save()}reset(t,e=!0,i=!1){const s=t??this._originalValue??"";this._inputElm&&(this._currentValue=s,this._defaultTextValue=typeof s=="string"?s:(s==null?void 0:s[this.labelName])??"",this._inputElm.value=this._defaultTextValue),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(null,l,"user",n)}}save(){var i;const t=this.validate(),e=(t==null?void 0:t.valid)??!1;if(this.hasAutoCommitEdit&&e)this.grid.getEditorLock().commitCurrentEdit();else{const s=((i=this._lastInputKeyEvent)==null?void 0:i.key)!=="Enter";this.args.commitChanges(s)}}serializeValue(){var t,e,i,s,l;if(this._inputElm&&this.editorOptions.forceUserInput){const n=((t=this.editorOptions)==null?void 0:t.minLength)??ut;this._currentValue=this._inputElm.value.length>n?this._inputElm.value:this._currentValue}return this.customStructure&&this._currentValue&&this._currentValue.hasOwnProperty(this.valueName)&&((e=this.columnDef)==null?void 0:e.type)!==O.object&&((i=this.columnEditor)==null?void 0:i.type)!==O.object?this._currentValue[this.valueName]:this._currentValue&&this._currentValue.value!==void 0?((s=this.columnDef)==null?void 0:s.type)===O.object||((l=this.columnEditor)==null?void 0:l.type)===O.object?{[this.labelName]:this._currentValue.label,[this.valueName]:this._currentValue.value}:this._currentValue.value:this._currentValue}validate(t,e){var s,l;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:(s=this._inputElm)==null?void 0:s.value;return k(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:(l=this.args)!=null&&l.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var d,m,c;const l=this.grid.getActiveCell(),n=this.args.column,o=((d=this.columnDef)==null?void 0:d.id)??"",a=this.dataContext,r=this.grid,u=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,u),this.applyValue(e.formValues,u);const h=((c=(m=this.gridOptions)==null?void 0:m.compositeEditorOptions)==null?void 0:c.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&h&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],r.onCompositeEditorChange.notify({...l,item:a,grid:r,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}handleSelect(t){var e;if(t!==void 0){const i=t;this._currentValue=i,this._isValueTouched=!0;const s=this.args.compositeEditorOptions,l=((e=this.editorOptions)==null?void 0:e.renderItem)??!1,n=typeof i=="string"?i:l?i[this.labelName]:i.label;if(this.setValue(n),s?this.handleChangeOnCompositeEditor(null,s):this.save(),typeof this.editorOptions.onSelectItem=="function"){const{row:o,cell:a}=this.grid.getActiveCell()||{};this.editorOptions.onSelectItem(t,o,a,this.args.column,this.args.item)}window.setTimeout(()=>this._lastTriggeredByClearInput=!1)}return!1}renderRegularItem(t){const e=typeof t=="string"?t:(t==null?void 0:t.label)??"";return _("div",{textContent:e||""})}renderCustomItem(t){var s,l;const e=((l=(s=this._autocompleterOptions)==null?void 0:s.renderItem)==null?void 0:l.templateCallback(t))??"",i=document.createElement("div");return this.grid.applyHtmlCode(i,e),i}renderCollectionItem(t){var r;const e=((r=this.columnEditor)==null?void 0:r.enableRenderHtml)??!1,i=t.labelPrefix||"",s=t.label||"",l=t.labelSuffix||"",n=i+s+l,o=this.grid.sanitizeHtmlString(n)||"",a=document.createElement("div");return a[e?"innerHTML":"textContent"]=o,a}renderDomElement(t){var o,a,r,u,h,d,m,c,v,E,V,y;const e=((o=this.columnDef)==null?void 0:o.id)??"",i=((a=this.columnEditor)==null?void 0:a.placeholder)??"",s=((r=this.columnEditor)==null?void 0:r.title)??"";this._editorInputGroupElm=_("div",{className:"autocomplete-container input-group"});const l=_("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=_("button",{type:"button",className:"btn btn-default btn-clear"}),this._clearButtonElm.appendChild(_("i",{className:"icon-clear"})),this._inputElm=_("input",{type:"text",placeholder:i,title:s,autocomplete:"off",ariaAutoComplete:"none",className:`autocomplete form-control editor-text input-group-editor editor-${e}`,dataset:{input:""}},this._editorInputGroupElm),this._editorInputGroupElm.appendChild(document.createElement("span")),(u=this.editorOptions)!=null&&u.hideClearButton||(l.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(l),this._bindEventService.bind(this._clearButtonElm,"click",()=>this.clear())),this._bindEventService.bind(this._inputElm,"focus",()=>{var p;return(p=this._inputElm)==null?void 0:p.select()}),this._bindEventService.bind(this._inputElm,"keydown",p=>{this._lastInputKeyEvent=p,(p.key==="ArrowLeft"||p.key==="ArrowRight"||p.key==="Home"||p.key==="End")&&p.stopImmediatePropagation(),p.key==="Enter"&&p.target.value===""&&this.columnEditor.alwaysSaveOnEnterKey&&(this._currentValue=null)});let n=t;if(n&&((h=this.columnEditor)!=null&&h.collectionOverride)){const p={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:b,modalType:C}=this.args.compositeEditorOptions;p.compositeEditorOptions={formValues:b,modalType:C}}n=this.columnEditor.collectionOverride(n,p)}n&&(this.finalCollection=n),Array.isArray(n)&&(this.collection.every(p=>Q(p))?n=n.map(p=>({label:p,value:p})):n=n.map(p=>({label:p==null?void 0:p[this.labelName],value:p==null?void 0:p[this.valueName],labelPrefix:(p==null?void 0:p[this.labelPrefixName])??"",labelSuffix:(p==null?void 0:p[this.labelSuffixName])??""})),this._elementCollection=n),this._autocompleterOptions={input:this._inputElm,debounceWaitMs:200,className:`slick-autocomplete ${((d=this.editorOptions)==null?void 0:d.className)??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&((m=this._translater)!=null&&m.translate)?this._translater.translate("NO_ELEMENTS_FOUND"):((c=this._locales)==null?void 0:c.TEXT_NO_ELEMENTS_FOUND)??"No elements found",customize:(p,b,C)=>{C.style.width=""},onSelect:this.handleSelect.bind(this),...this.editorOptions},(v=this.gridOptions)!=null&&v.darkMode&&(this._autocompleterOptions.className+=" slick-dark-mode"),this.autocompleterOptions.className=Y(this.autocompleterOptions.className).join(" "),(E=this._autocompleterOptions.renderItem)!=null&&E.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${J(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(t)?this._autocompleterOptions.render=((V=this._autocompleterOptions.render)==null?void 0:V.bind(this))??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),(y=this._autocompleterOptions)!=null&&y.fetch?(Z(this._inputElm,this._autocompleterOptions),this._instance=U(this._autocompleterOptions)):this._instance=U({...this._autocompleterOptions,fetch:(p,b)=>{n&&b(n.filter(C=>((typeof C=="string"?C:C==null?void 0:C.label)||"").toLowerCase().includes(p.toLowerCase())))}}),this.args.container.appendChild(this._editorInputGroupElm),this.args.compositeEditorOptions||window.setTimeout(()=>this.focus(),50)}}class dt{constructor(t){if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new A,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var s,l,n,o;const t=((s=this.columnDef)==null?void 0:s.id)??"",e=this.args.compositeEditorOptions;this._checkboxContainerElm=_("div",{className:`checkbox-editor-container editor-${t}`}),this._input=_("input",{type:"checkbox",value:"true",ariaLabel:((l=this.columnEditor)==null?void 0:l.ariaLabel)??`${N(t+"")} Checkbox Editor`,className:`editor-checkbox editor-${t}`,title:((n=this.columnEditor)==null?void 0:n.title)??""});const i=(o=this.args)==null?void 0:o.container;i&&typeof i.appendChild=="function"&&(e?(this._checkboxContainerElm.appendChild(this._input),i.appendChild(this._checkboxContainerElm)):i.appendChild(this._input)),this.hasAutoCommitEdit&&!e&&this._bindEventService.bind(this._input,"click",()=>{this._isValueTouched=!0,this.save()}),e?this._bindEventService.bind(this._input,"change",a=>{this._isValueTouched=!0,this.handleChangeOnCompositeEditor(a,e)}):this.focus()}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)==null?void 0:t.remove)==null||e.call(t)}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled"),this._checkboxContainerElm.classList.add("disabled");const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==!1&&this.reset(!1,!0,!0)}else this._input.removeAttribute("disabled"),this._checkboxContainerElm.classList.remove("disabled")}focus(){var t;this.grid.focus(),(t=this._input)==null||t.focus()}preClick(){this._input&&(this._input.checked=!this._input.checked)}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t;return((t=this._input)==null?void 0:t.checked)??!1}setValue(t,e=!1,i=!0){const s=!!t;if(this._input&&(this._input.checked=s),e){this.applyValue(this.args.item,this.serializeValue());const l=this.args.compositeEditorOptions;l&&i&&this.handleChangeOnCompositeEditor(null,l,"system")}}applyValue(t,e){var s,l;const i=(s=this.columnDef)==null?void 0:s.field;if(i!==void 0){const n=(i==null?void 0:i.indexOf("."))>0,o=this.validate(null,e),a=o&&o.valid?e:"";if(n){const r=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??i??"";x(t,r,a)}else t[i]=a}}isValueChanged(){return this.serializeValue()!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&e!==void 0&&this._input){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e];this._originalValue=l,this._input.checked=!!this._originalValue}}reset(t,e=!0,i=!1){const s=t??this._originalValue??!1;this._input&&(this._originalValue=s,this._input.checked=!!s),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(null,l,"user",n)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t;return((t=this._input)==null?void 0:t.checked)??!1}validate(t,e){var n,o;const i=(n=this.args)!=null&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e!==void 0?e:(o=this._input)==null?void 0:o.checked,l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):i&&!s?{valid:!1,msg:l||g.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var d,m,c;const l=this.grid.getActiveCell(),n=this.args.column,o=((d=this.columnDef)==null?void 0:d.id)??"",a=this.dataContext,r=this.grid,u=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,u),this.applyValue(e.formValues,u);const h=((c=(m=this.gridOptions)==null?void 0:m.compositeEditorOptions)==null?void 0:c.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&h&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],r.onCompositeEditorChange.notify({...l,item:a,grid:r,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}}class ct{constructor(t){var e;if(this.args=t,this._isValueTouched=!1,this._lastClickIsDate=!1,this._lastTriggeredByClearDate=!1,this.hasTimePicker=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},(e=this.gridOptions)!=null&&e.translater&&(this._translaterService=this.gridOptions.translater),this._bindEventService=new A,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._inputElm}get editorOptions(){var t,e;return{...(t=this.gridOptions.defaultEditorOptions)==null?void 0:t.date,...(e=this.columnEditor)==null?void 0:e.editorOptions}}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get pickerOptions(){return this._pickerMergedOptions}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}async init(){var t,e,i,s,l,n,o,a;if(this.args&&this.columnDef){const r=this.args.compositeEditorOptions,u=((t=this.columnDef)==null?void 0:t.id)??"",h=this.args.grid.getOptions()||{};this.defaultDate=(e=this.args.item)==null?void 0:e[this.columnDef.field];const d=this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||O.dateUtc,m=j(d),c=((s=(i=this._translaterService)==null?void 0:i.getCurrentLanguage)==null?void 0:s.call(i))||h.locale||"en";m&&(m==="ISO8601"||m.toLowerCase().includes("h"))&&(this.hasTimePicker=!0);const v=j(this.hasTimePicker?O.dateTimeIsoAM_PM:O.dateIso),E={input:!0,jumpToSelectedDate:!0,sanitizer:p=>this.grid.sanitizeHtmlString(p),toggleSelected:!1,actions:{clickDay:()=>{this._lastClickIsDate=!0},changeToInput:(p,b)=>{if(b.HTMLInputElement){let C="";if(b.selectedDates[0]?(C=b.selectedDates[0],b.HTMLInputElement.value=L(b.selectedDates[0],void 0,d)):b.HTMLInputElement.value="",C&&this.hasTimePicker){const S=it(C,v);S.setHours(+(b.selectedHours||0)),S.setMinutes(+(b.selectedMinutes||0)),b.HTMLInputElement.value=L(S,void 0,d)}this._lastClickIsDate&&(this.handleOnDateChange(),b.hide())}}},settings:{lang:c,iso8601:!1,visibility:{theme:(l=this.gridOptions)!=null&&l.darkMode?"dark":"light",positionToInput:"auto",weekend:!1}}};this.hasTimePicker&&(E.settings.selection={time:24}),this._pickerMergedOptions=z(!0,{},E,{settings:this.editorOptions,type:"default"});const V=`.editor-text.date-picker.editor-${u}.form-control.input-group-editor`;this._editorInputGroupElm=_("div",{className:"vanilla-picker input-group"});const y=_("span",{className:"input-group-btn input-group-append",dataset:{clear:""}});this._clearButtonElm=_("button",{type:"button",className:"btn btn-default btn-clear"}),this._clearButtonElm.appendChild(_("i",{className:"icon-clear"})),this._inputElm=_("input",{placeholder:((n=this.columnEditor)==null?void 0:n.placeholder)??"",title:this.columnEditor&&this.columnEditor.title||"",className:V.replace(/\./g," "),dataset:{input:"",defaultdate:this.defaultDate},readOnly:((o=this.columnEditor.editorOptions)==null?void 0:o.allowInput)!==!0},this._editorInputGroupElm),this.args.container.appendChild(this._editorInputGroupElm),(a=this.columnEditor.editorOptions)!=null&&a.hideClearButton||(y.appendChild(this._clearButtonElm),this._editorInputGroupElm.appendChild(y),this._bindEventService.bind(this._clearButtonElm,"click",()=>{this.clear(),this.handleOnDateChange()})),this._bindEventService.bind(this._inputElm,"keydown",p=>{var b;((b=this.columnEditor.editorOptions)==null?void 0:b.allowInput)===!0&&(this._isValueTouched=!0,this._lastInputKeyEvent=p,(p.key==="ArrowLeft"||p.key==="ArrowRight"||p.key==="Home"||p.key==="End")&&p.stopImmediatePropagation())}),queueMicrotask(()=>{this.calendarInstance=new et(this._inputElm,this._pickerMergedOptions),this.calendarInstance.init(),r||(this.show(),this.focus()),this.calendarInstance&&P(this.columnEditor,this._inputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:this.defaultDate,updatePickerUI:!0})})}}destroy(){queueMicrotask(()=>{var t,e,i;this.hide(),(t=this.calendarInstance)==null||t.destroy(),M(this._editorInputGroupElm),M(this._inputElm),(e=this._editorInputGroupElm)==null||e.remove(),(i=this._inputElm)==null||i.remove()}),this._bindEventService.unbindAll()}clear(){this._lastTriggeredByClearDate=!0,this.calendarInstance&&H(this.calendarInstance)}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.setAttribute("disabled","disabled"),this._clearButtonElm.disabled=!0;const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==""&&this.reset("",!0,!0)}else this._inputElm.removeAttribute("disabled"),this._clearButtonElm.disabled=!1}changeEditorOption(t,e){this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this._pickerMergedOptions=z(!0,{},this._pickerMergedOptions,{settings:{[t]:e}})}focus(){var t;this.grid.focus(),this.show(),(t=this._inputElm)==null||t.focus()}hide(){var t;(t=this.calendarInstance)==null||t.hide()}show(){var e;const t=!!((e=this.args)!=null&&e.compositeEditorOptions);!t&&this.calendarInstance?this.calendarInstance.show():t&&this.applyInputUsabilityState()}getValue(){return this._inputElm.value}setValue(t,e=!1,i=!0){if(this.calendarInstance&&P(this.columnEditor,this._inputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:t,updatePickerUI:!0}),e){this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(s,"system")}}applyValue(t,e){var s,l;const i=(s=this.columnDef)==null?void 0:s.field;if(this.columnDef&&i!==void 0){const n=this.columnDef.saveOutputType||this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||O.dateUtc,o=this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||O.dateUtc,a=i.indexOf(".")>0,r=this.validate(null,e),u=e&&(r!=null&&r.valid)?L(e,o,n):"";if(a){const h=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??i;x(t,h,u)}else t[i]=u}}isValueChanged(){var s,l,n;let t=!1;const e=this.getValue(),i=(s=this._lastInputKeyEvent)==null?void 0:s.key;return((l=this.columnEditor.editorOptions)==null?void 0:l.allowInput)===!0&&((n=this.columnEditor)!=null&&n.alwaysSaveOnEnterKey)&&i==="Enter"?!0:(this.columnDef&&(t=this._lastTriggeredByClearDate||!(e===""&&this._originalDate==="")&&e!==this._originalDate),t)}isValueTouched(){return this._isValueTouched}loadValue(t){var i,s;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&this.columnDef&&e!==void 0){const n=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e],o=this.columnEditor.type||((s=this.columnDef)==null?void 0:s.type)||O.dateIso,a=this.columnDef.outputType||this.columnEditor.type||this.columnDef.type||O.dateIso,r=L(n,o,a);this._originalDate=r!==""?n:"",this._inputElm.value=r}}reset(t,e=!0,i=!1){const s=t??this._originalDate??"";this.calendarInstance&&(this._originalDate=s,this.calendarInstance.settings.selected.dates=[s],s?P(this.columnEditor,this._inputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:s}):H(this.calendarInstance)),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(l,"user",n)}}save(){const t=this.validate(),e=(t==null?void 0:t.valid)??!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){const t=this.getValue();return t||""}validate(t,e){var n,o;const i=(n=this.args)!=null&&n.compositeEditorOptions?!1:this.columnEditor.required,s=e??((o=this._inputElm)==null?void 0:o.value),l=this.columnEditor.errorMessage;return this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled?{valid:!0,msg:""}:this.validator?this.validator(s,this.args):i&&s===""?{valid:!1,msg:l||g.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleOnDateChange(){if(this._isValueTouched=!0,this.args){const t=this.args.compositeEditorOptions;t?this.handleChangeOnCompositeEditor(t):this.save()}window.setTimeout(()=>this._lastTriggeredByClearDate=!1)}handleChangeOnCompositeEditor(t,e="user",i=!1){var h,d,m;const s=this.grid.getActiveCell(),l=this.args.column,n=((h=this.columnDef)==null?void 0:h.id)??"",o=this.dataContext,a=this.grid,r=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,r),this.applyValue(t.formValues,r);const u=((m=(d=this.gridOptions)==null?void 0:d.compositeEditorOptions)==null?void 0:m.excludeDisabledFieldFormValues)??!1;(i||this.disabled&&u&&t.formValues.hasOwnProperty(n))&&delete t.formValues[n],a.onCompositeEditorChange.notify({...s,item:o,grid:a,column:l,formValues:t.formValues,editors:t.editors,triggeredBy:e},new T)}}function q(f,t){const e=isNaN(f)?null:parseFloat(f),i=t.decimal||0,s=t.required,l=t.minValue,n=t.maxValue,o=t.operatorConditionalType||"inclusive",a=t.errorMessage,r={"{{minValue}}":l,"{{maxValue}}":n,"{{minDecimal}}":0,"{{maxDecimal}}":i};let u=!0,h="";if(typeof t.validator=="function")return t.validator(f,t.editorArgs);if(s&&f==="")u=!1,h=a||g.VALIDATION_REQUIRED_FIELD;else if(f!==""&&(isNaN(f)||i===0&&!/^[-+]?(\d*(\.)?(\d)*)$/.test(f)))u=!1,h=a||g.VALIDATION_EDITOR_VALID_NUMBER;else if(l!==void 0&&n!==void 0&&e!==null&&(o==="exclusive"&&(e<=+l||e>=+n)||o==="inclusive"&&(e<+l||e>+n)))u=!1,h=a||g.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,d=>r[d]);else if(l!==void 0&&e!==null&&(o==="exclusive"&&e<=+l||o==="inclusive"&&e<+l)){u=!1;const d=o==="inclusive"?g.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE:g.VALIDATION_EDITOR_NUMBER_MIN;h=a||d.replace(/{{minValue}}/gi,m=>r[m])}else if(n!==void 0&&e!==null&&(o==="exclusive"&&e>=+n||o==="inclusive"&&e>+n)){u=!1;const d=o==="inclusive"?g.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE:g.VALIDATION_EDITOR_NUMBER_MAX;h=a||d.replace(/{{maxValue}}/gi,m=>r[m])}else i>0&&!new RegExp(`^[-+]?(\\d*(\\.)?(\\d){0,${i}})$`).test(f)&&(u=!1,h=a||g.VALIDATION_EDITOR_DECIMAL_BETWEEN.replace(/{{minDecimal}}|{{maxDecimal}}/gi,d=>r[d]));return{valid:u,msg:h}}function G(f,t){let e=isNaN(f)?null:parseInt(f,10);e!==null&&isNaN(e)&&(e=null);const i=t.errorMessage,s=t.required,l=t.minValue,n=t.maxValue,o=t.operatorConditionalType||"inclusive",a={"{{minValue}}":l,"{{maxValue}}":n};let r=!0,u="";if(t.validator)return t.validator(f,t.editorArgs);if(s&&f==="")r=!1,u=i||g.VALIDATION_REQUIRED_FIELD;else if(f!==""&&(isNaN(f)||!/^[+-]?\d+$/.test(f)))r=!1,u=i||g.VALIDATION_EDITOR_VALID_INTEGER;else if(l!==void 0&&n!==void 0&&e!==null&&(o==="exclusive"&&(e<=+l||e>=+n)||o==="inclusive"&&(e<+l||e>+n)))r=!1,u=i||g.VALIDATION_EDITOR_INTEGER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,h=>a[h]);else if(l!==void 0&&e!==null&&(o==="exclusive"&&e<=+l||o==="inclusive"&&e!==null&&e<+l)){r=!1;const h=o==="inclusive"?g.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE:g.VALIDATION_EDITOR_INTEGER_MIN;u=i||h.replace(/{{minValue}}/gi,d=>a[d])}else if(n!==void 0&&e!==null&&(o==="exclusive"&&e>=+n||o==="inclusive"&&e!==null&&e>+n)){r=!1;const h=o==="inclusive"?g.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE:g.VALIDATION_EDITOR_INTEGER_MAX;u=i||h.replace(/{{maxValue}}/gi,d=>a[d])}return{valid:r,msg:u}}function pt(f,t){const e=t.required,i=t.minValue,s=t.maxValue,l=t.errorMessage,n={"{{minValue}}":i,"{{maxValue}}":s};return t.validator?t.validator(f,t.editorArgs):e&&f===""?{valid:!1,msg:l||g.VALIDATION_REQUIRED_FIELD}:i!==void 0&&s!==void 0&&f!==null&&(f<i||f>s)?{valid:!1,msg:l||g.VALIDATION_EDITOR_NUMBER_BETWEEN.replace(/{{minValue}}|{{maxValue}}/gi,o=>n[o])}:{valid:!0,msg:null}}class mt{constructor(t){if(this.args=t,this._isValueSaveCalled=!1,this._isLeftValueTouched=!1,this._isRightValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._eventHandler=new st,this._bindEventService=new A,this.init(),this._eventHandler.subscribe(this.grid.onValidationError,()=>this._isValueSaveCalled=!0)}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)||{}}get dataContext(){return this.args.item}get editorDomElement(){return{leftInput:this._leftInput,rightInput:this._rightInput}}get editorParams(){return this.columnEditor.params||{}}get eventHandler(){return this._eventHandler}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get isValueSaveCalled(){return this._isValueSaveCalled}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var i,s,l,n;if(!this.editorParams||!this.editorParams.leftInput||!this.editorParams.leftInput.field||!this.editorParams.rightInput||!this.editorParams.rightInput.field)throw new Error(`[Slickgrid-Universal] Please make sure that your Combo Input Editor has params defined with "leftInput" and "rightInput" (example: { editor: { model: Editors.comboInput, params: { leftInput: { field: 'firstName' }, { rightSide: { field: 'lastName' } }}}`);this._leftFieldName=(i=this.editorParams.leftInput)==null?void 0:i.field,this._rightFieldName=(s=this.editorParams.rightInput)==null?void 0:s.field,this._leftInput=this.createInput("leftInput"),this._rightInput=this.createInput("rightInput");const t=(l=this.args)==null?void 0:l.container;t&&typeof t.appendChild=="function"&&(t.appendChild(this._leftInput),t.appendChild(this._rightInput)),this._bindEventService.bind(this._leftInput,"keydown",o=>this.handleKeyDown(o,"leftInput")),this._bindEventService.bind(this._rightInput,"keydown",o=>this.handleKeyDown(o,"rightInput")),this.hasAutoCommitEdit&&(this._bindEventService.bind(this._leftInput,"focusout",o=>this.handleFocusOut(o,"leftInput")),this._bindEventService.bind(this._rightInput,"focusout",o=>this.handleFocusOut(o,"rightInput"))),((n=this.args)==null?void 0:n.compositeEditorOptions)?(this._bindEventService.bind(this._leftInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this)),this._bindEventService.bind(this._rightInput,"input",this.handleChangeOnCompositeEditorDebounce.bind(this))):window.setTimeout(()=>this._leftInput.select(),50)}handleFocusOut(t,e){var n;const i=((n=t.relatedTarget)==null?void 0:n.className)||"";!this.args.compositeEditorOptions&&i.indexOf("dual-editor")===-1&&this._lastEventType!=="focusout-right"&&(e==="rightInput"||e==="leftInput"&&this._lastEventType!=="focusout-left")&&(e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this.save());const l=e==="leftInput"?"left":"right";this._lastEventType=`${t==null?void 0:t.type}-${l}`}handleKeyDown(t,e){e==="leftInput"?this._isLeftValueTouched=!0:this._isRightValueTouched=!0,this._lastInputKeyEvent=t,(t.key==="ArrowLeft"||t.key==="ArrowRight"||t.key==="Home"||t.key==="End"||t.key==="Tab")&&t.stopImmediatePropagation()}destroy(){var t,e,i,s;this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),(e=(t=this._leftInput)==null?void 0:t.remove)==null||e.call(t),(s=(i=this._rightInput)==null?void 0:i.remove)==null||s.call(i)}createInput(t){var a,r,u,h;const e=this.editorParams[t],i=((a=this.columnDef)==null?void 0:a.id)??"",s=this.gridOptions.datasetIdPropertyName||"id",l=((u=(r=this.args)==null?void 0:r.item)==null?void 0:u[s])??"";let n=e.type||"text";(n==="float"||n==="integer")&&(n="number");const o=_("input",{type:n||"text",id:`item-${l}-${t}`,ariaLabel:((h=this.columnEditor)==null?void 0:h.ariaLabel)??`${N(i+"")} Input Editor`,className:`dual-editor-text editor-${i} ${t.replace(/input/gi,"")}`,autocomplete:"off",ariaAutoComplete:"none",placeholder:e.placeholder||"",title:e.title||""});return n==="readonly"&&(o.readOnly=!0,n="text"),n==="number"&&(o.step=this.getInputDecimalSteps(t)),o}disable(t=!0){var i;const e=this.disabled;this.disabled=t,this._leftInput&&this._rightInput&&(t?(this._leftInput.setAttribute("disabled","disabled"),this._rightInput.setAttribute("disabled","disabled"),e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&this.reset("",!0,!0)):(this._leftInput.removeAttribute("disabled"),this._rightInput.removeAttribute("disabled")))}focus(){this.grid.focus()}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValues(){const t={},e=this._leftInput.value,i=this._rightInput.value,s=this.editorParams.leftInput&&(this.editorParams.leftInput.type==="float"||this.editorParams.leftInput.type==="integer"),l=this.editorParams.rightInput&&(this.editorParams.rightInput.type==="float"||this.editorParams.rightInput.type==="integer"),n=e!==""&&s?+this._leftInput.value:e||"",o=i!==""&&l?+this._rightInput.value:i||"";return x(t,this._leftFieldName,n),x(t,this._rightFieldName,o),t}setValues(t){Array.isArray(t)&&t.length===2&&(this._leftInput.value=`${t[0]}`,this._rightInput.value=`${t[1]}`)}applyValue(t,e){this.applyValueByPosition(t,e,"leftInput"),this.applyValueByPosition(t,e,"rightInput")}applyValueByPosition(t,e,i){var l;const s=i==="leftInput"?this._leftFieldName:this._rightFieldName;if(s!==void 0){const n=(s==null?void 0:s.indexOf("."))>0;let o=s;if(n){const u=s.split(/\.(.*)/);o=u.length>1?u[1]:u}const a=n?I(e,o):e[s],r=this.validate(null,{position:i,inputValue:a});if(n){const u=I(e,o),h=r&&r.valid?u:"",d=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??s??"";x(t,d,h)}else s&&(t[s]=r&&r.valid?e[s]:"")}}isValueChanged(){var a,r,u;const t=this._leftInput.value,e=this._rightInput.value,i=(a=this.editorParams)==null?void 0:a.leftInput,s=(r=this.editorParams)==null?void 0:r.rightInput,l=(u=this._lastInputKeyEvent)==null?void 0:u.key;if((i&&i.alwaysSaveOnEnterKey||s&&s.alwaysSaveOnEnterKey)&&l==="Enter")return!0;const n=!(t===""&&(this._originalLeftValue===null||this._originalLeftValue===void 0))&&t!==this._originalLeftValue,o=!(e===""&&(this._originalRightValue===null||this._originalRightValue===void 0))&&e!==this._originalRightValue;return n||o}isValueTouched(){return this._isLeftValueTouched||this._isRightValueTouched}loadValue(t){this.loadValueByPosition(t,"leftInput"),this.loadValueByPosition(t,"rightInput"),this._leftInput.select()}loadValueByPosition(t,e){const i=e==="leftInput"?this._leftFieldName:this._rightFieldName,s=e==="leftInput"?"_originalLeftValue":"_originalRightValue",l=e==="leftInput"?"_leftInput":"_rightInput";if(t&&i!==void 0){const o=(i==null?void 0:i.indexOf("."))>0?I(t,i):t.hasOwnProperty(i)?t[i]:"";if(this[s]=o,this.editorParams[e].type==="float"){const a=this.getDecimalPlaces(e);a!==null&&(this[s]||this[s]===0)&&this[s]!==void 0&&(this[s]=(+this[s]).toFixed(a))}this[l]&&(this[l].value=`${this[s]}`)}}reset(t,e=!0,i=!1){const s=t??this._originalLeftValue??"",l=t??this._originalRightValue??"";this._leftInput&&this._rightInput&&(this._originalLeftValue=s,this._originalRightValue=l,this._leftInput.value=`${s}`,this._rightInput.value=`${l}`),this._isLeftValueTouched=!1,this._isRightValueTouched=!1;const n=this.args.compositeEditorOptions;if(n&&e){const o=!i;this.handleChangeOnCompositeEditor(null,n,"user",o)}}save(){const t=this.validate(),e=t&&t.valid||!1;this._isValueSaveCalled||(this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges(),this._isValueSaveCalled=!0)}serializeValue(){const t={},e=this.serializeValueByPosition("leftInput"),i=this.serializeValueByPosition("rightInput");return x(t,this._leftFieldName,e),x(t,this._rightFieldName,i),t}serializeValueByPosition(t){const e=t==="leftInput"?this._leftInput.value:this._rightInput.value;if(e===""||isNaN(+e))return e;let i=parseFloat(e);const s=this.getDecimalPlaces(t);return s!==null&&(i||i===0)&&i.toFixed&&(i=parseFloat(i.toFixed(s))),i}getDecimalPlaces(t){const i=t==="leftInput"?"leftInput":"rightInput",s=this.editorParams[i],l=s==null?void 0:s.decimal;return l===void 0?0:l}getInputDecimalSteps(t){const e=this.getDecimalPlaces(t);let i="";for(let s=1;s<e;s++)i+="0";return e>0?`0.${i}1`:"1"}validate(t,e){if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(e){const i=this.validateByPosition(e.position,e.inputValue);if(!i.valid)return e.position==="leftInput"?this._leftInput.select():this._rightInput.select(),i}else{const i=this.validateByPosition("leftInput"),s=this.validateByPosition("rightInput");if(!i.valid)return this._leftInput.select(),i;if(!s.valid)return this._rightInput.select(),s}return{valid:!0,msg:""}}validateByPosition(t,e){var o;const i=this.editorParams[t];let s="";if(e)s=e;else{const a=t==="leftInput"?this._leftInput:this._rightInput;s=a&&a.value}const l=this.validator;s=typeof l=="function"?this.getValues():s;const n={editorArgs:this.args,errorMessage:i.errorMessage,required:(o=this.args)!=null&&o.compositeEditorOptions?!1:i.required,validator:typeof l=="function"?l:i.validator};switch(i.type){case"float":return q(s,{...n,decimal:this.getDecimalPlaces(t),minValue:i.minValue,maxValue:i.maxValue,operatorConditionalType:i.operatorConditionalType});case"integer":return G(s,{...n,minValue:i.minValue,maxValue:i.maxValue,operatorConditionalType:i.operatorConditionalType});case"text":case"password":default:return k(s,n)}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var m,c,v,E,V,y;const l=this.grid.getActiveCell(),n=this.args.column,o=((c=(m=this.columnEditor.params)==null?void 0:m.leftInput)==null?void 0:c.field)??"",a=((E=(v=this.columnEditor.params)==null?void 0:v.rightInput)==null?void 0:E.field)??"",r=this.dataContext,u=this.grid,h=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,h),this.applyValue(e.formValues,h);const d=((y=(V=this.gridOptions)==null?void 0:V.compositeEditorOptions)==null?void 0:y.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&d&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],(s||this.disabled&&d&&e.formValues.hasOwnProperty(a))&&delete e.formValues[a],u.onCompositeEditorChange.notify({...l,item:r,grid:u,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}handleChangeOnCompositeEditorDebounce(t){var i,s;const e=(i=this.args)==null?void 0:i.compositeEditorOptions;if(e){const l=((s=this.gridOptions)==null?void 0:s.editorTypingDebounce)??500;window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.handleChangeOnCompositeEditor(t,e),l)}}}const ft=0;class R{constructor(t,e="text"){var i;if(this.args=t,this._inputType="text",this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=(i=t.grid)==null?void 0:i.getOptions(),this._bindEventService=new A,this.inputType=e,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)||{}}get dataContext(){return this.args.item}get editorDomElement(){return this._input}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get inputType(){return this._inputType}set inputType(t){this._inputType=t}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var s,l,n,o;const t=((s=this.columnDef)==null?void 0:s.id)??"",e=this.args.compositeEditorOptions;this._input=_("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",ariaLabel:((l=this.columnEditor)==null?void 0:l.ariaLabel)??`${N(t+"")} Input Editor`,className:`editor-text editor-${t}`,placeholder:((n=this.columnEditor)==null?void 0:n.placeholder)??"",title:((o=this.columnEditor)==null?void 0:o.title)??""}),this.inputType==="number"&&(this._input.step=`${this.columnEditor.valueStep!==void 0?this.columnEditor.valueStep:this.getInputDecimalSteps()}`);const i=this.args.container;i&&typeof i.appendChild=="function"&&i.appendChild(this._input),this._bindEventService.bind(this._input,"focus",()=>{var a;return(a=this._input)==null?void 0:a.select()}),this._bindEventService.bind(this._input,"keydown",a=>{this._isValueTouched=!0,this._lastInputKeyEvent=a,(a.key==="ArrowLeft"||a.key==="ArrowRight"||a.key==="Home"||a.key==="End")&&a.stopImmediatePropagation()}),this.hasAutoCommitEdit&&!e&&this._bindEventService.bind(this._input,["focusout","blur"],()=>{this._isValueTouched=!0,this.save()}),e&&(this._bindEventService.bind(this._input,["input","paste"],this.handleOnInputChange.bind(this)),this.inputType==="number"&&this._bindEventService.bind(this._input,"wheel",this.handleOnMouseWheel.bind(this),{passive:!0}))}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._input)==null?void 0:t.remove)==null||e.call(t)}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._input)if(t){this._input.setAttribute("disabled","disabled");const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==""&&this.reset("",!0,!0)}else this._input.removeAttribute("disabled")}focus(){var t;this.grid.focus(),(t=this._input)==null||t.focus()}getDecimalPlaces(){var e,i,s;let t=((e=this.columnEditor)==null?void 0:e.decimal)??((s=(i=this.columnEditor)==null?void 0:i.params)==null?void 0:s.decimalPlaces)??void 0;return t===void 0&&(t=ft),!t&&t!==0?0:t}getInputDecimalSteps(){const t=this.getDecimalPlaces();let e="";for(let i=1;i<t;i++)e+="0";return t>0?`0.${e}1`:"1"}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t;return((t=this._input)==null?void 0:t.value)||""}setValue(t,e=!1,i=!0){if(this._input&&(this._input.value=`${t}`,e)){this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(null,s,"system")}}applyValue(t,e){var s,l;const i=(s=this.columnDef)==null?void 0:s.field;if(i!==void 0){const n=(i==null?void 0:i.indexOf("."))>0,o=this.validate(null,e),a=o!=null&&o.valid?e:"";if(n){const r=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??i??"";x(t,r,a)}else i&&(t[i]=a)}}isValueChanged(){var i,s,l;const t=(i=this._input)==null?void 0:i.value,e=(s=this._lastInputKeyEvent)==null?void 0:s.key;return(l=this.columnEditor)!=null&&l.alwaysSaveOnEnterKey&&e==="Enter"?!0:!(t===""&&(this._originalValue===null||this._originalValue===void 0))&&t!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&e!==void 0&&this._input){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t.hasOwnProperty(e)&&t[e]||"";this._originalValue=l,this._input.value=this._originalValue,this._input.select()}}reset(t,e=!0,i=!1){const s=t??this._originalValue??"";this._input&&(this._originalValue=s,this._input.value=`${s}`),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(null,l,"user",n)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var t;return((t=this._input)==null?void 0:t.value)??""}validate(t,e){var s;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:this._input&&this._input.value;return k(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:(s=this.args)!=null&&s.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var d,m,c;const l=this.grid.getActiveCell(),n=this.args.column,o=((d=this.columnDef)==null?void 0:d.id)??"",a=this.dataContext,r=this.grid,u=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,u),this.applyValue(e.formValues,u);const h=((c=(m=this.gridOptions)==null?void 0:m.compositeEditorOptions)==null?void 0:c.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&h&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],r.onCompositeEditorChange.notify({...l,item:a,grid:r,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}handleOnInputChange(t){var i;this._isValueTouched=!0;const e=this.args.compositeEditorOptions;if(e){const s=((i=this.gridOptions)==null?void 0:i.editorTypingDebounce)??500;window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.handleChangeOnCompositeEditor(t,e),s)}}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class gt extends R{constructor(t){super(t,"number"),this.args=t}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(e!==void 0&&t&&e!==void 0&&this._input){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e];this._originalValue=l;const n=this.getDecimalPlaces();n!==null&&(this._originalValue||this._originalValue===0)&&this._originalValue!==void 0&&(this._originalValue=(+this._originalValue).toFixed(n)),this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var s;const t=(s=this._input)==null?void 0:s.value;if(t===void 0||t===""||isNaN(+t))return t;let e=parseFloat(t);const i=this.getDecimalPlaces();return i!==null&&(e||e===0)&&e.toFixed&&(e=parseFloat(e.toFixed(i))),e}validate(t,e){var s,l;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:(s=this._input)==null?void 0:s.value;return q(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,decimal:this.getDecimalPlaces(),minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:(l=this.args)!=null&&l.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}}class Et extends R{constructor(t){super(t,"number"),this.args=t}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&e!==void 0&&this._input){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e];this._originalValue=isNaN(l)||l===null||l===void 0?l:`${l}`,this._input.value=`${this._originalValue}`,this._input.select()}}serializeValue(){var i;const t=(i=this._input)==null?void 0:i.value;if(t===void 0||t===""||isNaN(+t))return t;const e=isNaN(+t)?t:parseInt(t,10);return isNaN(+e)?t:e}validate(t,e){var s;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:this.getValue();return G(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,operatorConditionalType:this.columnEditor.operatorConditionalType,required:(s=this.args)!=null&&s.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}handleOnMouseWheel(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e&&this.handleChangeOnCompositeEditor(t,e)}}class _t{constructor(t){var i,s;if(this.args=t,this._isValueTouched=!1,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=(i=t.grid)==null?void 0:i.getOptions();const e=this.gridOptions||this.args.column.params||{};e!=null&&e.translater&&(this._translater=e.translater),this._locales=((s=this.gridOptions)==null?void 0:s.locales)||g.locales,this._bindEventService=new A,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)??{}}get dataContext(){return this.args.item}get editorDomElement(){return this._textareaElm}get editorOptions(){var t,e;return{...(t=this.gridOptions.defaultEditorOptions)==null?void 0:t.longText,...(e=this.columnEditor)==null?void 0:e.editorOptions}}get hasAutoCommitEdit(){var t;return((t=this.gridOptions)==null?void 0:t.autoCommitEdit)??!1}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var u,h,d,m,c,v,E,V,y,p,b,C,S,B,$;let t="",e="";if(this._translater&&this._translater.translate&&this.gridOptions.enableTranslate){const D=K(this.gridOptions),w=((u=this.editorOptions.buttonTexts)==null?void 0:u.cancelKey)??`${D}CANCEL`,W=((h=this.editorOptions.buttonTexts)==null?void 0:h.saveKey)??`${D}SAVE`;t=this._translater.translate(`${D}${w}`),e=this._translater.translate(`${D}${W}`)}else t=((d=this.editorOptions.buttonTexts)==null?void 0:d.cancel)??((m=this._locales)==null?void 0:m.TEXT_CANCEL)??"Cancel",e=((c=this.editorOptions.buttonTexts)==null?void 0:c.save)??((v=this._locales)==null?void 0:v.TEXT_SAVE)??"Save";const i=this.args.compositeEditorOptions,s=((E=this.columnDef)==null?void 0:E.id)??"",l=(V=this.columnEditor)==null?void 0:V.maxLength,n=((y=this.editorOptions)==null?void 0:y.rows)??4,o=i?this.args.container:document.body;this._wrapperElm=_("div",{className:`slick-large-editor-text editor-${s}`,style:{position:i?"relative":"absolute"}}),(p=this.gridOptions)!=null&&p.darkMode&&this._wrapperElm.classList.add("slick-dark-mode"),o.appendChild(this._wrapperElm),this._textareaElm=_("textarea",{ariaLabel:((b=this.columnEditor)==null?void 0:b.ariaLabel)??`${N(s+"")} Text Editor`,cols:((C=this.editorOptions)==null?void 0:C.cols)??40,rows:i&&n>3?3:n,placeholder:((S=this.columnEditor)==null?void 0:S.placeholder)??"",title:((B=this.columnEditor)==null?void 0:B.title)??""},this._wrapperElm);const a=_("div",{className:"editor-footer"}),r=_("span",{className:"counter"});if(this._currentLengthElm=_("span",{className:"text-length",textContent:"0"}),r.appendChild(this._currentLengthElm),l!==void 0&&(r.appendChild(_("span",{className:"separator",textContent:"/"})),r.appendChild(_("span",{className:"max-length",textContent:`${l}`}))),a.appendChild(r),!i){const D=_("button",{className:"btn btn-cancel btn-default btn-xs",textContent:t}),w=_("button",{className:"btn btn-save btn-primary btn-xs",textContent:e});this.editorOptions.saveButtonPosition==="left"?(a.appendChild(w),a.appendChild(D)):(a.appendChild(D),a.appendChild(w)),this._bindEventService.bind(D,"click",this.cancel.bind(this)),this._bindEventService.bind(w,"click",this.save.bind(this)),this.position(($=this.args)==null?void 0:$.position),this._textareaElm.focus(),this._textareaElm.select()}this._wrapperElm.appendChild(a),this._bindEventService.bind(this._textareaElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._textareaElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._textareaElm,"paste",this.handleOnInputChange.bind(this))}cancel(){var e;const t=this._defaultTextValue||"";this._textareaElm.value=t,this._currentLengthElm.textContent=`${t.length}`,(e=this.args)!=null&&e.cancelChanges&&this.args.cancelChanges()}hide(){this._wrapperElm.style.display="none"}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)?this.applyInputUsabilityState():this._wrapperElm.style.display="block"}destroy(){var t,e;this._bindEventService.unbindAll(),(e=(t=this._wrapperElm)==null?void 0:t.remove)==null||e.call(t)}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._textareaElm&&this._wrapperElm)if(t){this._textareaElm.disabled=!0,this._wrapperElm.classList.add("disabled");const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==""&&this.reset("",!0,!0)}else this._textareaElm.disabled=!1,this._wrapperElm.classList.remove("disabled")}focus(){this.grid.focus(),this._textareaElm&&(this._textareaElm.focus(),this._textareaElm.select())}getValue(){return this._textareaElm.value}setValue(t,e=!1,i=!0){if(this._textareaElm.value=t,this._currentLengthElm.textContent=`${t.length}`,e){this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(null,s,"system")}}applyValue(t,e){var s,l;const i=(s=this.columnDef)==null?void 0:s.field;if(i!==void 0){const n=(i==null?void 0:i.indexOf("."))>0,o=this.validate(void 0,e),a=o!=null&&o.valid?e:"";if(n){const r=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??i??"";x(t,r,a)}else t[i]=a}}isValueChanged(){const t=this._textareaElm.value;return!(t===""&&(this._defaultTextValue===null||this._defaultTextValue===void 0))&&t!==this._defaultTextValue}isValueTouched(){return this._isValueTouched}loadValue(t){var i;const e=(i=this.columnDef)==null?void 0:i.field;if(t&&e!==void 0){const l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t[e];this._defaultTextValue=l||"",this._textareaElm.value=this._defaultTextValue,this._currentLengthElm.textContent=this._defaultTextValue.length,this._textareaElm.defaultValue=this._defaultTextValue,this._textareaElm.select()}}position(t){var d,m;const e=lt(this.args.container),i=this.args.container.offsetHeight,s=this.args.container.offsetWidth,l=this._wrapperElm.getBoundingClientRect().height||this.args.position.height,n=this._wrapperElm.getBoundingClientRect().width||this.args.position.width,o=document.body.offsetHeight||window.innerHeight,a=document.body.offsetWidth||window.innerWidth;let r=this.args.container?e.top:t.top??0,u=this.args.container?e.left:t.left??0;const h=((d=this.editorOptions)==null?void 0:d.position)??"auto";if(h==="left"||h==="auto"&&u+n>a){const c=((m=this.editorOptions)==null?void 0:m.marginRight)??0;u-=n-s+c}(h==="top"||h==="auto"&&r+l>o)&&(r-=l-i),this._wrapperElm.style.top=`${r}px`,this._wrapperElm.style.left=`${u}px`}reset(t,e=!0,i=!1){const s=t??this._defaultTextValue??"";this._textareaElm&&(this._defaultTextValue=s,this._textareaElm.value=s,this._currentLengthElm.textContent=s.length),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(null,l,"user",n)}}save(){const t=this.validate(),e=(t==null?void 0:t.valid)??!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){return this._textareaElm.value}validate(t,e){var s,l;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:(s=this._textareaElm)==null?void 0:s.value;return k(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minLength:this.columnEditor.minLength,maxLength:this.columnEditor.maxLength,operatorConditionalType:this.columnEditor.operatorConditionalType,required:(l=this.args)!=null&&l.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleKeyDown(t){const e=t.key;this._isValueTouched=!0,this.args.compositeEditorOptions||(e==="Enter"&&t.ctrlKey||t.ctrlKey&&t.key.toUpperCase()==="S"?(t.preventDefault(),this.save()):e==="Escape"?(t.preventDefault(),this.cancel()):e==="Tab"&&t.shiftKey?(t.preventDefault(),this.args&&this.grid&&this.grid.navigatePrev()):e==="Tab"&&(t.preventDefault(),this.args&&this.grid&&this.grid.navigateNext()))}handleOnInputChange(t){var l,n;const e=this.args.compositeEditorOptions,i=(l=this.columnEditor)==null?void 0:l.maxLength;let s=!1;if(i&&(s=this.truncateText(this._textareaElm,i)),s)this._currentLengthElm.textContent=`${i}`;else{const o=t.type==="paste"?t.clipboardData.getData("text"):t.target.value;this._currentLengthElm.textContent=`${o.length}`}if(e){const o=((n=this.gridOptions)==null?void 0:n.editorTypingDebounce)??500;window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.handleChangeOnCompositeEditor(t,e),o)}}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var d,m,c;const l=this.grid.getActiveCell(),n=this.args.column,o=((d=this.columnDef)==null?void 0:d.id)??"",a=this.dataContext,r=this.grid,u=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,u),this.applyValue(e.formValues,u);const h=((c=(m=this.gridOptions)==null?void 0:m.compositeEditorOptions)==null?void 0:c.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&h&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],r.onCompositeEditorChange.notify({...l,item:a,grid:r,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}truncateText(t,e){const i=t.value+"";return i.length>e?(t.value=i.substring(0,e),!0):!1}}class X{constructor(t,e,i=-1){var o,a,r,u,h,d,m,c,v;if(this.args=t,this.isMultipleSelect=e,this.delayOpening=i,this._isValueTouched=!1,this._isDisposingOrCallingSave=!1,this.disabled=!1,this.enableTranslateLabel=!1,this.finalCollection=[],!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},(o=this.gridOptions)!=null&&o.translater&&(this._translaterService=this.gridOptions.translater),this._locales=this.gridOptions.locales||g.locales;const s=((a=this.columnDef)==null?void 0:a.id)??"";this.elementName=`editor-${s}`;const l=this.args.compositeEditorOptions,n={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,container:"body",darkMode:!!this.gridOptions.darkMode,filter:!1,maxHeight:275,minHeight:25,name:this.elementName,single:!0,singleRadio:!0,renderOptionLabelAsHtml:((r=this.columnEditor)==null?void 0:r.enableRenderHtml)??!1,sanitizer:E=>this.grid.sanitizeHtmlString(E),onClick:()=>this._isValueTouched=!0,onCheckAll:()=>this._isValueTouched=!0,onUncheckAll:()=>this._isValueTouched=!0,onClose:E=>{if(E==="key.escape"||E==="body.click"||!this.hasAutoCommitEdit&&!this.isValueChanged()){E==="key.escape"&&this.cancel();return}l?this.handleChangeOnCompositeEditor(l):(this._isDisposingOrCallingSave=!0,this.save(this.hasAutoCommitEdit))}};if(e)if(n.single=!1,n.singleRadio=!1,n.displayTitle=!0,n.showOkButton=!0,(u=this._translaterService)!=null&&u.getCurrentLanguage()){const E=K(this.gridOptions);n.countSelectedText=this._translaterService.translate(`${E}X_OF_Y_SELECTED`),n.allSelectedText=this._translaterService.translate(`${E}ALL_SELECTED`),n.selectAllText=this._translaterService.translate(`${E}SELECT_ALL`),n.okButtonText=this._translaterService.translate(`${E}OK`),n.noMatchesFoundText=this._translaterService.translate(`${E}NO_MATCHES_FOUND`)}else n.countSelectedText=(h=this._locales)==null?void 0:h.TEXT_X_OF_Y_SELECTED,n.allSelectedText=(d=this._locales)==null?void 0:d.TEXT_ALL_SELECTED,n.selectAllText=(m=this._locales)==null?void 0:m.TEXT_SELECT_ALL,n.okButtonText=(c=this._locales)==null?void 0:c.TEXT_OK,n.noMatchesFoundText=(v=this._locales)==null?void 0:v.TEXT_NO_MATCHES_FOUND;this.defaultOptions=n,this.init()}get collection(){var t;return((t=this.columnEditor)==null?void 0:t.collection)??[]}get collectionOptions(){var t;return(t=this.columnEditor)==null?void 0:t.collectionOptions}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)??{}}get dataContext(){return this.args.item}get editorOptions(){var t,e;return{...(t=this.gridOptions.defaultEditorOptions)==null?void 0:t.select,...(e=this.columnEditor)==null?void 0:e.editorOptions}}get isCompositeEditor(){var t;return!!((t=this.args)!=null&&t.compositeEditorOptions)}get customStructure(){var t,e;return(e=(t=this.columnDef)==null?void 0:t.editor)==null?void 0:e.customStructure}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get currentValues(){var s,l,n;const t=new Set;if((((s=this._msInstance)==null?void 0:s.getSelects("value"))??[]).forEach(o=>t.add(o.toString())),this.collection.every(o=>typeof o=="number"||typeof o=="string"))return this.collection.filter(o=>t.has(o==null?void 0:o.toString()));const e=((l=this.collectionOptions)==null?void 0:l.separatorBetweenTextLabels)??"",i=((n=this.collectionOptions)==null?void 0:n.includePrefixSuffixToSelectedValues)??!1;return this.collection.filter(o=>{var a;return t.has((a=o==null?void 0:o[this.valueName])==null?void 0:a.toString())}).map(o=>{var c,v;const a=o[this.valueName];let r=o[this.labelPrefixName]||"",u=o[this.labelSuffixName]||"";const h=((c=this.columnDef)==null?void 0:c.field)??"",d=(h==null?void 0:h.indexOf("."))>0,m=((v=this.columnEditor)==null?void 0:v.serializeComplexValueFormat)??"object";return d&&typeof o=="object"&&m==="object"?o:(r=this.enableTranslateLabel&&this._translaterService&&r&&typeof r=="string"?this._translaterService.translate(r||" "):r,u=this.enableTranslateLabel&&this._translaterService&&u&&typeof u=="string"?this._translaterService.translate(u||" "):u,i?[r,a,u].filter(V=>V).join(e):a)})}get currentValue(){var s,l,n,o,a;const t=((s=this._msInstance)==null?void 0:s.getSelects())??[],e=t.length?t[0]:"",i=(l=this.columnDef)==null?void 0:l.field;if(i!==void 0){if(this.collection.every(c=>typeof c=="number"||typeof c=="string"))return F(this.collection,c=>{var v;return((v=c==null?void 0:c.toString)==null?void 0:v.call(c))===`${e}`});const r=((n=this.collectionOptions)==null?void 0:n.separatorBetweenTextLabels)??"",u=((o=this.collectionOptions)==null?void 0:o.includePrefixSuffixToSelectedValues)??!1,h=F(this.collection,c=>{var v;return c.hasOwnProperty(this.valueName)&&((v=c[this.valueName])==null?void 0:v.toString())===`${e}`}),d=(i==null?void 0:i.indexOf("."))>0,m=((a=this.columnEditor)==null?void 0:a.serializeComplexValueFormat)??"object";if(d&&typeof h=="object"&&m==="object")return h;if(h&&h.hasOwnProperty(this.valueName)){const c=h[this.valueName];if(u){let v=h[this.labelPrefixName]||"",E=h[this.labelSuffixName]||"";return v=this.enableTranslateLabel&&this._translaterService&&v&&typeof v=="string"?this._translaterService.translate(v||" "):v,E=this.enableTranslateLabel&&this._translaterService&&E&&typeof E=="string"?this._translaterService.translate(E||" "):E,[v,c,E].filter(y=>y).join(r)}return c}}return""}get validator(){var t,e;return((t=this.columnEditor)==null?void 0:t.validator)??((e=this.columnDef)==null?void 0:e.validator)}init(){var t,e,i,s,l,n,o;if(!this.columnDef||!this.columnDef.editor||!this.columnDef.editor.collection&&!this.columnDef.editor.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") inside Column Definition Editor for the MultipleSelect/SingleSelect Editor to work correctly.
      Also each option should include a value/label pair (or value/labelKey when using Locale).
      For example: { editor: { collection: [{ value: true, label: 'True' },{ value: false, label: 'False'}] } }`);if(this._collectionService=new nt(this._translaterService),this.enableTranslateLabel=((t=this.columnEditor)==null?void 0:t.enableTranslateLabel)??!1,this.labelName=((e=this.customStructure)==null?void 0:e.label)??"label",this.labelPrefixName=((i=this.customStructure)==null?void 0:i.labelPrefix)??"labelPrefix",this.labelSuffixName=((s=this.customStructure)==null?void 0:s.labelSuffix)??"labelSuffix",this.optionLabel=((l=this.customStructure)==null?void 0:l.optionLabel)??"value",this.valueName=((n=this.customStructure)==null?void 0:n.value)??"value",this.enableTranslateLabel&&(!this._translaterService||typeof this._translaterService.translate!="function"))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.renderDomElement(this.collection),(this.disabled||(o=this.columnEditor)!=null&&o.collectionAsync&&Array.isArray(this.collection)&&this.collection.length===0)&&this.disable(!0)}getValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}setValue(t,e=!1,i=!0){if(this.isMultipleSelect&&Array.isArray(t)?this.loadMultipleValues(t):this.loadSingleValue(t),e){this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(s,"system")}}cancel(){var t;(t=this.args)!=null&&t.cancelChanges&&this.args.cancelChanges()}hide(){this._msInstance&&this._msInstance.close()}show(t){!this.isCompositeEditor&&this._msInstance?this._msInstance.open(t):this.isCompositeEditor&&this.applyInputUsabilityState()}applyValue(t,e){var n,o,a;const i=(n=this.columnDef)==null?void 0:n.field,s=(o=this.columnDef)==null?void 0:o.type;let l=e;if(i!==void 0){(s===O.number||s===O.integer||s===O.boolean)&&!isNaN(parseFloat(e))&&(l=parseFloat(e)),this.isMultipleSelect&&typeof e=="string"&&e.indexOf(",")>=0&&(l=e.split(","));const r=(i==null?void 0:i.indexOf("."))>0,u=this.validate(null,l);if(l=u!=null&&u.valid?l:"",r){const h=((a=this.columnEditor)==null?void 0:a.complexObjectPath)??i??"";x(t,h,l)}else t[i]=l}}destroy(){var t,e;this._msInstance&&this.hasAutoCommitEdit&&this.isValueChanged()&&!this._isDisposingOrCallingSave&&!this.isCompositeEditor&&(this._isDisposingOrCallingSave=!0,this.save(!0)),this._isDisposingOrCallingSave=!0,typeof((t=this._msInstance)==null?void 0:t.destroy)=="function"&&this._msInstance.destroy(),(e=this.editorElm)==null||e.remove(),this._msInstance=void 0}loadValue(t){var s,l;const e=(s=this.columnDef)==null?void 0:s.field,i=e!==void 0&&(e==null?void 0:e.indexOf("."))>0;if(t&&e!==void 0){const n=((l=this.columnEditor)==null?void 0:l.complexObjectPath)??e,o=i?I(t,n):t.hasOwnProperty(e)&&t[e],a=i&&(o!=null&&o.hasOwnProperty(this.valueName))?o[this.valueName]:o;this.isMultipleSelect&&Array.isArray(a)?this.loadMultipleValues(a):this.loadSingleValue(a)}}loadMultipleValues(t){var e;if(Array.isArray(t)){this.originalValue=t.map(s=>typeof s=="number"||typeof s=="boolean"?`${s}`:s),(e=this._msInstance)==null||e.setSelects(this.originalValue);const i=this.args.compositeEditorOptions;i&&this.handleChangeOnCompositeEditor(i)}}loadSingleValue(t){var e;this.originalValue=typeof t=="number"||typeof t=="boolean"?`${t}`:t,(e=this._msInstance)==null||e.setSelects([this.originalValue])}serializeValue(){return this.isMultipleSelect?this.currentValues:this.currentValue}changeEditorOption(t,e){var i;this.columnEditor&&(this.columnEditor.editorOptions||(this.columnEditor.editorOptions={}),this.columnEditor.editorOptions[t]=e,this.editorElmOptions={...this.editorElmOptions,[t]:e},(i=this._msInstance)==null||i.refreshOptions(this.editorElmOptions))}disable(t=!0){const e=this.disabled;if(this.disabled=t,this._msInstance)if(t){this._msInstance.disable();const i=this.getValue(),s=Array.isArray(i)&&this.isMultipleSelect?(i==null?void 0:i[0])==="":i==="";e!==t&&this.isCompositeEditor&&!s&&this.reset("",!0,!0)}else this._msInstance.enable()}focus(){var t;this.grid.focus(),(t=this._msInstance)==null||t.focus()}isValueChanged(){var i;const t=(i=this._msInstance)==null?void 0:i.getSelects();if(this.isMultipleSelect)return!ot(t,this.originalValue);const e=Array.isArray(t)&&t.length>0?t[0]:void 0;return e!==void 0&&e!==this.originalValue}isValueTouched(){return this._isValueTouched}reset(t,e=!0,i=!1){const s=t??this.originalValue;if(this._msInstance){this.originalValue=this.isMultipleSelect?s!==void 0?[s]:[]:s;const n=this.originalValue===void 0?[]:[this.originalValue];this._msInstance.setSelects(n)}this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(l,"user",n)}}save(t=!1){const e=this.validate(),i=(e==null?void 0:e.valid)??!1;(!this._isDisposingOrCallingSave||t)&&this.hasAutoCommitEdit&&i?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}validate(t,e){var n,o;const i=this.isCompositeEditor?!1:(n=this.columnEditor)==null?void 0:n.required,s=e!==void 0?e:(o=this._msInstance)==null?void 0:o.getSelects(),l=this.columnEditor&&this.columnEditor.errorMessage;if(this.isCompositeEditor&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};if(this.validator){const a=e!==void 0?e:this.isMultipleSelect?this.currentValues:this.currentValue;return this.validator(a,this.args)}return i&&(s===""||Array.isArray(s)&&s.length===0)?{valid:!1,msg:l||g.VALIDATION_REQUIRED_FIELD}:{valid:!0,msg:null}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}filterCollection(t){var i;let e=t;if(this.columnEditor&&this.columnEditor.collectionFilterBy){const s=this.columnEditor.collectionFilterBy,l=((i=this.columnEditor.collectionOptions)==null?void 0:i.filterResultAfterEachPass)??null;e=this._collectionService.filterCollection(e,s,l)}return e}sortCollection(t){let e=t;if(this.columnDef&&this.columnEditor&&this.columnEditor.collectionSortBy){const i=this.columnEditor.collectionSortBy;e=this._collectionService.sortCollection(this.columnDef,e,i,this.enableTranslateLabel)}return e}renderDomElement(t){var l,n,o,a,r;if(!Array.isArray(t)&&((l=this.collectionOptions)!=null&&l.collectionInsideObjectProperty)){const u=this.collectionOptions.collectionInsideObjectProperty;t=I(t,u)}if(!Array.isArray(t))throw new Error('The "collection" passed to the Select Editor is not a valid array.');let e=[];if(t.length>0&&(e=[...t]),(n=this.collectionOptions)!=null&&n.addBlankEntry&&Array.isArray(e)&&e.length>0&&e[0][this.valueName]!==""&&(e.unshift(this.createBlankEntry()),this.collection.unshift(this.createBlankEntry())),(o=this.collectionOptions)!=null&&o.addCustomFirstEntry&&Array.isArray(e)&&e.length>0&&e[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&(e.unshift(this.collectionOptions.addCustomFirstEntry),this.collection.unshift(this.collectionOptions.addCustomFirstEntry)),(a=this.collectionOptions)!=null&&a.addCustomLastEntry&&Array.isArray(e)&&e.length>0){const u=e.length-1;e[u][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&e.push(this.collectionOptions.addCustomLastEntry)}let i=e;if(i=this.filterCollection(i),i=this.sortCollection(i),(r=this.columnEditor)!=null&&r.collectionOverride){const u={column:this.columnDef,dataContext:this.dataContext,grid:this.grid,originalCollections:this.collection};if(this.args.compositeEditorOptions){const{formValues:h,modalType:d}=this.args.compositeEditorOptions;u.compositeEditorOptions={formValues:h,modalType:d}}i=this.columnEditor.collectionOverride(i,u)}this.finalCollection=i;const s=at("editor",i,this.columnDef,this.grid,this.isMultipleSelect,this._translaterService);this.createDomElement(s.selectElement,s.dataCollection)}createBlankEntry(){const t={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(t[this.labelPrefixName]=""),this.labelSuffixName&&(t[this.labelSuffixName]=""),t}createDomElement(t,e){var l;const i=this.args.container;t&&i&&typeof i.appendChild=="function"&&(M(i),i.appendChild(t));const s=((l=this.columnEditor)==null?void 0:l.placeholder)??"";this.defaultOptions.placeholder=s||"",this.editorElmOptions={...this.defaultOptions,...this.editorOptions,data:e},this._msInstance=rt(t,this.editorElmOptions),this.editorElm=this._msInstance.getParentElement(),this.isCompositeEditor||this.show(this.delayOpening)}handleChangeOnCompositeEditor(t,e="user",i=!1){var h,d,m;const s=this.grid.getActiveCell(),l=this.args.column,n=((h=this.columnDef)==null?void 0:h.id)??"",o=this.dataContext,a=this.grid,r=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,r),this.applyValue(t.formValues,r);const u=((m=(d=this.gridOptions)==null?void 0:d.compositeEditorOptions)==null?void 0:m.excludeDisabledFieldFormValues)??!1;(i||this.disabled&&u&&t.formValues.hasOwnProperty(n))&&delete t.formValues[n],a.onCompositeEditorChange.notify({...s,item:o,grid:a,column:l,formValues:t.formValues,editors:t.editors,triggeredBy:e},new T)}}class vt extends X{constructor(t,e=0){super(t,!0,e),this.args=t,this.delayOpening=e}}class bt extends X{constructor(t,e=0){super(t,!1,e),this.args=t,this.delayOpening=e}}class Ct{constructor(t){if(this.args=t,this._defaultValue=0,this._isValueTouched=!1,this._sliderNumberElm=null,this.disabled=!1,!t)throw new Error("[Slickgrid-Universal] Something is wrong with this grid, an Editor must always have valid arguments.");this.grid=t.grid,this.gridOptions=this.grid.getOptions()||{},this._bindEventService=new A,this.init()}get columnDef(){return this.args.column}get columnEditor(){var t;return((t=this.columnDef)==null?void 0:t.editor)??{}}get dataContext(){return this.args.item}get editorDomElement(){return this._editorElm}get editorInputDomElement(){return this._inputElm}get editorOptions(){var t,e;return{...(t=this.gridOptions.defaultEditorOptions)==null?void 0:t.slider,...(e=this.columnEditor)==null?void 0:e.editorOptions}}get hasAutoCommitEdit(){return this.gridOptions.autoCommitEdit??!1}get sliderOptions(){return this._sliderOptions}get validator(){var t;return this.columnEditor.validator??((t=this.columnDef)==null?void 0:t.validator)}init(){var t;if(this._cellContainerElm=(t=this.args)==null?void 0:t.container,this._cellContainerElm&&this.columnDef){const e=this.args.compositeEditorOptions;this._editorElm=this.buildDomElement(),e||this.focus(),this._cellContainerElm.appendChild(this._editorElm),this._bindEventService.bind(this._sliderTrackElm,["click","mouseup"],this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._inputElm,["change","mouseup","touchend"],this.handleChangeEvent.bind(this)),this._bindEventService.bind(this._inputElm,["input","change"],this.handleChangeSliderNumber.bind(this))}}cancel(){this._inputElm&&(this._inputElm.value=`${this._originalValue}`),this.args.cancelChanges()}destroy(){var t,e,i;this._bindEventService.unbindAll(),(t=this._inputElm)==null||t.remove(),(e=this._editorElm)==null||e.remove(),(i=this._sliderTrackElm)==null||i.remove()}disable(t=!0){var i;const e=this.disabled;if(this.disabled=t,this._inputElm)if(t){this._inputElm.disabled=!0;const s=this.getValue();e!==t&&((i=this.args)!=null&&i.compositeEditorOptions)&&s!==""&&this.reset(0,!0,!0)}else this._inputElm.disabled=!1}focus(){var t;this.grid.focus(),(t=this._inputElm)==null||t.focus()}show(){var e;!!((e=this.args)!=null&&e.compositeEditorOptions)&&this.applyInputUsabilityState()}getValue(){var t;return((t=this._inputElm)==null?void 0:t.value)??""}setValue(t,e=!1,i=!0){if(this._inputElm&&(this._inputElm.value=`${t}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${t}`),e){this.applyValue(this.args.item,this.serializeValue());const s=this.args.compositeEditorOptions;s&&i&&this.handleChangeOnCompositeEditor(null,s,"system")}}applyValue(t,e){var s;const i=((s=this.columnDef)==null?void 0:s.field)??"";if(i!==void 0){const l=(i==null?void 0:i.indexOf("."))>0,n=this.validate(void 0,e),o=n&&n.valid?e:"";if(l){const a=this.columnEditor.complexObjectPath??i??"";x(t,a,o)}else t&&(t[i]=o)}}changeEditorOption(t,e){var i;if(this.columnEditor)switch((i=this.columnEditor).editorOptions??(i.editorOptions={}),this.columnEditor.editorOptions[t]=e,this._sliderOptions[t]=e,t){case"hideSliderNumber":this.renderSliderNumber(this._editorElm,0);break;case"sliderStartValue":this._inputElm.value=`${e}`,this._inputElm.defaultValue=`${e}`;break;case"maxValue":case"minValue":case"step":this._inputElm[t.replace("Value","")]=`${e}`;break}}isValueChanged(){var e;const t=((e=this._inputElm)==null?void 0:e.value)??"";return!(t===""&&this._originalValue===void 0)&&+t!==this._originalValue}isValueTouched(){return this._isValueTouched}loadValue(t){var i;const e=((i=this.columnDef)==null?void 0:i.field)??"";if(t&&e!==void 0){let l=(e==null?void 0:e.indexOf("."))>0?I(t,e):t.hasOwnProperty(e)?t[e]:this._defaultValue;(l===""||l===null||l===void 0)&&(l=this._defaultValue),this._originalValue=+l,this._inputElm&&(this._inputElm.value=`${l}`,this._inputElm.title=`${l}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${l}`)}this.updateTrackFilledColorWhenEnabled()}reset(t,e=!0,i=!1){const s=t??this._originalValue??0;this._inputElm&&(this._inputElm.value=`${s}`),this._sliderNumberElm&&(this._sliderNumberElm.textContent=`${s}`),this._isValueTouched=!1;const l=this.args.compositeEditorOptions;if(l&&e){const n=!i;this.handleChangeOnCompositeEditor(null,l,"user",n)}}save(){const t=this.validate(),e=t&&t.valid||!1;this.hasAutoCommitEdit&&e?this.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges()}serializeValue(){var e;const t=((e=this._inputElm)==null?void 0:e.value)??"";return t!==""?parseInt(t,10):this._originalValue}validate(t,e){var s,l;if(this.args.compositeEditorOptions&&this.applyInputUsabilityState(),this.disabled)return{valid:!0,msg:""};const i=e!==void 0?e:(s=this._inputElm)==null?void 0:s.value;return pt(i,{editorArgs:this.args,errorMessage:this.columnEditor.errorMessage,minValue:this.columnEditor.minValue,maxValue:this.columnEditor.maxValue,required:(l=this.args)!=null&&l.compositeEditorOptions?!1:this.columnEditor.required,validator:this.validator})}buildDomElement(){var r;const t=((r=this.columnDef)==null?void 0:r.id)??"",e=this.columnEditor.title??"",i=+(this.columnEditor.minValue??g.SLIDER_DEFAULT_MIN_VALUE),s=+(this.columnEditor.maxValue??g.SLIDER_DEFAULT_MAX_VALUE),l=+(this.columnEditor.valueStep??g.SLIDER_DEFAULT_STEP),n=this.editorOptions.sliderStartValue??i;this._defaultValue=+n,this._sliderTrackElm=_("div",{className:"slider-track"}),this._inputElm=_("input",{type:"range",title:e,defaultValue:`${n}`,value:`${n}`,min:`${i}`,max:`${s}`,step:`${this.columnEditor.valueStep??g.SLIDER_DEFAULT_STEP}`,ariaLabel:this.columnEditor.ariaLabel??`${N(t+"")} Slider Editor`,className:`slider-editor-input editor-${t}`});const o=_("div",{className:"slider-container slider-editor"}),a=_("div",{className:"slider-input-container slider-editor"});return a.appendChild(this._sliderTrackElm),a.appendChild(this._inputElm),o.appendChild(a),this.renderSliderNumber(o,n),this._sliderOptions={minValue:i,maxValue:s,step:l},o}renderSliderNumber(t,e){var i;if(this.editorOptions.hideSliderNumber)(i=t.querySelector(".slider-value"))==null||i.remove();else{t.classList.add("input-group");const s=_("div",{className:"input-group-addon input-group-append slider-value"});this._sliderNumberElm=_("span",{className:"input-group-text",textContent:`${e}`}),s.appendChild(this._sliderNumberElm),t.appendChild(s)}}applyInputUsabilityState(){const t=this.grid.getActiveCell(),e=this.grid.onBeforeEditCell.notify({...t,item:this.dataContext,column:this.args.column,grid:this.grid,target:"composite",compositeEditorOptions:this.args.compositeEditorOptions}).getReturnValue();this.disable(e===!1)}handleChangeEvent(t){this._isValueTouched=!0;const e=this.args.compositeEditorOptions;e?this.handleChangeOnCompositeEditor(t,e):this.save()}handleChangeSliderNumber(t){var i,s;const e=((i=t.target)==null?void 0:i.value)??"";e!==""&&(!this.editorOptions.hideSliderNumber&&this._sliderNumberElm&&(this._sliderNumberElm.textContent=e),this._inputElm.title=e,(s=this.args)!=null&&s.compositeEditorOptions||this.grid.onMouseEnter.notify({column:this.columnDef,grid:this.grid},new T(t))),this.updateTrackFilledColorWhenEnabled()}handleChangeOnCompositeEditor(t,e,i="user",s=!1){var d,m,c;const l=this.grid.getActiveCell(),n=this.args.column,o=((d=this.columnDef)==null?void 0:d.id)??"",a=this.dataContext,r=this.grid,u=this.serializeValue();this.validate().valid&&this.applyValue(this.dataContext,u),this.applyValue(e.formValues,u);const h=((c=(m=this.gridOptions)==null?void 0:m.compositeEditorOptions)==null?void 0:c.excludeDisabledFieldFormValues)??!1;(s||this.disabled&&h&&e.formValues.hasOwnProperty(o))&&delete e.formValues[o],r.onCompositeEditorChange.notify({...l,item:a,grid:r,column:n,formValues:e.formValues,editors:e.editors,triggeredBy:i},new T(t))}sliderTrackClicked(t){t.preventDefault();const e=t.offsetX,i=this._sliderTrackElm.offsetWidth,s=(e+0)*100/i;this._inputElm&&(this._inputElm.value=`${s}`,this._inputElm.dispatchEvent(new Event("change")))}updateTrackFilledColorWhenEnabled(){var t,e;if(this.editorOptions.enableSliderTrackColoring&&this._inputElm){const s=(+this.getValue()-+this._inputElm.min)/(((t=this.sliderOptions)==null?void 0:t.maxValue)??0-+this._inputElm.min)*100,l="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,((e=this.editorOptions)==null?void 0:e.sliderTrackFilledColor)??"var(--slick-slider-filter-thumb-color, #86bff8)").replace(/%p1/g,"0%").replace(/%p2/g,`${s}%`);this._sliderTrackElm.style.background=l,this._sliderOptions.sliderTrackBackground=l}}}const Vt={autocompleter:ht,checkbox:dt,date:ct,dualInput:mt,float:gt,integer:Et,longText:_t,multipleSelect:vt,singleSelect:bt,slider:Ct,text:R};export{Vt as E};
//# sourceMappingURL=editors.index-CmyHd4IA.js.map
