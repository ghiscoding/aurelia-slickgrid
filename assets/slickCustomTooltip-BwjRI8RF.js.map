{"version":3,"file":"slickCustomTooltip-BwjRI8RF.js","sources":["../../../../node_modules/.pnpm/@slickgrid-universal+custom-tooltip-plugin@5.14.0/node_modules/@slickgrid-universal/custom-tooltip-plugin/dist/esm/slickCustomTooltip.js"],"sourcesContent":["import { calculateAvailableSpace, CancelledException, cancellablePromise, createDomElement, findFirstAttribute, getOffset, SlickEventHandler, } from '@slickgrid-universal/common';\nimport { classNameToList, isPrimitiveOrHTML } from '@slickgrid-universal/utils';\nconst CLOSEST_TOOLTIP_FILLED_ATTR = ['title', 'data-slick-tooltip'];\nconst SELECTOR_CLOSEST_TOOLTIP_ATTR = '[title], [data-slick-tooltip]';\n/**\n * A plugin to add Custom Tooltip when hovering a cell, it subscribes to the cell \"onMouseEnter\" and \"onMouseLeave\" events.\n * The \"customTooltip\" is defined in the Column Definition OR Grid Options (the first found will have priority over the second)\n * To specify a tooltip when hovering a cell, extend the column definition like so:\n *\n * Available plugin options (same options are available in both column definition and/or grid options)\n * Example 1  - via Column Definition\n *  this.columnDefinitions = [\n *    {\n *      id: \"action\", name: \"Action\", field: \"action\", formatter: fakeButtonFormatter,\n *      customTooltip: {\n *        formatter: tooltipTaskFormatter,\n *        usabilityOverride: (args) => !!(args.dataContext.id % 2) // show it only every second row\n *      }\n *    }\n *  ];\n *\n *  OR Example 2 - via Grid Options (for all columns), NOTE: the column definition tooltip options will win over the options defined in the grid options\n *  this.gridOptions = {\n *    enableCellNavigation: true,\n *    customTooltip: {\n *    },\n *  };\n */\n// add a default CSS class name that is used and required by SlickGrid Theme\nconst DEFAULT_CLASS_NAME = 'slick-custom-tooltip';\nexport class SlickCustomTooltip {\n    constructor() {\n        this.name = 'CustomTooltip';\n        this._cellType = 'slick-cell';\n        this._rxjs = null;\n        this._sharedService = null;\n        this._mousePosition = { x: 0, y: 0 };\n        this._hasMultipleTooltips = false;\n        this._defaultOptions = {\n            bodyClassName: 'tooltip-body',\n            className: '',\n            offsetArrow: 3, // same as `$slick-tooltip-arrow-side-margin` CSS/SASS variable\n            offsetLeft: 0,\n            offsetRight: 0,\n            offsetTopBottom: 4,\n            hideArrow: false,\n            regularTooltipWhiteSpace: 'pre-line',\n            whiteSpace: 'normal',\n        };\n        this._eventHandler = new SlickEventHandler();\n    }\n    get addonOptions() {\n        return this._addonOptions;\n    }\n    get cancellablePromise() {\n        return this._cancellablePromise;\n    }\n    get cellAddonOptions() {\n        return this._cellAddonOptions;\n    }\n    get bodyClassName() {\n        return this._cellAddonOptions?.bodyClassName ?? 'tooltip-body';\n    }\n    get className() {\n        // we'll always add our default class name for the CSS style to display as intended\n        // and then append any custom CSS class to default when provided\n        let className = DEFAULT_CLASS_NAME;\n        if (this._addonOptions?.className) {\n            className += ` ${this._addonOptions.className}`;\n        }\n        return className;\n    }\n    get dataView() {\n        return this._grid.getData() || {};\n    }\n    /** Getter for the Grid Options pulled through the Grid Object */\n    get gridOptions() {\n        return this._grid?.getOptions() || {};\n    }\n    /** Getter for the grid uid */\n    get gridUid() {\n        return this._grid?.getUID() || '';\n    }\n    get gridUidSelector() {\n        return this.gridUid ? `.${this.gridUid}` : '';\n    }\n    get tooltipElm() {\n        return this._tooltipElm;\n    }\n    addRxJsResource(rxjs) {\n        this._rxjs = rxjs;\n    }\n    init(grid, containerService) {\n        this._grid = grid;\n        this._rxjs = containerService.get('RxJsFacade');\n        this._sharedService = containerService.get('SharedService');\n        this._addonOptions = { ...this._defaultOptions, ...this._sharedService?.gridOptions?.customTooltip };\n        this._eventHandler\n            .subscribe(grid.onMouseEnter, this.handleOnMouseOver.bind(this))\n            .subscribe(grid.onHeaderMouseOver, (e, args) => this.handleOnHeaderMouseOverByType(e, args, 'slick-header-column'))\n            .subscribe(grid.onHeaderRowMouseEnter, (e, args) => this.handleOnHeaderMouseOverByType(e, args, 'slick-headerrow-column'))\n            .subscribe(grid.onHeaderRowMouseOver, (e, args) => this.handleOnHeaderMouseOverByType(e, args, 'slick-headerrow-column'))\n            .subscribe(grid.onMouseLeave, this.hideTooltip.bind(this))\n            .subscribe(grid.onHeaderMouseOut, this.hideTooltip.bind(this))\n            .subscribe(grid.onHeaderRowMouseLeave, this.hideTooltip.bind(this))\n            .subscribe(grid.onHeaderRowMouseOut, this.hideTooltip.bind(this));\n    }\n    dispose() {\n        // hide (remove) any tooltip and unsubscribe from all events\n        this.hideTooltip();\n        this._cancellablePromise = undefined;\n        this._eventHandler.unsubscribeAll();\n    }\n    /**\n     * hide (remove) tooltip from the DOM, it will also remove it from the DOM and also cancel any pending requests (as mentioned below).\n     * When using async process, it will also cancel any opened Promise/Observable that might still be pending.\n     */\n    hideTooltip() {\n        this._cancellablePromise?.cancel();\n        this._observable$?.unsubscribe();\n        const cssClasses = classNameToList(this.className).join('.');\n        const prevTooltip = document.body.querySelector(`.${cssClasses}${this.gridUidSelector}`);\n        prevTooltip?.remove();\n    }\n    getOptions() {\n        return this._addonOptions;\n    }\n    setOptions(newOptions) {\n        this._addonOptions = { ...this._addonOptions, ...newOptions };\n    }\n    // --\n    // protected functions\n    // ---------------------\n    /**\n     * Async process callback will hide any prior tooltip & then merge the new result with the item `dataContext` under a `__params` property\n     * (unless a new prop name is provided) to provice as dataContext object to the asyncPostFormatter.\n     */\n    asyncProcessCallback(asyncResult, cell, value, columnDef, dataContext) {\n        this.hideTooltip();\n        const itemWithAsyncData = { ...dataContext, [this.addonOptions?.asyncParamsPropName ?? '__params']: asyncResult };\n        if (this._cellAddonOptions?.useRegularTooltip) {\n            this.renderRegularTooltip(this._cellAddonOptions.asyncPostFormatter, cell, value, columnDef, itemWithAsyncData);\n        }\n        else {\n            this.renderTooltipFormatter(this._cellAddonOptions.asyncPostFormatter, cell, value, columnDef, itemWithAsyncData);\n        }\n    }\n    /** depending on the selector type, execute the necessary handler code */\n    handleOnHeaderMouseOverByType(event, args, selector) {\n        this._cellType = selector;\n        this._mousePosition = { x: event.clientX || 0, y: event.clientY || 0 };\n        this._mouseTarget = document.elementFromPoint(event.clientX || 0, event.clientY || 0)?.closest(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n        // before doing anything, let's remove any previous tooltip before\n        // and cancel any opened Promise/Observable when using async\n        this.hideTooltip();\n        const cell = {\n            row: -1, // negative row to avoid pulling any dataContext while rendering\n            cell: this._grid.getColumns().findIndex((col) => (args?.column?.id ?? '') === col.id),\n        };\n        const columnDef = args.column;\n        const item = {};\n        const isHeaderRowType = selector === 'slick-headerrow-column';\n        // run the override function (when defined), if the result is false it won't go further\n        args ||= {};\n        args.cell = cell.cell;\n        args.row = cell.row;\n        args.columnDef = columnDef;\n        args.dataContext = item;\n        args.grid = this._grid;\n        args.type = isHeaderRowType ? 'header-row' : 'header';\n        this._cellAddonOptions = { ...this._addonOptions, ...columnDef?.customTooltip };\n        if (columnDef?.disableTooltip ||\n            (typeof this._cellAddonOptions?.usabilityOverride === 'function' && !this._cellAddonOptions.usabilityOverride(args))) {\n            return;\n        }\n        if (columnDef && event.target) {\n            this._cellNodeElm = event.target.closest(`.${selector}`);\n            const formatter = isHeaderRowType ? this._cellAddonOptions.headerRowFormatter : this._cellAddonOptions.headerFormatter;\n            if (this._cellAddonOptions?.useRegularTooltip || !formatter) {\n                const formatterOrText = !isHeaderRowType ? columnDef.name : this._cellAddonOptions?.useRegularTooltip ? null : formatter;\n                this.renderRegularTooltip(formatterOrText, cell, null, columnDef, item);\n            }\n            else if (this._cellNodeElm && typeof formatter === 'function') {\n                this.renderTooltipFormatter(formatter, cell, null, columnDef, item);\n            }\n        }\n    }\n    async handleOnMouseOver(event) {\n        this._cellType = 'slick-cell';\n        this._mousePosition = { x: event.clientX || 0, y: event.clientY || 0 };\n        this._mouseTarget = document.elementFromPoint(event.clientX || 0, event.clientY || 0)?.closest(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n        // before doing anything, let's remove any previous tooltip before\n        // and cancel any opened Promise/Observable when using async\n        this.hideTooltip();\n        if (event && this._grid) {\n            // get cell only when it's possible (ie, Composite Editor will not be able to get cell and so it will never show any tooltip)\n            const targetClassName = event?.target?.closest('.slick-cell')?.className;\n            const cell = targetClassName && /l\\d+/.exec(targetClassName || '') ? this._grid.getCellFromEvent(event) : null;\n            if (cell) {\n                const item = this.dataView ? this.dataView.getItem(cell.row) : this._grid.getDataItem(cell.row);\n                const columnDef = this._grid.getColumns()[cell.cell];\n                this._cellNodeElm = this._grid.getCellNode(cell.row, cell.cell);\n                if (item && columnDef) {\n                    this._cellAddonOptions = { ...this._addonOptions, ...columnDef?.customTooltip };\n                    if (columnDef?.disableTooltip ||\n                        (typeof this._cellAddonOptions?.usabilityOverride === 'function' &&\n                            !this._cellAddonOptions.usabilityOverride({\n                                cell: cell.cell,\n                                row: cell.row,\n                                dataContext: item,\n                                column: columnDef,\n                                grid: this._grid,\n                                type: 'cell',\n                            }))) {\n                        return;\n                    }\n                    const value = item.hasOwnProperty(columnDef.field) ? item[columnDef.field] : null;\n                    // when cell is currently lock for editing, we'll force a tooltip title search\n                    const cellValue = this._grid.getEditorLock().isActive() ? null : value;\n                    // when there aren't any formatter OR when user specifically want to use a regular tooltip (via \"title\" attribute)\n                    if ((this._cellAddonOptions.useRegularTooltip && !this._cellAddonOptions?.asyncProcess) || !this._cellAddonOptions?.formatter) {\n                        this.renderRegularTooltip(columnDef.formatter, cell, cellValue, columnDef, item);\n                    }\n                    else {\n                        // when we aren't using regular tooltip and we do have a tooltip formatter, let's render it\n                        if (typeof this._cellAddonOptions?.formatter === 'function') {\n                            this.renderTooltipFormatter(this._cellAddonOptions.formatter, cell, cellValue, columnDef, item);\n                        }\n                        // when tooltip is an Async (delayed, e.g. with a backend API call)\n                        if (typeof this._cellAddonOptions?.asyncProcess === 'function') {\n                            const asyncProcess = this._cellAddonOptions.asyncProcess(cell.row, cell.cell, value, columnDef, item, this._grid);\n                            if (!this._cellAddonOptions.asyncPostFormatter) {\n                                console.error(`[Slickgrid-Universal] when using \"asyncProcess\" with Custom Tooltip, you must also provide an \"asyncPostFormatter\" formatter.`);\n                            }\n                            if (asyncProcess instanceof Promise) {\n                                // create a new cancellable promise which will resolve, unless it's cancelled, with the udpated `dataContext` object that includes the `__params`\n                                this._cancellablePromise = cancellablePromise(asyncProcess);\n                                this._cancellablePromise.promise\n                                    .then((asyncResult) => this.asyncProcessCallback(asyncResult, cell, value, columnDef, item))\n                                    .catch((error) => {\n                                    // we will throw back any errors, unless it's a cancelled promise which in that case will be disregarded (thrown by the promise wrapper cancel() call)\n                                    if (!(error instanceof CancelledException)) {\n                                        console.error(error);\n                                    }\n                                });\n                            }\n                            else if (this._rxjs?.isObservable(asyncProcess)) {\n                                const rxjs = this._rxjs;\n                                this._observable$ = asyncProcess\n                                    .pipe(\n                                // use `switchMap` so that it cancels any previous subscription, it must return an observable so we can use `of` for that, and then finally we can subscribe to the new observable\n                                rxjs.switchMap((asyncResult) => rxjs.of(asyncResult)))\n                                    .subscribe((asyncResult) => this.asyncProcessCallback(asyncResult, cell, value, columnDef, item), (error) => console.error(error));\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Parse the Custom Formatter (when provided) or return directly the text when it is already a string.\n     * We will also sanitize the text in both cases before returning it so that it can be used safely.\n     */\n    parseFormatterAndSanitize(formatterOrText, cell, value, columnDef, item) {\n        if (typeof formatterOrText === 'function') {\n            const tooltipResult = formatterOrText(cell.row, cell.cell, value, columnDef, item, this._grid);\n            // prettier-ignore\n            const formatterText = isPrimitiveOrHTML(tooltipResult) ? tooltipResult : tooltipResult.html || tooltipResult.text;\n            return this._grid.sanitizeHtmlString((formatterText instanceof HTMLElement ? formatterText.textContent : formatterText) || '');\n        }\n        else if (typeof formatterOrText === 'string') {\n            return this._grid.sanitizeHtmlString(formatterOrText);\n        }\n        return '';\n    }\n    /**\n     * Parse the cell formatter and assume it might be html\n     * then create a temporary html element to easily retrieve the first [title=\"\"] attribute text content\n     * also clear the \"title\" attribute from the grid div text content so that it won't show also as a 2nd browser tooltip\n     */\n    renderRegularTooltip(formatterOrText, cell, value, columnDef, item) {\n        const tmpDiv = document.createElement('div');\n        this._grid.applyHtmlCode(tmpDiv, this.parseFormatterAndSanitize(formatterOrText, cell, value, columnDef, item));\n        this._hasMultipleTooltips = (this._cellNodeElm?.querySelectorAll(SELECTOR_CLOSEST_TOOLTIP_ATTR).length || 0) > 1;\n        let tmpTitleElm;\n        const cellElm = this._cellAddonOptions?.useRegularTooltipFromCellTextOnly || !this._mouseTarget\n            ? this._cellNodeElm\n            : this._mouseTarget;\n        let tooltipText = columnDef?.toolTip ?? '';\n        if (!tooltipText) {\n            if (this._cellType === 'slick-cell' &&\n                cellElm &&\n                cellElm.clientWidth < cellElm.scrollWidth &&\n                !this._cellAddonOptions?.useRegularTooltipFromFormatterOnly) {\n                tooltipText = cellElm.textContent?.trim() ?? '';\n                if (this._cellAddonOptions?.tooltipTextMaxLength && tooltipText.length > this._cellAddonOptions?.tooltipTextMaxLength) {\n                    tooltipText = tooltipText.substring(0, this._cellAddonOptions.tooltipTextMaxLength - 3) + '...';\n                }\n                tmpTitleElm = cellElm;\n            }\n            else {\n                if (this._cellAddonOptions?.useRegularTooltipFromFormatterOnly) {\n                    tmpTitleElm = tmpDiv.querySelector(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n                }\n                else {\n                    tmpTitleElm = findFirstAttribute(cellElm, CLOSEST_TOOLTIP_FILLED_ATTR)\n                        ? cellElm\n                        : tmpDiv.querySelector(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n                    if ((!tmpTitleElm || !findFirstAttribute(tmpTitleElm, CLOSEST_TOOLTIP_FILLED_ATTR)) && cellElm) {\n                        tmpTitleElm = cellElm.querySelector(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n                    }\n                }\n                // prettier-ignore\n                if (tmpTitleElm?.style.display === 'none' || (this._hasMultipleTooltips && (!cellElm || cellElm === this._cellNodeElm))) {\n                    tooltipText = '';\n                }\n                else if (!tooltipText || (typeof formatterOrText === 'function' && this._cellAddonOptions?.useRegularTooltipFromFormatterOnly)) {\n                    tooltipText = findFirstAttribute(tmpTitleElm, CLOSEST_TOOLTIP_FILLED_ATTR) || '';\n                }\n            }\n        }\n        if (tooltipText !== '') {\n            this.renderTooltipFormatter(formatterOrText, cell, value, columnDef, item, tooltipText, tmpTitleElm);\n        }\n        // also clear any \"title\" attribute to avoid showing a 2nd browser tooltip\n        this.swapAndClearTitleAttribute(tmpTitleElm, tooltipText);\n    }\n    renderTooltipFormatter(formatter, cell, value, columnDef, item, tooltipText, inputTitleElm) {\n        // create the tooltip DOM element with the text returned by the Formatter\n        this._tooltipElm = createDomElement('div', { className: this.className });\n        this._tooltipBodyElm = createDomElement('div', { className: this.bodyClassName });\n        this._tooltipElm.classList.add(this.gridUid);\n        this._tooltipElm.classList.add('l' + cell.cell);\n        this._tooltipElm.classList.add('r' + cell.cell);\n        this.tooltipElm?.appendChild(this._tooltipBodyElm);\n        // when cell is currently lock for editing, we'll force a tooltip title search\n        // that can happen when user has a formatter but is currently editing and in that case we want the new value\n        // e.g.: when user is currently editing and uses the Slider, when dragging its value is changing, so we wish to use the editing value instead of the previous cell value.\n        if (value === null || value === undefined) {\n            const tmpTitleElm = this._cellNodeElm?.querySelector(SELECTOR_CLOSEST_TOOLTIP_ATTR);\n            value = findFirstAttribute(tmpTitleElm, CLOSEST_TOOLTIP_FILLED_ATTR) || value;\n        }\n        let outputText = tooltipText || this.parseFormatterAndSanitize(formatter, cell, value, columnDef, item) || '';\n        outputText =\n            this._cellAddonOptions?.tooltipTextMaxLength && outputText.length > this._cellAddonOptions.tooltipTextMaxLength\n                ? outputText.substring(0, this._cellAddonOptions.tooltipTextMaxLength - 3) + '...'\n                : outputText;\n        let finalOutputText = '';\n        if (!tooltipText || this._cellAddonOptions?.renderRegularTooltipAsHtml) {\n            finalOutputText = this._grid.sanitizeHtmlString(outputText);\n            this._grid.applyHtmlCode(this._tooltipBodyElm, finalOutputText);\n            this._tooltipBodyElm.style.whiteSpace = this._cellAddonOptions?.whiteSpace ?? this._defaultOptions.whiteSpace;\n        }\n        else {\n            finalOutputText = outputText || '';\n            this._tooltipBodyElm.textContent = finalOutputText;\n            this._tooltipBodyElm.style.whiteSpace =\n                this._cellAddonOptions?.regularTooltipWhiteSpace ?? this._defaultOptions.regularTooltipWhiteSpace; // use `pre` so that sequences of white space are collapsed. Lines are broken at newline characters\n        }\n        // optional max height/width of the tooltip container\n        if (this._cellAddonOptions?.maxHeight) {\n            this._tooltipElm.style.maxHeight = `${this._cellAddonOptions.maxHeight}px`;\n        }\n        if (this._cellAddonOptions?.maxWidth) {\n            this._tooltipElm.style.maxWidth = `${this._cellAddonOptions.maxWidth}px`;\n        }\n        // when do have text to show, then append the new tooltip to the html body & reposition the tooltip\n        if (finalOutputText.toString()) {\n            document.body.appendChild(this._tooltipElm);\n            // reposition the tooltip on top of the cell that triggered the mouse over event\n            this.reposition(cell);\n            // user could optionally hide the tooltip arrow (we can simply update the CSS variables, that's the only way we have to update CSS pseudo)\n            if (!this._cellAddonOptions?.hideArrow) {\n                this._tooltipElm.classList.add('tooltip-arrow');\n            }\n            // also clear any \"title\" attribute to avoid showing a 2nd browser tooltip\n            this.swapAndClearTitleAttribute(inputTitleElm, outputText);\n        }\n    }\n    /**\n     * Reposition the Tooltip to be top-left position over the cell.\n     * By default we use an \"auto\" mode which will allow to position the Tooltip to the best logical position in the window, also when we mention position, we are talking about the relative position against the grid cell.\n     * We can assume that in 80% of the time the default position is top-right, the default is \"auto\" but we can also override it and use a specific position.\n     * Most of the time positioning of the tooltip will be to the \"top-right\" of the cell is ok but if our column is completely on the right side then we'll want to change the position to \"left\" align.\n     * Same goes for the top/bottom position, Most of the time positioning the tooltip to the \"top\" but if we are hovering a cell at the top of the grid and there's no room to display it then we might need to reposition to \"bottom\" instead.\n     */\n    reposition(cell) {\n        if (this._tooltipElm) {\n            this._cellNodeElm = this._cellNodeElm || this._grid.getCellNode(cell.row, cell.cell);\n            const cellPosition = getOffset(this._cellNodeElm);\n            const cellContainerWidth = this._cellNodeElm.offsetWidth;\n            const calculatedTooltipHeight = this._tooltipElm.getBoundingClientRect().height;\n            const calculatedTooltipWidth = this._tooltipElm.getBoundingClientRect().width;\n            const calculatedBodyWidth = document.body.offsetWidth || window.innerWidth;\n            // first calculate the default (top/left) position\n            let newPositionTop = (cellPosition.top || 0) - this._tooltipElm.offsetHeight - (this._cellAddonOptions?.offsetTopBottom ?? 0);\n            let newPositionLeft = (cellPosition.left || 0) - (this._cellAddonOptions?.offsetRight ?? 0);\n            // user could explicitely use a \"left-align\" arrow position, (when user knows his column is completely on the right in the grid)\n            // or when using \"auto\" and we detect not enough available space then we'll position to the \"left\" of the cell\n            // NOTE the class name is for the arrow and is inverse compare to the tooltip itself, so if user ask for \"left-align\", then the arrow will in fact be \"arrow-right-align\"\n            const position = this._cellAddonOptions?.position ?? 'auto';\n            let finalTooltipPosition = '';\n            if (position === 'center') {\n                newPositionLeft += cellContainerWidth / 2 - calculatedTooltipWidth / 2 + (this._cellAddonOptions?.offsetRight ?? 0);\n                finalTooltipPosition = 'top-center';\n                this._tooltipElm.classList.remove('arrow-left-align', 'arrow-right-align');\n                this._tooltipElm.classList.add('arrow-center-align');\n            }\n            else if (position === 'right-align' ||\n                ((position === 'auto' || position !== 'left-align') && newPositionLeft + calculatedTooltipWidth > calculatedBodyWidth)) {\n                finalTooltipPosition = 'right';\n                newPositionLeft -= calculatedTooltipWidth - cellContainerWidth - (this._cellAddonOptions?.offsetLeft ?? 0);\n                this._tooltipElm.classList.remove('arrow-center-align', 'arrow-left-align');\n                this._tooltipElm.classList.add('arrow-right-align');\n            }\n            else {\n                finalTooltipPosition = 'left';\n                this._tooltipElm.classList.remove('arrow-center-align', 'arrow-right-align');\n                this._tooltipElm.classList.add('arrow-left-align');\n            }\n            // do the same calculation/reposition with top/bottom (default is top of the cell or in other word starting from the cell going down)\n            // NOTE the class name is for the arrow and is inverse compare to the tooltip itself, so if user ask for \"bottom\", then the arrow will in fact be \"arrow-top\"\n            if (position === 'bottom' ||\n                ((position === 'auto' || position !== 'top') && calculatedTooltipHeight > calculateAvailableSpace(this._cellNodeElm).top)) {\n                newPositionTop = (cellPosition.top || 0) + (this.gridOptions.rowHeight ?? 0) + (this._cellAddonOptions?.offsetTopBottom ?? 0);\n                finalTooltipPosition = `bottom-${finalTooltipPosition}`;\n                this._tooltipElm.classList.remove('arrow-down');\n                this._tooltipElm.classList.add('arrow-up');\n            }\n            else {\n                finalTooltipPosition = `top-${finalTooltipPosition}`;\n                this._tooltipElm.classList.remove('arrow-up');\n                this._tooltipElm.classList.add('arrow-down');\n            }\n            // when having multiple tooltips, we'll try to reposition tooltip to mouse position\n            if (this._tooltipElm && (this._hasMultipleTooltips || this.cellAddonOptions?.repositionByMouseOverTarget)) {\n                const mouseElmOffset = getOffset(this._mouseTarget);\n                if (finalTooltipPosition.includes('left') || finalTooltipPosition === 'top-center') {\n                    newPositionLeft = mouseElmOffset.left - (this._addonOptions?.offsetArrow ?? 3);\n                }\n                else if (finalTooltipPosition.includes('right')) {\n                    newPositionLeft =\n                        mouseElmOffset.left - calculatedTooltipWidth + (this._mouseTarget?.offsetWidth ?? 0) + (this._addonOptions?.offsetArrow ?? 3);\n                }\n            }\n            // reposition the tooltip over the cell (90% of the time this will end up using a position on the \"right\" of the cell)\n            this._tooltipElm.style.top = `${newPositionTop}px`;\n            this._tooltipElm.style.left = `${newPositionLeft}px`;\n        }\n    }\n    /**\n     * swap and copy the \"title\" attribute into a new custom attribute then clear the \"title\" attribute\n     * from the grid div text content so that it won't show also as a 2nd browser tooltip\n     */\n    swapAndClearTitleAttribute(inputTitleElm, tooltipText) {\n        // the title attribute might be directly on the slick-cell container element (when formatter returns a result object)\n        // OR in a child element (most commonly as a custom formatter)\n        let cellWithTitleElm;\n        if (inputTitleElm) {\n            cellWithTitleElm =\n                this._cellNodeElm &&\n                    (this._cellNodeElm.hasAttribute('title') && this._cellNodeElm.getAttribute('title')\n                        ? this._cellNodeElm\n                        : this._cellNodeElm?.querySelector('[title]'));\n        }\n        // prettier-ignore\n        const titleElm = inputTitleElm || (this._cellNodeElm && ((this._cellNodeElm.hasAttribute('title') && this._cellNodeElm.getAttribute('title')) ? this._cellNodeElm : this._cellNodeElm?.querySelector('[title]')));\n        // flip tooltip text from `title` to `data-slick-tooltip`\n        if (titleElm) {\n            titleElm.setAttribute('data-slick-tooltip', tooltipText || '');\n            if (titleElm.hasAttribute('title')) {\n                titleElm.setAttribute('title', '');\n            }\n            // targeted element might actually not be the cell element,\n            // so let's also clear the cell element title attribute to avoid showing native + custom tooltips\n            if (cellWithTitleElm?.hasAttribute('title')) {\n                cellWithTitleElm.setAttribute('title', '');\n            }\n        }\n    }\n}\n//# sourceMappingURL=slickCustomTooltip.js.map"],"names":["CLOSEST_TOOLTIP_FILLED_ATTR","SELECTOR_CLOSEST_TOOLTIP_ATTR","DEFAULT_CLASS_NAME","SlickCustomTooltip","SlickEventHandler","_a","className","rxjs","grid","containerService","_b","e","args","cssClasses","classNameToList","prevTooltip","newOptions","asyncResult","cell","value","columnDef","dataContext","itemWithAsyncData","event","selector","col","item","isHeaderRowType","formatter","_c","formatterOrText","_d","targetClassName","cellValue","_e","_f","_g","_h","asyncProcess","cancellablePromise","error","CancelledException","_i","tooltipResult","formatterText","isPrimitiveOrHTML","tmpDiv","tmpTitleElm","cellElm","tooltipText","findFirstAttribute","inputTitleElm","createDomElement","outputText","finalOutputText","cellPosition","getOffset","cellContainerWidth","calculatedTooltipHeight","calculatedTooltipWidth","calculatedBodyWidth","newPositionTop","newPositionLeft","position","finalTooltipPosition","calculateAvailableSpace","mouseElmOffset","_j","cellWithTitleElm","titleElm"],"mappings":"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","x_google_ignoreList":[0]}