import{C as M,a as m,F as c,b as h,O as R,c as A}from"./index-BEnHDSQL.js";import{S as L}from"./slickCustomTooltip-Cxz9r_Ud.js";import{E as P}from"./excelExport.service-hWlujhtm.js";import{E as u}from"./editors.index-mXwEHkpi.js";import"./groupingFormatters.index-pL073kVK.js";const C="example33",y=`<h2>
  \${title}
  <span class="float-end">
    <a style="font-size: 18px"
        target="_blank"
        href="https://github.com/ghiscoding/aurelia-slickgrid/blob/master/packages/demo/src/examples/slickgrid/example33.ts">
      <span class="mdi mdi-link-variant"></span> code
    </a>
  </span>
  <button
      class="ms-2 btn btn-outline-secondary btn-sm btn-icon"
      type="button"
      data-test="toggle-subtitle"
      click.trigger="toggleSubTitle()"
    >
      <span class="mdi mdi-information-outline" title="Toggle example sub-title details"></span>
    </button>
</h2>

<div class="subtitle" innerhtml.bind="subTitle"></div>

<div class="row">
  <div class="col" style="margin-bottom: 20px">
    <label for="pinned-rows">Simulated Server Delay (ms): </label>
    <input type="number" id="server-delay" data-test="server-delay" style="width: 60px" value.bind="serverApiDelay" />
  </div>
  <div class="alert alert-info is-narrow col" class.bind="{ invisible: !showLazyLoading }" data-test="alert-lazy">
    Lazy loading collection...
  </div>
</div>

<aurelia-slickgrid grid-id="grid33"
                    column-definitions.bind="columnDefinitions"
                    grid-options.bind="gridOptions"
                    dataset.bind="dataset"
                    instances.bind="aureliaGrid"
                    on-aurelia-grid-created.trigger="aureliaGridReady($event.detail)">
</aurelia-slickgrid>
`,F=[],S={};let b;function I(l){b||(b=M.define({name:C,template:y,dependencies:F,bindables:S})),l.register(b)}const z=Object.freeze(Object.defineProperty({__proto__:null,bindables:S,default:y,dependencies:F,name:C,register:I,template:y},Symbol.toStringTag,{value:"Module"}));var H=Object.create,g=Object.defineProperty,G=Object.getOwnPropertyDescriptor,W=(l,e)=>(e=Symbol[l])?e:Symbol.for("Symbol."+l),O=l=>{throw TypeError(l)},D=(l,e,i)=>e in l?g(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,q=(l,e)=>g(l,"name",{value:e,configurable:!0}),B=l=>[,,,H(null)],j=["class","method","getter","setter","accessor","field","value","get","set"],$=l=>l!==void 0&&typeof l!="function"?O("Function expected"):l,V=(l,e,i,t,o)=>({kind:j[l],name:e,metadata:t,addInitializer:r=>i._?O("Already initialized"):o.push($(r||null))}),K=(l,e)=>D(e,W("metadata"),l[3]),N=(l,e,i,t)=>{for(var o=0,r=l[e>>1],s=r&&r.length;o<s;o++)r[o].call(i);return t},Y=(l,e,i,t,o,r)=>{var s,n,d,p=e&7,T=!1,x=0,E=l[x]||(l[x]=[]),v=p&&(o=o.prototype,p<5&&(p>3||!T)&&G(o,i));q(o,i);for(var f=t.length-1;f>=0;f--)d=V(p,i,n={},l[3],E),s=(0,t[f])(o,d),n._=1,$(s)&&(o=s);return K(l,o),v&&g(o,i,v),T?p^4?r:v:o},a=(l,e,i)=>D(l,typeof e!="symbol"?e+"":e,i),k,_;const Q=1e3;k=[A(z)];class w{constructor(){a(this,"title","Example 33: Regular & Custom Tooltips"),a(this,"subTitle",`
  This demo shows how to create Regular & Custom Tooltips (<a href="https://ghiscoding.gitbook.io/aurelia-slickgrid/grid-functionalities/custom-tooltip" target="_blank">Wiki docs</a>)
  <br/>
  <ul class="small">
    <li>optionally parse regular [title] attributes and transform them into tooltips</li>
    <li>create your own Custom Tooltip via a Custom Formatter</li>
    <li>create an Async Custom Tooltip (Promise/Observable) to allowing fetching data from an API</li>
    <li>optionally add Custom Tooltip on Column Header & Column Header-Row (filters)</li>
  </ul>`),a(this,"aureliaGrid"),a(this,"columnDefinitions",[]),a(this,"gridOptions"),a(this,"editCommandQueue",[]),a(this,"dataset",[]),a(this,"hideSubTitle",!1),a(this,"serverApiDelay",500),a(this,"showLazyLoading",!1),a(this,"headerFormatter",(e,i,t,o)=>`<div class="header-tooltip-title">Custom Tooltip - Header</div>
    <div class="tooltip-2cols-row"><div>Column:</div> <div>${o.name}</div></div>`),a(this,"headerRowFormatter",(e,i,t,o)=>`<div class="headerrow-tooltip-title">Custom Tooltip - Header Row (filter)</div>
    <div class="tooltip-2cols-row"><div>Column:</div> <div>${o.field}</div></div>`),a(this,"tooltipFormatter",(e,i,t,o,r,s)=>{const n="Custom Tooltip",d=c.checkmarkMaterial(e,i,r.effortDriven,o,r,s);return`<div class="header-tooltip-title">${n}</div>
    <div class="tooltip-2cols-row"><div>Id:</div> <div>${r.id}</div></div>
    <div class="tooltip-2cols-row"><div>Title:</div> <div>${r.title}</div></div>
    <div class="tooltip-2cols-row"><div>Effort Driven:</div> <div>${d.outerHTML||""}</div></div>
    <div class="tooltip-2cols-row"><div>Completion:</div> <div>${this.loadCompletionIcons(r.percentComplete)}</div></div>
    `}),a(this,"tooltipTaskAsyncFormatter",(e,i,t,o,r,s)=>{const n=`Task ${r.id} - (async tooltip)`,d=c.percentCompleteBarWithText(e,i,r.percentComplete,o,r,s);return`<div class="color-sf-primary-dark header-tooltip-title">${n}</div>
      <div class="tooltip-2cols-row"><div>Completion:</div> <div>${d.outerHTML||""}</div></div>
      <div class="tooltip-2cols-row"><div>Lifespan:</div> <div>${r.__params.lifespan.toFixed(2)}</div></div>
      <div class="tooltip-2cols-row"><div>Ratio:</div> <div>${r.__params.ratio.toFixed(2)}</div></div>
    `}),this.defineGrid()}attached(){this.dataset=this.loadData(Q)}aureliaGridReady(e){this.aureliaGrid=e}defineGrid(){this.columnDefinitions=[{id:"title",name:"Title",field:"title",sortable:!0,type:m.string,editor:{model:u.longText,required:!0,alwaysSaveOnEnterKey:!0,minLength:5,maxLength:255},filterable:!0,customTooltip:{position:"right-align",formatter:()=>'<div><span class="mdi mdi-load mdi-spin"></span> loading...</div>',asyncProcess:()=>new Promise(e=>{window.setTimeout(()=>e({ratio:Math.random()*10/10,lifespan:Math.random()*100}),this.serverApiDelay)}),asyncPostFormatter:this.tooltipTaskAsyncFormatter}},{id:"duration",name:"Duration",field:"duration",sortable:!0,filterable:!0,editor:{model:u.float,decimal:2,valueStep:1,maxValue:1e4,alwaysSaveOnEnterKey:!0},formatter:(e,i,t)=>t>1?`${t} days`:`${t} day`,type:m.number},{id:"desc",name:"<span title='custom title tooltip text'>Description</span>",field:"description",width:100,filterable:!0,editor:{model:u.longText,required:!0,alwaysSaveOnEnterKey:!0,minLength:5,maxLength:255},formatter:(e,i,t,o,r)=>`<span title="regular tooltip (from title attribute)\r${r.title} cell value:\r${t||""}">${t||""}</span>`,customTooltip:{useRegularTooltip:!0,useRegularTooltipFromCellTextOnly:!0}},{id:"desc2",name:"<span title='custom title tooltip text'>Description 2</span>",field:"description",width:100,filterable:!0,editor:{model:u.longText,required:!0,alwaysSaveOnEnterKey:!0,minLength:5,maxLength:255},formatter:(e,i,t,o,r)=>`<span title="regular tooltip (from title attribute)\r${r.title} cell value:\r\r${t||""}">${t||""}</span>`,customTooltip:{useRegularTooltip:!0,useRegularTooltipFromFormatterOnly:!0}},{id:"cost",name:'<span title="custom cost title tooltip text">Cost</span>',field:"cost",width:90,sortable:!0,filterable:!0,formatter:c.multiple,params:{formatters:[c.dollar,(e,i,t)=>`<span title="regular tooltip (from title attribute) -\rcell value:

${t||""}">${t||""}</span>`]},customTooltip:{useRegularTooltip:!0,useRegularTooltipFromFormatterOnly:!0},type:m.number},{id:"percentComplete",name:"% Complete",field:"percentComplete",type:m.number,editor:{model:u.slider,minValue:0,maxValue:100},formatter:c.percentCompleteBar,sortable:!0,filterable:!0,filter:{model:h.slider,operator:">="},customTooltip:{position:"center",formatter:(e,i,t)=>typeof t=="string"&&t.includes("%")?t:`${t}%`,headerFormatter:void 0,headerRowFormatter:void 0}},{id:"start",name:"Start",field:"start",sortable:!0,type:m.date,outputType:m.dateIso,filterable:!0,filter:{model:h.compoundDate},formatter:c.dateIso,editor:{model:u.date},customTooltip:{formatter:()=>"",asyncProcess:()=>new Promise(e=>{window.setTimeout(()=>e({}),this.serverApiDelay)}),asyncPostFormatter:this.tooltipFormatter.bind(this)}},{id:"finish",name:"Finish",field:"finish",sortable:!0,editor:{model:u.date,editorOptions:{range:{min:"today"}}},type:m.date,outputType:m.dateIso,formatter:c.dateIso,filterable:!0,filter:{model:h.dateRange},disableTooltip:!0},{id:"effortDriven",name:"Effort Driven",field:"effortDriven",width:80,minWidth:20,maxWidth:100,cssClass:"cell-effort-driven",sortable:!0,filterable:!0,filter:{collection:[{value:"",label:""},{value:!0,label:"True"},{value:!1,label:"False"}],model:h.singleSelect},exportWithFormatter:!1,formatter:c.checkmarkMaterial},{id:"prerequisites",name:"Prerequisites",field:"prerequisites",filterable:!0,formatter:(e,i,t)=>{if(t&&Array.isArray(t)){const o=t.map(r=>`Task ${r}`).join(", ");return`<span title="${o}">${o}</span>`}return""},customTooltip:{useRegularTooltip:!0,maxWidth:500},exportWithFormatter:!0,sanitizeDataExport:!0,minWidth:100,sortable:!0,type:m.string,editor:{collectionAsync:new Promise(e=>{window.setTimeout(()=>{e(Array.from(Array(this.dataset.length).keys()).map(i=>({value:i,label:i,prefix:"Task",suffix:"days"})))},500)}),customStructure:{label:"label",value:"value",labelPrefix:"prefix"},collectionOptions:{separatorBetweenTextLabels:" "},model:u.multipleSelect},filter:{collectionLazy:()=>(this.showLazyLoading=!0,new Promise(e=>{window.setTimeout(()=>{this.showLazyLoading=!1,e(Array.from(Array((this.dataset||[]).length).keys()).map(i=>({value:i,label:`Task ${i}`})))},this.serverApiDelay)})),customStructure:{label:"label",value:"value",labelPrefix:"prefix"},collectionOptions:{separatorBetweenTextLabels:" "},filterOptions:{minHeight:70},model:h.multipleSelect,operator:R.inContains}},{id:"action",name:"Action",field:"action",width:70,minWidth:70,maxWidth:70,formatter:()=>'<div class="button-style margin-auto" style="width: 35px;"><span class="mdi mdi-chevron-down text-primary"></span></div>',excludeFromExport:!0,cellMenu:{hideCloseButton:!1,commandTitle:"Commands",commandItems:[{command:"command2",title:"Command 2",positionOrder:62,action:(e,i)=>{console.log(i.dataContext,i.column)},itemUsabilityOverride:e=>!e.dataContext.completed},{command:"command1",title:"Command 1",cssClass:"orange",positionOrder:61},{command:"delete-row",title:"Delete Row",positionOrder:64,iconCssClass:"mdi mdi-close",cssClass:"red",textCssClass:"bold",itemVisibilityOverride:e=>!e.dataContext.completed},{divider:!0,command:"",positionOrder:63},{command:"help",title:"Help",iconCssClass:"mdi mdi-help-circle-outline",positionOrder:66},{command:"something",title:"Disabled Command",disabled:!0,positionOrder:67}]}}],this.gridOptions={autoEdit:!0,autoCommitEdit:!0,editable:!0,autoResize:{container:"#demo-container",rightPadding:10},enableAutoSizeColumns:!0,enableAutoResize:!0,enableCellNavigation:!0,enableExcelExport:!0,excelExportOptions:{exportWithFormatter:!0},externalResources:[new L,new P],customTooltip:{formatter:this.tooltipFormatter.bind(this),headerFormatter:this.headerFormatter,headerRowFormatter:this.headerRowFormatter,usabilityOverride:e=>{var i;return e.cell!==0&&((i=e==null?void 0:e.column)==null?void 0:i.id)!=="action"}},presets:{filters:[{columnId:"prerequisites",searchTerms:[1,3,5,7,9,12,15,18,21,25,28,29,30,32,34]}]},rowHeight:33,enableFiltering:!0,rowSelectionOptions:{selectActiveRow:!1},showCustomFooter:!0,enableCheckboxSelector:!0,enableRowSelection:!0,checkboxSelector:{hideInFilterHeaderRow:!1,hideInColumnTitleRow:!0},editCommandHandler:(e,i,t)=>{this.editCommandQueue.push(t),t.execute()},enableCellMenu:!0,cellMenu:{onCommand:(e,i)=>this.executeCommand(e,i),onOptionSelected:(e,i)=>{const t=i&&i.dataContext;t&&t.hasOwnProperty("completed")&&(t.completed=i.item.option,this.aureliaGrid.gridService.updateItem(t))}}}}loadData(e){const i=[];for(let t=0;t<e;t++){const o=2e3+Math.floor(Math.random()*10),r=new Date().getFullYear()-3+Math.floor(Math.random()*10),s=Math.floor(Math.random()*11),n=Math.floor(Math.random()*29),d=new Date(r,s+1,n);i[t]={id:t,title:"Task "+t,duration:Math.round(Math.random()*100),description:`This is a sample task description.
It can be multiline\r\rAnother line...`,percentComplete:Math.floor(Math.random()*96+5),start:new Date(o,s,n),finish:d<new Date?"":d,cost:t%33===0?null:Math.round(Math.random()*1e4)/100,effortDriven:t%5===0,prerequisites:t%2===0&&t!==0&&t<50?[t,t-1]:[]}}return i}executeCommand(e,i){var r;const t=i.command,o=i.dataContext;switch(t){case"command1":alert("Command 1");break;case"command2":alert("Command 2");break;case"help":alert("Please help!");break;case"delete-row":confirm(`Do you really want to delete row (${(i.row||0)+1}) with "${o.title}"`)&&((r=this.aureliaGrid)==null||r.gridService.deleteItemById(o.id));break}}loadCompletionIcons(e){let i="",t=0;e>5&&e<25?t=1:e>=25&&e<50?t=2:e>=50&&e<75?t=3:e>=75&&e<100?t=4:e===100&&(t=5);for(let o=0;o<t;o++){const r=t===5?"text-success":t>=3?"text-warning":"text-secondary";i+=`<span class="mdi mdi-check-circle-outline ${r}"></span>`}return i}toggleSubTitle(){var i;this.hideSubTitle=!this.hideSubTitle;const e=this.hideSubTitle?"add":"remove";(i=document.querySelector(".subtitle"))==null||i.classList[e]("hidden"),this.aureliaGrid.resizerService.resizeGrid(0)}}_=B();w=Y(_,0,"Example33",k,w);N(_,1,w);export{w as Example33};
//# sourceMappingURL=example33-DA55UuTD.js.map
