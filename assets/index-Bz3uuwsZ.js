const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./example3-DF9rGx7Q.js","./index.dev-DuhuQGSj.js","./editors.index-CmyHd4IA.js","./custom-inputFilter-B4pu9n27.js","./countries-DVECuSGk.js","./example4-CHIA5W77.js","./excelExport.service-BVEnwJlG.js","./groupingFormatters.index-B6oGpPhz.js","./example5-C9ZDSkW7.js","./grid-odata.service-BpQYoHTV.js","./customers_100-D4oCOlSv.js","./example6-BFSUp_kE.js","./addDay-wzmy5jCU.js","./graphql.service-B0y6nIZw.js","./example7-BVE35PqP.js","./example7-Da1bGOP8.css","./example8-DeQYYAAK.js","./example8-CA7xwAGg.css","./example9-DRLSKJy8.js","./example9-Dc3CmlsJ.css","./example10-D1HRtlR1.js","./example10-BVM08eCF.css","./example11-GDX8aTm3.js","./example11-4ucVBuen.css","./example12-oe-_MCkE.js","./textExport.service-CiLvcQgQ.js","./example13-BCtLsCY2.js","./aggregators.index-6uBa5zAH.js","./example14-Buj3ezde.js","./example14-C9W8y2Sk.css","./example17-Bqc2PfKh.js","./example18-g9RvbmJy.js","./example19-BlqpMFPz.js","./example20-B5bP4-2G.js","./example21-kd5VHoge.js","./example21-wNfveAb8.css","./example22-Dx691lyQ.js","./example22-CPfNfLbw.css","./example23-9BwcWKWJ.js","./slickCustomTooltip-DOwB40_c.js","./example24-Zu7GHk1V.js","./example24-CNaA0FM3.css","./example25-C1XAQN0a.js","./example25-CLFK_OcN.css","./example26-DuMfqDKd.js","./example27-B4Aefg3V.js","./example27-BVxBVk3X.css","./example28-DvmdS_Fd.js","./example28-C0o8QOWg.css","./example30-Aj2ZYj9y.js","./example30-Cy60gJTd.css","./example31-DXY0Sq3q.js","./example32-jc9iYEcO.js","./example32-CJduguXk.css","./example33-DUSjN4YK.js","./example33-Da55Qjjo.css","./example34-1rzxnMDJ.js","./chunk-LSEVNFON-G8OzWBoO.js","./example34-CrFMDXti.css","./example35-BGs_mPsL.js","./example35-CKduLRWW.css","./example36-IfZ14n5x.js","./example36-bqAwQ2Gc.css","./example37-PRrGuGnf.js","./example38-DmshXpKW.js","./example38-DNCGqM8k.css","./example39-BWSVvqNd.js","./example39-COcEzU3M.css","./example40-DgLLiXNy.js","./example41-BHyoawRM.js","./example41-AbBndIvQ.css","./example43-BPuzPb3x.js","./example43-Cq-ugxKZ.css","./example44-BtQBgHqG.js","./example44-DibG4QDH.css","./example45-CCJlvEWe.js"])))=>i.map(i=>d[i]);
var fO=Object.defineProperty;var gO=(n,e,t)=>e in n?fO(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>gO(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function mO(){Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"))}const Gi={get(n,e){var t;return(t=e[Symbol.metadata])==null?void 0:t[n]},define(n,e,...t){var r;let i=(r=Object.getOwnPropertyDescriptor(e,Symbol.metadata))==null?void 0:r.value;i==null&&Object.defineProperty(e,Symbol.metadata,{value:i=Object.create(null),enumerable:!0,configurable:!0,writable:!0});const s=t.length;switch(s){case 0:throw new Error("At least one key must be provided");case 1:i[t[0]]=n;return;case 2:i[t[0]]=i[t[1]]=n;return;default:{for(let o=0;o<s;++o)i[t[o]]=n;return}}},has(n,e){const t=e[Symbol.metadata];return t==null?!1:n in t},delete(n,e){const t=e[Symbol.metadata];t!=null&&Reflect.deleteProperty(t,n)}},qc=Object.freeze,lS=Object.assign,_O=String,dn=Gi.get,yc=Gi.define,Ut=n=>n instanceof Promise,Nt=n=>n instanceof Array,sl=n=>n instanceof Set,Cr=n=>n instanceof Map,cS=n=>n instanceof Object;function Id(n){return typeof n=="object"&&n!==null||typeof n=="function"}const We=n=>typeof n=="function",$e=n=>typeof n=="string",vO=n=>typeof n=="number",st=()=>Object.create(null),Kn=Object.is,It=(n,...e)=>new Error(`AUR${_O(n).padStart(4,"0")}: ${wO(n,...e)}`),bO={1:"No registration for interface: '{{0}}'",2:`'{{0}}' was registered with "none" resolver, are you injecting the right key?`,3:"Cyclic dependency found: {{0}}",4:"Resolver for {{0}} returned a null factory",5:"Invalid resolver strategy specified: {{0}}. Did you assign an invalid strategy value?",6:"Unable to autoregister dependency: {{0}}",7:'Resource key "{{0}}" already registered',8:"Unable to resolve key: {{0}}",9:"Attempted to jitRegister something that is not a constructor: '{{0}}'. Did you forget to register this resource?",10:'Attempted to jitRegister an intrinsic type: "{{0}}". Did you forget to add @inject(Key)',11:"Invalid resolver, null/undefined returned from the static register method.",12:"Attempted to jitRegister an interface: {{0}}",13:"Cannot call resolve '{{0}}' before calling prepare or after calling dispose.",14:"Key cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?A common cause is circular dependency with bundler, did you accidentally introduce circular dependency into your module graph?",15:"'{{0}}' is a native function and cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.",16:'There is not a currently active container to resolve "{{0}}". Are you trying to "new Class(...)" that has a resolve(...) call?',17:"Failed to instantiate '{{0}}' via @newInstanceOf/@newInstanceForScope, there's no registration and no default implementation, or the default implementation does not result in factory for constructing the instances.",18:"Invalid channel name or instance: '{{0}}'.",19:"Invalid channel name or type: {{0}}.",20:"No defined value found when calling firstDefined()",21:"Invalid module transform input: {{0}}. Expected Promise or Object.",22:"The @inject decorator on the target ('{{0}}') type '{{1}}' is not supported.",23:"Resource key '{{0}}' has already been registered."},wO=(n,...e)=>{let t=bO[n];for(let i=0;i<e.length;++i)t=t.replace(`{{${i}}}`,String(e[i]));return t},Ha=(...n)=>globalThis.console.error(...n),Sc=(()=>{const n={};let e=!1,t=0,i=0,s=0;return r=>{switch(typeof r){case"number":return r>=0&&(r|0)===r;case"string":if(e=n[r],e!==void 0)return e;if(t=r.length,t===0)return n[r]=!1;for(i=0,s=0;s<t;++s)if(i=r.charCodeAt(s),s===0&&i===48&&t>1||i<48||i>57)return n[r]=!1;return n[r]=!0;default:return!1}}})(),hS=function(){const n=lS(st(),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0}),e=t=>t===""?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:n[t]===!0?1:0;return(t,i)=>{const s=t.length;if(s===0)return t;let r=!1,o="",a,l="",c=0,h=t.charAt(0),d=e(h),u=0;for(;u<s;++u)a=c,l=h,c=d,h=t.charAt(u+1),d=e(h),c===0?o.length>0&&(r=!0):(!r&&o.length>0&&c===2&&(r=a===3||d===3),o+=i(l,r),r=!1);return o}}(),Rt=function(){const n=st(),e=(t,i)=>i?t.toUpperCase():t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=hS(t,e)),i}}(),dS=function(){const n=st();return e=>{let t=n[e];return t===void 0&&(t=Rt(e),t.length>0&&(t=t[0].toUpperCase()+t.slice(1)),n[e]=t),t}}(),uS=function(){const n=st(),e=(t,i)=>i?`-${t.toLowerCase()}`:t.toLowerCase();return t=>{let i=n[t];return i===void 0&&(i=n[t]=hS(t,e)),i}}(),Pa=n=>{const e=n.length,t=Array(e);let i=0;for(;i<e;++i)t[i]=n[i];return t},Xo=(n,e)=>{const t=e.name;e.addInitializer(function(){Reflect.defineProperty(this,t,{value:n.bind(this),writable:!0,configurable:!0,enumerable:!1})})},Vt=(...n)=>{const e=[];let t=0;const i=n.length;let s=0,r,o=0;for(;o<i;++o)if(r=n[o],r!==void 0){s=r.length;let a=0;for(;a<s;++a)e[t++]=r[a]}return e},gr=(...n)=>{const e=n.length;let t,i=0;for(;e>i;++i)if(t=n[i],t!==void 0)return t;throw It(20)},CO=function(){const n=Function.prototype,e=Object.getPrototypeOf,t=new WeakMap;let i=n,s=0,r;return function(o){if(r=t.get(o),r===void 0)for(t.set(o,r=[i=o]),s=0;(i=e(i))!==n;)r[++s]=i;return r}}();function jf(...n){return lS(st(),...n)}const Kv=(()=>{const n=new WeakMap;let e=!1,t="",i=0;return s=>(e=n.get(s),e==null&&(i=(t=s.toString()).length,e=i>28&&t.indexOf("[native code] }")===i-15,n.set(s,e)),e)})(),Ee=(n,e)=>Ut(n)?n.then(e):e(n),qt=(...n)=>{let e,t,i,s=0,r=n.length;for(;s<r;++s)e=n[s],Ut(e=n[s])&&(t===void 0?t=e:i===void 0?i=[t,e]:i.push(e));return i===void 0?t:Promise.all(i)},yO=(n,e)=>new Ns(n,0,e),Ec=(n,e)=>new Ns(n,1,e),pS=(n,e)=>new Ns(n,2,e),SO=(n,e)=>new Ns(n,3,e),EO=(n,e)=>new Ns(n,3,fS(e)),Rd=(n,e)=>new Ns(e,5,n),TO=(n,...e)=>new BO(n,e),Yv=new WeakMap,fS=n=>(e,t,i)=>{let s=Yv.get(e);if(s===void 0&&Yv.set(e,s=new WeakMap),s.has(i))return s.get(i);const r=n(e,t,i);return s.set(i,r),r},Ji={instance:yO,singleton:Ec,transient:pS,callback:SO,cachedCallback:EO,aliasTo:Rd,defer:TO},Xc=function(n){return function(t){t.register(Ec(this,this),Rd(this,n))}},mo="au:annotation",yr=(n,e)=>e===void 0?`${mo}:${n}`:`${mo}:${n}:${e}`,AO=(n,e)=>{const t=dn(mo,n);t===void 0?yc([e],n,mo):t.push(e)},IO=qc({name:"au:annotation",appendTo:AO,set(n,e,t){yc(t,n,yr(e))},get:(n,e)=>dn(yr(e),n),getKeys(n){let e=dn(mo,n);return e===void 0&&yc(e=[],n,mo),e},isKey:n=>n.startsWith(mo),keyFor:yr}),Zs="au:resource",er=(n,e,t)=>`${Zs}:${n}`,mm={annotation:IO},gS=Object.prototype.hasOwnProperty;function ji(n,e,t,i){let s=dn(yr(n),t);return s===void 0?(s=e[n],s===void 0?(s=t[n],s===void 0||!gS.call(t,n)?i():s):s):s}function Ts(n,e,t){let i=dn(yr(n),e);return i===void 0?(i=e[n],i===void 0||!gS.call(e,n)?t():i):i}function js(n,e,t){const i=e[n];return i===void 0?t():i}const Hs=Symbol.for("au:registrable"),RO={singleton:n=>new Ns(n,1,n)};class nn{constructor(e,t){this.inheritParentResources=e,this.defaultResolver=t}static from(e){return e===void 0||e===nn.DEFAULT?nn.DEFAULT:new nn(e.inheritParentResources??!1,e.defaultResolver??RO.singleton)}}nn.DEFAULT=nn.from({});const mS=n=>new Kl(null,nn.from(n)),OO=new Set("Array ArrayBuffer Boolean DataView Date Error EvalError Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Number Object Promise RangeError ReferenceError RegExp Set SharedArrayBuffer String SyntaxError TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array URIError WeakMap WeakSet".split(" "));let xO=0,wt=null;class Kl{get depth(){return this._parent===null?0:this._parent.depth+1}get parent(){return this._parent}constructor(e,t){if(this.id=++xO,this._registerDepth=0,this._disposableResolvers=new Map,this._parent=e,this.config=t,this._resolvers=new Map,this.res={},e===null)this.root=this,this._factories=new Map;else if(this.root=e.root,this._factories=e._factories,t.inheritParentResources)for(const i in e.res)this.registerResolver(i,e.res[i]);this._resolvers.set(Bs,kO)}register(...e){var h,d,u,p;if(++this._registerDepth===100)throw It(6,...e);let t,i,s,r,o,a=0,l=e.length,c;for(;a<l;++a)if(t=e[a],!!Id(t))if(Ml(t))t.register(this);else if((c=dn(Zs,t))!=null)c.register(this);else if(LO(t)){const f=(h=t[Symbol.metadata])==null?void 0:h[Hs];if(Ml(f))f.register(this);else if($e((d=t.$au)==null?void 0:d.type)){const g=t.$au,m=(t.aliases??De).concat(g.aliases??De);let _=`${Zs}:${g.type}:${g.name}`;if(this.has(_,!1)){(u=globalThis.console)==null||u.warn(It(7,_));continue}for(Rd(t,_).register(this),this.has(t,!1)||Ec(t,t).register(this),r=0,o=m.length;r<o;++r){if(_=`${Zs}:${g.type}:${m[r]}`,this.has(_,!1)){(p=globalThis.console)==null||p.warn(It(7,_));continue}Rd(t,_).register(this)}}else Ec(t,t).register(this)}else for(i=Object.keys(t),r=0,o=i.length;r<o;++r)s=t[i[r]],Id(s)&&(Ml(s)?s.register(this):this.register(s));return--this._registerDepth,this}registerResolver(e,t,i=!1){_l(e);const s=this._resolvers,r=s.get(e);if(r==null){if(s.set(e,t),vp(e)){if(this.res[e]!==void 0)throw It(7,e);this.res[e]=t}}else r instanceof Ns&&r._strategy===4?r._state.push(t):s.set(e,new Ns(e,4,[r,t]));return i&&this._disposableResolvers.set(e,t),t}deregister(e){_l(e);const t=this._resolvers.get(e);t!=null&&(this._resolvers.delete(e),vp(e)&&delete this.res[e],this._disposableResolvers.has(e)&&(t.dispose(),this._disposableResolvers.delete(e)))}registerTransformer(e,t){const i=this.getResolver(e);if(i==null)return!1;if(i.getFactory){const s=i.getFactory(this);return s==null?!1:(s.registerTransformer(t),!0)}return!1}getResolver(e,t=!0){if(_l(e),e.resolve!==void 0)return e;const i=wt;let s=wt=this,r,o;try{for(;s!=null;)if(r=s._resolvers.get(e),r==null){if(s._parent==null)return o=Qv(e)?this:s,t?this._jitRegister(e,o):null;s=s._parent}else return r}finally{wt=i}return null}has(e,t=!1){var i;return this._resolvers.has(e)||vp(e)&&e in this.res||((t&&((i=this._parent)==null?void 0:i.has(e,!0)))??!1)}get(e){if(_l(e),e.$isResolver)return e.resolve(this,this);const t=wt;let i=wt=this,s,r;try{for(;i!=null;)if(s=i._resolvers.get(e),s==null){if(i._parent==null)return r=Qv(e)?this:i,s=this._jitRegister(e,r),s.resolve(i,this);i=i._parent}else return s.resolve(i,this)}finally{wt=t}throw It(8,e)}getAll(e,t=!1){_l(e);const i=wt,s=wt=this;let r=s,o,a=De;try{if(t){for(;r!=null;)o=r._resolvers.get(e),o!=null&&(a=a.concat(Xv(o,r,s))),r=r._parent;return a}for(;r!=null;)if(o=r._resolvers.get(e),o==null){if(r=r._parent,r==null)return De}else return Xv(o,r,s)}finally{wt=i}return De}invoke(e,t){if(Kv(e))throw It(15,e);const i=wt;wt=this;{let s,r;try{s=wa(e).map(o=>this.get(r=o))}catch(o){throw Ha(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}, caused by dependency: ${String(r)}`),wt=i,o}try{return t===void 0?new e(...s):new e(...s,...t)}catch(o){throw Ha(`[DEV:aurelia] Error during construction of ${e.name?e.name:`(Anonymous) ${String(e)}`}`),o}finally{wt=i}}try{return t===void 0?new e(...wa(e).map(Tc,this)):new e(...wa(e).map(Tc,this),...t)}finally{wt=i}}hasFactory(e){return this._factories.has(e)}getFactory(e){let t=this._factories.get(e);if(t===void 0){if(Kv(e))throw It(15,e);this._factories.set(e,t=new PO(e,wa(e)))}return t}registerFactory(e,t){this._factories.set(e,t)}createChild(e){return e===void 0&&this.config.inheritParentResources?this.config===nn.DEFAULT?new Kl(this,this.config):new Kl(this,nn.from({...this.config,inheritParentResources:!1})):new Kl(this,nn.from(e??this.config))}disposeResolvers(){var r;const e=this._resolvers,t=this._disposableResolvers;let i,s;for([s,i]of t.entries())(r=i.dispose)==null||r.call(i),e.delete(s);t.clear()}useResources(e){const t=e.res;for(const i in t)this.registerResolver(i,t[i])}find(e,t){var o,a;const i=$e(t)?`${Zs}:${e}:${t}`:e;let s=this,r=s.res[i];return r==null&&(s=s.root,r=s.res[i]),r==null?null:((a=(o=r.getFactory)==null?void 0:o.call(r,s))==null?void 0:a.Type)??null}dispose(){this._disposableResolvers.size>0&&this.disposeResolvers(),this._resolvers.clear(),this.root===this&&(this._factories.clear(),this.res={})}_jitRegister(e,t){const i=Ml(e);if(!We(e)&&!i)throw It(9,e);if(OO.has(e.name))throw It(10,e);if(i){const r=e.register(t,e);if(!(r instanceof Object)||r.resolve==null){const o=t._resolvers.get(e);if(o!=null)return o;throw It(11,e)}return r}if(e.$isInterface)throw It(12,e.friendlyName);const s=this.config.defaultResolver(e,t);return t._resolvers.set(e,s),s}}class PO{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){const i=wt;wt=e;let s;{let r,o;try{r=this.dependencies.map(a=>e.get(o=a))}catch(a){throw Ha(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}, caused by dependency: ${String(o)}`),wt=i,a}try{return t===void 0?s=new this.Type(...r):s=new this.Type(...r,...t),this.transformers==null?s:this.transformers.reduce(qv,s)}catch(a){throw Ha(`[DEV:aurelia] Error during construction of ${this.Type.name?this.Type.name:`(Anonymous) ${String(this.Type)}`}`),a}finally{wt=i}}try{return t===void 0?s=new this.Type(...this.dependencies.map(Tc,e)):s=new this.Type(...this.dependencies.map(Tc,e),...t),this.transformers==null?s:this.transformers.reduce(qv,s)}finally{wt=i}}registerTransformer(e){(this.transformers??(this.transformers=[])).push(e)}}function qv(n,e){return e(n)}function _l(n){if(n==null)throw It(14)}function Tc(n){return this.get(n)}function $(...n){if(wt==null)throw It(16,...n);if(n.length===1)try{return wt.get(n[0])}catch(e){throw Ha(`[DEV:aurelia] resolve() call error for: ${String(n[0])}`),e}else{let e;try{return n.map(t=>wt.get(e=t))}catch(t){throw Ha(`[DEV:aurelia] resolve() call error for: ${String(e)}`),t}}return n.length===1?wt.get(n[0]):n.map(Tc,wt)}const Xv=(n,e,t)=>{if(n instanceof Ns&&n._strategy===4){const i=n._state,s=i.length,r=Array(s);let o=0;for(;o<s;++o)r[o]=i[o].resolve(e,t);return r}return[n.resolve(e,t)]},kO={$isResolver:!0,resolve(n,e){return e}},Ml=n=>We(n==null?void 0:n.register),DO=n=>Ml(n)&&typeof n.registerInRequestor=="boolean",Qv=n=>DO(n)&&n.registerInRequestor,LO=n=>n.prototype!==void 0,vp=n=>$e(n)&&n.indexOf(":")>0;class NO{constructor(e,t){this._container=e,this._key=t}instance(e){return this._registerResolver(0,e)}singleton(e){return this._registerResolver(1,e)}transient(e){return this._registerResolver(2,e)}callback(e){return this._registerResolver(3,e)}cachedCallback(e){return this._registerResolver(3,fS(e))}aliasTo(e){return this._registerResolver(5,e)}_registerResolver(e,t){const{_container:i,_key:s}=this;return this._container=this._key=void 0,i.registerResolver(s,new Ns(s,e,t))}}const vl=n=>{const e=n.slice(),t=Object.keys(n),i=t.length;let s;for(let r=0;r<i;++r)s=t[r],Sc(s)||(e[s]=n[s]);return e},nd=yr("di:paramtypes"),MO=n=>dn(nd,n),_S=n=>dn("design:paramtypes",n),Zv=n=>{var e;return(e=n.metadata)[nd]??(e[nd]=[])},wa=n=>{const e=yr("di:dependencies");let t=dn(e,n);if(t===void 0){const i=n.inject;if(i===void 0){const s=_S(n),r=MO(n);if(s===void 0)if(r===void 0){const o=Object.getPrototypeOf(n);We(o)&&o!==Function.prototype?t=vl(wa(o)):t=[]}else t=vl(r);else if(r===void 0)t=vl(s);else{t=vl(s);let o=r.length,a,l=0;for(;l<o;++l)a=r[l],a!==void 0&&(t[l]=a);const c=Object.keys(r);let h;for(l=0,o=c.length,l=0;l<o;++l)h=c[l],Sc(h)||(t[h]=r[h])}}else t=vl(i);yc(t,n,e)}return t},tr=(n,e)=>{const t=We(n)?n:e,i=($e(n)?n:void 0)??"(anonymous)",s={$isInterface:!0,friendlyName:i,toString:()=>`InterfaceSymbol<${i}>`,register:t!=null?(r,o)=>t(new NO(r,o??s)):void 0};return s},_m=(...n)=>(e,t)=>{switch(t.kind){case"class":{const i=Zv(t);let s,r=0;for(;r<n.length;++r)s=n[r],s!==void 0&&(i[r]=s);break}case"field":{const i=Zv(t),s=n[0];s!==void 0&&(i[t.name]=s);break}default:throw It(22,String(t.name),t.kind)}},wi=(mO(),{createContainer:mS,getDesignParamtypes:_S,getDependencies:wa,createInterface:tr,inject:_m,transient(n){return n.register=function(e){return pS(n,n).register(e,n)},n.registerInRequestor=!1,n},singleton(n,e=$O){return n.register=function(t){return Ec(n,n).register(t,n)},n.registerInRequestor=e.scoped,n}}),Bs=tr("IContainer"),FO=Bs;function Jv(n,e){return wi.transient(n)}function vm(n,e){return n==null?Jv:Jv(n)}const $O={scoped:!1},eb=wi.singleton;function HO(n,e){return We(n)?eb(n):function(t,i){return eb(t,n)}}class Ns{get $isResolver(){return!0}constructor(e,t,i){this._resolving=!1,this._cachedFactory=null,this._key=e,this._strategy=t,this._state=i}register(e,t){return e.registerResolver(t||this._key,this)}resolve(e,t){switch(this._strategy){case 0:return this._state;case 1:{if(this._resolving)throw It(3,this._state.name);return this._resolving=!0,this._state=(this._cachedFactory=e.getFactory(this._state)).construct(t),this._strategy=0,this._resolving=!1,this._state}case 2:{const i=e.getFactory(this._state);if(i===null)throw It(4,this._key);return i.construct(t)}case 3:return this._state(e,t,this);case 4:return this._state[0].resolve(e,t);case 5:return t.get(this._state);default:throw It(5,this._strategy)}}getFactory(e){var t,i;switch(this._strategy){case 1:case 2:return e.getFactory(this._state);case 5:return((i=(t=e.getResolver(this._state))==null?void 0:t.getFactory)==null?void 0:i.call(t,e))??null;case 0:return this._cachedFactory;default:return null}}}class jt{get friendlyName(){return this._name}constructor(e,t=null,i=null){this._name=e,this._instance=t,this._Type=i}prepare(e){this._instance=e}get $isResolver(){return!0}resolve(){if(this._instance==null)throw It(13,this._name);return this._instance}getFactory(e){return this._Type==null?null:e.getFactory(this._Type)}dispose(){this._instance=null}}class BO{constructor(e,t){this.key=e,this.params=t}register(e){e.has(this.key,!0)?e.get(this.key).register(e,...this.params):e.register(...this.params.filter(t=>typeof t=="object"))}}const De=qc([]),VO=qc({});function rn(){}const nl=tr("IPlatform");function Bo(n){return function(e){function t(i,s){_m(t)(i,s)}return t.$isResolver=!0,t.resolve=function(i,s){return n(e,i,s)},t}}const bm=(n,e=!1)=>{function t(i,s){_m(t)(i,s)}return t.$isResolver=!0,t.resolve=(i,s)=>s.getAll(n,e),t},wm=Bo((n,e,t)=>{if(t.has(n,!0))return t.get(n)}),Yq=Bo((n,e,t)=>(...i)=>e.getFactory(n).construct(t,i)),zO=Bo((n,e,t)=>t.has(n,!1)?t.get(n):void 0),Ba=Bo((n,e,t)=>t.has(n,!1)?t.get(n):t.root.get(n)),WO=Bo((n,e,t)=>t.has(n,!1)?t.get(n):t.root.has(n,!1)?t.root.get(n):void 0),UO=Bo((n,e,t)=>t===t.root?t.getAll(n,!1):t.has(n,!1)?t.getAll(n,!1).concat(t.root.getAll(n,!1)):t.root.getAll(n,!1)),qq=Bo((n,e,t)=>GO(n,e,t)),GO=(n,e,t)=>{var i,s,r;if(e.hasFactory(n))return e.getFactory(n).construct(t);if(jO(n)){const o=We(n.register),a=e.getResolver(n,!1);let l;if(a==null?(o&&(l=(s=(i=(tb??(tb=mS())).getResolver(n,!0))==null?void 0:i.getFactory)==null?void 0:s.call(i,e)),tb.dispose()):l=(r=a.getFactory)==null?void 0:r.call(a,e),l!=null)return l.construct(t);throw It(17,n)}return e.getFactory(n).construct(t)},jO=n=>(n==null?void 0:n.$isInterface)===!0;let tb;function Qo(n,e,t,i,s,r){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=n?i.static?n:n.prototype:null,h=c?Object.getOwnPropertyDescriptor(c,i.name):{},d,u=!1,p=t.length-1;p>=0;p--){var f={};for(var g in i)f[g]=g==="access"?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(_){if(u)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(_||null))};var m=(0,t[p])(a==="accessor"?{get:h.get,set:h.set}:h[l],f);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(d=o(m.get))&&(h.get=d),(d=o(m.set))&&(h.set=d),(d=o(m.init))&&s.unshift(d)}else(d=o(m))&&(a==="field"?s.unshift(d):h[l]=d)}c&&Object.defineProperty(c,i.name,h),u=!0}function KO(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}const Yl=0,ql=1,Xl=2,ka=3,Ql=4,Zl=5,YO=6,qO=qc({trace:Yl,debug:ql,info:Xl,warn:ka,error:Ql,fatal:Zl,none:YO}),vS=tr("ILogConfig",n=>n.instance(new ex("no-colors",ka))),XO=tr("ISink"),QO=tr("ILogEventFactory",n=>n.singleton(ix)),Tr=tr("ILogger",n=>n.singleton(sx)),ZO=tr("ILogScope"),JO=qc({key:yr("logger-sink-handles"),define(n,e){yc(e.handles,n,this.key)},getHandles(n){return dn(this.key,n.constructor)}}),Dn=jf({red(n){return`\x1B[31m${n}\x1B[39m`},green(n){return`\x1B[32m${n}\x1B[39m`},yellow(n){return`\x1B[33m${n}\x1B[39m`},blue(n){return`\x1B[34m${n}\x1B[39m`},magenta(n){return`\x1B[35m${n}\x1B[39m`},cyan(n){return`\x1B[36m${n}\x1B[39m`},white(n){return`\x1B[37m${n}\x1B[39m`},grey(n){return`\x1B[90m${n}\x1B[39m`}});class ex{constructor(e,t){this.colorOptions=e,this.level=t}}const bp=function(){const n={"no-colors":jf({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),colors:jf({TRC:Dn.grey("TRC"),DBG:Dn.grey("DBG"),INF:Dn.white("INF"),WRN:Dn.yellow("WRN"),ERR:Dn.red("ERR"),FTL:Dn.red("FTL"),QQQ:Dn.grey("???")})};return(e,t)=>e<=Yl?n[t].TRC:e<=ql?n[t].DBG:e<=Xl?n[t].INF:e<=ka?n[t].WRN:e<=Ql?n[t].ERR:e<=Zl?n[t].FTL:n[t].QQQ}(),ib=(n,e)=>e==="no-colors"?n.join("."):n.map(Dn.cyan).join("."),wp=(n,e)=>e==="no-colors"?new Date(n).toISOString():Dn.grey(new Date(n).toISOString());class tx{constructor(e,t,i,s,r,o){this.severity=e,this.message=t,this.optionalParams=i,this.scope=s,this.colorOptions=r,this.timestamp=o}toString(){const{severity:e,message:t,scope:i,colorOptions:s,timestamp:r}=this;return i.length===0?`${wp(r,s)} [${bp(e,s)}] ${t}`:`${wp(r,s)} [${bp(e,s)} ${ib(i,s)}] ${t}`}getFormattedLogInfo(e=!1){const{severity:t,message:i,scope:s,colorOptions:r,timestamp:o,optionalParams:a}=this;let l=null,c="";e&&i instanceof Error?l=i:c=i;const h=s.length===0?"":` ${ib(s,r)}`;let d=`${wp(o,r)} [${bp(t,r)}${h}] ${c}`;if(a===void 0||a.length===0)return l===null?[d]:[d,l];let u=0;for(;d.includes("%s");)d=d.replace("%s",String(a[u++]));return l!==null?[d,l,...a.slice(u)]:[d,...a.slice(u)]}}class ix{constructor(){this.config=$(vS)}createLogEvent(e,t,i,s){return new tx(t,i,s,e.scope,this.config.colorOptions,Date.now())}}let sx=(()=>{var n;let e=[],t,i,s,r,o,a;return n=class{constructor(c=$(vS),h=$(QO),d=$(bm(XO)),u=$(wm(ZO))??[],p=null){this.scope=(KO(this,e),u),this._scopedLoggers=st();let f,g,m,_,b,C;if(this.config=c,this._factory=h,this.sinks=d,p===null){this.root=this,this.parent=this,f=this._traceSinks=[],g=this._debugSinks=[],m=this._infoSinks=[],_=this._warnSinks=[],b=this._errorSinks=[],C=this._fatalSinks=[];for(const v of d){const y=JO.getHandles(v);((y==null?void 0:y.includes(Yl))??!0)&&f.push(v),((y==null?void 0:y.includes(ql))??!0)&&g.push(v),((y==null?void 0:y.includes(Xl))??!0)&&m.push(v),((y==null?void 0:y.includes(ka))??!0)&&_.push(v),((y==null?void 0:y.includes(Ql))??!0)&&b.push(v),((y==null?void 0:y.includes(Zl))??!0)&&C.push(v)}}else this.root=p.root,this.parent=p,f=this._traceSinks=p._traceSinks,g=this._debugSinks=p._debugSinks,m=this._infoSinks=p._infoSinks,_=this._warnSinks=p._warnSinks,b=this._errorSinks=p._errorSinks,C=this._fatalSinks=p._fatalSinks}trace(c,...h){this.config.level<=Yl&&this._emit(this._traceSinks,Yl,c,h)}debug(c,...h){this.config.level<=ql&&this._emit(this._debugSinks,ql,c,h)}info(c,...h){this.config.level<=Xl&&this._emit(this._infoSinks,Xl,c,h)}warn(c,...h){this.config.level<=ka&&this._emit(this._warnSinks,ka,c,h)}error(c,...h){this.config.level<=Ql&&this._emit(this._errorSinks,Ql,c,h)}fatal(c,...h){this.config.level<=Zl&&this._emit(this._fatalSinks,Zl,c,h)}scopeTo(c){const h=this._scopedLoggers;let d=h[c];return d===void 0&&(d=h[c]=new n(this.config,this._factory,null,this.scope.concat(c),this)),d}_emit(c,h,d,u){const p=We(d)?d():d,f=this._factory.createLogEvent(this,h,p,u);for(let g=0,m=c.length;g<m;++g)c[g].handleEvent(f)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;t=[Xo],i=[Xo],s=[Xo],r=[Xo],o=[Xo],a=[Xo],Qo(n,null,t,{kind:"method",name:"trace",static:!1,private:!1,access:{has:c=>"trace"in c,get:c=>c.trace},metadata:l},null,e),Qo(n,null,i,{kind:"method",name:"debug",static:!1,private:!1,access:{has:c=>"debug"in c,get:c=>c.debug},metadata:l},null,e),Qo(n,null,s,{kind:"method",name:"info",static:!1,private:!1,access:{has:c=>"info"in c,get:c=>c.info},metadata:l},null,e),Qo(n,null,r,{kind:"method",name:"warn",static:!1,private:!1,access:{has:c=>"warn"in c,get:c=>c.warn},metadata:l},null,e),Qo(n,null,o,{kind:"method",name:"error",static:!1,private:!1,access:{has:c=>"error"in c,get:c=>c.error},metadata:l},null,e),Qo(n,null,a,{kind:"method",name:"fatal",static:!1,private:!1,access:{has:c=>"fatal"in c,get:c=>c.fatal},metadata:l},null,e),l&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),n})();class nx{constructor(e,t){this.type=e,this.cb=t}handle(e){e instanceof this.type&&this.cb.call(null,e)}}const Mr=tr("IEventAggregator",n=>n.singleton(rx));class rx{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(e,t){if(!e)throw It(18,e);if($e(e)){let i=this.eventLookup[e];if(i!==void 0){i=i.slice();const s=i.length;for(let r=0;r<s;r++)i[r](t,e)}}else{const i=this.messageHandlers.slice(),s=i.length;for(let r=0;r<s;r++)i[r].handle(e)}}subscribe(e,t){if(!e)throw It(19,e);let i,s;return $e(e)?(this.eventLookup[e]===void 0&&(this.eventLookup[e]=[]),i=t,s=this.eventLookup[e]):(i=new nx(e,t),s=this.messageHandlers),s.push(i),{dispose(){const r=s.indexOf(i);r!==-1&&s.splice(r,1)}}}subscribeOnce(e,t){const i=this.subscribe(e,(s,r)=>{i.dispose(),t(s,r)});return i}}const bS="AccessThis",ox="AccessBoundary",Cm="AccessGlobal",ym="AccessScope",ax="ArrayLiteral",lx="ObjectLiteral",cx="PrimitiveLiteral",hx="New",dx="Template",ux="Unary",px="CallScope",fx="CallMember",gx="CallFunction",mx="CallGlobal",xu="AccessMember",wS="AccessKeyed",_x="TaggedTemplate",vx="Binary",bx="Conditional",wx="Assign",Cx="ArrowFunction",yx="ValueConverter",Sx="BindingBehavior",CS="ArrayBindingPattern",yS="ObjectBindingPattern",SS="BindingIdentifier",Ex="ForOfStatement",Tx="Interpolation",ES="ArrayDestructuring",Ax="ObjectDestructuring",Ix="DestructuringAssignmentLeaf",Rx="Custom";class Pu{constructor(e){this.value=e,this.$kind=Rx}evaluate(...e){return this.value}assign(...e){return e}bind(...e){}unbind(...e){}accept(e){}}class Ox{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=Sx,this.key=`_bb_${t}`}}class Ac{constructor(e,t,i){this.expression=e,this.name=t,this.args=i,this.$kind=yx}}class xx{constructor(e,t,i="="){this.target=e,this.value=t,this.op=i,this.$kind=wx}}class Px{constructor(e,t,i){this.condition=e,this.yes=t,this.no=i,this.$kind=bx}}class kx{constructor(e){this.name=e,this.$kind=Cm}}class Jl{constructor(e=0){this.ancestor=e,this.$kind=bS}}class Dx{constructor(){this.$kind=ox}}class ec{constructor(e,t=0){this.name=e,this.ancestor=t,this.$kind=ym}}const TS=n=>n.$kind===Cm||(n.$kind===xu||n.$kind===wS)&&n.accessGlobal;class Kf{constructor(e,t,i=!1){this.object=e,this.name=t,this.optional=i,this.$kind=xu,this.accessGlobal=TS(e)}}class AS{constructor(e,t,i=!1){this.object=e,this.key=t,this.optional=i,this.$kind=wS,this.accessGlobal=TS(e)}}class Lx{constructor(e,t){this.func=e,this.args=t,this.$kind=hx}}class IS{constructor(e,t,i=0,s=!1){this.name=e,this.args=t,this.ancestor=i,this.optional=s,this.$kind=px}}class Od{constructor(e,t,i,s=!1,r=!1){this.object=e,this.name=t,this.args=i,this.optionalMember=s,this.optionalCall=r,this.$kind=fx}}class rd{constructor(e,t,i=!1){this.func=e,this.args=t,this.optional=i,this.$kind=gx}}class Nx{constructor(e,t){this.name=e,this.args=t,this.$kind=mx}}class Mx{constructor(e,t,i){this.operation=e,this.left=t,this.right=i,this.$kind=vx}}class sb{constructor(e,t,i=0){this.operation=e,this.expression=t,this.pos=i,this.$kind=ux}}class ii{constructor(e){this.value=e,this.$kind=cx}}ii.$undefined=new ii(void 0);ii.$null=new ii(null);ii.$true=new ii(!0);ii.$false=new ii(!1);ii.$empty=new ii("");class Yf{constructor(e){this.elements=e,this.$kind=ax}}Yf.$empty=new Yf(De);class qf{constructor(e,t){this.keys=e,this.values=t,this.$kind=lx}}qf.$empty=new qf(De,De);class xd{constructor(e,t=De){this.cooked=e,this.expressions=t,this.$kind=dx}}xd.$empty=new xd([""]);class RS{constructor(e,t,i,s=De){this.cooked=e,this.func=i,this.expressions=s,this.$kind=_x,e.raw=t}}class Fx{constructor(e){this.elements=e,this.$kind=CS}}class $x{constructor(e,t){this.keys=e,this.values=t,this.$kind=yS}}class Pd{constructor(e){this.name=e,this.$kind=SS}}class Hx{constructor(e,t,i){this.declaration=e,this.iterable=t,this.semiIdx=i,this.$kind=Ex}}class Bx{constructor(e,t=De){this.parts=e,this.expressions=t,this.$kind=Tx,this.isMulti=t.length>1,this.firstExpression=t[0]}}class Vx{constructor(e,t,i,s){this.$kind=e,this.list=t,this.source=i,this.initializer=s}}class OS{constructor(e,t,i){this.target=e,this.source=t,this.initializer=i,this.$kind=Ix}}class Xf{constructor(e,t,i=!1){this.args=e,this.body=t,this.rest=i,this.$kind=Cx}}const Qf=String,od=()=>Object.create(null),at=(n,...e)=>new Error(`AUR${Qf(n).padStart(4,"0")}: ${Wx(n,...e)}`),zx={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`},Wx=(n,...e)=>{var i;let t=zx[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Qf(l[a.slice(1)]):l=Qf(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},rl=wi.createInterface("IExpressionParser");class xS{constructor(){this._expressionLookup=od(),this._forOfLookup=od(),this._interpolationLookup=od()}parse(e,t){let i;switch(t){case DS:return new Pu(e);case kd:return i=this._interpolationLookup[e],i===void 0&&(i=this._interpolationLookup[e]=this.$parse(e,t)),i;case Mn:return i=this._forOfLookup[e],i===void 0&&(i=this._forOfLookup[e]=this.$parse(e,t)),i;default:{if(e.length===0){if(t===Yx||t===nb)return ii.$empty;throw hP()}return i=this._expressionLookup[e],i===void 0&&(i=this._expressionLookup[e]=this.$parse(e,t)),i}}}$parse(e,t){return je=e,Ne=0,un=e.length,Qi=0,So=0,ne=6291456,dt="",nt=Eo(0),qe=!0,Ge=!1,Fl=!0,Em=-1,St(61,t===void 0?nb:t)}}xS.register=Xc(rl);function Sm(n){switch(n){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return n}}const Ux=ii.$false,Gx=ii.$true,jx=ii.$null,PS=ii.$undefined,tc=new Jl(0),Cp=new Jl(1),Kx=new Dx,$n="None",kd="Interpolation",Mn="IsIterator",kS="IsChainable",Yx="IsFunction",nb="IsProperty",DS="IsCustom";let je="",Ne=0,un=0,Qi=0,So=0,ne=6291456,dt="",nt,qe=!0,Ge=!1,Fl=!0,Em=-1;const Ic=String.fromCharCode,Eo=n=>je.charCodeAt(n),Hn=()=>je.slice(So,Ne),qx="Infinity NaN isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent Array BigInt Boolean Date Map Number Object RegExp Set String JSON Math Intl".split(" ");function St(n,e){if(e===DS)return new Pu(je);if(Ne===0){if(e===kd)return sP();if(be(),ne&4194304)throw aP()}qe=577>n,Ge=!1,Fl=579>n;let t=!1,i,s=0;if(ne&131072){const r=ha[ne&63];be(),i=new sb(r,St(579,e)),qe=!1}else{e:switch(ne){case 12296:s=Qi,qe=!1,Fl=!1;do switch(be(),++s,ne){case 65547:if(be(),(ne&12288)===0)throw Pn();break;case 12:case 13:throw Pn();case 2162702:if(Ge=!0,be(),(ne&12288)===0){i=s===0?tc:s===1?Cp:new Jl(s),t=!0;break e}break;default:if(ne&2097152){i=s===0?tc:s===1?Cp:new Jl(s);break e}throw lP()}while(ne===12296);case 4096:{const r=dt;if(e===Mn)i=new Pd(r);else if(Fl&&qx.includes(r))i=new kx(r);else{if(Fl&&r==="import")throw gP();i=new ec(r,s)}if(qe=!Ge,be(),qs(53)){if(ne===524298)throw $S();const o=Ge,a=Qi;++Qi;const l=St(62,$n);Ge=o,Qi=a,qe=!1,i=new Xf([new Pd(r)],l)}break}case 12:throw wP();case 13:throw Zf();case 12293:switch(qe=!1,be(),Qi){case 0:i=tc;break;case 1:i=Cp;break;default:i=new Jl(Qi);break}break;case 12294:qe=!1,be(),i=Kx;break;case 2688009:i=Zx(e);break;case 2688020:i=je.search(/\s+of\s+/)>Ne?Xx():Jx(e);break;case 524298:i=iP(e);break;case 2163762:i=new xd([dt]),qe=!1,be();break;case 2163763:i=yp(e,i,!1);break;case 16384:case 32768:i=new ii(dt),qe=!1,be();break;case 8194:case 8195:case 8193:case 8192:i=ha[ne&63],qe=!1,be();break;case 8196:{be();const r=St(578,e);let o;ne===2688009?o=us():(o=[],be()),i=new Lx(r,o),qe=!1;break}default:throw Ne>=un?cP():Sp()}if(e===Mn)return tP(i);switch(ne){case 2228282:case 2228283:i=new sb(ha[ne&63],i,1),be(),qe=!1;break}if(579<n)return i;if(ne===12||ne===13)throw Pn();if(i.$kind===bS)switch(ne){case 2162702:if(Ge=!0,qe=!1,be(),(ne&13312)===0)throw Tm();if(ne&12288)i=new ec(dt,i.ancestor),be();else if(ne===2688009)i=new rd(i,us(),!0);else if(ne===2688020)i=ad(i,!0);else throw ld();break;case 65547:if(qe=!Ge,be(),(ne&12288)===0)throw Pn();i=new ec(dt,i.ancestor),be();break;case 12:case 13:throw Pn();case 2688009:i=new rd(i,us(),t);break;case 2688020:i=ad(i,t);break;case 2163762:i=rb(i);break;case 2163763:i=yp(e,i,!0);break}for(;(ne&65536)>0;)switch(ne){case 2162702:i=Qx(i);break;case 65547:if(be(),(ne&12288)===0)throw Pn();i=LS(i,!1);break;case 12:case 13:throw Pn();case 2688009:if(n===578)return i;i.$kind===ym?i=new IS(i.name,us(),i.ancestor,!1):i.$kind===xu?i=new Od(i.object,i.name,us(),i.optional,!1):i.$kind===Cm?i=new Nx(i.name,us()):i=new rd(i,us(),!1);break;case 2688020:i=ad(i,!1);break;case 2163762:if(Ge)throw ld();i=rb(i);break;case 2163763:if(Ge)throw ld();i=yp(e,i,!0);break}}if(ne===12||ne===13)throw Pn();if(577<n)return i;for(;(ne&262144)>0;){const r=ne;if((r&960)<=n)break;be(),i=new Mx(ha[r&63],i,St(r&960,e)),qe=!1}if(63<n)return i;if(qs(6291480)){const r=St(62,e);Ls(6291478),i=new Px(i,r,St(62,e)),qe=!1}if(62<n)return i;switch(ne){case 4194352:case 4194358:case 4194359:case 4194360:case 4194361:{if(!qe)throw dP();const r=ha[ne&63];be(),i=new xx(i,St(62,e),r);break}}if(61<n)return i;for(;qs(6291482);){if(ne===6291456)throw uP();const r=dt;be();const o=new Array;for(;qs(6291478);)o.push(St(62,e));i=new Ac(i,r,o)}for(;qs(6291481);){if(ne===6291456)throw pP();const r=dt;be();const o=new Array;for(;qs(6291478);)o.push(St(62,e));i=new Ox(i,r,o)}if(ne!==6291456){if(e===kd&&ne===7340047)return i;if(e===kS&&ne===6291479){if(Ne===un)throw Sp();return Em=Ne-1,i}throw Hn()==="of"?fP():Sp()}return i}function Xx(){const n=[],e=new Vx(ES,n,void 0,void 0);let t="",i=!0,s=0;for(;i;)switch(be(),ne){case 7340053:i=!1,r();break;case 6291475:r();break;case 4096:t=Hn();break;default:throw vP()}return Ls(7340053),e;function r(){t!==""?(n.push(new OS(new Kf(tc,t),new AS(tc,new ii(s++)),void 0)),t=""):s++}}function us(){const n=Ge;be();const e=[];for(;ne!==7340048&&(e.push(St(62,$n)),!!qs(6291475)););return Ls(7340048),qe=!1,Ge=n,e}function ad(n,e){const t=Ge;return be(),n=new AS(n,St(62,$n),e),Ls(7340053),qe=!t,Ge=t,n}function Qx(n){if(Ge=!0,qe=!1,be(),(ne&13312)===0)throw Tm();if(ne&12288)return LS(n,!0);if(ne===2688009)return n.$kind===ym?new IS(n.name,us(),n.ancestor,!0):n.$kind===xu?new Od(n.object,n.name,us(),n.optional,!0):new rd(n,us(),!0);if(ne===2688020)return ad(n,!0);throw ld()}function LS(n,e){const t=dt;switch(ne){case 2162702:{Ge=!0,qe=!1;const i=Ne,s=So,r=ne,o=nt,a=dt,l=qe,c=Ge;if(be(),(ne&13312)===0)throw Tm();return ne===2688009?new Od(n,t,us(),e,!0):(Ne=i,So=s,ne=r,nt=o,dt=a,qe=l,Ge=c,new Kf(n,t,e))}case 2688009:return qe=!1,new Od(n,t,us(),e,!1);default:return qe=!Ge,be(),new Kf(n,t,e)}}function Zx(n){be();const e=Ne,t=So,i=ne,s=nt,r=dt,o=Ge,a=[];let l=1,c=!1;e:for(;;){if(ne===13){if(be(),ne!==4096)throw Pn();if(a.push(new Pd(dt)),be(),ne===6291475)throw bP();if(ne!==7340048||(be(),ne!==53))throw Zf();be();const u=Ge,p=Qi;++Qi;const f=St(62,$n);return Ge=u,Qi=p,qe=!1,new Xf(a,f,!0)}switch(ne){case 4096:a.push(new Pd(dt)),be();break;case 7340048:be();break e;case 524298:case 2688020:be(),l=4;break;case 6291475:l=2,c=!0;break e;case 2688009:l=2;break e;default:be(),l=2;break}switch(ne){case 6291475:if(be(),c=!0,l===1)break;break e;case 7340048:be();break e;case 4194352:l===1&&(l=3);break e;case 53:if(c)throw Ch();be(),l=2;break e;default:l===1&&(l=2);break e}}if(ne===53){if(l===1){if(be(),ne===524298)throw $S();const u=Ge,p=Qi;++Qi;const f=St(62,$n);return Ge=u,Qi=p,qe=!1,new Xf(a,f)}throw Ch()}else if(l===1&&a.length===0)throw FS(53);if(c)switch(l){case 2:throw Ch();case 3:throw lb();case 4:throw cb()}Ne=e,So=t,ne=i,nt=s,dt=r,Ge=o;const h=Ge,d=St(62,n);if(Ge=h,Ls(7340048),ne===53)switch(l){case 2:throw Ch();case 3:throw lb();case 4:throw cb()}return d}function Jx(n){const e=Ge;be();const t=new Array;for(;ne!==7340053;)if(qs(6291475)){if(t.push(PS),ne===7340053)break}else if(t.push(St(62,n===Mn?$n:n)),qs(6291475)){if(ne===7340053)break}else break;return Ge=e,Ls(7340053),n===Mn?new Fx(t):(qe=!1,new Yf(t))}const eP=[CS,yS,SS,ES,Ax];function tP(n){if(!eP.includes(n.$kind)||ne!==4204596)throw ab(n.$kind);be();const e=n,t=St(61,kS);return new Hx(e,t,Em)}function iP(n){const e=Ge,t=new Array,i=new Array;for(be();ne!==7340047;){if(t.push(dt),ne&49152)be(),Ls(6291478),i.push(St(62,n===Mn?$n:n));else if(ne&12288){const s=nt,r=ne,o=Ne;be(),qs(6291478)?i.push(St(62,n===Mn?$n:n)):(nt=s,ne=r,Ne=o,i.push(St(580,n===Mn?$n:n)))}else throw mP();ne!==7340047&&Ls(6291475)}return Ge=e,Ls(7340047),n===Mn?new $x(t,i):(qe=!1,new qf(t,i))}function sP(){const n=[],e=[],t=un;let i="";for(;Ne<t;){switch(nt){case 36:if(Eo(Ne+1)===123){n.push(i),i="",Ne+=2,nt=Eo(Ne),be();const s=St(61,kd);e.push(s);continue}else i+="$";break;case 92:i+=Ic(Sm(ye()));break;default:i+=Ic(nt)}ye()}return e.length?(n.push(i),new Bx(n,e)):null}function yp(n,e,t){const i=Ge,s=[dt];Ls(2163763);const r=[St(62,n)];for(;(ne=oP())!==2163762;)s.push(dt),Ls(2163763),r.push(St(62,n));return s.push(dt),qe=!1,Ge=i,t?(be(),new RS(s,s,e,r)):(be(),new xd(s,r))}function rb(n){qe=!1;const e=[dt];return be(),new RS(e,e,n)}function be(){for(;Ne<un;)if(So=Ne,(ne=yP[nt]())!=null)return;ne=6291456}function ye(){return nt=Eo(++Ne)}function nP(){for(;SP[ye()];);const n=CP[dt=Hn()];return n===void 0?4096:n}function ob(n){let e=nt;if(n===!1){do e=ye();while(e<=57&&e>=48);if(e!==46)return dt=parseInt(Hn(),10),32768;if(e=ye(),Ne>=un)return dt=parseInt(Hn().slice(0,-1),10),32768}if(e<=57&&e>=48)do e=ye();while(e<=57&&e>=48);else nt=Eo(--Ne);return dt=parseFloat(Hn()),32768}function rP(){const n=nt;ye();let e=0;const t=new Array;let i=Ne;for(;nt!==n;)if(nt===92)t.push(je.slice(i,Ne)),ye(),e=Sm(nt),ye(),t.push(Ic(e)),i=Ne;else{if(Ne>=un)throw _P();ye()}const s=je.slice(i,Ne);return ye(),t.push(s),dt=t.join(""),16384}function NS(){let n=!0,e="";for(;ye()!==96;)if(nt===36)if(Ne+1<un&&Eo(Ne+1)===123){Ne++,n=!1;break}else e+="$";else if(nt===92)e+=Ic(Sm(ye()));else{if(Ne>=un)throw MS();e+=Ic(nt)}return ye(),dt=e,n?2163762:2163763}const oP=()=>{if(Ne>=un)throw MS();return Ne--,NS()},qs=n=>ne===n?(be(),!0):!1,Ls=n=>{if(ne===n)be();else throw FS(n)},aP=()=>at(151,je),Zf=()=>at(152,je),Pn=()=>at(153,je),lP=()=>at(154,je),cP=()=>at(155,je),Sp=()=>at(156,Hn(),Ne,je),hP=()=>at(157),dP=()=>at(158,je),uP=()=>at(159,je),pP=()=>at(160,je),fP=()=>at(161,je),gP=()=>at(162,je),ab=n=>at(163,je,n),mP=()=>at(164,je),_P=()=>at(165,je),MS=()=>at(166,je),FS=n=>at(167,ha[n&63],je),vP=()=>at(170,Hn(),Ne,je),Tm=()=>at(171,Hn(),Ne-1,je),ld=()=>at(172,je),Ch=()=>at(173,je),lb=()=>at(174,je),cb=()=>at(175,je),bP=()=>at(176,je),$S=()=>at(178,je),wP=()=>at(179,Ne-1,je),ha=[Ux,Gx,jx,PS,"new","this","$this",null,"$parent","(","{",".","..","...","?.","}",")",",","[","]",":",";","?","'",'"',"&","|","??","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","**","=","!",2163762,2163763,"of","=>","+=","-=","*=","/=","++","--"],CP=Object.assign(od(),{true:8193,null:8194,false:8192,undefined:8195,new:8196,this:12294,$this:12293,$parent:12296,in:6562214,instanceof:6562215,typeof:139306,void:139307,of:4204596}),{CharScanners:yP,IdParts:SP}=(()=>{const n=()=>{throw at(168,je)};n.notMapped=!0;const e={IdStart:[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Digit:[48,58],Skip:[0,33,127,161]},t=(o,a,l,c)=>{const h=l.length;for(let d=0;d<h;d+=2){const u=l[d];let p=l[d+1];p=p>0?p:u+1,o&&o.fill(c,u,p)}},i=(o=>(t(o,null,e.IdStart,1),t(o,null,e.Digit,1),o))(new Uint8Array(65535)),s=o=>()=>(ye(),o),r=new Array(65535);return r.fill(n,0,65535),t(r,null,e.Skip,()=>(ye(),null)),t(r,null,e.IdStart,nP),t(r,null,e.Digit,()=>ob(!1)),r[34]=r[39]=()=>rP(),r[96]=()=>NS(),r[33]=()=>ye()!==61?131121:ye()!==61?6553951:(ye(),6553953),r[61]=()=>ye()===62?(ye(),53):nt!==61?4194352:ye()!==61?6553950:(ye(),6553952),r[38]=()=>ye()!==38?6291481:(ye(),6553885),r[124]=()=>ye()!==124?6291482:(ye(),6553820),r[63]=()=>{if(ye()===46){const o=Eo(Ne+1);return o<=48||o>=57?(ye(),2162702):6291480}return nt!==63?6291480:(ye(),6553755)},r[46]=()=>ye()<=57&&nt>=48?ob(!0):nt===46?ye()!==46?12:(ye(),13):65547,r[60]=()=>ye()!==61?6554018:(ye(),6554020),r[62]=()=>ye()!==61?6554019:(ye(),6554021),r[37]=s(6554157),r[40]=s(2688009),r[41]=s(7340048),r[42]=()=>ye()===61?(ye(),4194360):nt===42?(ye(),6554223):6554156,r[43]=()=>ye()===43?(ye(),2228282):nt!==61?2490856:(ye(),4194358),r[44]=s(6291475),r[45]=()=>ye()===45?(ye(),2228283):nt!==61?2490857:(ye(),4194359),r[47]=()=>ye()!==61?6554158:(ye(),4194361),r[58]=s(6291478),r[59]=s(6291479),r[91]=s(2688020),r[93]=s(7340053),r[123]=s(524298),r[125]=s(7340047),{CharScanners:r,IdParts:i}})(),wn=wi.createInterface,ol=Object.freeze,{aliasTo:hb,singleton:Am}=Ji,As="Interpolation",HS="IsFunction",Cn="IsProperty",da="custom-element",Oi=ol({default:0,oneTime:1,toView:2,fromView:4,twoWay:6}),ku=wn("ITemplateCompiler"),BS=wn("IAttrMapper"),At=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${TP(n,...e)}`),EP={88:"AttributeParser is already initialized; cannot add patterns after initialization.",89:'Attribute pattern "{{0}}" has already been registered.',99:"Method {{0}} not implemented",157:"Binding command {{0}} has already been registered.",701:'Template compilation error in element "{{0:name}}": the root <template> cannot be a local element template.',702:'Template compilation error: attribute "{{0}}" is invalid on element surrogate.',703:'Template compilation error: template controller "{{0}}" is invalid on element surrogate.',704:'Template compilation error: Invalid command "{{0:.command}}" for <let>. Only to-view/bind supported.',706:'Template compilation error: detected projection with [au-slot="{{0}}"] attempted on a non custom element {{1}}.',707:"Template compilation error: creating binding to non-bindable property {{0}} on {{1}}.",708:'Template compilation error: the custom element "{{0}}" does not have any content other than local template(s).',709:'Template compilation error: local element template needs to be defined directly under root of element "{{0}}".',710:'Template compilation error: bindable properties of local element "{{0}}" template needs to be defined directly under <template>.',711:`Template compilation error: the attribute 'property' is missing in {{0:outerHTML}} in local element "{{1}}"`,712:"Template compilation error: Bindable property and attribute needs to be unique; found property: {{0}}, attribute: {{1}}",713:'Template compilation error: unknown binding command: "{{0}}".{{0:bindingCommandHelp}}',714:'Template compilation error: primary already exists on element/attribute "{{0}}"',715:'Template compilation error: the value of "as-custom-element" attribute cannot be empty for local element in element "{{0}}"',716:'Template compilation error: duplicate definition of the local template named "{{0}} in element {{1}}"',717:'Template compilation error: detected a usage of "<slot>" element without specifying shadow DOM options in element: {{0}}',718:'Spreading template controller "{{0}}" is not supported.',719:"Attribute {{0}} has been already registered for {{1:element}}",720:'Spreading syntax "...xxx" is reserved. Encountered "...{{0}}"',721:'Usage of $bindables is only allowed on custom element. Encountered: <{{0}} {{1}}="{{2}}">',722:"Invalid platform object provided to the compilation, no DOM API found.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?"},TP=(n,...e)=>{var i;let t=EP[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=AP(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function AP(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}var VS,zS,WS,US,GS;class Im{constructor(e,t,i,s){if(this.chars=e,this.repeat=t,this.isSymbol=i,this.isInverted=s,s)switch(e.length){case 0:this.has=this._hasOfNoneInverse;break;case 1:this.has=this._hasOfSingleInverse;break;default:this.has=this._hasOfMultipleInverse}else switch(e.length){case 0:this.has=this._hasOfNone;break;case 1:this.has=this._hasOfSingle;break;default:this.has=this._hasOfMultiple}}equals(e){return this.chars===e.chars&&this.repeat===e.repeat&&this.isSymbol===e.isSymbol&&this.isInverted===e.isInverted}_hasOfMultiple(e){return this.chars.includes(e)}_hasOfSingle(e){return this.chars===e}_hasOfNone(e){return!1}_hasOfMultipleInverse(e){return!this.chars.includes(e)}_hasOfSingleInverse(e){return this.chars!==e}_hasOfNoneInverse(e){return!0}}class IP{constructor(){this.parts=De,this._pattern="",this._currentRecord={},this._partsRecord={}}get pattern(){const e=this._pattern;return e===""?null:e}set pattern(e){e==null?(this._pattern="",this.parts=De):(this._pattern=e,this.parts=this._partsRecord[e])}append(e,t){const i=this._currentRecord;i[e]===void 0?i[e]=t:i[e]+=t}next(e){const t=this._currentRecord;let i;t[e]!==void 0&&(i=this._partsRecord,i[e]===void 0?i[e]=[t[e]]:i[e].push(t[e]),t[e]=void 0)}}class Rm{get _pattern(){return this._isEndpoint?this._patterns[0]:null}constructor(e,...t){this.charSpec=e,this._nextStates=[],this._types=null,this._isEndpoint=!1,this._patterns=t}findChild(e){const t=this._nextStates,i=t.length;let s=null,r=0;for(;r<i;++r)if(s=t[r],e.equals(s.charSpec))return s;return null}append(e,t){const i=this._patterns;i.includes(t)||i.push(t);let s=this.findChild(e);return s==null&&(s=new Rm(e,t),this._nextStates.push(s),e.repeat&&s._nextStates.push(s)),s}findMatches(e,t){const i=[],s=this._nextStates,r=s.length;let o=0,a=null,l=0,c=0;for(;l<r;++l)if(a=s[l],a.charSpec.has(e))if(i.push(a),o=a._patterns.length,c=0,a.charSpec.isSymbol)for(;c<o;++c)t.next(a._patterns[c]);else for(;c<o;++c)t.append(a._patterns[c],e);return i}}let db=class{constructor(e){this.text=e;const t=this._len=e.length,i=this._specs=[];let s=0;for(;t>s;++s)i.push(new Im(e[s],!1,!1,!1))}eachChar(e){const t=this._len,i=this._specs;let s=0;for(;t>s;++s)e(i[s])}},RP=class{constructor(e){this.text="PART",this._spec=new Im(e,!0,!1,!0)}eachChar(e){e(this._spec)}};class OP{constructor(e){this.text=e,this._spec=new Im(e,!1,!0,!1)}eachChar(e){e(this._spec)}}class xP{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const PP=wn("ISyntaxInterpreter",n=>n.singleton(kP));class kP{constructor(){this._rootState=new Rm(null),this._initialStates=[this._rootState]}add(e){e=e.slice(0).sort((u,p)=>u.pattern>p.pattern?1:-1);const t=e.length;let i,s,r,o,a,l,c,h=0,d;for(;t>h;){for(i=this._rootState,s=e[h],r=s.pattern,o=new xP,a=this._parse(s,o),l=a.length,c=u=>i=i.append(u,r),d=0;l>d;++d)a[d].eachChar(c);i._types=o,i._isEndpoint=!0,++h}}interpret(e){const t=new IP,i=e.length;let s=this._initialStates,r=0,o;for(;r<i&&(s=this._getNextStates(s,e.charAt(r),t),s.length!==0);++r);return s=s.filter(DP),s.length>0&&(s.sort(LP),o=s[0],o.charSpec.isSymbol||t.next(o._pattern),t.pattern=o._pattern),t}_getNextStates(e,t,i){const s=[];let r=null;const o=e.length;let a=0;for(;a<o;++a)r=e[a],s.push(...r.findMatches(t,i));return s}_parse(e,t){const i=[],s=e.pattern,r=s.length,o=e.symbols;let a=0,l=0,c="";for(;a<r;)c=s.charAt(a),o.length===0||!o.includes(c)?a===l&&c==="P"&&s.slice(a,a+4)==="PART"?(l=a=a+4,i.push(new RP(o)),++t.dynamics):++a:a!==l?(i.push(new db(s.slice(l,a))),++t.statics,l=a):(i.push(new OP(s.slice(l,a+1))),++t.symbols,l=++a);return l!==a&&(i.push(new db(s.slice(l,a))),++t.statics),i}}function DP(n){return n._isEndpoint}function LP(n,e){const t=n._types,i=e._types;return t.statics!==i.statics?i.statics-t.statics:t.dynamics!==i.dynamics?i.dynamics-t.dynamics:t.symbols!==i.symbols?i.symbols-t.symbols:0}class mi{constructor(e,t,i,s,r=null){this.rawName=e,this.rawValue=t,this.target=i,this.command=s,this.parts=r}}const NP=wn("IAttributePattern"),Om=wn("IAttributeParser",n=>n.singleton(MP));class MP{constructor(){this._cache={},this._patterns={},this._initialized=!1,this._allDefinitions=[],this._interpreter=$(PP),this._container=$(Bs)}registerPattern(e,t){if(this._initialized)throw At(88);const i=this._patterns;for(const{pattern:s}of e){if(i[s]!=null)throw At(89,s);i[s]={patternType:t}}this._allDefinitions.push(...e)}_initialize(){this._interpreter.add(this._allDefinitions);const e=this._container;for(const[,t]of Object.entries(this._patterns))t.pattern=e.get(t.patternType)}parse(e,t){this._initialized||(this._initialize(),this._initialized=!0);let i=this._cache[e];i==null&&(i=this._cache[e]=this._interpreter.interpret(e));const s=i.pattern;return s==null?new mi(e,t,e,null,null):this._patterns[s].pattern[s](e,t,i.parts)}}const Ms=ol({name:er("attribute-pattern"),create(n,e){return{register(t){t.get(Om).registerPattern(n,e),Am(NP,e).register(t)}}}});class Jf{"PART.PART"(e,t,i){return new mi(e,t,i[0],i[1])}"PART.PART.PART"(e,t,i){return new mi(e,t,`${i[0]}.${i[1]}`,i[2])}}VS=Symbol.metadata;Jf[VS]={[Hs]:Ms.create([{pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."}],Jf)};class eg{ref(e,t,i){return new mi(e,t,"element","ref")}"PART.ref"(e,t,i){let s=i[0];return s==="view-model"&&(s="component",console.warn(`[aurelia] Detected view-model.ref usage: "${e}=${t}". This is deprecated and component.ref should be used instead`)),new mi(e,t,s,"ref")}}zS=Symbol.metadata;eg[zS]={[Hs]:Ms.create([{pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."}],eg)};class tg{"PART.trigger:PART"(e,t,i){return new mi(e,t,i[0],"trigger",i)}"PART.capture:PART"(e,t,i){return new mi(e,t,i[0],"capture",i)}}WS=Symbol.metadata;tg[WS]={[Hs]:Ms.create([{pattern:"PART.trigger:PART",symbols:".:"},{pattern:"PART.capture:PART",symbols:".:"}],tg)};class ub{":PART"(e,t,i){return new mi(e,t,i[0],"bind")}}US=Symbol.metadata;ub[US]={[Hs]:Ms.create([{pattern:":PART",symbols:":"}],ub)};class pb{"@PART"(e,t,i){return new mi(e,t,i[0],"trigger")}"@PART:PART"(e,t,i){return new mi(e,t,i[0],"trigger",[i[0],"trigger",...i.slice(1)])}}GS=Symbol.metadata;pb[GS]={[Hs]:Ms.create([{pattern:"@PART",symbols:"@"},{pattern:"@PART:PART",symbols:"@:"}],pb)};const ig=Gi.get,fb=Gi.define,jS="ra",KS="rb",YS="rc",qS="rd",XS="re",QS="rf",xm="rg",ZS="ri",JS="rj",eE="rk",tE="rl",iE="ha",sE="hb",nE="hc",FP="hd",rE="he",oE="hf",aE="hg",lE="hs",cE="hp",hE="svb",Yt=ol({hydrateElement:jS,hydrateAttribute:KS,hydrateTemplateController:YS,hydrateLetElement:qS,setProperty:XS,interpolation:QS,propertyBinding:xm,letBinding:ZS,refBinding:JS,iteratorBinding:eE,multiAttr:tE,textBinding:iE,listenerBinding:sE,attributeBinding:nE,stylePropertyBinding:FP,setAttribute:rE,setClassAttribute:oE,setStyleAttribute:aE,spreadTransferedBinding:lE,spreadElementProp:cE,spreadValueBinding:hE}),Vo=wn("Instruction");class Rn{constructor(e,t){this.from=e,this.to=t,this.type=QS}}class Qc{constructor(e,t,i){this.from=e,this.to=t,this.mode=i,this.type=xm}}class $P{constructor(e,t,i){this.forOf=e,this.to=t,this.props=i,this.type=eE}}class HP{constructor(e,t){this.from=e,this.to=t,this.type=JS}}class Zo{constructor(e,t){this.value=e,this.to=t,this.type=XS}}class BP{constructor(e,t,i){this.value=e,this.to=t,this.command=i,this.type=tE}}class VP{constructor(e,t,i,s,r,o){this.res=e,this.props=t,this.projections=i,this.containerless=s,this.captures=r,this.data=o,this.type=jS}}class Ep{constructor(e,t,i){this.res=e,this.alias=t,this.props=i,this.type=KS}}class zP{constructor(e,t,i,s){this.def=e,this.res=t,this.alias=i,this.props=s,this.type=YS}}class WP{constructor(e,t){this.instructions=e,this.toBindingContext=t,this.type=qS}}class gb{constructor(e,t){this.from=e,this.to=t,this.type=ZS}}class UP{constructor(e){this.from=e,this.type=iE}}class dE{constructor(e,t,i,s){this.from=e,this.to=t,this.capture=i,this.modifier=s,this.type=sE}}class mb{constructor(e,t){this.value=e,this.to=t,this.type=rE}}class _b{constructor(e){this.value=e,this.type=oE}}class vb{constructor(e){this.value=e,this.type=aE}}class Pm{constructor(e,t,i){this.attr=e,this.from=t,this.to=i,this.type=nE}}class bb{constructor(){this.type=lE}}class wb{constructor(e){this.instruction=e,this.type=cE}}class sg{constructor(e,t){this.target=e,this.from=t,this.type=hE}}class Dd{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return $e(e)?(i=e,s={name:i}):(i=e.name,s=e),new Dd(t,gr(ng(t,"name"),i),Vt(ng(t,"aliases"),s.aliases,t.aliases),Da(i))}register(e,t){const i=this.Type,s=typeof t=="string"?Da(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${At(157,this.name)}`):e.register(e.has(i,!1)?null:Am(i,i),hb(i,s),...r.map(o=>hb(i,Da(o))))}}const _i="binding-command",cd=er(_i),Da=n=>`${cd}:${n}`,ng=(n,e)=>ig(mm.annotation.keyFor(e),n),rg=(()=>{const n="__au_static_resource__",e=(t,i,s)=>{var o;let r=ig(n,t);return r==null&&((o=t.$au)==null?void 0:o.type)===i&&(r=s(t.$au,t),fb(r,t,n)),r};return ol({name:cd,keyFrom:Da,define(t,i){const s=Dd.create(t,i),r=s.Type;return fb(s,r,cd,Zs),r},getAnnotation:ng,find(t,i){const s=t.find(_i,i);return s==null?null:ig(cd,s)??e(s,_i,Dd.create)??null},get(t,i){try{return t.get(Ba(Da(i)))}catch(s){throw console.log(`


[DEV:aurelia] Cannot retrieve binding command with name




`,i),s}return t.get(Ba(Da(i)))}})})();class uE{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Rt(r):o,e.bindable==null?r=i.map(e.node,r)??Rt(r):r=e.bindable.name,new Qc(t.parse(o,Cn),r,1)}}uE.$au={type:_i,name:"one-time"};class pE{get ignoreAttr(){return!1}build(e,t,i){let r=e.attr.target,o=e.attr.rawValue;return o=o===""?Rt(r):o,e.bindable==null?r=i.map(e.node,r)??Rt(r):r=e.bindable.name,new Qc(t.parse(o,Cn),r,2)}}pE.$au={type:_i,name:"to-view"};class fE{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?Rt(r):o,e.bindable==null?r=i.map(e.node,r)??Rt(r):r=e.bindable.name,new Qc(t.parse(o,Cn),r,4)}}fE.$au={type:_i,name:"from-view"};class gE{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr;let r=s.target,o=s.rawValue;return o=o===""?Rt(r):o,e.bindable==null?r=i.map(e.node,r)??Rt(r):r=e.bindable.name,new Qc(t.parse(o,Cn),r,6)}}gE.$au={type:_i,name:"two-way"};class mE{get ignoreAttr(){return!1}build(e,t,i){const s=e.attr,r=e.bindable;let o=s.rawValue,a=s.target,l,c;return o=o===""?Rt(a):o,r==null?(c=i.isTwoWay(e.node,a)?6:2,a=i.map(e.node,a)??Rt(a)):(l=e.def.defaultBindingMode??0,c=r.mode===0||r.mode==null?l==null||l===0?2:l:r.mode,a=r.name),new Qc(t.parse(o,Cn),a,$e(c)?Oi[c]??0:c)}}mE.$au={type:_i,name:"bind"};class _E{constructor(){this._attrParser=$(Om)}get ignoreAttr(){return!1}build(e,t){const i=e.bindable===null?Rt(e.attr.target):e.bindable.name,s=t.parse(e.attr.rawValue,"IsIterator");let r=De;if(s.semiIdx>-1){const o=e.attr.rawValue.slice(s.semiIdx+1),a=o.indexOf(":");if(a>-1){const l=o.slice(0,a).trim(),c=o.slice(a+1).trim(),h=this._attrParser.parse(l,c);r=[new BP(c,h.target,h.command)]}}return new $P(s,i,r)}}_E.$au={type:_i,name:"for"};class vE{get ignoreAttr(){return!0}build(e,t){var i;return new dE(t.parse(e.attr.rawValue,HS),e.attr.target,!1,((i=e.attr.parts)==null?void 0:i[2])??null)}}vE.$au={type:_i,name:"trigger"};class bE{get ignoreAttr(){return!0}build(e,t){var i;return new dE(t.parse(e.attr.rawValue,HS),e.attr.target,!0,((i=e.attr.parts)==null?void 0:i[2])??null)}}bE.$au={type:_i,name:"capture"};class wE{get ignoreAttr(){return!0}build(e,t){const i=e.attr,s=i.target;let r=i.rawValue;return r=r===""?Rt(s):r,new Pm(s,t.parse(r,Cn),s)}}wE.$au={type:_i,name:"attr"};class CE{get ignoreAttr(){return!0}build(e,t){return new Pm("style",t.parse(e.attr.rawValue,Cn),e.attr.target)}}CE.$au={type:_i,name:"style"};class yE{get ignoreAttr(){return!0}build(e,t){return new Pm("class",t.parse(e.attr.rawValue,Cn),e.attr.target)}}yE.$au={type:_i,name:"class"};class SE{get ignoreAttr(){return!0}build(e,t){return new HP(t.parse(e.attr.rawValue,Cn),e.attr.target)}}SE.$au={type:_i,name:"ref"};class EE{get ignoreAttr(){return!1}build(e){return new sg(e.attr.target,e.attr.rawValue)}}EE.$au={type:_i,name:"spread"};const GP=wn("ITemplateElementFactory",n=>n.singleton(jP)),Cb={};class jP{constructor(){this.p=$(nl),this._template=this.t()}t(){return this.p.document.createElement("template")}createTemplate(e){var i;if($e(e)){let s=Cb[e];if(s===void 0){const r=this._template;r.innerHTML=e;const o=r.content.firstElementChild;t(o)?(this._template=this.t(),s=r):(r.content.removeChild(o),s=o),Cb[e]=s}return s.cloneNode(!0)}if(e.nodeName!=="TEMPLATE"){const s=this.t();return s.content.appendChild(e),s}return(i=e.parentNode)==null||i.removeChild(e),e.cloneNode(!0);function t(s){if(s==null||s.nodeName!=="TEMPLATE"||s.nextElementSibling!=null)return!0;const o=s.previousSibling;if(o!=null)switch(o.nodeType){case 3:return o.textContent.trim().length>0}const a=s.nextSibling;if(a!=null)switch(a.nodeType){case 3:return a.textContent.trim().length>0}return!1}}}const Tp="au-start",Ap="au-end",Ip=(n,e,t)=>n.insertBefore(e,t),yb=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},Kr=(n,e)=>n.content.appendChild(e),Sb=(n,e)=>{const t=e.length;let i=0;for(;t>i;)n.content.appendChild(e[i]),++i},Eb=n=>n.nodeType===1,Tb=n=>n.nodeType===3,bl="au-slot",Ab="default",wl=(n=>()=>`anonymous-${++n}`)(0);class TE{constructor(){this.debug=!1,this.resolveResources=!0}compile(e,t){var d,u;if(e.template==null||e.needsCompile===!1)return e;const i=new Ld(e,t,null,null,void 0),s=$e(e.template)||!e.enhance?i._templateFactory.createTemplate(e.template):e.template,r=s.nodeName===Rp&&s.content!=null,o=r?s.content:s,a=ZP.findAll(t),l=a.length;let c=0;if(l>0)for(;l>c;)(u=(d=a[c]).compiling)==null||u.call(d,s),++c;if(s.hasAttribute(og))throw At(701,e);return this._compileLocalElement(o,i),this._compileNode(o,i),{...e,name:e.name||wl(),dependencies:(e.dependencies??De).concat(i.deps??De),instructions:i.rows,surrogates:r?this._compileSurrogate(s,i):De,template:s,hasSlots:i.hasSlot,needsCompile:!1}}compileSpread(e,t,i,s,r){const o=new Ld(e,i,null,null,void 0),a=[],l=r??o._findElement(s.nodeName.toLowerCase()),c=l!==null,h=o._exprParser,d=t.length;let u=0,p,f=null,g,m,_,b,C,v=null,y,S,A,P;for(;d>u;++u){if(p=t[u],A=p.target,P=p.rawValue,A==="...$attrs"){a.push(new bb);continue}if(v=o._getCommand(p),v!==null&&v.ignoreAttr){oe.node=s,oe.attr=p,oe.bindable=null,oe.def=null,a.push(v.build(oe,o._exprParser,o._attrMapper));continue}if(c&&(_=o._getBindables(l),b=_.attrs[A],b!==void 0)){v==null?(y=h.parse(P,As),a.push(new wb(y==null?new Zo(P,b.name):new Rn(y,b.name)))):(oe.node=s,oe.attr=p,oe.bindable=b,oe.def=l,a.push(new wb(v.build(oe,o._exprParser,o._attrMapper))));continue}if(f=o._findAttr(A),f!==null){if(f.isTemplateController)throw At(9998,A);_=o._getBindables(f),S=f.noMultiBindings===!1&&v===null&&Op(P),S?m=this._compileMultiBindings(s,P,f,o):(C=_.primary,v===null?(y=h.parse(P,As),m=[y===null?new Zo(P,C.name):new Rn(y,C.name)]):(oe.node=s,oe.attr=p,oe.bindable=C,oe.def=f,m=[v.build(oe,o._exprParser,o._attrMapper)])),(g??(g=[])).push(new Ep(this.resolveResources?f:f.name,f.aliases!=null&&f.aliases.includes(A)?A:void 0,m));continue}if(v==null)if(y=h.parse(P,As),y!=null)a.push(new Rn(y,o._attrMapper.map(s,A)??Rt(A)));else switch(A){case"class":a.push(new _b(P));break;case"style":a.push(new vb(P));break;default:a.push(new mb(P,A))}else oe.node=s,oe.attr=p,oe.bindable=null,oe.def=null,a.push(v.build(oe,o._exprParser,o._attrMapper))}return yh(),g!=null?g.concat(a):a}_compileSurrogate(e,t){const i=[],s=e.attributes,r=t._exprParser;let o=s.length,a=0,l,c,h,d,u=null,p,f,g,m,_=null,b,C,v,y;for(;o>a;++a){if(l=s[a],c=l.name,h=l.value,d=t._attrParser.parse(c,h),v=d.target,y=d.rawValue,YP[v])throw At(702,c);if(_=t._getCommand(d),_!==null&&_.ignoreAttr){oe.node=e,oe.attr=d,oe.bindable=null,oe.def=null,i.push(_.build(oe,t._exprParser,t._attrMapper));continue}if(u=t._findAttr(v),u!==null){if(u.isTemplateController)throw At(703,v);g=t._getBindables(u),C=u.noMultiBindings===!1&&_===null&&Op(y),C?f=this._compileMultiBindings(e,y,u,t):(m=g.primary,_===null?(b=r.parse(y,As),f=b===null?y===""?[]:[new Zo(y,m.name)]:[new Rn(b,m.name)]):(oe.node=e,oe.attr=d,oe.bindable=m,oe.def=u,f=[_.build(oe,t._exprParser,t._attrMapper)])),e.removeAttribute(c),--a,--o,(p??(p=[])).push(new Ep(this.resolveResources?u:u.name,u.aliases!=null&&u.aliases.includes(v)?v:void 0,f));continue}if(_===null)if(b=r.parse(y,As),b!=null)e.removeAttribute(c),--a,--o,i.push(new Rn(b,t._attrMapper.map(e,v)??Rt(v)));else switch(c){case"class":i.push(new _b(y));break;case"style":i.push(new vb(y));break;default:i.push(new mb(y,c))}else oe.node=e,oe.attr=d,oe.bindable=null,oe.def=null,i.push(_.build(oe,t._exprParser,t._attrMapper))}return yh(),p!=null?p.concat(i):i}_compileNode(e,t){switch(e.nodeType){case 1:switch(e.nodeName){case"LET":return this._compileLet(e,t);default:return this._compileElement(e,t)}case 3:return this._compileText(e,t);case 11:{let i=e.firstChild;for(;i!==null;)i=this._compileNode(i,t);break}}return e.nextSibling}_compileLet(e,t){const i=e.attributes,s=i.length,r=[],o=t._exprParser;let a=!1,l=0,c,h,d,u,p,f,g,m;for(;s>l;++l){if(c=i[l],d=c.name,u=c.value,d==="to-binding-context"){a=!0;continue}if(h=t._attrParser.parse(d,u),f=h.target,g=h.rawValue,p=t._getCommand(h),p!==null){if(h.command==="bind")r.push(new gb(o.parse(g,Cn),Rt(f)));else throw At(704,h);continue}m=o.parse(g,As),m===null&&console.warn(`[DEV:aurelia] Property "${f}" is declared with literal string ${g}. Did you mean ${f}.bind="${g}"?`),r.push(new gb(m===null?new ii(g):m,Rt(f)))}return t.rows.push([new WP(r,a)]),this._markAsTarget(e,t).nextSibling}_compileElement(e,t){var z,E,w,T,B,U,Q,le;const i=e.nextSibling,s=(e.getAttribute("as-element")??e.nodeName).toLowerCase(),r=t._findElement(s),o=r!==null,a=o&&r.shadowOptions!=null,l=r==null?void 0:r.capture,c=l!=null&&typeof l!="boolean",h=l?[]:De,d=t._exprParser,u=this.debug?rn:()=>{e.removeAttribute(b),--m,--g};let p=e.attributes,f,g=p.length,m=0,_,b,C,v,y,S,A=null,P=!1,F,H,W,J,Y,ae,ue,te=null,V,re,Z,_e,ge=!0,x=!1,M=!1,O=!1,D,Ye=0;if(s==="slot"){if(t.root.def.shadowOptions==null)throw At(717,t.root.def.name);t.root.hasSlot=!0}for(o&&(D={},ge=(z=r.processContent)==null?void 0:z.call(r.Type,e,t.p,D),p=e.attributes,g=p.length);g>m;++m){switch(_=p[m],b=_.name,C=_.value,b){case"as-element":case"containerless":u(),x=x||b==="containerless";continue}if(v=t._attrParser.parse(b,C),te=t._getCommand(v),Z=v.target,_e=v.rawValue,l&&(!c||c&&l(Z))){if(te!=null&&te.ignoreAttr){u(),h.push(v);continue}if(M=Z!==bl&&Z!=="slot"&&((Ye=Z.indexOf("..."))===-1||Ye===0&&Z==="...$attrs"),M&&(V=t._getBindables(r),V.attrs[Z]==null&&!((E=t._findAttr(Z))!=null&&E.isTemplateController))){u(),h.push(v);continue}}if(Z==="...$attrs"){(y??(y=[])).push(new bb),u();continue}if(te!=null&&te.ignoreAttr){oe.node=e,oe.attr=v,oe.bindable=null,oe.def=null,(y??(y=[])).push(te.build(oe,t._exprParser,t._attrMapper)),u();continue}if(Z.indexOf("...")===0){if(o&&(Z=Z.slice(3))!=="$element"){(S??(S=[])).push(new sg("$bindables",Z==="$bindables"?_e:Z)),u();continue}throw(Z==="$bindable"||Z==="bindables")&&console.warn(`[DEV:aurelia] Detected usage of ${Z} on <${e.nodeName}>, did you mean "$bindables"?`),At(720,Z)}if(o){if(V=t._getBindables(r),F=V.attrs[Z],F!==void 0){te===null?(ae=d.parse(_e,As),(S??(S=[])).push(ae==null?new Zo(_e,F.name):new Rn(ae,F.name))):(oe.node=e,oe.attr=v,oe.bindable=F,oe.def=r,(S??(S=[])).push(te.build(oe,t._exprParser,t._attrMapper))),u(),A=t._findAttr(Z),A!==null&&console.warn(`[DEV:aurelia] Binding with bindable "${Z}" on custom element "${r.name}" is ambiguous.There is a custom attribute with the same name.`);continue}if(Z==="$bindables"){if(te!=null){oe.node=e,oe.attr=v,oe.bindable=null,oe.def=r;{const q=te.build(oe,t._exprParser,t._attrMapper);q instanceof sg||console.warn(`[DEV:aurelia] Binding with "$bindables" on custom element "${r.name}" with command ${v.command}  did not result in a spread binding instruction. This likely won't work as expected.`),(S??(S=[])).push(q)}}else console.warn(`[DEV:aurelia] Usage of "$bindables" on custom element "<${r.name}>" is ignored.`);u();continue}}if(Z==="$bindables")throw At(721,e.nodeName,Z,_e);if(A=t._findAttr(Z),A!==null){V=t._getBindables(A),P=A.noMultiBindings===!1&&te===null&&Op(_e),P?W=this._compileMultiBindings(e,_e,A,t):(re=V.primary,te===null?(ae=d.parse(_e,As),W=ae===null?_e===""?[]:[new Zo(_e,re.name)]:[new Rn(ae,re.name)]):(oe.node=e,oe.attr=v,oe.bindable=re,oe.def=A,W=[te.build(oe,t._exprParser,t._attrMapper)])),u(),A.isTemplateController?(J??(J=[])).push(new zP(KP,this.resolveResources?A:A.name,void 0,W)):(H??(H=[])).push(new Ep(this.resolveResources?A:A.name,A.aliases!=null&&A.aliases.includes(Z)?Z:void 0,W));continue}if(te===null){ae=d.parse(_e,As),ae!=null&&(u(),(y??(y=[])).push(new Rn(ae,t._attrMapper.map(e,Z)??Rt(Z))));continue}oe.node=e,oe.attr=v,oe.bindable=null,oe.def=null,(y??(y=[])).push(te.build(oe,t._exprParser,t._attrMapper)),u()}yh(),this._shouldReorderAttrs(e,y)&&y!=null&&y.length>1&&this._reorder(e,y),o&&(ue=new VP(this.resolveResources?r:r.name,S??De,null,x,h,D)),(y!=null||ue!=null||H!=null)&&(f=De.concat(ue??De,H??De,y??De),O=!0);let L;if(J!=null){g=J.length-1,m=g,Y=J[m];let q;Ib(e)?(q=t.t(),Sb(q,[t._marker(),t._comment(Tp),t._comment(Ap)])):(this._replaceByMarker(e,t),e.nodeName==="TEMPLATE"?q=e:(q=t.t(),Kr(q,e)));const Ie=q,fe=t._createChild(f==null?[]:[f]);let ke,Ue,Pt=!1,Jt,mt,lt,Xe,Ft,kt,$t=0,lr=0,Ht=e.firstChild,fl=!1;if(ge!==!1)for(;Ht!==null;){if(Ue=Eb(Ht)?Ht.getAttribute(bl):null,Pt=Ue!==null||o&&!a,ke=Ht.nextSibling,Pt){if(!o)throw At(706,Ue,s);(w=Ht.removeAttribute)==null||w.call(Ht,bl),fl=Tb(Ht)&&Ht.textContent.trim()==="",fl||((T=mt??(mt={}))[B=Ue||Ab]??(T[B]=[])).push(Ht),e.removeChild(Ht)}Ht=ke}if(mt!=null){Jt={};for(Ue in mt){for(q=t.t(),lt=mt[Ue],$t=0,lr=lt.length;lr>$t;++$t)Xe=lt[$t],Xe.nodeName==="TEMPLATE"?Xe.attributes.length>0?Kr(q,Xe):Kr(q,Xe.content):Kr(q,Xe);kt=t._createChild(),this._compileNode(q.content,kt),Jt[Ue]={name:wl(),type:da,template:q,instructions:kt.rows,needsCompile:!1}}ue.projections=Jt}if(O&&(o&&(x||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),L=!o||!r.containerless&&!x&&ge!==!1,L)if(e.nodeName===Rp)this._compileNode(e.content,fe);else for(Ht=e.firstChild;Ht!==null;)Ht=this._compileNode(Ht,fe);for(Y.def={name:wl(),type:da,template:Ie,instructions:fe.rows,needsCompile:!1};m-- >0;)Y=J[m],q=t.t(),Ft=t._marker(),Sb(q,[Ft,t._comment(Tp),t._comment(Ap)]),Y.def={name:wl(),type:da,template:q,needsCompile:!1,instructions:[[J[m+1]]]};t.rows.push([Y])}else{f!=null&&t.rows.push(f);let q=e.firstChild,Ie,fe,ke=!1,Ue=null,Pt,Jt,mt,lt,Xe,Ft=!1,kt=0,$t=0;if(ge!==!1)for(;q!==null;){if(fe=Eb(q)?q.getAttribute(bl):null,ke=fe!==null||o&&!a,Ie=q.nextSibling,ke){if(!o)throw At(706,fe,s);(U=q.removeAttribute)==null||U.call(q,bl),Ft=Tb(q)&&q.textContent.trim()==="",Ft||((Q=Pt??(Pt={}))[le=fe||Ab]??(Q[le]=[])).push(q),e.removeChild(q)}q=Ie}if(Pt!=null){Ue={};for(fe in Pt){for(lt=t.t(),Jt=Pt[fe],kt=0,$t=Jt.length;$t>kt;++kt)mt=Jt[kt],mt.nodeName===Rp?mt.attributes.length>0?Kr(lt,mt):Kr(lt,mt.content):Kr(lt,mt);Xe=t._createChild(),this._compileNode(lt.content,Xe),Ue[fe]={name:wl(),type:da,template:lt,instructions:Xe.rows,needsCompile:!1}}ue.projections=Ue}if(O&&(o&&(x||r.containerless)?this._replaceByMarker(e,t):this._markAsTarget(e,t)),L=!o||!r.containerless&&!x&&ge!==!1,L&&e.childNodes.length>0)for(q=e.firstChild;q!==null;)q=this._compileNode(q,t)}return i}_compileText(e,t){const i=e.parentNode,s=t._exprParser.parse(e.textContent,As),r=e.nextSibling;let o,a,l,c,h;if(s!==null){for({parts:o,expressions:a}=s,(h=o[0])&&Ip(i,t._text(h),e),l=0,c=a.length;c>l;++l)yb(i,e,[t._marker(),t._text(" ")]),(h=o[l+1])&&Ip(i,t._text(h),e),t.rows.push([new UP(a[l])]);i.removeChild(e)}return r}_compileMultiBindings(e,t,i,s){const r=s._getBindables(i),o=t.length,a=[];let l,c,h=0,d=0,u,p,f,g;for(let m=0;m<o;++m)if(d=t.charCodeAt(m),d===92)++m;else if(d===58){for(l=t.slice(h,m);t.charCodeAt(++m)<=32;);for(h=m;m<o;++m)if(d=t.charCodeAt(m),d===92)++m;else if(d===59){c=t.slice(h,m);break}if(c===void 0&&(c=t.slice(h)),p=s._attrParser.parse(l,c),f=s._getCommand(p),g=r.attrs[p.target],g==null)throw At(707,p.target,i.name);for(f===null?(u=s._exprParser.parse(c,As),a.push(u===null?new Zo(c,g.name):new Rn(u,g.name))):(oe.node=e,oe.attr=p,oe.bindable=g,oe.def=i,a.push(f.build(oe,s._exprParser,s._attrMapper)));m<o&&t.charCodeAt(++m)<=32;);h=m,l=void 0,c=void 0}return yh(),a}_compileLocalElement(e,t){const i=t.root.def.name,s=e,r=Pa(s.querySelectorAll("template[as-custom-element]")),o=r.length;if(o===0)return;if(o===s.childElementCount)throw At(708,i);const a=new Set,l=[];for(const h of r){if(h.parentNode!==s)throw At(709,i);const d=QP(i,h,a),u=h.content,p=Pa(u.querySelectorAll("bindable")),f=new Set,g=new Set,m=p.reduce((b,C)=>{if(C.parentNode!==u)throw At(710,d);const v=C.getAttribute("name");if(v===null)throw At(711,C,d);const y=C.getAttribute("attribute");if(y!==null&&g.has(y)||f.has(v))throw At(712,f,y);y!==null&&g.add(y),f.add(v);const S=Pa(C.attributes).filter(A=>!Rb.includes(A.name));return S.length>0&&console.warn(`[DEV:aurelia] The attribute(s) ${S.map(A=>A.name).join(", ")} will be ignored for ${C.outerHTML}. Only ${Rb.join(", ")} are processed.`),C.remove(),b[v]={name:v,attribute:y??void 0,mode:C.getAttribute("mode")??"default"},b},{});class _{}_.$au={type:da,name:d,template:h,bindables:m},Reflect.defineProperty(_,"name",{value:dS(d)}),l.push(_),s.removeChild(h)}const c=(t.root.def.dependencies??[]).concat(t.root.def.Type==null?De:[t.root.def.Type]);for(const h of l)h.dependencies=c.concat(l.filter(d=>d!==h)),t._addLocalDep(h)}_shouldReorderAttrs(e,t){const i=e.nodeName;return i==="INPUT"&&qP[e.type]===1||i==="SELECT"&&(e.hasAttribute("multiple")||(t==null?void 0:t.some(s=>s.type===xm&&s.to==="multiple")))}_reorder(e,t){switch(e.nodeName){case"INPUT":{const i=t;let s,r,o=0,a;for(let l=0;l<i.length&&o<3;l++)switch(a=i[l],a.to){case"model":case"value":case"matcher":s=l,o++;break;case"checked":r=l,o++;break}r!==void 0&&s!==void 0&&r<s&&([i[s],i[r]]=[i[r],i[s]]);break}case"SELECT":{const i=t;let s=0,r=0,o=0,a;for(let l=0;l<i.length&&o<2;++l){switch(a=i[l],a.to){case"multiple":r=l,o++;break;case"value":s=l,o++;break}o===2&&s<r&&([i[r],i[s]]=[i[s],i[r]])}}}}_markAsTarget(e,t){return Ip(e.parentNode,t._comment("au*"),e),e}_replaceByMarker(e,t){if(Ib(e))return e;const i=e.parentNode,s=t._marker();return yb(i,e,[s,t._comment(Tp),t._comment(Ap)]),i.removeChild(e),s}}TE.register=Xc(ku);const Rp="TEMPLATE",Ib=n=>n.nodeValue==="au*";class Ld{constructor(e,t,i,s,r){var a;this.hasSlot=!1,this.deps=null;const o=i!==null;if(this.c=t,this.root=s===null?this:s,this.def=e,this.parent=i,this._resourceResolver=o?i._resourceResolver:t.get(AE),this._commandResolver=o?i._commandResolver:t.get(XP),this._templateFactory=o?i._templateFactory:t.get(GP),this._attrParser=o?i._attrParser:t.get(Om),this._exprParser=o?i._exprParser:t.get(rl),this._attrMapper=o?i._attrMapper:t.get(BS),this._logger=o?i._logger:t.get(Tr),typeof((a=(this.p=o?i.p:t.get(nl)).document)==null?void 0:a.nodeType)!="number")throw At(722);this.localEls=o?i.localEls:new Set,this.rows=r??[]}_addLocalDep(e){var t;return((t=this.root).deps??(t.deps=[])).push(e),this.root.c.register(e),this}_text(e){return this.p.document.createTextNode(e)}_comment(e){return this.p.document.createComment(e)}_marker(){return this._comment("au*")}h(e){const t=this.p.document.createElement(e);return e==="template"&&this.p.document.adoptNode(t.content),t}t(){return this.h("template")}_findElement(e){return this._resourceResolver.el(this.c,e)}_findAttr(e){return this._resourceResolver.attr(this.c,e)}_getBindables(e){return this._resourceResolver.bindables(e)}_createChild(e){return new Ld(this.def,this.c,this,this.root,e)}_getCommand(e){const t=e.command;return t===null?null:this._commandResolver.get(this.c,t)}}const Op=n=>{const e=n.length;let t=0,i=0;for(;e>i;){if(t=n.charCodeAt(i),t===92)++i;else{if(t===58)return!0;if(t===36&&n.charCodeAt(i+1)===123)return!1}++i}return!1},yh=()=>{oe.node=oe.attr=oe.bindable=oe.def=null},KP={name:"unnamed",type:da},oe={node:null,attr:null,bindable:null,def:null},YP={id:!0,name:!0,"au-slot":!0,"as-element":!0},qP={checkbox:1,radio:1},AE=wn("IResourceResolver"),XP=wn("IBindingCommandResolver",n=>{class e{constructor(){this._cache=new WeakMap}get(i,s){let r=this._cache.get(i);return r||this._cache.set(i,r={}),s in r?r[s]:r[s]=rg.get(i,s)}}return n.singleton(e)}),Rb=ol(["name","attribute","mode"]),og="as-custom-element",QP=(n,e,t)=>{const i=e.getAttribute(og);if(i===null||i==="")throw At(715,n);if(t.has(i))throw At(716,i,n);return t.add(i),e.removeAttribute(og),i},Ob=wn("ITemplateCompilerHooks"),ZP=ol({name:er("compiler-hooks"),define(n){return{register(e){Am(Ob,n).register(e)}}},findAll(n){return n.get(UO(Ob))}}),JP=Object.prototype.hasOwnProperty,Ar=Reflect.defineProperty;function bs(n,e,t){return Ar(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t}function Nn(n,e,t){e in n||bs(n,e,t)}const IE=Object.assign,km=Object.freeze,To=String,Du=wi.createInterface,ek=Gi.get,tk=Gi.define,Re=(n,...e)=>new Error(`AUR${To(n).padStart(4,"0")}: ${sk(n,...e)}`),ik={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:'Expression error: invalid start: "{{0}}"',152:'Expression error: spread operator is not supported: "{{0}}"',153:'Expression error: expected identifier: "{{0}}"',154:'Expression error: invalid member expression: "{{0}}"',155:'Expression error: unexpected end of expression: "{{0}}"',156:'Expression error: unconsumed token: "{{0}}" at position {{1}} of "{{2}}"',157:"Expression error: invalid empty expression. Empty expression is only valid in event bindings (trigger, delegate, capture etc...)",158:'Expression error: left hand side of expression is not assignable: "{{0}}"',159:'Expression error: expected identifier to come after value converter operator: "{{0}}"',160:"Expression error: expected identifier to come after binding behavior operator: {{0}}",161:'Expression error: unexpected keyword "of": "{{0}}"',162:'Expression error: unexpected keyword "import": "{{0}}"',163:'Expression error: invalid BindingIdentifier at left hand side of "of": "{{0}}" | kind: {{1}}',164:'Expression error: invalid or unsupported property definition in object literal: "{{0}}"',165:'Expression error: unterminated quote in string literal: "{{0}}"',166:'Expression error: unterminated template string: "{{0}}"',167:'Expression error: missing expected token "{{0}}" in "{{1}}"',168:'Expression error: unexpected character: "{{0}}"',170:'Expression error: unexpected "{{0}}" at position "{{1}}" for destructuring assignment in "{{2}}"',171:'Expression error: unexpected {{0}} at position "{{1}}" for optional chain in "{{2}}"',172:'Expression error: invalid tagged template on optional chain in "{{1}}"',173:'Expression error: invalid arrow parameter list in "{{0}}"',174:'Expression error: arrow function with default parameters is not supported: "{{0}}"',175:'Expression error: arrow function with destructuring parameters is not supported: "{{0}}"',176:'Expression error: rest parameter must be last formal parameter in arrow function: "{{0}}"',178:'Expression error: arrow function with function body is not supported: "{{0}}"',179:`Expression error: unexpected token '.' at position "{{1}}" in "{{0}}"`,199:"Trying to observe property {{0}} on null/undefined",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",206:"Trying to switch to a null/undefined connectable",207:"Trying to enter an active connectable",208:"Trying to pop a null/undefined connectable",209:"Trying to exit an inactive connectable",210:"Unrecognised collection type {{0:toString}}.",217:"There is no registration for IDirtyChecker interface. If you want to use your own dirty checker, make sure you register it.",218:"Dirty checked is not permitted in this application. Property key {{0}} is being dirty checked.",219:"Trying to set value for property {{0}} in dirty checker",220:'Map/Set "size" is a readonly property',221:'Trying to assign value to readonly property "{{0}}" through computed observer.',224:"Invalid @observable decorator usage, cannot determine property name",225:"Trying to stop an effect that has already been stopped",226:"Maximum number of recursive effect run reached. Consider handle effect dependencies differently."},sk=(n,...e)=>{var i;let t=ik[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"typeof":l=typeof l;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=To(l[a.slice(1)]):l=To(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};class Kt{constructor(e,t,i,s){this.parent=e,this.bindingContext=t,this.overrideContext=i,this.isBoundary=s}static getContext(e,t,i){if(e==null)throw Re(203);let s=e.overrideContext,r=e;if(i>0){for(;i>0;)if(i--,r=r.parent,r==null)return;return s=r.overrideContext,t in s?s:r.bindingContext}for(;r!=null&&!r.isBoundary&&!(t in r.overrideContext)&&!(t in r.bindingContext);)r=r.parent;return r==null?e.bindingContext:(s=r.overrideContext,t in s?s:r.bindingContext)}static create(e,t,i){if(e==null)throw Re(204);return new Kt(null,e,t??new Pb,i??!1)}static fromParent(e,t,i=new Pb){if(e==null)throw Re(203);return new Kt(e,t,i,!1)}}class xb{constructor(e,t){e!==void 0&&(this[e]=t)}}class Pb{}const{astAssign:Rc,astEvaluate:it,astBind:ir,astUnbind:yn}=(()=>{const n="AccessThis",e="AccessBoundary",t="AccessGlobal",i="AccessScope",s="ArrayLiteral",r="ObjectLiteral",o="PrimitiveLiteral",a="New",l="Template",c="Unary",h="CallScope",d="CallMember",u="CallFunction",p="CallGlobal",f="AccessMember",g="AccessKeyed",m="TaggedTemplate",_="Binary",b="Conditional",C="Assign",v="ArrowFunction",y="ValueConverter",S="BindingBehavior",A="ArrayBindingPattern",P="ObjectBindingPattern",F="BindingIdentifier",H="ForOfStatement",W="Interpolation",J="ArrayDestructuring",Y="ObjectDestructuring",ae="DestructuringAssignmentLeaf",ue="Custom",te=Kt.getContext;function V(x,M,O,D){var Ye;switch(x.$kind){case n:{let L=M.overrideContext,z=M,E=x.ancestor;for(;E--&&L;)z=z.parent,L=(z==null?void 0:z.overrideContext)??null;return E<1&&z?z.bindingContext:void 0}case e:{let L=M;for(;L!=null&&!L.isBoundary;)L=L.parent;return L?L.bindingContext:void 0}case i:{const L=te(M,x.name,x.ancestor);D!==null&&D.observe(L,x.name);const z=L[x.name];if(z==null){if(x.name==="$host")throw Re(105);return z}return O!=null&&O.boundFn&&We(z)?z.bind(L):z}case t:return globalThis[x.name];case p:{const L=globalThis[x.name];if(We(L))return L(...x.args.map(z=>V(z,M,O,D)));if(!(O!=null&&O.strict)&&L==null)return;throw Re(107)}case s:return x.elements.map(L=>V(L,M,O,D));case r:{const L={};for(let z=0;z<x.keys.length;++z)L[x.keys[z]]=V(x.values[z],M,O,D);return L}case o:return x.value;case a:{const L=V(x.func,M,O,D);if(We(L))return new L(...x.args.map(z=>V(z,M,O,D)));throw Re(107)}case l:{let L=x.cooked[0];for(let z=0;z<x.expressions.length;++z)L+=To(V(x.expressions[z],M,O,D)),L+=x.cooked[z+1];return L}case c:{const L=V(x.expression,M,O,D);switch(x.operation){case"void":return;case"typeof":return typeof L;case"!":return!L;case"-":return-L;case"+":return+L;case"--":if(D!=null)throw Re(113);return re(x.expression,M,O,L-1)+x.pos;case"++":if(D!=null)throw Re(113);return re(x.expression,M,O,L+1)-x.pos;default:throw Re(109,x.operation)}}case h:{const L=te(M,x.name,x.ancestor);if(L==null){if(O!=null&&O.strict)throw Re(114,x.name,L);return}const z=L[x.name];if(We(z))return z.apply(L,x.args.map(E=>V(E,M,O,D)));if(z==null){if(O!=null&&O.strict&&!x.optional)throw Re(111,x.name);return}throw Re(111,x.name)}case d:{const L=V(x.object,M,O,D);if(L==null&&O!=null&&O.strict&&!x.optionalMember)throw Re(114,x.name,L);const z=L==null?void 0:L[x.name];if(z==null){if(!x.optionalCall&&(O!=null&&O.strict))throw Re(111,x.name);return}if(!We(z))throw Re(111,x.name);const E=z.apply(L,x.args.map(w=>V(w,M,O,D)));return Nt(L)&&ge.includes(x.name)&&(D==null||D.observeCollection(L)),E}case u:{const L=V(x.func,M,O,D);if(We(L))return L(...x.args.map(z=>V(z,M,O,D)));if(L==null){if(!x.optional&&(O!=null&&O.strict))throw Re(107);return}throw Re(107)}case v:return(...z)=>{const E=x.args,w=x.rest,T=E.length-1,B=E.reduce((Q,le,q)=>(w&&q===T?Q[le.name]=z.slice(q):Q[le.name]=z[q],Q),{}),U=Kt.fromParent(M,B);return V(x.body,U,O,D)};case f:{const L=V(x.object,M,O,D);if(L==null){if(!x.optional&&(O!=null&&O.strict))throw Re(114,x.name,L);return}D!==null&&!x.accessGlobal&&D.observe(L,x.name);const z=L[x.name];return O!=null&&O.boundFn&&We(z)?z.bind(L):z}case g:{const L=V(x.object,M,O,D),z=V(x.key,M,O,D);if(L==null){if(!x.optional&&(O!=null&&O.strict))throw Re(115,z,L);return}return D!==null&&!x.accessGlobal&&D.observe(L,z),L[z]}case m:{const L=x.expressions.map(E=>V(E,M,O,D)),z=V(x.func,M,O,D);if(!We(z))throw Re(110);return z(x.cooked,...L)}case _:{const L=x.left,z=x.right;switch(x.operation){case"&&":return V(L,M,O,D)&&V(z,M,O,D);case"||":return V(L,M,O,D)||V(z,M,O,D);case"??":return V(L,M,O,D)??V(z,M,O,D);case"==":return V(L,M,O,D)==V(z,M,O,D);case"===":return V(L,M,O,D)===V(z,M,O,D);case"!=":return V(L,M,O,D)!=V(z,M,O,D);case"!==":return V(L,M,O,D)!==V(z,M,O,D);case"instanceof":{const E=V(z,M,O,D);return We(E)?V(L,M,O,D)instanceof E:!1}case"in":{const E=V(z,M,O,D);return Id(E)?V(L,M,O,D)in E:!1}case"+":return V(L,M,O,D)+V(z,M,O,D);case"-":return V(L,M,O,D)-V(z,M,O,D);case"*":return V(L,M,O,D)*V(z,M,O,D);case"/":return V(L,M,O,D)/V(z,M,O,D);case"%":return V(L,M,O,D)%V(z,M,O,D);case"**":return V(L,M,O,D)**V(z,M,O,D);case"<":return V(L,M,O,D)<V(z,M,O,D);case">":return V(L,M,O,D)>V(z,M,O,D);case"<=":return V(L,M,O,D)<=V(z,M,O,D);case">=":return V(L,M,O,D)>=V(z,M,O,D);default:throw Re(108,x.operation)}}case b:return V(x.condition,M,O,D)?V(x.yes,M,O,D):V(x.no,M,O,D);case C:{let L=V(x.value,M,O,D);if(x.op!=="="){if(D!=null)throw Re(113);const z=V(x.target,M,O,D);switch(x.op){case"/=":L=z/L;break;case"*=":L=z*L;break;case"+=":L=z+L;break;case"-=":L=z-L;break;default:throw Re(108,x.op)}}return re(x.target,M,O,L)}case y:return(Ye=O==null?void 0:O.useConverter)==null?void 0:Ye.call(O,x.name,"toView",V(x.expression,M,O,D),x.args.map(L=>V(L,M,O,D)));case S:return V(x.expression,M,O,D);case F:return x.name;case H:return V(x.iterable,M,O,D);case W:if(x.isMulti){let L=x.parts[0],z=0;for(;z<x.expressions.length;++z)L+=To(V(x.expressions[z],M,O,D)),L+=x.parts[z+1];return L}else return`${x.parts[0]}${V(x.firstExpression,M,O,D)}${x.parts[1]}`;case ae:return V(x.target,M,O,D);case J:return x.list.map(L=>V(L,M,O,D));case A:case P:case Y:default:return;case ue:return x.evaluate(M,O,D)}}function re(x,M,O,D){var Ye;switch(x.$kind){case i:{if(x.name==="$host")throw Re(106);const L=te(M,x.name,x.ancestor);return L[x.name]=D}case f:{const L=V(x.object,M,O,null);if(L==null){if(O!=null&&O.strict)throw Re(116,x.name);re(x.object,M,O,{[x.name]:D})}else Id(L)&&(x.name==="length"&&Nt(L)&&!isNaN(D)?L.splice(D):L[x.name]=D);return D}case g:{const L=V(x.object,M,O,null),z=V(x.key,M,O,null);if(L==null){if(O!=null&&O.strict)throw Re(116,z);return re(x.object,M,O,{[z]:D}),D}if(Nt(L)){if(z==="length"&&!isNaN(D))return L.splice(D),D;if(Sc(z))return L.splice(z,1,D),D}return L[z]=D}case C:return re(x.value,M,O,D),re(x.target,M,O,D);case y:return D=(Ye=O==null?void 0:O.useConverter)==null?void 0:Ye.call(O,x.name,"fromView",D,x.args.map(L=>V(L,M,O,null))),re(x.expression,M,O,D);case S:return re(x.expression,M,O,D);case J:case Y:{const L=x.list,z=L.length;let E,w;for(E=0;E<z;E++)switch(w=L[E],w.$kind){case ae:re(w,M,O,D);break;case J:case Y:{if(typeof D!="object"||D===null)throw Re(112);let T=V(w.source,Kt.create(D),O,null);T===void 0&&w.initializer&&(T=V(w.initializer,M,O,null)),re(w,M,O,T);break}}break}case ae:{if(x instanceof OS){if(D==null)return;if(typeof D!="object")throw Re(112);let L=V(x.source,Kt.create(D),O,null);L===void 0&&x.initializer&&(L=V(x.initializer,M,O,null)),re(x.target,M,O,L)}else{if(D==null)return;if(typeof D!="object")throw Re(112);const L=x.indexOrProperties;let z;if(Sc(L)){if(!Array.isArray(D))throw Re(112);z=D.slice(L)}else z=Object.entries(D).reduce((E,[w,T])=>(L.includes(w)||(E[w]=T),E),{});re(x.target,M,O,z)}break}case ue:return x.assign(M,O,D);default:return}}function Z(x,M,O){var D,Ye,L;switch(x.$kind){case S:{(D=O.bindBehavior)==null||D.call(O,x.name,M,x.args.map(z=>V(z,M,O,null))),Z(x.expression,M,O);break}case y:{(Ye=O.bindConverter)==null||Ye.call(O,x.name),Z(x.expression,M,O);break}case H:{Z(x.iterable,M,O);break}case ue:(L=x.bind)==null||L.call(x,M,O)}}function _e(x,M,O){var D,Ye,L;switch(x.$kind){case S:{(D=O.unbindBehavior)==null||D.call(O,x.name,M),_e(x.expression,M,O);break}case y:{(Ye=O.unbindConverter)==null||Ye.call(O,x.name),_e(x.expression,M,O);break}case H:{_e(x.iterable,M,O);break}case ue:(L=x.unbind)==null||L.call(x,M,O)}}const ge="at map filter includes indexOf lastIndexOf findIndex find flat flatMap join reduce reduceRight slice every some sort".split(" ");return{astEvaluate:V,astAssign:re,astBind:Z,astUnbind:_e}})(),nk=n=>{const e=n.prototype;["bindBehavior","unbindBehavior","bindConverter","unbindConverter","useConverter"].forEach(t=>{bs(e,t,()=>{throw Re(99,t)})})},RE=wi.createInterface("ICoercionConfiguration"),Lu=0,Fr=1,rk=2,ok=4,Nu=km({None:Lu,Observer:Fr,Node:rk,Layout:ok});function Ao(n=0){const e=Array(n);let t=0;for(;t<n;)e[t]=t++;return e.deletedIndices=[],e.deletedItems=[],e.isIndexMap=!0,e}let ak=!1;const Fs=(()=>{function n(a,l){return a==null?r:r(a)}function e(){return bs(this,"subs",new o)}function t(a){return this.subs.add(a)}function i(a){return this.subs.remove(a)}const s=new WeakSet;function r(a,l){if(!s.has(a)){s.add(a);const c=a.prototype;Ar(c,"subs",{get:e}),Nn(c,"subscribe",t),Nn(c,"unsubscribe",i)}return a}class o{constructor(){this.count=0,this._subs=[],this._requestDirtySubs=[],this._hasDirtySubs=!1}add(l){return this._subs.includes(l)?!1:(this._subs[this._subs.length]=l,"handleDirty"in l&&(this._requestDirtySubs[this._requestDirtySubs.length]=l,this._hasDirtySubs=!0),++this.count,!0)}remove(l){let c=this._subs.indexOf(l);return c!==-1?(this._subs.splice(c,1),c=this._requestDirtySubs.indexOf(l),c!==-1&&(this._requestDirtySubs.splice(c,1),this._hasDirtySubs=this._requestDirtySubs.length>0),--this.count,!0):!1}notify(l,c){for(const h of this._subs.slice(0))h.handleChange(l,c)}notifyCollection(l,c){const h=this._subs.slice(0),d=h.length;let u=0;for(;u<d;++u)h[u].handleCollectionChange(l,c)}notifyDirty(){if(this._hasDirtySubs)for(const l of this._requestDirtySubs.slice(0))l.handleDirty()}}return n})();class OE{constructor(e){this.owner=e,this.type=Fr,this._value=(this._obj=e.collection).length}getValue(){return this._obj.length}setValue(e){e!==this._value&&(Number.isNaN(e)?console.warn(`Invalid value "${e}" for array length`):(this._obj.splice(e),this._value=this._obj.length))}handleDirty(){this._value!==this._obj.length&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.length;(this._value=s)!==i&&(this.subs.notifyDirty(),this.subs.notify(this._value,i))}}xE(OE);class Dm{constructor(e){this.owner=e,this.type=Fr,this._value=(this._obj=e.collection).size}getValue(){return this._obj.size}setValue(){throw Re(220)}handleDirty(){this._value!==this._obj.size&&this.subs.notifyDirty()}handleCollectionChange(e,t){const i=this._value,s=this._obj.size;(this._value=s)!==i&&this.subs.notify(this._value,i)}}xE(Dm);function xE(n){const e=n.prototype;return Nn(e,"subscribe",lk),Nn(e,"unsubscribe",ck),Fs(n,null)}function lk(n){this.subs.add(n)&&this.subs.count===1&&this.owner.subscribe(this)}function ck(n){this.subs.remove(n)&&this.subs.count===0&&this.owner.subscribe(this)}const ic=(()=>{const n=Symbol.for("__au_arr_obs__"),e=Array[n]??bs(Array,n,new WeakMap);function t(g,m){return g===m?0:(g=g===null?"null":g.toString(),m=m===null?"null":m.toString(),g<m?-1:1)}function i(g,m){return g===void 0?m===void 0?0:1:m===void 0?-1:0}function s(g,m,_,b,C){let v,y,S,A,P,F,H;for(F=_+1;F<b;F++){for(v=g[F],y=m[F],H=F-1;H>=_&&(S=g[H],A=m[H],P=C(S,v),P>0);H--)g[H+1]=S,m[H+1]=A;g[H+1]=v,m[H+1]=y}}function r(g,m,_,b,C){let v=0,y=0,S,A,P,F,H,W,J,Y,ae,ue,te,V,re,Z,_e,ge,x,M,O;for(;;){if(b-_<=10){s(g,m,_,b,C);return}v=_+(b-_>>1),S=g[_],F=m[_],A=g[b-1],H=m[b-1],P=g[v],W=m[v],J=C(S,A),J>0&&(ue=S,te=F,S=A,F=H,A=ue,H=te),Y=C(S,P),Y>=0?(ue=S,te=F,S=P,F=W,P=A,W=H,A=ue,H=te):(ae=C(A,P),ae>0&&(ue=A,te=H,A=P,H=W,P=ue,W=te)),g[_]=S,m[_]=F,g[b-1]=P,m[b-1]=W,V=A,re=H,Z=_+1,_e=b-1,g[v]=g[Z],m[v]=m[Z],g[Z]=V,m[Z]=re;e:for(y=Z+1;y<_e;y++)if(ge=g[y],x=m[y],M=C(ge,V),M<0)g[y]=g[Z],m[y]=m[Z],g[Z]=ge,m[Z]=x,Z++;else if(M>0){do{if(_e--,_e==y)break e;O=g[_e],M=C(O,V)}while(M>0);g[y]=g[_e],m[y]=m[_e],g[_e]=ge,m[_e]=x,M<0&&(ge=g[y],x=m[y],g[y]=g[Z],m[y]=m[Z],g[Z]=ge,m[Z]=x,Z++)}b-_e<Z-_?(r(g,m,_e,b,C),b=Z):(r(g,m,_,Z,C),_=_e)}}const o=Array.prototype,a=["push","unshift","pop","shift","splice","reverse","sort"];let l;function c(){const g=o.push,m=o.unshift,_=o.pop,b=o.shift,C=o.splice,v=o.reverse,y=o.sort;l={push:function(...S){const A=e.get(this);if(A===void 0)return g.apply(this,S);const P=this.length,F=S.length;if(F===0)return P;this.length=A.indexMap.length=P+F;let H=P;for(;H<this.length;)this[H]=S[H-P],A.indexMap[H]=-2,H++;return A.notify(),this.length},unshift:function(...S){const A=e.get(this);if(A===void 0)return m.apply(this,S);const P=S.length,F=new Array(P);let H=0;for(;H<P;)F[H++]=-2;m.apply(A.indexMap,F);const W=m.apply(this,S);return A.notify(),W},pop:function(){const S=e.get(this);if(S===void 0)return _.call(this);const A=S.indexMap,P=_.call(this),F=A.length-1;return A[F]>-1&&(A.deletedIndices.push(A[F]),A.deletedItems.push(P)),_.call(A),S.notify(),P},shift:function(){const S=e.get(this);if(S===void 0)return b.call(this);const A=S.indexMap,P=b.call(this);return A[0]>-1&&(A.deletedIndices.push(A[0]),A.deletedItems.push(P)),b.call(A),S.notify(),P},splice:function(...S){const A=S[0],P=S[1],F=e.get(this);if(F===void 0)return C.apply(this,S);const H=this.length,W=A|0,J=W<0?Math.max(H+W,0):Math.min(W,H),Y=F.indexMap,ae=S.length,ue=ae===0?0:ae===1?H-J:P;let te=J;if(ue>0){const re=te+ue;for(;te<re;)Y[te]>-1&&(Y.deletedIndices.push(Y[te]),Y.deletedItems.push(this[te])),te++}if(te=0,ae>2){const re=ae-2,Z=new Array(re);for(;te<re;)Z[te++]=-2;C.call(Y,A,P,...Z)}else C.apply(Y,S);const V=C.apply(this,S);return(ue>0||te>0)&&F.notify(),V},reverse:function(){const S=e.get(this);if(S===void 0)return v.call(this),this;const A=this.length,P=A/2|0;let F=0;for(;F!==P;){const H=A-F-1,W=this[F],J=S.indexMap[F],Y=this[H],ae=S.indexMap[H];this[F]=Y,S.indexMap[F]=ae,this[H]=W,S.indexMap[H]=J,F++}return S.notify(),this},sort:function(S){const A=e.get(this);if(A===void 0)return y.call(this,S),this;let P=this.length;if(P<2)return this;r(this,A.indexMap,0,P,i);let F=0;for(;F<P&&this[F]!==void 0;)F++;(S===void 0||!We(S))&&(S=t),r(this,A.indexMap,0,F,S);let H=!1;for(F=0,P=A.indexMap.length;P>F;++F)if(A.indexMap[F]!==F){H=!0;break}return(H||ak)&&A.notify(),this}};for(const S of a)Ar(l[S],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1})}let h=!1;const d="__au_arr_on__";function u(){if(l===void 0&&c(),!(ek(d,Array)??!1)){tk(!0,Array,d);for(const g of a)o[g].observing!==!0&&bs(o,g,l[g])}}class p{constructor(m){this.type=Fr,h||(h=!0,u()),this.indexObservers={},this.collection=m,this.indexMap=Ao(m.length),this.lenObs=void 0,e.set(m,this)}notify(){const m=this.subs;m.notifyDirty();const _=this.indexMap,b=this.collection,C=b.length;this.indexMap=Ao(C),m.notifyCollection(b,_)}getLengthObserver(){return this.lenObs??(this.lenObs=new OE(this))}getIndexObserver(m){var _;return(_=this.indexObservers)[m]??(_[m]=new f(this,m))}}Fs(p,null);class f{constructor(m,_){this.owner=m,this.index=_,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(m){if(m===this.getValue())return;const _=this.owner,b=this.index,C=_.indexMap;C[b]>-1&&C.deletedIndices.push(C[b]),C[b]=-2,_.collection[b]=m,_.notify()}handleDirty(){this.value!==this.getValue()&&this.subs.notifyDirty()}handleCollectionChange(m,_){const b=this.index;if(_[b]===b)return;const v=this.value,y=this.value=this.getValue();v!==y&&this.subs.notify(y,v)}subscribe(m){this.subs.add(m)&&this.subs.count===1&&this.owner.subscribe(this)}unsubscribe(m){this.subs.remove(m)&&this.subs.count===0&&this.owner.unsubscribe(this)}}return Fs(f,null),function(m){let _=e.get(m);return _===void 0&&(e.set(m,_=new p(m)),u()),_}})(),Nd=(()=>{const n=Symbol.for("__au_set_obs__"),e=Set[n]??bs(Set,n,new WeakMap),{add:t,clear:i,delete:s}=Set.prototype,r=["add","clear","delete"],o={add:function(c){const h=e.get(this);if(h===void 0)return t.call(this,c),this;const d=this.size;return t.call(this,c),this.size===d?this:(h.indexMap[d]=-2,h.notify(),this)},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const d=c.indexMap;let u=0;for(const p of this.keys())d[u]>-1&&(d.deletedIndices.push(d[u]),d.deletedItems.push(p)),u++;i.call(this),d.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let u=0;const p=h.indexMap;for(const f of this.keys()){if(f===c){p[u]>-1&&(p.deletedIndices.push(p[u]),p.deletedItems.push(f)),p.splice(u,1);const g=s.call(this,c);return g===!0&&h.notify(),g}u++}return!1}};function a(c){for(const h of r)bs(c,h,o[h])}class l{constructor(h){this.type=Fr,this.collection=h,this.indexMap=Ao(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const d=this.indexMap,u=this.collection,p=u.size;this.indexMap=Ao(p),h.notifyCollection(u,d)}getLengthObserver(){return this.lenObs??(this.lenObs=new Dm(this))}}return Fs(l,null),function(h){let d=e.get(h);return d===void 0&&(e.set(h,d=new l(h)),a(h)),d}})(),Md=(()=>{const n=Symbol.for("__au_map_obs__"),e=Map[n]??bs(Map,n,new WeakMap),{set:t,clear:i,delete:s}=Map.prototype,r=["set","clear","delete"],o={set:function(c,h){const d=e.get(this);if(d===void 0)return t.call(this,c,h),this;const u=this.get(c),p=this.size;if(t.call(this,c,h),this.size===p){let g=0;for(const m of this.entries()){if(m[0]===c)return m[1]!==u&&(d.indexMap.deletedIndices.push(d.indexMap[g]),d.indexMap.deletedItems.push(m),d.indexMap[g]=-2,d.notify()),this;g++}return this}return d.indexMap[p]=-2,d.notify(),this},clear:function(){const c=e.get(this);if(c===void 0)return i.call(this);if(this.size>0){const d=c.indexMap;let u=0;for(const p of this.keys())d[u]>-1&&(d.deletedIndices.push(d[u]),d.deletedItems.push(p)),u++;i.call(this),d.length=0,c.notify()}},delete:function(c){const h=e.get(this);if(h===void 0)return s.call(this,c);if(this.size===0)return!1;let u=0;const p=h.indexMap;for(const f of this.keys()){if(f===c){p[u]>-1&&(p.deletedIndices.push(p[u]),p.deletedItems.push(f)),p.splice(u,1);const g=s.call(this,c);return g===!0&&h.notify(),g}++u}return!1}};function a(c){for(const h of r)bs(c,h,o[h])}class l{constructor(h){this.type=Fr,this.collection=h,this.indexMap=Ao(h.size),this.lenObs=void 0}notify(){const h=this.subs;h.notifyDirty();const d=this.indexMap,u=this.collection,p=u.size;this.indexMap=Ao(p),h.notifyCollection(u,d)}getLengthObserver(){return this.lenObs??(this.lenObs=new Dm(this))}}return Fs(l,null),function(h){let d=e.get(h);return d===void 0&&(e.set(h,d=new l(h)),a(h)),d}})(),kb=(()=>{class n{constructor(h){this.version=0,this.count=0,this.o=new Map,this.b=h}add(h){this.o.has(h)||(h.subscribe(this.b),++this.count),this.o.set(h,this.version)}clear(){this.o.forEach(t,this),this.count=this.o.size}clearAll(){this.o.forEach(e,this),this.o.clear(),this.count=0}}function e(c,h){h.unsubscribe(this.b)}function t(c,h){this.version!==c&&(h.unsubscribe(this.b),this.o.delete(h))}function i(){return bs(this,"obs",new n(this))}function s(c,h){this.obs.add(this.oL.getObserver(c,h))}function r(c){let h;if(Nt(c))h=ic(c);else if(sl(c))h=Nd(c);else if(Cr(c))h=Md(c);else throw Re(210,c);this.obs.add(h)}function o(c){this.obs.add(c)}function a(){throw Re(99,"handleChange")}function l(){throw Re(99,"handleCollectionChange")}return function(h,d){const u=h.prototype;return Nn(u,"observe",s),Nn(u,"observeCollection",r),Nn(u,"subscribeTo",o),Ar(u,"obs",{get:i}),Nn(u,"handleChange",a),Nn(u,"handleCollectionChange",l),h}})();function rs(n,e){return n==null?kb:kb(n,e)}let Ve=null;const Ca=[];let Yn=!1;function hk(){Yn=!1}function dk(){Yn=!0}function Lm(){return Ve}function Nm(n){if(n==null)throw Re(206);if(Ve==null){Ve=n,Ca[0]=Ve,Yn=!0;return}if(Ve===n)throw Re(207);Ca.push(n),Ve=n,Yn=!0}function Mm(n){if(n==null)throw Re(208);if(Ve!==n)throw Re(209);Ca.pop(),Ve=Ca.length>0?Ca[Ca.length-1]:null,Yn=Ve!=null}const uk=km({get current(){return Ve},get connecting(){return Yn},enter:Nm,exit:Mm,pause:hk,resume:dk}),Va=Reflect.get,pk=Object.prototype.toString,ag=new WeakMap,PE="__au_nw__",kE="__au_nw";function DE(n){switch(pk.call(n)){case"[object Object]":return n.constructor[PE]!==!0;case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const al="__raw__";function He(n){return DE(n)?Mu(n):n}function Mu(n){return ag.get(n)??fk(n)}function Ke(n){return n[al]??n}function Li(n){return DE(n)&&n[al]||n}function Fm(n,e){return e==="constructor"||e==="__proto__"||e==="$observers"||e===Symbol.toPrimitive||e===Symbol.toStringTag||n.constructor[`${kE}_${To(e)}__`]===!0}function fk(n){const e=Nt(n)?mk:Cr(n)||sl(n)?Hk:gk,t=new Proxy(n,e);return ag.set(n,t),ag.set(t,t),t}const gk={get(n,e,t){if(e===al)return n;const i=Lm();return!Yn||Fm(n,e)||i==null?Va(n,e,t):(i.observe(n,e),He(Va(n,e,t)))}},mk={get(n,e,t){if(e===al)return n;if(!Yn||Fm(n,e)||Ve==null)return Va(n,e,t);switch(e){case"length":return Ve.observe(n,"length"),n.length;case"map":return _k;case"includes":return wk;case"indexOf":return Ck;case"lastIndexOf":return yk;case"every":return vk;case"filter":return bk;case"find":return Ek;case"findIndex":return Sk;case"flat":return Tk;case"flatMap":return Ak;case"join":return Ik;case"push":return Ok;case"pop":return Rk;case"reduce":return Fk;case"reduceRight":return $k;case"reverse":return Dk;case"shift":return xk;case"unshift":return Pk;case"slice":return Mk;case"splice":return kk;case"some":return Lk;case"sort":return Nk;case"keys":return LE;case"values":case Symbol.iterator:return lg;case"entries":return cg}return Ve.observe(n,e),He(Va(n,e,t))},ownKeys(n){var e;return(e=Lm())==null||e.observe(n,"length"),Reflect.ownKeys(n)}};function _k(n,e){const t=Ke(this),i=t.map((s,r)=>Li(n.call(e,He(s),r,this)));return Et(Ve,t),He(i)}function vk(n,e){const t=Ke(this),i=t.every((s,r)=>n.call(e,He(s),r,this));return Et(Ve,t),i}function bk(n,e){const t=Ke(this),i=t.filter((s,r)=>Li(n.call(e,He(s),r,this)));return Et(Ve,t),He(i)}function wk(n){const e=Ke(this),t=e.includes(Li(n));return Et(Ve,e),t}function Ck(n){const e=Ke(this),t=e.indexOf(Li(n));return Et(Ve,e),t}function yk(n){const e=Ke(this),t=e.lastIndexOf(Li(n));return Et(Ve,e),t}function Sk(n,e){const t=Ke(this),i=t.findIndex((s,r)=>Li(n.call(e,He(s),r,this)));return Et(Ve,t),i}function Ek(n,e){const t=Ke(this),i=t.find((s,r)=>n(He(s),r,this),e);return Et(Ve,t),He(i)}function Tk(){const n=Ke(this);return Et(Ve,n),He(n.flat())}function Ak(n,e){const t=Ke(this);return Et(Ve,t),Mu(t.flatMap((i,s)=>He(n.call(e,He(i),s,this))))}function Ik(n){const e=Ke(this);return Et(Ve,e),e.join(n)}function Rk(){return He(Ke(this).pop())}function Ok(...n){return Ke(this).push(...n)}function xk(){return He(Ke(this).shift())}function Pk(...n){return Ke(this).unshift(...n)}function kk(...n){return He(Ke(this).splice(...n))}function Dk(...n){const e=Ke(this),t=e.reverse();return Et(Ve,e),He(t)}function Lk(n,e){const t=Ke(this),i=t.some((s,r)=>Li(n.call(e,He(s),r,this)));return Et(Ve,t),i}function Nk(n){const e=Ke(this),t=e.sort(n);return Et(Ve,e),He(t)}function Mk(n,e){const t=Ke(this);return Et(Ve,t),Mu(t.slice(n,e))}function Fk(n,e){const t=Ke(this),i=t.reduce((s,r,o)=>n(s,He(r),o,this),e);return Et(Ve,t),He(i)}function $k(n,e){const t=Ke(this),i=t.reduceRight((s,r,o)=>n(s,He(r),o,this),e);return Et(Ve,t),He(i)}const Hk={get(n,e,t){if(e===al)return n;const i=Lm();if(!Yn||Fm(n,e)||i==null)return Va(n,e,t);switch(e){case"size":return i.observe(n,"size"),n.size;case"clear":return Gk;case"delete":return jk;case"forEach":return Bk;case"add":if(sl(n))return Uk;break;case"get":if(Cr(n))return zk;break;case"set":if(Cr(n))return Wk;break;case"has":return Vk;case"keys":return LE;case"values":return lg;case"entries":return cg;case Symbol.iterator:return Cr(n)?cg:lg}return He(Va(n,e,t))}};function Bk(n,e){const t=Ke(this);return Et(Ve,t),t.forEach((i,s)=>{n.call(e,He(i),He(s),this)})}function Vk(n){const e=Ke(this);return Et(Ve,e),e.has(Li(n))}function zk(n){const e=Ke(this);return Et(Ve,e),He(e.get(Li(n)))}function Wk(n,e){return He(Ke(this).set(Li(n),Li(e)))}function Uk(n){return He(Ke(this).add(Li(n)))}function Gk(){return He(Ke(this).clear())}function jk(n){return He(Ke(this).delete(Li(n)))}function LE(){const n=Ke(this);Et(Ve,n);const e=n.keys();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:He(i),done:s}},[Symbol.iterator](){return this}}}function lg(){const n=Ke(this);Et(Ve,n);const e=n.values();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:He(i),done:s}},[Symbol.iterator](){return this}}}function cg(){const n=Ke(this);Et(Ve,n);const e=n.entries();return{next(){const t=e.next(),i=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[He(i[0]),He(i[1])],done:s}},[Symbol.iterator](){return this}}}const Et=(n,e)=>n==null?void 0:n.observeCollection(e),Kk=km({getProxy:Mu,getRaw:Ke,wrap:He,unwrap:Li,rawKey:al});class Fd{constructor(e,t,i,s,r){this.type=Fr,this._oldValue=void 0,this._value=void 0,this._notified=!1,this._isRunning=!1,this._isDirty=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._wrapped=r?He(e):e,this.$get=t,this.$set=i,this.oL=s}init(e){this._value=e,this._isDirty=!1}getValue(){return this.subs.count===0?this.$get.call(this._obj,this._obj,this):(this._isDirty&&(this.compute(),this._isDirty=!1,this._notified=!1),this._value)}setValue(e){if(We(this.$set))this._coercer!==void 0&&(e=this._coercer.call(null,e,this._coercionConfig)),Kn(e,this._value)||(this._isRunning=!0,this.$set.call(this._obj,e),this._isRunning=!1,this.run());else throw Re(221)}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,!0}useCallback(e){return this._callback=e,!0}handleDirty(){this._isDirty||(this._isDirty=!0,this.subs.notifyDirty())}handleChange(){this._isDirty=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this._isDirty=!0,this.subs.count>0&&this.run()}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.compute(),this._isDirty=!1,this._notified=!1)}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&(this._isDirty=!0,this.obs.clearAll(),this._oldValue=void 0,this._notified=!0)}run(){var s;if(this._isRunning)return;const e=this._value,t=this._oldValue,i=this.compute();this._isDirty=!1,(!this._notified||!Kn(i,e))&&((s=this._callback)==null||s.call(this,i,t),this.subs.notify(i,t),this._oldValue=this._value=i,this._notified=!0)}compute(){this._isRunning=!0,this.obs.version++;try{return Nm(this),this._value=Li(this.$get.call(this._wrapped,this._wrapped,this))}finally{this.obs.clear(),this._isRunning=!1,Mm(this)}}}rs(Fd,null),Fs(Fd,null);const $m=Du("IDirtyChecker",n=>n.callback(()=>{throw Re(217)})),Yk={timeoutsPerCheck:25};class qk{static register(e){e.register(Ji.singleton(this,this),Ji.aliasTo(this,$m))}constructor(){this.tracked=[],this._task=null,this._elapsedFrames=0,this.p=$(nl),this.check=()=>{if(++this._elapsedFrames<Yk.timeoutsPerCheck)return;this._elapsedFrames=0;const e=this.tracked,t=e.length;let i,s=0;for(;s<t;++s)i=e[s],i.isDirty()&&i.flush()},Fs(Db,null)}createProperty(e,t){return new Db(this,e,t)}addProperty(e){this.tracked.push(e),this.tracked.length===1&&(this._task=this.p.taskQueue.queueTask(this.check,{persistent:!0}))}removeProperty(e){this.tracked.splice(this.tracked.indexOf(e),1),this.tracked.length===0&&(this._task.cancel(),this._task=null)}}class Db{constructor(e,t,i){this.obj=t,this.key=i,this.type=Lu,this._oldValue=void 0,this._dirtyChecker=e}getValue(){return this.obj[this.key]}setValue(e){throw Re(219,this.key)}isDirty(){return this._oldValue!==this.obj[this.key]}flush(){const e=this._oldValue,t=this.getValue();this._oldValue=t,this.subs.notify(t,e)}subscribe(e){this.subs.add(e)&&this.subs.count===1&&(this._oldValue=this.obj[this.key],this._dirtyChecker.addProperty(this))}unsubscribe(e){this.subs.remove(e)&&this.subs.count===0&&this._dirtyChecker.removeProperty(this)}}class Xk{get doNotCache(){return!0}constructor(e,t){this.type=Lu,this._obj=e,this._key=t}getValue(){return this._obj[this._key]}setValue(){}subscribe(){}unsubscribe(){}}class NE{constructor(){this.type=Lu}getValue(e,t){return e[t]}setValue(e,t,i){t[i]=e}}class Hm{constructor(e,t){this.type=Fr,this._value=void 0,this._observing=!1,this._callback=void 0,this._coercer=void 0,this._coercionConfig=void 0,this._obj=e,this._key=t}getValue(){return this._value}setValue(e){var t,i;if(this._coercer!==void 0&&(e=this._coercer.call(void 0,e,this._coercionConfig)),this._observing){if(Kn(e,this._value))return;Sh=this._value,this._value=e,this.subs.notifyDirty(),this.subs.notify(e,Sh),Kn(e,this._value)&&((t=this._callback)==null||t.call(this,e,Sh))}else this._value=this._obj[this._key]=e,(i=this._callback)==null||i.call(this,e,Sh)}useCallback(e){return this._callback=e,this.start(),!0}useCoercer(e,t){return this._coercer=e,this._coercionConfig=t,this.start(),!0}subscribe(e){this._observing===!1&&this.start(),this.subs.add(e)}start(){return this._observing===!1&&(this._observing=!0,this._value=this._obj[this._key],Ar(this._obj,this._key,{enumerable:!0,configurable:!0,get:IE(()=>this.getValue(),{getObserver:()=>this}),set:e=>{this.setValue(e)}})),this}stop(){return this._observing&&(Ar(this._obj,this._key,{enumerable:!0,configurable:!0,writable:!0,value:this._value}),this._observing=!1),this}}Fs(Hm,null);let Sh;const hg=new NE,zo=Du("IObserverLocator",n=>n.singleton(Jk)),Bm=Du("INodeObserverLocator",n=>n.cachedCallback(e=>(e.getAll(Tr).forEach(t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")}),new Qk)));class Qk{handles(){return!1}getObserver(){return hg}getAccessor(){return hg}}const Zk=Du("IComputedObserverLocator",n=>n.singleton(class{getObserver(t,i,s,r){const o=new Fd(t,s.get,s.set,r,!0);return Ar(t,i,{enumerable:s.enumerable,configurable:!0,get:IE(()=>o.getValue(),{getObserver:()=>o}),set:a=>{o.setValue(a)}}),o}}));class Jk{constructor(){this._adapters=[],this._dirtyChecker=$($m),this._nodeObserverLocator=$(Bm),this._computedObserverLocator=$(Zk)}addAdapter(e){this._adapters.push(e)}getObserver(e,t){if(e==null)throw Re(199,t);if(!cS(e))return new Xk(e,We(t)?"":t);if(We(t))return new Fd(e,t,void 0,this,!0);const i=ME(e);let s=i[t];return s===void 0&&(s=this.createObserver(e,t),s.doNotCache||(i[t]=s)),s}getAccessor(e,t){var s;const i=(s=e.$observers)==null?void 0:s[t];return i!==void 0?i:this._nodeObserverLocator.handles(e,t,this)?this._nodeObserverLocator.getAccessor(e,t,this):hg}getArrayObserver(e){return ic(e)}getMapObserver(e){return Md(e)}getSetObserver(e){return Nd(e)}createObserver(e,t){var s,r;if(this._nodeObserverLocator.handles(e,t,this))return this._nodeObserverLocator.getObserver(e,t,this);switch(t){case"length":if(Nt(e))return ic(e).getLengthObserver();break;case"size":if(Cr(e))return Md(e).getLengthObserver();if(sl(e))return Nd(e).getLengthObserver();break;default:if(Nt(e)&&Sc(t))return ic(e).getIndexObserver(Number(t));break}let i=Nb(e,t);if(i===void 0){let o=Lb(e);for(;o!==null&&(i=Nb(o,t),i===void 0);)o=Lb(o)}if(i!==void 0&&!JP.call(i,"value")){let o=this._getAdapterObserver(e,t,i);return o==null&&(o=(r=(s=i.get)==null?void 0:s.getObserver)==null?void 0:r.call(s,e)),o??(i.configurable?this._computedObserverLocator.getObserver(e,t,i,this):this._dirtyChecker.createProperty(e,t))}return new Hm(e,t)}_getAdapterObserver(e,t,i){if(this._adapters.length>0)for(const s of this._adapters){const r=s.getObserver(e,t,i,this);if(r!=null)return r}return null}}const Vm=n=>{let e;return Nt(n)?e=ic(n):Cr(n)?e=Md(n):sl(n)&&(e=Nd(n)),e},Lb=Object.getPrototypeOf,Nb=Object.getOwnPropertyDescriptor,ME=n=>{let e=n.$observers;return e===void 0&&Ar(n,"$observers",{enumerable:!1,value:e=st()}),e};class eD{constructor(e,t){this.oL=e,this.fn=t,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1,this._cleanupTask=void 0,this.run=()=>{var i;if(this.stopped)throw Re(225);if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{(i=this._cleanupTask)==null||i.call(void 0),Nm(this),this._cleanupTask=this.fn(this)}finally{this.obs.clear(),this.running=!1,Mm(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,Re(226);this.run()}else this.runCount=0}},this.stop=()=>{var i;(i=this._cleanupTask)==null||i.call(void 0),this._cleanupTask=void 0,this.stopped=!0,this.obs.clearAll()}}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}}rs(eD,null);class Mb{constructor(e,t,i,s){this.oL=t,this._value=void 0,this.boundFn=!1,this._scope=e,this.ast=i,this._callback=s}handleChange(){this.run()}handleCollectionChange(){this.run()}run(){this.obs.version++;const e=this._value,t=it(this.ast,this._scope,this,this);this.obs.clear(),Kn(t,e)||(this._value=t,this._callback.call(void 0,t,e))}stop(){this.obs.clearAll(),this._value=void 0}}rs(Mb,null),nk(Mb);function tD(n,e){return arguments.length===0?t:t(n,e);function t(i,s){switch(s.kind){case"class":bs(i,PE,!0);break;case"field":s.addInitializer(function(){const r=this.constructor,o=`${kE}_${To(s.name)}__`;o in r||bs(r,o,!0)});break}}}const Cl="pending",hd="running",xp="completed",Eh="canceled",Pp=new Map,Fb=n=>()=>{throw Io(`AUR1005: The PLATFORM did not receive a valid reference to the global function '${n}'.`)};class zm{constructor(e,t={}){var i,s;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=e,"decodeURI decodeURIComponent encodeURI encodeURIComponent Date Reflect console".split(" ").forEach(r=>{this[r]=r in t?t[r]:e[r]}),"clearInterval clearTimeout queueMicrotask setInterval setTimeout".split(" ").forEach(r=>{var o;this[r]=r in t?t[r]:((o=e[r])==null?void 0:o.bind(e))??Fb(r)}),this.performanceNow="performanceNow"in t?t.performanceNow:((s=(i=e.performance)==null?void 0:i.now)==null?void 0:s.bind(e.performance))??Fb("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new Wm(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(e,t={}){let i=Pp.get(e);return i===void 0&&Pp.set(e,i=new zm(e,t)),i}static set(e,t){Pp.set(e,t)}requestMacroTask(){this.macroTaskRequested=!0,this.macroTaskHandle===-1&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,this.macroTaskRequested===!0&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}let Wm=class{get isEmpty(){return this._pendingAsyncCount===0&&this._processing.length===0&&this._pending.length===0&&this._delayed.length===0}get _hasNoMoreFiniteWork(){return this._pendingAsyncCount===0&&this._processing.every(kp)&&this._pending.every(kp)&&this._delayed.every(kp)}constructor(e,t,i){this.platform=e,this.$request=t,this.$cancel=i,this._suspenderTask=void 0,this._pendingAsyncCount=0,this._processing=[],this._pending=[],this._delayed=[],this._flushRequested=!1,this._yieldPromise=void 0,this._lastRequest=0,this._lastFlush=0,this._requestFlush=()=>{this._tracer.enabled&&this._tracer.enter(this,"requestFlush"),this._flushRequested||(this._flushRequested=!0,this._lastRequest=this._now(),this.$request()),this._tracer.enabled&&this._tracer.leave(this,"requestFlush")},this._now=e.performanceNow,this._tracer=new nD(e.console)}flush(e=this._now()){if(this._tracer.enabled&&this._tracer.enter(this,"flush"),this._flushRequested=!1,this._lastFlush=e,this._suspenderTask===void 0){let t;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));let i;for(;this._processing.length>0;)if((i=this._processing.shift()).run(),i.status===hd)if(i.suspend===!0){this._suspenderTask=i,this._requestFlush(),this._tracer.enabled&&this._tracer.leave(this,"flush early async");return}else++this._pendingAsyncCount;if(this._pending.length>0&&(this._processing.push(...this._pending),this._pending.length=0),this._delayed.length>0)for(let s=0;s<this._delayed.length;++s)t=this._delayed[s],t.queueTime<=e&&(this._processing.push(t),this._delayed.splice(s--,1));if((this._processing.length>0||this._delayed.length>0||this._pendingAsyncCount>0)&&this._requestFlush(),this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const s=this._yieldPromise;this._yieldPromise=void 0,s.resolve()}}else this._requestFlush();this._tracer.enabled&&this._tracer.leave(this,"flush full")}cancel(){this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._flushRequested&&(this.$cancel(),this._flushRequested=!1),this._tracer.enabled&&this._tracer.leave(this,"cancel")}async yield(){this._tracer.enabled&&this._tracer.enter(this,"yield"),this.isEmpty?this._tracer.enabled&&this._tracer.leave(this,"yield empty"):(this._yieldPromise===void 0&&(this._tracer.enabled&&this._tracer.trace(this,"yield - creating promise"),this._yieldPromise=HE()),await this._yieldPromise,this._tracer.enabled&&this._tracer.leave(this,"yield task"))}queueTask(e,t){this._tracer.enabled&&this._tracer.enter(this,"queueTask");const{delay:i,preempt:s,persistent:r,suspend:o}={...rD,...t};if(s){if(i>0)throw aD();if(r)throw lD()}this._processing.length===0&&this._requestFlush();const a=this._now(),l=new sD(this._tracer,this,a,a+i,s,r,o,e);return s?this._processing[this._processing.length]=l:i===0?this._pending[this._pending.length]=l:this._delayed[this._delayed.length]=l,this._tracer.enabled&&this._tracer.leave(this,"queueTask"),l}remove(e){this._tracer.enabled&&this._tracer.enter(this,"remove");let t=this._processing.indexOf(e);if(t>-1){this._processing.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove processing");return}if(t=this._pending.indexOf(e),t>-1){this._pending.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove pending");return}if(t=this._delayed.indexOf(e),t>-1){this._delayed.splice(t,1),this._tracer.enabled&&this._tracer.leave(this,"remove delayed");return}throw this._tracer.enabled&&this._tracer.leave(this,"remove error"),Io(`Task #${e.id} could not be found`)}_resetPersistentTask(e){this._tracer.enabled&&this._tracer.enter(this,"resetPersistentTask"),e.reset(this._now()),e.createdTime===e.queueTime?this._pending[this._pending.length]=e:this._delayed[this._delayed.length]=e,this._tracer.enabled&&this._tracer.leave(this,"resetPersistentTask")}_completeAsyncTask(e){var t;if(this._tracer.enabled&&this._tracer.enter(this,"completeAsyncTask"),e.suspend===!0){if(this._suspenderTask!==e)throw this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask error"),Io(`Async task completion mismatch: suspenderTask=${(t=this._suspenderTask)==null?void 0:t.id}, task=${e.id}`);this._suspenderTask=void 0}else--this._pendingAsyncCount;if(this._yieldPromise!==void 0&&this._hasNoMoreFiniteWork){const i=this._yieldPromise;this._yieldPromise=void 0,i.resolve()}this.isEmpty&&this.cancel(),this._tracer.enabled&&this._tracer.leave(this,"completeAsyncTask")}};class dg extends Error{constructor(e){super("Task was canceled."),this.task=e}}let iD=0;class sD{get result(){const e=this._result;if(e===void 0)switch(this._status){case Cl:{const t=this._result=HE();return this._resolve=t.resolve,this._reject=t.reject,t}case hd:throw Io("Trying to await task from within task will cause a deadlock.");case xp:return this._result=Promise.resolve();case Eh:return this._result=Promise.reject(new dg(this))}return e}get status(){return this._status}constructor(e,t,i,s,r,o,a,l){this.taskQueue=t,this.createdTime=i,this.queueTime=s,this.preempt=r,this.persistent=o,this.suspend=a,this.callback=l,this.id=++iD,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._status=Cl,this._tracer=e}run(e=this.taskQueue.platform.performanceNow()){if(this._tracer.enabled&&this._tracer.enter(this,"run"),this._status!==Cl)throw this._tracer.enabled&&this._tracer.leave(this,"run error"),Io(`Cannot run task in ${this._status} state`);const{persistent:t,taskQueue:i,callback:s,_resolve:r,_reject:o,createdTime:a}=this;let l;this._status=hd;try{l=s(e-a),l instanceof Promise?l.then(c=>{this.persistent?i._resetPersistentTask(this):(t?this._status=Eh:this._status=xp,this.dispose()),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async then"),r!==void 0&&r(c)}).catch(c=>{if(this.persistent||this.dispose(),i._completeAsyncTask(this),this._tracer.enabled&&this._tracer.leave(this,"run async catch"),o!==void 0)o(c);else throw c}):(this.persistent?i._resetPersistentTask(this):(t?this._status=Eh:this._status=xp,this.dispose()),this._tracer.enabled&&this._tracer.leave(this,"run sync success"),r!==void 0&&r(l))}catch(c){if(this.persistent||this.dispose(),this._tracer.enabled&&this._tracer.leave(this,"run sync error"),o!==void 0)o(c);else throw c}}cancel(){if(this._tracer.enabled&&this._tracer.enter(this,"cancel"),this._status===Cl){const e=this.taskQueue,t=this._reject;return e.remove(this),e.isEmpty&&e.cancel(),this._status=Eh,this.dispose(),t!==void 0&&t(new dg(this)),this._tracer.enabled&&this._tracer.leave(this,"cancel true =pending"),!0}else if(this._status===hd&&this.persistent)return this.persistent=!1,this._tracer.enabled&&this._tracer.leave(this,"cancel true =running+persistent"),!0;return this._tracer.enabled&&this._tracer.leave(this,"cancel false"),!1}reset(e){this._tracer.enabled&&this._tracer.enter(this,"reset");const t=this.queueTime-this.createdTime;this.createdTime=e,this.queueTime=e+t,this._status=Cl,this._resolve=void 0,this._reject=void 0,this._result=void 0,this._tracer.enabled&&this._tracer.leave(this,"reset")}dispose(){this._tracer.enabled&&this._tracer.trace(this,"dispose"),this.callback=void 0,this._resolve=void 0,this._reject=void 0,this._result=void 0}}class nD{constructor(e){this.console=e,this.enabled=!1,this.depth=0}enter(e,t){this.log(`${"  ".repeat(this.depth++)}> `,e,t)}leave(e,t){this.log(`${"  ".repeat(--this.depth)}< `,e,t)}trace(e,t){this.log(`${"  ".repeat(this.depth)}- `,e,t)}log(e,t,i){if(t instanceof Wm){const s=t._processing.length,r=t._pending.length,o=t._delayed.length,a=t._flushRequested,l=!!t._suspenderTask,c=`processing=${s} pending=${r} delayed=${o} flushReq=${a} susTask=${l}`;this.console.log(`${e}[Q.${i}] ${c}`)}else{const s=t.id,r=Math.round(t.createdTime*10)/10,o=Math.round(t.queueTime*10)/10,a=t.preempt,l=t.persistent,c=t.suspend,h=t._status,d=`id=${s} created=${r} queue=${o} preempt=${a} persistent=${l} status=${h} suspend=${c}`;this.console.log(`${e}[T.${i}] ${d}`)}}}const rD={delay:0,preempt:!1,persistent:!1,suspend:!1};let FE,$E;const oD=(n,e)=>{FE=n,$E=e},HE=()=>{const n=new Promise(oD);return n.resolve=FE,n.reject=$E,n},kp=n=>n.persistent,aD=()=>Io("AUR1006: Invalid arguments: preempt cannot be combined with a greater-than-zero delay"),lD=()=>Io("AUR1007: Invalid arguments: preempt cannot be combined with persistent"),Io=n=>new Error(n);class br extends zm{static getOrCreate(e,t={}){let i=br._lookup.get(e);return i===void 0&&br._lookup.set(e,i=new br(e,t)),i}static set(e,t){br._lookup.set(e,t)}get domWriteQueue(){return this.console.log("[DEV:aurelia] platform.domQueue is deprecated, please use platform.domQueue instead."),this.domQueue}get domReadQueue(){return this.console.log("[DEV:aurelia] platform.domReadQueue has been removed, please use platform.domQueue instead."),this.domQueue}constructor(e,t={}){super(e,t);const i=s=>()=>{throw new Error(`The PLATFORM did not receive a valid reference to the global function '${s}'.`)};"Node Element HTMLElement CustomEvent CSSStyleSheet ShadowRoot MutationObserver window document customElements".split(" ").forEach(s=>this[s]=s in t?t[s]:e[s]),"fetch requestAnimationFrame cancelAnimationFrame".split(" ").forEach(s=>{var r;return this[s]=s in t?t[s]:((r=e[s])==null?void 0:r.bind(e))??i(s)}),this.domQueue=(()=>{let s=!1,r=-1;const o=()=>{s=!0,r===-1&&(r=this.requestAnimationFrame(l))},a=()=>{s=!1,r>-1&&(this.cancelAnimationFrame(r),r=-1)},l=()=>{r=-1,s===!0&&(s=!1,c.flush())},c=new Wm(this,o,a);return c})()}}br._lookup=new WeakMap;const{default:Um,oneTime:Fu,toView:xt,fromView:qn,twoWay:BE}=Oi,vi=Gi.get,$u=Gi.has,$s=Gi.define,{annotation:cD}=mm,sr=cD.keyFor,Zc=Object,Ro=String,VE=Zc.prototype,uo=VE.hasOwnProperty,Vs=Zc.freeze,zE=Zc.assign,WE=Zc.getOwnPropertyNames,Gm=Zc.keys,$b=st(),ug=(n,e,t)=>{if($b[e]===!0)return!0;if(!$e(e))return!1;const i=e.slice(0,5);return $b[e]=i==="aria-"||i==="data-"||t.isStandardSvgAttribute(n,e)},pg=n=>{throw n},UE=Reflect.defineProperty,Zi=(n,e,t)=>(UE(n,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),t),GE=(n,e,t)=>n.addSignalListener(e,t),jE=(n,e,t)=>n.removeSignalListener(e,t),hD="Interpolation",dD="IsIterator",uD="IsFunction",pn="IsProperty",Hb="pending",Dp="running",jm=Nu.Observer,$r=Nu.Node,Sn=Nu.Layout,ie=(n,...e)=>new Error(`AUR${Ro(n).padStart(4,"0")}: ${fD(n,...e)}`),pD={99:"Method {{0}} not implemented",101:'Ast eval error: binding behavior "{{0}}" could not be found. Did you forget to register it as a dependency?',102:'Ast eval error: binding behavior "{{0}}" already applied.',103:'Ast eval error: value converter "{{0}}" could not be found. Did you forget to register it as a dependency?',105:"Ast eval error: unable to find $host context. Did you forget [au-slot] attribute?",106:'Ast eval error: invalid assignment. "$host" is a reserved keyword.',107:"Ast eval error: expression is not a function.",109:'Ast eval error: unknown unary operator: "{{0}}"',108:'Ast eval error: unknown binary operator: "{{0}}"',110:"Ast eval error: left-hand side of tagged template expression is not a function.",111:'Ast eval error: expected "{{0}}" to be a function',112:"Ast eval error: cannot use non-object value for destructuring assignment.",113:"Ast eval error: infinite loop detected. Increment operators should only be used in event handlers.",114:'Ast eval error: cannot access property "{{0}}" of {{1}}.',115:'Ast eval error: cannot access key "{{0}}" of {{1}}.',116:'Ast eval error: cannot assign value to property "{{0}}" of null/undefined.',151:"No binding behavior definition found for type {{0:name}}",152:"No value converter definition found for type {{0:name}}",153:'Element "{{0}}" has already been registered.',154:'Attribute "{{0}}" has already been registered.',155:"Value converter {{0}} has already been registered.",156:"Binding behavior {{0}} has already been registered.",157:"Binding command {{0}} has already been registered.",203:"Trying to retrieve a property or build a scope from a null/undefined scope",204:"Trying to create a scope with null/undefined binding context",227:"@bindable is not supported for properties that uses a symbol for name. Use a string for the property name instead.",228:"@bindable cannot be used as a class decorator when no configuration object is supplied.",229:"@bindable cannot be used as a class decorator when no property name is supplied in the configuration object.",500:"There is no cached controller for the provided ViewModel: {{0}}",501:"Invalid combination: cannot combine the containerless custom element option with Shadow DOM.",502:"Trying to activate a disposed controller: {{0}}.",503:"Controller at {{0}} is in an unexpected state: {{1}} during activation.",504:"Synthetic view at {{0}} is being activated with null/undefined scope.",505:"Controller at {{0}} is in an unexpected state: {{1}} during deactivation.",506:"Invalid callback for @watch decorator: {{0}}",507:"Observer for bindable property {{0}} does not support coercion.",508:"Observer for property {{0}} does not support change handler.",759:"No attribute definition found for type {{0:name}}",760:"No element definition found for type {{0:name}}",761:"Cannot create a custom element definition with only a name and no type: {{0}}",762:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",763:"Trying to retrieve a custom element controller from a node, but the provided node <{{0:nodeName}} /> is not a custom element or containerless host.",764:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",765:"Trying to retrieve a custom element controller from a node. But the provided node <{{0:nodeName}} /> does not appear to be part of an Aurelia app DOM tree, or it was added to the DOM in a way that Aurelia cannot properly resolve its position in the component tree.",766:"Invalid @processContent hook. Expected the hook to be a function (when defined in a class, it needs to be a static function) but got a {{0:typeof}}.",652:"Aurelia is unable to observe property {{0}}. Register observation mapping with .useConfig().",653:"Mapping for property {{0}} of <{{1}} /> already exists",654:"Array values can only be bound to a multi-select.",714:'Template compilation error: primary already exists on element/attribute "{{0}}"',719:"Attribute {{0}} has been already registered for {{1:element}}",767:"Aurelia.root was accessed without a valid root.",768:"An instance of Aurelia is already registered with the container or an ancestor of it.",769:"Failed to initialize the platform object. The host element's ownerDocument does not have a defaultView, did you create the host from a DOMParser and forget to call adoptNode()?",770:"Aurelia.start() was called without a composition root",771:"The aurelia instance must be fully stopped before it can be disposed",750:"view.ref is not supported. If you are migrating from v1, this can be understood as the controller.",751:`Attempted to reference "{{0}}", but it was not found amongst the target's API.`,752:"Element {{0:.res}} is not registered in {{1:name}}.",753:"Attribute {{0:.res}} is not registered in {{1:name}}.",754:"Attribute {{0:.res}} is not registered in {{1:name}}.",755:"Cannot resolve ViewFactory before the provider was prepared.",756:"Cannot resolve ViewFactory without a (valid) name.",757:"AUR0757: The compiled template is not aligned with the render instructions. There are {{0}} targets and {{1}} instructions.",772:"Invalid @watch decorator config. Expected an expression or a fn but received null/undefined.",773:'Invalid @watch decorator change handler config.Method "{{0}}" not found in class {{1}}',774:"Invalid @watch decorator usage: decorated target {{0}} is not a class method.",775:'Invalid command "{{0}}" usage with [repeat]',776:'Invalid [repeat] usage, found extraneous target "{{0}}"',777:"Unsupported: [repeat] cannot iterate over {{0:toString}}",778:"Unsupported: [repeat] cannot count {{0:toString}}",814:"[repeat] encountered an error: number of views != number of items {{0:join(!=)}}",779:"Invalid portal insertion position: {{0}}",801:'"& self" binding behavior only supports listener binding via trigger/capture command.',802:`"& updateTrigger" invalid usage. This binding behavior requires at least one event name argument: eg <input value.bind="firstName & updateTrigger:'blur'">`,803:'"& updateTrigger" invalid usage. This binding behavior can only be applied to two-way/ from-view bindings.',805:'Invalid scope behavior "{{0}}" on <au-compose />. Only "scoped" or "auto" allowed.',806:`<au-compose /> couldn't find a custom element with name "{{0}}", did you forget to register it locally or globally?`,807:"Composition has already been activated/deactivated. Id: {{0:controller}}",808:"Composition has already been deactivated.",810:"Invalid [else] usage, it should follow an [if]",811:"Invalid portal strict target query, empty query.",812:"Invalid portal strict target resolution, target not found.",813:'Invalid [pending]/[then]/[catch] usage. The parent [promise].resolve not found; only "*[promise.resolve] > *[pending|then|catch]" relation is supported.',815:'Invalid [case/default-case] usage. The parent [switch] not found; only "*[switch] > *[case|default-case]" relation is supported.',816:"Invalid [default-case] usage. Multiple 'default-case's are not allowed.",817:'"& signal" binding behavior can only be used with bindings that have a "handleChange" method',818:`"& signal" invalid usage. At least one signal name must be passed to the signal behavior, e.g. "expr & signal:'my-signal'"`,819:"Spreading to bindables onto non custom element",820:"Invalid spread target {{0}}",9999:"No scope context for spread binding.",9998:"Spread binding does not support spreading custom attributes/template controllers. Did you build the spread instruction manually?",9997:"Marker is malformed. This likely happens when a compiled template has been modified. Did you accidentally modified some compiled template? You can modify template before compilation with compiling Template compiler hook.",9996:"Invalid usage, a rate limit has already been applied. Did you have both throttle and debounce on the same binding?",9995:"The binding already has a target subscriber.",9994:`"& attr" can be only used on property binding. It's used on {{0:ctor}}`,9993:'"& updateTrigger" binding behavior only works with the default implementation of Aurelia HTML observation. Implement your own node observation + updateTrigger',9992:'"& updateTrigger" uses node observer to observe, but it does not know how to use events to observe property <{{0:target@property}} />',9991:"Invalid @children usage. @children decorator can only be used on a field",9990:"Invalid @slotted usage. @slotted decorator can only be used on a field",9989:"Invalid query selector. Only selectors with alpha-numeric characters, or $all are allowed. Got {{0}} instead."},fD=(n,...e)=>{var i;let t=pD[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"controller":l=l.controller.name;break;case"target@property":l=`${l.target}@${l.targetProperty}`;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"bindingCommandHelp":l=gD(l);break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=Ro(l[a.slice(1)]):l=Ro(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t};function gD(n){switch(n){case"delegate":return`
The ".delegate" binding command has been removed in v2. Binding command ".trigger" should be used instead. If you are migrating v1 application, install compat package to add back the ".delegate" binding command for ease of migration.`;case"call":return`
The ".call" binding command has been removed in v2. If you want to pass a callback that preserves the context of the function call, you can use lambda instead. Refer to lambda expression doc for more details.`;default:return""}}function ot(n,e){let t;function i(s,r){var c;let o;switch(r.kind){case"getter":case"field":{const h=r.name;if(typeof h!="string")throw ie(227);o=h;break}case"class":if(t==null)throw ie(228);if(typeof t=="string")o=t;else{const h=t.name;if(!h)throw ie(229);if(typeof h!="string")throw ie(227);o=h}break}const a=t==null||typeof t=="string"?{name:o}:t,l=(c=r.metadata)[mr]??(c[mr]=st());l[o]=Fn.create(o,a)}if(arguments.length>1){t={},i(n,e);return}else if($e(n))return t=n,i;return t=n===void 0?{}:n,i}const mr=sr("bindables"),Xi=Vs({name:mr,keyFrom:n=>`${mr}:${n}`,from(...n){const e={},t=Array.isArray;function i(o){e[o]=Fn.create(o)}function s(o,a){e[o]=a instanceof Fn?a:Fn.create(o,a===!0?{}:a)}function r(o){t(o)?o.forEach(a=>$e(a)?i(a):s(a.name,a)):o instanceof Fn?e[o.name]=o:o!==void 0&&Gm(o).forEach(a=>s(a,o[a]))}return n.forEach(r),e},getAll(n){const e=[],t=CO(n);let i=t.length,s;for(;--i>=0;){s=t[i];const r=vi(mr,s);r!=null&&e.push(...Object.values(r))}return e},_add(n,e){let t=vi(mr,e);t==null&&$s(t=st(),e,mr),t[n.name]=n}});class Fn{constructor(e,t,i,s,r,o){this.attribute=e,this.callback=t,this.mode=i,this.primary=s,this.name=r,this.set=o}static create(e,t={}){const i=t.mode??xt;return new Fn(t.attribute??uS(e),t.callback??`${e}Changed`,$e(i)?Oi[i]??Um:i,t.primary??!1,t.name??e,t.set??mD(t))}}const fg={key:sr("coercer"),define(n,e){$s(n[e].bind(n),n,fg.key)},for(n){return vi(fg.key,n)}};function mD(n={}){const e=n.type??null;if(e==null)return rn;let t;switch(e){case Number:case Boolean:case String:case BigInt:t=e;break;default:{const i=e.coerce;t=typeof i=="function"?i.bind(e):fg.for(e)??rn;break}}return t===rn?t:_D(t,n.nullable)}function _D(n,e){return function(t,i){return i!=null&&i.enableCoercion?(e??!((i==null?void 0:i.coerceNullish)??!1))&&t==null?t:n(t,i):t}}const et=wi.createInterface,En=Ji.singleton,Ir=Ji.aliasTo,Km=Ji.instance,ft=(n,e,t)=>n.registerResolver(e,t),vD="custom-element",bD="custom-attribute",Rr=(n,e,t,i="__au_static_resource__")=>{var r;let s=vi(i,n);return s==null&&((r=n.$au)==null?void 0:r.type)===e&&(s=t(n.$au,n),$s(s,n,i)),s};class sc{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return $e(e)?(i=e,s={name:i}):(i=e.name,s=e),new sc(t,gr(Bb(t,"name"),i),Vt(Bb(t,"aliases"),s.aliases,t.aliases),Ym.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?nc(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${ie(156,this.name)}`):e.register(e.has(i,!1)?null:En(i,i),Ir(i,s),...r.map(o=>Ir(i,nc(o))))}}const _s="binding-behavior",ua=er(_s),Bb=(n,e)=>vi(sr(e),n),nc=n=>`${ua}:${n}`,Ym=Vs({name:ua,keyFrom:nc,isType(n){var e;return We(n)&&($u(ua,n)||((e=n.$au)==null?void 0:e.type)===_s)},define(n,e){const t=sc.create(n,e),i=t.Type;return $s(t,i,ua,Zs),i},getDefinition(n){const e=vi(ua,n)??Rr(n,_s,sc.create);if(e===void 0)throw ie(151,n);return e},find(n,e){const t=n.find(_s,e);return t==null?null:vi(ua,t)??Rr(t,_s,sc.create)??null},get(n,e){try{return n.get(Ba(nc(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve binding behavior with name",e),t}return n.get(Ba(nc(e)))}}),Lp=new Map,Hu=n=>({type:_s,name:n});class Bu{bind(e,t){Lp.set(t,t.mode),t.mode=this.mode}unbind(e,t){t.mode=Lp.get(t),Lp.delete(t)}}class KE extends Bu{get mode(){return Fu}}KE.$au=Hu("oneTime");class YE extends Bu{get mode(){return xt}}YE.$au=Hu("toView");class qE extends Bu{get mode(){return qn}}qE.$au=Hu("fromView");class XE extends Bu{get mode(){return BE}}XE.$au=Hu("twoWay");const Np=new WeakMap,wD=200;class QE{constructor(){this._platform=$(nl)}bind(e,t,i,s){var a;const r={type:"debounce",delay:i??wD,now:this._platform.performanceNow,queue:this._platform.taskQueue,signals:$e(s)?[s]:s??De},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Np.set(t,o)}unbind(e,t){var i;(i=Np.get(t))==null||i.dispose(),Np.delete(t)}}QE.$au={type:_s,name:"debounce"};const Oc=et("ISignaler",n=>n.singleton(CD));class CD{constructor(){this.signals=st()}dispatchSignal(e){const t=this.signals[e];if(t===void 0)return;let i;for(i of t.keys())i.handleChange(void 0,void 0)}addSignalListener(e,t){var i;((i=this.signals)[e]??(i[e]=new Set)).add(t)}removeSignalListener(e,t){var i;(i=this.signals[e])==null||i.delete(t)}}class ZE{constructor(){this._lookup=new Map,this._signaler=$(Oc)}bind(e,t,...i){if(!("handleChange"in t))throw ie(817);if(i.length===0)throw ie(818);this._lookup.set(t,i);let s;for(s of i)GE(this._signaler,s,t)}unbind(e,t){const i=this._lookup.get(t);this._lookup.delete(t);let s;for(s of i)jE(this._signaler,s,t)}}ZE.$au={type:_s,name:"signal"};const Mp=new WeakMap,yD=200;class JE{constructor(){({performanceNow:this._now,taskQueue:this._taskQueue}=$(nl))}bind(e,t,i,s){var a;const r={type:"throttle",delay:i??yD,now:this._now,queue:this._taskQueue,signals:$e(s)?[s]:s??De},o=(a=t.limit)==null?void 0:a.call(t,r);o==null?console.warn(`Binding ${t.constructor.name} does not support debounce rate limiting`):Mp.set(t,o)}unbind(e,t){var i;(i=Mp.get(t))==null||i.dispose(),Mp.delete(t)}}JE.$au={type:_s,name:"throttle"};const gg=et("IAppTask");class Vb{constructor(e,t,i){this.c=void 0,this.slot=e,this.k=t,this.cb=i}register(e){return this.c=e.register(Km(gg,this))}run(){const e=this.k,t=this.cb;return e===null?t():t(this.c.get(e))}}const rc=Vs({creating:Yr("creating"),hydrating:Yr("hydrating"),hydrated:Yr("hydrated"),activating:Yr("activating"),activated:Yr("activated"),deactivating:Yr("deactivating"),deactivated:Yr("deactivated")});function Yr(n){function e(t,i){return We(i)?new Vb(n,t,i):new Vb(n,null,t)}return e}const ai=nl,mg=(()=>{const n=new WeakMap;return Vs({add(e,t){let i=n.get(e);i==null&&n.set(e,i=[]),i.push(t)},getDefinitions(e){return n.get(e)??De}})})();class Oo{get type(){return bD}constructor(e,t,i,s,r,o,a,l,c,h,d){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.defaultBindingMode=r,this.isTemplateController=o,this.bindables=a,this.noMultiBindings=l,this.watches=c,this.dependencies=h,this.containerStrategy=d}static create(e,t){let i,s;$e(e)?(i=e,s={name:i}):(i=e.name,s=e);const r=gr(kn(t,"defaultBindingMode"),s.defaultBindingMode,t.defaultBindingMode,xt);for(const o of Object.values(Xi.from(s.bindables)))Xi._add(o,t);return new Oo(t,gr(kn(t,"name"),i),Vt(kn(t,"aliases"),s.aliases,t.aliases),La(i),$e(r)?Oi[r]??Um:r,gr(kn(t,"isTemplateController"),s.isTemplateController,t.isTemplateController,!1),Xi.from(...Xi.getAll(t),kn(t,"bindables"),t.bindables,s.bindables),gr(kn(t,"noMultiBindings"),s.noMultiBindings,t.noMultiBindings,!1),Vt(mg.getDefinitions(t),t.watches),Vt(kn(t,"dependencies"),s.dependencies,t.dependencies),gr(kn(t,"containerStrategy"),s.containerStrategy,t.containerStrategy,"reuse"))}register(e,t){const i=this.Type,s=typeof t=="string"?La(t):this.key,r=this.aliases;e.has(s,!1)?(Oo.warnDuplicate&&e.get(Tr).warn(ie(154,this.name)),console.warn(`[DEV:aurelia] ${ie(154,this.name)}`)):e.register(e.has(i,!1)?null:En(i,i),Ir(i,s),...r.map(o=>Ir(i,La(o))))}toString(){return`au:ca:${this.name}`}}Oo.warnDuplicate=!0;const bi="custom-attribute",za=er(bi),La=n=>`${za}:${n}`,kn=(n,e)=>vi(sr(e),n),SD=n=>{var e;return We(n)&&($u(za,n)||((e=n.$au)==null?void 0:e.type)===bi)},eT=(n,e)=>Ta(n,La(e))??void 0,qm=(n,e)=>{const t=Oo.create(n,e),i=t.Type;return $s(t,i,za,Zs),i},Xm=n=>{const e=vi(za,n)??Rr(n,bi,Oo.create);if(e===void 0)throw ie(759,n);return e},ED=(n,e)=>{let t="",i="";if($e(e))t=La(e),i=e;else{const r=Xm(e);t=r.key,i=r.name}let s=n;for(;s!==null;){const r=Ta(s,t);if(r!=null&&r.is(i))return r;s=Bd(s)}return null},nr=Vs({name:za,keyFrom:La,isType:SD,for:eT,closest:ED,define:qm,getDefinition:Xm,annotate(n,e,t){$s(t,n,sr(e))},getAnnotation:kn,find(n,e){const t=n.find(bi,e);return t===null?null:vi(za,t)??Rr(t,bi,Oo.create)??null}}),Jo=et("ILifecycleHooks");class TD{constructor(e,t){this.definition=e,this.instance=t}}class Qm{constructor(e,t){this.Type=e,this.propertyNames=t}static create(e,t){const i=new Set;let s=t.prototype;for(;s!==VE;){for(const r of WE(s))r!=="constructor"&&!r.startsWith("_")&&i.add(r);s=Object.getPrototypeOf(s)}return new Qm(t,i)}}const zb=(()=>{const n=new WeakMap,e=new WeakMap;return Vs({define(t,i){const s=Qm.create(t,i),r=s.Type;return e.set(r,s),{register(o){En(Jo,r).register(o)}}},resolve(t){let i=n.get(t);if(i===void 0){n.set(t,i=new AD);const s=t.root,r=s===t?t.getAll(Jo):t.has(Jo,!1)?s.getAll(Jo).concat(t.getAll(Jo)):s.getAll(Jo);let o,a,l,c,h;for(o of r){a=e.get(o.constructor),l=new TD(a,o);for(c of a.propertyNames)h=i[c],h===void 0?i[c]=[l]:h.push(l)}}return i}})})();class AD{}function Zm(n){return function(e,t){return t.addInitializer(function(){Vu.define(n,this)}),e}}class oc{constructor(e,t,i,s){this.Type=e,this.name=t,this.aliases=i,this.key=s}static create(e,t){let i,s;return $e(e)?(i=e,s={name:i}):(i=e.name,s=e),new oc(t,gr(_g(t,"name"),i),Vt(_g(t,"aliases"),s.aliases,t.aliases),Vu.keyFrom(i))}register(e,t){const i=this.Type,s=typeof t=="string"?ac(t):this.key,r=this.aliases;e.has(s,!1)?console.warn(`[DEV:aurelia] ${ie(155,this.name)}`):e.register(e.has(i,!1)?null:En(i,i),Ir(i,s),...r.map(o=>Ir(i,ac(o))))}}const ya="value-converter",pa=er(ya),_g=(n,e)=>vi(sr(e),n),ac=n=>`${pa}:${n}`,Vu=Vs({name:pa,keyFrom:ac,isType(n){var e;return We(n)&&($u(pa,n)||((e=n.$au)==null?void 0:e.type)===ya)},define(n,e){const t=oc.create(n,e),i=t.Type;return $s(t,i,pa,Zs),i},getDefinition(n){const e=vi(pa,n)??Rr(n,ya,oc.create);if(e===void 0)throw ie(152,n);return e},annotate(n,e,t){$s(t,n,sr(e))},getAnnotation:_g,find(n,e){const t=n.find(ya,e);return t==null?null:vi(pa,t)??Rr(t,ya,oc.create)??null},get(n,e){try{return n.get(Ba(ac(e)))}catch(t){throw console.error("[DEV:aurelia] Cannot retrieve value converter with name",e),t}return n.get(Ba(ac(e)))}});class ID{constructor(e,t){this._value=void 0,this.b=e,this._flushQueue=t}flush(){this.b.updateSource(this._value)}handleChange(e,t){const i=this.b;e!==it(i.ast,i._scope,i,null)&&(this._value=e,this._flushQueue.add(this))}}const Wo=(()=>{function n(e){this._scope=e}return e=>{Zi(e.prototype,"useScope",n)}})(),zs=(()=>{class n{}const e=new WeakMap,t=new WeakMap,i=new WeakMap;function s(u){return this.l.get(u)}function r(u,p){let f=t.get(u);return f==null&&t.set(u,f=new n),f[p]??(f[p]=Ym.get(u.l,p))}function o(u,p,f){var _;const g=r(this,u);if(g==null)throw ie(101,u);let m=i.get(this);if(m==null&&i.set(this,m={}),m[u])throw ie(102,u);(_=g.bind)==null||_.call(g,p,this,...f)}function a(u,p){var m;const f=r(this,u),g=i.get(this);(m=f==null?void 0:f.unbind)==null||m.call(f,p,this),g!=null&&(g[u]=!1)}function l(u,p){let f=e.get(u);return f==null&&e.set(u,f=new n),f[p]??(f[p]=Vu.get(u.l,p))}function c(u){const p=l(this,u);if(p==null)throw ie(103,u);const f=p.signals;if(f!=null){const g=this.l.get(Oc),m=f.length;let _=0;for(;_<m;++_)g.addSignalListener(f[_],this)}}function h(u){const p=l(this,u);if((p==null?void 0:p.signals)===void 0)return;const f=this.l.get(Oc);let g=0;for(;g<p.signals.length;++g)f.removeSignalListener(p.signals[g],this)}function d(u,p,f,g){var _;const m=l(this,u);if(m==null)throw ie(103,u);switch(p){case"toView":return"toView"in m?m.toView(f,...g):f;case"fromView":return"fromView"in m?(_=m.fromView)==null?void 0:_.call(m,f,...g):f}}return u=>{const p=u.prototype;Zi(p,"get",s),Zi(p,"bindBehavior",o),Zi(p,"unbindBehavior",a),Zi(p,"bindConverter",c),Zi(p,"unbindConverter",h),Zi(p,"useConverter",d)}})(),RD=et("IFlushQueue",n=>n.singleton(OD));class OD{constructor(){this._flushing=!1,this._items=new Set}get count(){return this._items.size}add(e){if(this._items.add(e),!this._flushing){this._flushing=!0;try{this._items.forEach(xD)}finally{this._flushing=!1}}}clear(){this._items.clear(),this._flushing=!1}}const xD=function(n,e,t){t.delete(n),n.flush()},Hr=(()=>{const n=new WeakSet,e=(i,s,r)=>{let o,a,l,c=!1;const h=i.queue,d=()=>s(l),u=f=>{l=f,r.isBound?(a=o,o=h.queueTask(d,{delay:i.delay}),a==null||a.cancel()):d()},p=u.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return u.flush=()=>{c=(o==null?void 0:o.status)===Hb,p(),c&&d()},u},t=(i,s,r)=>{let o,a,l=0,c=0,h,d=!1;const u=i.queue,p=()=>i.now(),f=()=>s(h),g=_=>{h=_,r.isBound?(c=p()-l,a=o,c>i.delay?(l=p(),f()):o=u.queueTask(()=>{l=p(),f()},{delay:i.delay-c}),a==null||a.cancel()):f()},m=g.dispose=()=>{a==null||a.cancel(),o==null||o.cancel(),a=o=void 0};return g.flush=()=>{d=(o==null?void 0:o.status)===Hb,m(),d&&f()},g};return(i,s)=>{Zi(i.prototype,"limit",function(r){if(n.has(this))throw ie(9996);n.add(this);const o=s(this,r),a=r.signals,l=a.length>0?this.get(Oc):null,c=this[o],h=(...p)=>c.call(this,...p),d=r.type==="debounce"?e(r,h,this):t(r,h,this),u=l?{handleChange:d.flush}:null;return this[o]=d,l&&a.forEach(p=>GE(l,p,u)),{dispose:()=>{l&&a.forEach(p=>jE(l,p,u)),n.delete(this),d.dispose(),delete this[o]}}})}})(),Br=((n=new WeakSet)=>e=>function(){n.has(this)||(n.add(this),e.call(this))})(),PD={preempt:!0};class ao{constructor(e,t,i,s,r,o,a,l,c,h){this.targetAttribute=a,this.targetProperty=l,this.mode=c,this.strict=h,this.isBound=!1,this._scope=void 0,this._task=null,this._value=void 0,this.boundFn=!1,this.l=t,this.ast=r,this._controller=e,this.target=o,this.oL=i,this._taskQueue=s}updateTarget(e){const t=this.target,i=this.targetAttribute,s=this.targetProperty;switch(i){case"class":t.classList.toggle(s,!!e);break;case"style":{let r="",o=Ro(e);$e(o)&&o.includes("!important")&&(r="important",o=o.replace("!important","")),t.style.setProperty(s,o,r);break}default:e==null?t.removeAttribute(i):t.setAttribute(i,Ro(e))}}handleChange(){if(!this.isBound)return;let e;this.obs.version++;const t=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);this.obs.clear(),t!==this._value&&(this._value=t,this._controller.state!==Bi?(e=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(t)},PD),e==null||e.cancel()):this.updateTarget(t))}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this),this.mode&(xt|Fu)&&this.updateTarget(this._value=it(this.ast,e,this,(this.mode&xt)>0?this:null)),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0,this._value=void 0,(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}}ao.mix=Br(()=>{Wo(ao),Hr(ao,()=>"updateTarget"),rs(ao,null),zs(ao)});const kD={preempt:!0};class DD{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._task=null,this._controller=e,this.oL=i,this._taskQueue=s,this._targetObserver=i.getAccessor(o,a);const h=r.expressions,d=this.partBindings=Array(h.length),u=h.length;let p=0;for(;u>p;++p)d[p]=new lo(h[p],o,a,t,i,c,this)}_handlePartChange(){this.updateTarget()}updateTarget(){const e=this.partBindings,t=this.ast.parts,i=e.length;let s="",r=0;if(i===1)s=t[0]+e[0]._value+t[1];else for(s=t[0];i>r;++r)s+=e[r]._value+t[r+1];const o=this._targetObserver,a=this._controller.state!==Bi&&(o.type&Sn)>0;let l;a?(l=this._task,this._task=this._taskQueue.queueTask(()=>{this._task=null,o.setValue(s,this.target,this.targetProperty)},kD),l==null||l.cancel(),l=null):o.setValue(s,this.target,this.targetProperty)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e;const t=this.partBindings,i=t.length;let s=0;for(;i>s;++s)t[s].bind(e);this.updateTarget(),this.isBound=!0}unbind(){var s;if(!this.isBound)return;this.isBound=!1,this._scope=void 0;const e=this.partBindings,t=e.length;let i=0;for(;t>i;++i)e[i].unbind();(s=this._task)==null||s.cancel(),this._task=null}useAccessor(e){this._targetObserver=e}}class lo{constructor(e,t,i,s,r,o,a){this.ast=e,this.target=t,this.targetProperty=i,this.strict=o,this.owner=a,this.mode=xt,this.task=null,this.isBound=!1,this._value="",this.boundFn=!1,this.l=s,this.oL=r}updateTarget(){this.owner._handlePartChange()}handleChange(){if(!this.isBound)return;this.obs.version++;const e=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);this.obs.clear(),e!=this._value&&(this._value=e,Nt(e)&&this.observeCollection(e),this.updateTarget())}handleCollectionChange(){this.updateTarget()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this),this._value=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null),Nt(this._value)&&this.observeCollection(this._value),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}lo.mix=Br(()=>{Wo(lo),Hr(lo,()=>"updateTarget"),rs(lo,null),zs(lo)});const LD={preempt:!0};class co{constructor(e,t,i,s,r,o,a,l){this.p=r,this.ast=o,this.target=a,this.strict=l,this.isBound=!1,this.mode=xt,this._task=null,this._value="",this._needsRemoveNode=!1,this.boundFn=!1,this.l=t,this._controller=e,this.oL=i,this._taskQueue=s}updateTarget(e){var s,r;const t=this.target,i=this._value;this._value=e,this._needsRemoveNode&&((s=i.parentNode)==null||s.removeChild(i),this._needsRemoveNode=!1),e instanceof this.p.Node&&((r=t.parentNode)==null||r.insertBefore(e,t),e="",this._needsRemoveNode=!0),t.textContent=Ro(e??"")}handleChange(){var i;if(!this.isBound)return;this.obs.version++;const e=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);if(this.obs.clear(),e===this._value){(i=this._task)==null||i.cancel(),this._task=null;return}this._controller.state!==Bi?this._queueUpdate(e):this.updateTarget(e)}handleCollectionChange(){if(!this.isBound)return;this.obs.version++;const e=this._value=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);this.obs.clear(),Nt(e)&&this.observeCollection(e),this._controller.state!==Bi?this._queueUpdate(e):this.updateTarget(e)}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this);const t=this._value=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);Nt(t)&&this.observeCollection(t),this.updateTarget(t),this.isBound=!0}unbind(){var e,t;this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._needsRemoveNode&&((e=this._value.parentNode)==null||e.removeChild(this._value)),this._scope=void 0,this.obs.clearAll(),(t=this._task)==null||t.cancel(),this._task=null)}_queueUpdate(e){const t=this._task;this._task=this._taskQueue.queueTask(()=>{this._task=null,this.updateTarget(e)},LD),t==null||t.cancel()}}co.mix=Br(()=>{Wo(co),Hr(co,()=>"updateTarget"),rs(co,null),zs(co)});class ho{constructor(e,t,i,s,r,o){this.ast=i,this.targetProperty=s,this.isBound=!1,this._scope=void 0,this.target=null,this.boundFn=!1,this.l=e,this.oL=t,this.strict=o,this._toBindingContext=r}updateTarget(){this.target[this.targetProperty]=this._value}handleChange(){this.isBound&&(this.obs.version++,this._value=it(this.ast,this._scope,this,this),this.obs.clear(),this.updateTarget())}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,this.target=this._toBindingContext?e.bindingContext:e.overrideContext,ir(this.ast,e,this),this._value=it(this.ast,this._scope,this,this),this.updateTarget(),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}ho.mix=Br(()=>{Wo(ho),Hr(ho,()=>"updateTarget"),rs(ho,null),zs(ho)});class xi{constructor(e,t,i,s,r,o,a,l,c){this.ast=r,this.target=o,this.targetProperty=a,this.mode=l,this.strict=c,this.isBound=!1,this._scope=void 0,this._targetObserver=void 0,this._task=null,this._targetSubscriber=null,this.boundFn=!1,this.l=t,this._controller=e,this._taskQueue=s,this.oL=i}updateTarget(e){this._targetObserver.setValue(e,this.target,this.targetProperty)}updateSource(e){Rc(this.ast,this._scope,this,e)}handleChange(){if(!this.isBound)return;this.obs.version++;const e=it(this.ast,this._scope,this,(this.mode&xt)>0?this:null);this.obs.clear(),this._controller.state!==Bi&&(this._targetObserver.type&Sn)>0?(yl=this._task,this._task=this._taskQueue.queueTask(()=>{this.updateTarget(e),this._task=null},ND),yl==null||yl.cancel(),yl=null):this.updateTarget(e)}handleCollectionChange(){this.handleChange()}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this);const t=this.oL,i=this.mode;let s=this._targetObserver;s||(i&qn?s=t.getObserver(this.target,this.targetProperty):s=t.getAccessor(this.target,this.targetProperty),this._targetObserver=s);const r=(i&xt)>0;i&(xt|Fu)&&this.updateTarget(it(this.ast,this._scope,this,r?this:null)),i&qn&&(s.subscribe(this._targetSubscriber??(this._targetSubscriber=new ID(this,this.l.get(RD)))),r||this.updateSource(s.getValue(this.target,this.targetProperty))),this.isBound=!0}unbind(){var e;this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0,this._targetSubscriber&&(this._targetObserver.unsubscribe(this._targetSubscriber),this._targetSubscriber=null),(e=this._task)==null||e.cancel(),this._task=null,this.obs.clearAll())}useTargetObserver(e){var t;(t=this._targetObserver)==null||t.unsubscribe(this),(this._targetObserver=e).subscribe(this)}useTargetSubscriber(e){if(this._targetSubscriber!=null)throw ie(9995);this._targetSubscriber=e}}xi.mix=Br(()=>{Wo(xi),Hr(xi,n=>n.mode&qn?"updateSource":"updateTarget"),rs(xi,null),zs(xi)});let yl=null;const ND={preempt:!0};class vg{constructor(e,t,i,s){this.ast=t,this.target=i,this.strict=s,this.isBound=!1,this._scope=void 0,this.l=e}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this),Rc(this.ast,this._scope,this,this.target),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,it(this.ast,this._scope,this,null)===this.target&&Rc(this.ast,this._scope,this,null),yn(this.ast,this._scope,this),this._scope=void 0)}}vg.mix=Br(()=>{zs(vg)});class MD{constructor(e,t=!1,i){this.prevent=e,this.capture=t,this.onError=i}}class Sa{constructor(e,t,i,s,r,o,a){this.ast=t,this.target=i,this.targetEvent=s,this.strict=a,this.isBound=!1,this.self=!1,this.boundFn=!0,this._modifiedEventHandler=null,this.l=e,this._options=r,this._modifiedEventHandler=o}callSource(e){const t=this._scope.overrideContext;t.$event=e;let i=it(this.ast,this._scope,this,null);delete t.$event,We(i)&&(i=i(e)),i!==!0&&this._options.prevent&&e.preventDefault()}handleEvent(e){var t;if(!(this.self&&this.target!==e.composedPath()[0])&&((t=this._modifiedEventHandler)==null?void 0:t.call(this,e))!==!1)try{this.callSource(e)}catch(i){this._options.onError(e,i)}}bind(e){if(this.isBound){if(this._scope===e)return;this.unbind()}this._scope=e,ir(this.ast,e,this),this.target.addEventListener(this.targetEvent,this,this._options),this.isBound=!0}unbind(){this.isBound&&(this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0,this.target.removeEventListener(this.targetEvent,this,this._options))}}Sa.mix=Br(function(){Wo(Sa),Hr(Sa,()=>"callSource"),zs(Sa)});const zu=et("IEventModifier"),tT=et("IKeyMapping",n=>n.instance({meta:Vs(["ctrl","alt","shift","meta"]),keys:{escape:"Escape",enter:"Enter",space:"Space",tab:"tab",...Array.from({length:25}).reduce((e,t,i)=>{let s=String.fromCharCode(i+65);return e[i+65]=s,s=String.fromCharCode(i+97),e[i+97]=e[s]=s,e},{})}}));class Jm{constructor(){this.type=["click","mousedown","mousemove","mouseup","dblclick","contextmenu"],this._mapping=$(tT),this._mouseButtons=["left","middle","right"]}static register(e){e.register(En(zu,Jm))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue;case"left":case"middle":case"right":if(i.button!==this._mouseButtons.indexOf(o))return!1;continue}if(this._mapping.meta.includes(o)&&i[`${o}Key`]!==!0)return!1;console.warn(`Modifier '${o}' is not supported for mouse events.`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class e_{constructor(){this._mapping=$(tT),this.type=["keydown","keyup"]}static register(e){e.register(En(zu,e_))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}if(this._mapping.meta.includes(o)){if(i[`${o}Key`]!==!0)return!1;continue}if(this._mapping.keys[o]!==i.key)return!1;console.warn(`Modifier '${o}' is not supported for keyboard event with key "${i.key}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}class t_{constructor(){this.type=["$ALL"]}static register(e){e.register(En(zu,t_))}getHandler(e){const t=e.split(/[:+.]/);return i=>{let s=!1,r=!1,o;for(o of t){switch(o){case"prevent":s=!0;continue;case"stop":r=!0;continue}console.warn(`Modifier '${o}' is not supported for event "${i.type}".`)}return s&&i.preventDefault(),r&&i.stopPropagation(),!0}}}const iT=et("IEventModifierHandler",n=>n.instance({getHandler:()=>(console.warn("No event modifier handler registered"),null)}));class i_{constructor(){this._reg=$(bm(zu)).reduce((e,t)=>((Nt(t.type)?t.type:[t.type]).forEach(s=>e[s]=t),e),{})}static register(e){e.register(En(iT,i_))}getHandler(e,t){var i;return $e(t)?((i=this._reg[e]??this._reg.$ALL)==null?void 0:i.getHandler(t))??null:null}}const FD={register(n){n.register(i_,Jm,e_,t_)}},os=et("IViewFactory");class Wu{constructor(e,t){this.isCaching=!1,this._cache=null,this._cacheSize=-1,this.name=t.name,this.container=e,this.def=t}setCacheSize(e,t){e&&(e==="*"?e=Wu.maxCacheSize:$e(e)&&(e=parseInt(e,10)),(this._cacheSize===-1||!t)&&(this._cacheSize=e)),this._cacheSize>0?this._cache=[]:this._cache=null,this.isCaching=this._cacheSize>0}canReturnToCache(e){return this._cache!=null&&this._cache.length<this._cacheSize}tryReturnToCache(e){return this.canReturnToCache(e)?(this._cache.push(e),!0):!1}create(e){const t=this._cache;let i;return t!=null&&t.length>0?(i=t.pop(),i):(i=Pi.$view(this,e),i)}}Wu.maxCacheSize=65535;const $D=(()=>{const n=(e,t)=>e.document.createComment(t);return e=>{const t=n(e,"au-end");return t.$start=n(e,"au-start"),t}})(),Th=(n,e,t)=>{if(n===null)return;const i=t.length;let s=0;for(;i>s;)n.insertBefore(t[s],e),++s},sT=(n,e)=>new n.ownerDocument.defaultView.MutationObserver(e),HD=n=>n.nodeType===1,nT="default",BD="au-slot",rT=et("IAuSlotsInfo");class oT{constructor(e){this.projectedSlots=e}}const VD=et("IAuSlotWatcher");class Uu{static create(e,t,i,s,r,o,a,l){const c=[],h=s.renderers,d=p=>{let f=p,g=e;for(;g!=null&&f>0;)g=g.parent,--f;if(g==null)throw ie(9999);return g},u=p=>{var b;const f=d(p),g=new Uu(f),m=r.compileSpread(f.controller.definition,((b=f.instruction)==null?void 0:b.captures)??De,f.controller.container,t,i);let _;for(_ of m)switch(_.type){case Yt.spreadTransferedBinding:u(p+1);break;case Yt.spreadElementProp:h[_.instruction.type].render(g,_o(t),_.instruction,o,a,l);break;default:h[_.type].render(g,t,_,o,a,l)}c.push(g)};return u(0),c}get container(){return this.locator}get definition(){return this.$controller.definition}get state(){return this.$controller.state}constructor(e){this.isBound=!1,this._innerBindings=[],this.locator=(this.$controller=(this._hydrationContext=e).controller).container}get(e){return this.locator.get(e)}bind(e){if(this.isBound)return;this.isBound=!0;const t=this.scope=this._hydrationContext.controller.scope.parent??void 0;if(t==null)throw ie(9999);this._innerBindings.forEach(i=>i.bind(t))}unbind(){this._innerBindings.forEach(e=>e.unbind()),this.isBound=!1}addBinding(e){this._innerBindings.push(e)}addChild(e){if(e.vmKind!==io)throw ie(9998);this.$controller.addChild(e)}}class Qs{constructor(e,t,i,s,r,o,a,l){this.target=t,this.targetKeys=i,this.ast=s,this.strict=l,this.isBound=!1,this._scope=void 0,this.boundFn=!1,this._bindingCache={},this._scopeCache=new WeakMap,this._controller=e,this.oL=r,this.l=o,this._taskQueue=a}updateTarget(){this.obs.version++;const e=it(this.ast,this._scope,this,this);this.obs.clear(),this._createBindings(e,!0)}handleChange(){this.isBound&&this.updateTarget()}handleCollectionChange(){this.isBound&&this.updateTarget()}bind(e){if(this.isBound){if(e===this._scope)return;this.unbind()}this.isBound=!0,this._scope=e,ir(this.ast,e,this);const t=it(this.ast,e,this,this);this._createBindings(t,!1)}unbind(){if(!this.isBound)return;this.isBound=!1,yn(this.ast,this._scope,this),this._scope=void 0;let e;for(e in this._bindingCache)this._bindingCache[e].unbind()}_createBindings(e,t){var o,a;let i;if(!cS(e)){console.warn(`[DEV:aurelia] $bindable spread is given a non object for properties: "${this.targetKeys.join(", ")}" of ${this.target.constructor.name}`);for(i in this._bindingCache)(o=this._bindingCache[i])==null||o.unbind();return}let s,r=this._scopeCache.get(e);r==null&&this._scopeCache.set(e,r=Kt.fromParent(this._scope,e));for(i of this.targetKeys)s=this._bindingCache[i],i in e?(s==null&&(s=this._bindingCache[i]=new xi(this._controller,this.l,this.oL,this._taskQueue,(a=Qs._astCache)[i]??(a[i]=new ec(i,0)),this.target,i,Oi.toView,this.strict)),s.bind(r)):t&&(s==null||s.unbind())}}Qs.mix=Br(()=>{Wo(Qs),Hr(Qs,()=>"updateTarget"),rs(Qs,null),zs(Qs)});Qs._astCache={};const Wb=(n,e,t,i)=>{n.addEventListener(e,t,i)},Ub=(n,e,t,i)=>{n.removeEventListener(e,t,i)},s_=n=>{let e;const t=n.prototype;Zi(t,"subscribe",function(i){var s;if(this.subs.add(i)&&this.subs.count===1){for(e of this._config.events)Wb(this._el,e,this);this._listened=!0,(s=this._start)==null||s.call(this)}}),Zi(t,"unsubscribe",function(i){var s;if(this.subs.remove(i)&&this.subs.count===0){for(e of this._config.events)Ub(this._el,e,this);this._listened=!1,(s=this._stop)==null||s.call(this)}}),Zi(t,"useConfig",function(i){if(this._config=i,this._listened){for(e of this._config.events)Ub(this._el,e,this);for(e of this._config.events)Wb(this._el,e,this)}})},Gu=n=>{Zi(n.prototype,"subscribe",rn),Zi(n.prototype,"unsubscribe",rn)};class ju{get doNotCache(){return!0}constructor(e,t={}){this.obj=e,this.mapping=t,this.type=$r|Sn,this._value="",this._nameIndex={},this._version=0}getValue(){return this._value}setValue(e){e!==this._value&&(this._value=e,this._flushChanges())}_flushChanges(){const e=this._nameIndex,t=++this._version,i=this.obj.classList,s=aT(this._value),r=s.length;let o=0,a;if(r>0)for(;o<r;o++)a=s[o],a=this.mapping[a]||a,a.length!==0&&(e[a]=this._version,i.add(a));if(t!==1)for(a in e)a=this.mapping[a]||a,e[a]!==t&&i.remove(a)}}Gu(ju);function aT(n){if($e(n))return Gb(n);if(typeof n!="object")return De;if(Nt(n)){const i=n.length;if(i>0){const s=[];let r=0;for(;i>r;++r)s.push(...aT(n[r]));return s}else return De}const e=[];let t;for(t in n)n[t]&&(t.includes(" ")?e.push(...Gb(t)):e.push(t));return e}function Gb(n){const e=n.match(/\S+/g);return e===null?De:e}const lT=n=>({$isResolver:!0,resolve(e,t){return t.get(xo).controller.container.get(zO(n))}}),cT=et("IRenderer");function Mt(n,e){var i;const t=n[i=Symbol.metadata]??(n[i]=Object.create(null));return t[Hs]={register(s){En(cT,n).register(s)}},n}function fn(n,e,t){return $e(e)?n.parse(e,t):e}function Ku(n){return n.viewModel!=null?n.viewModel:n}function zD(n,e){if(e==="element")return n;switch(e){case"controller":return _o(n);case"view":throw ie(750);case"component":return _o(n).viewModel;default:{const t=eT(n,e);if(t!==void 0)return t.viewModel;const i=_o(n,{name:e});if(i===void 0)throw ie(751,e);return i.viewModel}}}const WD=Mt(class{constructor(){this.target=Yt.setProperty}render(e,t,i){var r;const s=Ku(t);((r=s.$observers)==null?void 0:r[i.to])!==void 0?s.$observers[i.to].setValue(i.value):s[i.to]=i.value}}),UD=Mt(class{constructor(){this._rendering=$(Uo),this.target=Yt.hydrateElement}render(e,t,i,s,r,o){let a,l,c;const h=i.res,d=i.projections,u=e.container;switch(typeof h){case"string":if(a=Qe.find(u,h),a==null)throw ie(752,i,e);break;default:a=h}const f=i.containerless||a.containerless?xc(t):null,g=uL(s,e,t,i,f,d==null?void 0:new oT(Gm(d)));l=g.invoke(a.Type),c=Pi.$el(g,l,t,i,a,f),Ti(t,a.key,c);const m=this._rendering.renderers,_=i.props,b=_.length;let C=0,v;for(;b>C;)v=_[C],m[v.type].render(e,c,v,s,r,o),++C;e.addChild(c)}}),GD=Mt(class{constructor(){this._rendering=$(Uo),this.target=Yt.hydrateAttribute}render(e,t,i,s,r,o){let a=e.container,l;switch(typeof i.res){case"string":if(l=nr.find(a,i.res),l==null)throw ie(753,i,e);break;default:l=i.res}const c=fT(s,l,e,t,i,void 0,void 0),h=Pi.$attr(c.ctn,c.vm,t,l);Ti(t,l.key,h);const d=this._rendering.renderers,u=i.props,p=u.length;let f=0,g;for(;p>f;)g=u[f],d[g.type].render(e,h,g,s,r,o),++f;e.addChild(h)}}),jD=Mt(class{constructor(){this._rendering=$(Uo),this.target=Yt.hydrateTemplateController}render(e,t,i,s,r,o){var b,C;let a=e.container,l;switch(typeof i.res){case"string":if(l=nr.find(a,i.res),l==null)throw ie(754,i,e);break;default:l=i.res}const c=this._rendering.getViewFactory(i.def,l.containerStrategy==="new"?a.createChild({inheritParentResources:!0}):a),h=xc(t),d=fT(s,l,e,t,i,c,h),u=Pi.$attr(d.ctn,d.vm,t,l);Ti(h,l.key,u),(C=(b=d.vm).link)==null||C.call(b,e,u,t,i);const p=this._rendering.renderers,f=i.props,g=f.length;let m=0,_;for(;g>m;)_=f[m],p[_.type].render(e,u,_,s,r,o),++m;e.addChild(u)}}),KD=Mt(class{constructor(){this.target=Yt.hydrateLetElement,ho.mix()}render(e,t,i,s,r,o){t.remove();const a=i.instructions,l=i.toBindingContext,c=e.container,h=a.length;let d,u,p=0;for(;h>p;)d=a[p],u=fn(r,d.from,pn),e.addBinding(new ho(c,o,u,d.to,l,e.strict??!1)),++p}}),YD=Mt(class{constructor(){this.target=Yt.refBinding}render(e,t,i,s,r){e.addBinding(new vg(e.container,fn(r,i.from,pn),zD(t,i.to),e.strict??!1))}}),qD=Mt(class{constructor(){this.target=Yt.interpolation,lo.mix()}render(e,t,i,s,r,o){const a=e.container,l=new DD(e,a,o,s.domQueue,fn(r,i.from,hD),Ku(t),i.to,xt,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(lT($d));l.useAccessor(new ju(l.target,c))}e.addBinding(l)}}),XD=Mt(class{constructor(){this.target=Yt.propertyBinding,xi.mix()}render(e,t,i,s,r,o){const a=e.container,l=new xi(e,a,o,s.domQueue,fn(r,i.from,pn),Ku(t),i.to,i.mode,e.strict??!1);if(i.to==="class"&&l.target.nodeType>0){const c=a.get(lT($d));l.useTargetObserver(new ju(l.target,c))}e.addBinding(l)}}),QD=Mt(class{constructor(){this.target=Yt.iteratorBinding,xi.mix()}render(e,t,i,s,r,o){e.addBinding(new xi(e,e.container,o,s.domQueue,fn(r,i.forOf,dD),Ku(t),i.to,xt,e.strict??!1))}}),ZD=Mt(class{constructor(){this.target=Yt.textBinding,co.mix()}render(e,t,i,s,r,o){e.addBinding(new co(e,e.container,o,s.domQueue,s,fn(r,i.from,pn),t,e.strict??!1))}}),JD=et("IListenerBindingOptions",n=>n.singleton(class{constructor(){this.p=$(ai),this.prevent=!1,this.onError=(e,t)=>{const i=new this.p.CustomEvent("au-event-error",{cancelable:!0,detail:{event:e,error:t}});if(this.p.window.dispatchEvent(i),!i.defaultPrevented)throw t}}})),eL=Mt(class{constructor(){this.target=Yt.listenerBinding,this._modifierHandler=$(iT),this._defaultOptions=$(JD),Sa.mix()}render(e,t,i,s,r){e.addBinding(new Sa(e.container,fn(r,i.from,uD),t,i.to,new MD(this._defaultOptions.prevent,i.capture,this._defaultOptions.onError),this._modifierHandler.getHandler(i.to,i.modifier),e.strict??!1))}}),tL=Mt(class{constructor(){this.target=Yt.setAttribute}render(e,t,i){t.setAttribute(i.to,i.value)}}),iL=Mt(class{constructor(){this.target=Yt.setClassAttribute}render(e,t,i){hL(t.classList,i.value)}}),sL=Mt(class{constructor(){this.target=Yt.setStyleAttribute}render(e,t,i){t.style.cssText+=i.value}}),nL=["height","width","border-width","padding","padding-left","padding-right","padding-top","padding-right","padding-inline","padding-block","margin","margin-left","margin-right","margin-top","margin-bottom","margin-inline","margin-block","top","right","bottom","left"],rL=Mt(class{constructor(){this.target=Yt.stylePropertyBinding,xi.mix()}render(e,t,i,s,r,o){if(nL.includes(i.to)){e.addBinding(new oL(e,e.container,o,s.domQueue,fn(r,i.from,pn),t.style,i.to,xt,e.strict??!1));return}e.addBinding(new xi(e,e.container,o,s.domQueue,fn(r,i.from,pn),t.style,i.to,xt,e.strict??!1))}});class oL extends xi{updateTarget(e){return typeof e=="number"&&e>0&&console.warn(`[DEV]: Setting number ${e} as value for style.${this.targetProperty}. Did you meant "${e}px"?`),super.updateTarget(e)}}const aL=Mt(class{constructor(){this.target=Yt.attributeBinding,ao.mix()}render(e,t,i,s,r,o){const a=e.container,l=a.has($d,!1)?a.get($d):null;e.addBinding(new ao(e,a,o,s.domQueue,fn(r,i.from,pn),t,i.attr,l==null?i.to:i.to.split(/\s/g).map(c=>l[c]??c).join(" "),xt,e.strict??!1))}}),lL=Mt(class{constructor(){this._compiler=$(ku),this._rendering=$(Uo),this.target=Yt.spreadTransferedBinding}render(e,t,i,s,r,o){Uu.create(e.container.get(xo),t,void 0,this._rendering,this._compiler,s,r,o).forEach(a=>e.addBinding(a))}}),cL=Mt(class{constructor(){this.target=Yt.spreadValueBinding,Qs.mix()}render(e,t,i,s,r,o){const a=i.target;if(a==="$bindables")e.addBinding(new Qs(e,t.viewModel,Gm(t.definition.bindables),r.parse(i.from,pn),o,e.container,s.domQueue,e.strict??!1));else throw ie(820,a)}});function hL(n,e){const t=e.length;let i=0;for(let s=0;s<t;++s)e.charCodeAt(s)===32?(s!==i&&n.add(e.slice(i,s)),i=s+1):s+1===t&&n.add(e.slice(i))}const hT="IController",dT="IInstruction",dL="IRenderLocation",uT="ISlotsInfo";function uL(n,e,t,i,s,r){const o=e.container.createChild();return qu(o,t,n),ft(o,Jc,new jt(hT,e)),ft(o,Vo,new jt(dT,i)),ft(o,Ni,s==null?mT:new gT(s)),ft(o,os,_T),ft(o,rT,r==null?vT:new jt(uT,r)),o}class pT{get $isResolver(){return!0}constructor(e){this.f=e}resolve(){const e=this.f;if(e===null)throw ie(755);if(!$e(e.name)||e.name.length===0)throw ie(756);return e}}function fT(n,e,t,i,s,r,o,a){const l=t instanceof Pi?t:t.$controller,c=l.container.createChild();return qu(c,i,n),ft(c,Jc,new jt(hT,l)),ft(c,Vo,new jt(dT,s)),ft(c,Ni,o==null?mT:new jt(dL,o)),ft(c,os,r==null?_T:new pT(r)),ft(c,rT,vT),{vm:c.invoke(e.Type),ctn:c}}class gT{get name(){return"IRenderLocation"}get $isResolver(){return!0}constructor(e){this._location=e}resolve(){return this._location}}const mT=new gT(null),_T=new pT(null),vT=new jt(uT,new oT(De)),Uo=et("IRendering",n=>n.singleton(pL));class pL{get renderers(){return this._renderers??(this._renderers=this._ctn.getAll(cT,!1).reduce((e,t)=>{var i;return e[t.target]!==void 0&&console.warn(`[DEV:aurelia] Renderer for target ${t.target} already exists.`),e[i=t.target]??(e[i]=t),e},st()))}constructor(){this._compilationCache=new WeakMap,this._fragmentCache=new WeakMap;const e=this._ctn=$(Bs).root,t=this._platform=e.get(ai);this._exprParser=e.get(rl),this._observerLocator=e.get(zo),this._marker=t.document.createElement("au-m"),this._empty=new Hp(t,t.document.createDocumentFragment())}compile(e,t){const i=t.get(ku),s=this._compilationCache;let r=s.get(e);return r==null&&s.set(e,r=Vi.create(e.needsCompile?i.compile(e,t):e)),r}getViewFactory(e,t){return new Wu(t,Vi.getOrCreate(e))}createNodes(e){if(e.enhance===!0)return new Hp(this._platform,this._transformMarker(e.template));let t,i=!1;const s=this._fragmentCache,r=this._platform,o=r.document;if(s.has(e))t=s.get(e);else{const a=e.template;let l;a==null?t=null:a instanceof r.Node?a.nodeName==="TEMPLATE"?(t=a.content,i=!0):(t=o.createDocumentFragment()).appendChild(a.cloneNode(!0)):(l=o.createElement("template"),$e(a)&&(l.innerHTML=a),t=l.content,i=!0),this._transformMarker(t),s.set(e,t)}return t==null?this._empty:new Hp(this._platform,i?o.importNode(t,!0):o.adoptNode(t.cloneNode(!0)))}render(e,t,i,s){const r=i.instructions,o=this.renderers,a=t.length;let l=0,c=0,h=r.length,d,u,p;if(a!==h)throw ie(757,a,h);if(s!=null&&(d=i.surrogates,(h=d.length)>0))for(c=0;h>c;)u=d[c],o[u.type].render(e,s,u,this._platform,this._exprParser,this._observerLocator),++c;if(a>0)for(;a>l;){for(d=r[l],p=t[l],c=0,h=d.length;h>c;)u=d[c],o[u.type].render(e,p,u,this._platform,this._exprParser,this._observerLocator),++c;++l}}_transformMarker(e){if(e==null)return null;const t=this._platform.document.createTreeWalker(e,128);let i;for(;(i=t.nextNode())!=null;)i.nodeValue==="au*"&&i.parentNode.replaceChild(t.currentNode=this._marker.cloneNode(),i);return e}}const jb=et("IShadowDOMStyles"),fL=et("IShadowDOMGlobalStyles",n=>n.instance({applyTo:rn})),{enter:gL,exit:mL}=uk,{wrap:_L,unwrap:vL}=Kk;class bT{get value(){return this._value}constructor(e,t,i,s,r){this.obj=e,this.$get=i,this.useProxy=r,this.isBound=!1,this.running=!1,this._value=void 0,this._callback=s,this.oL=t}handleChange(){this.run()}handleCollectionChange(){this.run()}bind(){this.isBound||(this.compute(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const e=this.obj,t=this._value,i=this.compute();Kn(i,t)||this._callback.call(e,i,t,e)}compute(){this.running=!0,this.obs.version++;try{return gL(this),this._value=vL(this.$get.call(void 0,this.useProxy?_L(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,mL(this)}}}rs(bT,null);class bg{get value(){return this._value}constructor(e,t,i,s,r){this.scope=e,this.l=t,this.oL=i,this.isBound=!1,this.boundFn=!1,this.obj=e.bindingContext,this._expression=s,this._callback=r}handleChange(e){const t=this._expression,i=this.obj,s=this._value;t.$kind==="AccessScope"&&this.obs.count===1||(this.obs.version++,e=it(t,this.scope,this,this),this.obs.clear()),Kn(e,s)||(this._value=e,this._callback.call(i,e,s,i))}bind(){this.isBound||(this.obs.version++,this._value=it(this._expression,this.scope,this,this),this.obs.clear(),this.isBound=!0)}unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this._value=void 0)}}rs(bg,null),zs(bg);class Pi{get lifecycleHooks(){return this._lifecycleHooks}get isActive(){return(this.state&(Bi|_r))>0&&(this.state&Na)===0}get name(){var e;if(this.parent===null)switch(this.vmKind){case io:return`[${this.definition.name}]`;case hs:return this.definition.name;case ci:return this.viewFactory.name}switch(this.vmKind){case io:return`${this.parent.name}>[${this.definition.name}]`;case hs:return`${this.parent.name}>${this.definition.name}`;case ci:return this.viewFactory.name===((e=this.parent.definition)==null?void 0:e.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}get viewModel(){return this._vm}set viewModel(e){this._vm=e,this._vmHooks=e==null||this.vmKind===ci?Ea.none:new Ea(e)}get strict(){var e;return(e=this.definition)==null?void 0:e.strict}constructor(e,t,i,s,r,o,a){this.container=e,this.vmKind=t,this.definition=i,this.viewFactory=s,this.host=o,this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.scope=null,this.isBound=!1,this._isBindingDone=!1,this.hostController=null,this.mountTarget=wT,this.shadowRoot=null,this.nodes=null,this.location=null,this._lifecycleHooks=null,this.state=dd,this._fullyNamed=!1,this.$initiator=null,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this._activatingStack=0,this._detachingStack=0,this._unbindingStack=0,this._vm=r,this._vmHooks=t===ci?Ea.none:new Ea(r),this.logger=null,this.debug=!1,this.location=a,this._rendering=e.root.get(Uo),this.coercion=t===ci?void 0:e.get(CL)}static getCached(e){return cr.get(e)}static getCachedOrThrow(e){const t=Pi.getCached(e);if(t===void 0)throw ie(500,e);return t}static $el(e,t,i,s,r=void 0,o=null){if(cr.has(t))return cr.get(t);if(r==null)try{r=TT(t.constructor)}catch(c){throw console.error(`[DEV:aurelia] Custom element definition not found for creating a controller with host: <${i.nodeName} /> and component ${t.constructor.name||"(Anonymous) class"}`),c}ft(e,r.Type,new jt(r.key,t,r.Type));const a=new Pi(e,hs,r,null,t,i,o),l=e.get(wm(xo));return r.dependencies.length>0&&e.register(...r.dependencies),ft(e,xo,new jt("IHydrationContext",new CT(a,s,l))),cr.set(t,a),(s==null||s.hydrate!==!1)&&a._hydrateCustomElement(s),a}static $attr(e,t,i,s){if(cr.has(t))return cr.get(t);s=s??Xm(t.constructor),ft(e,s.Type,new jt(s.key,t,s.Type));const r=new Pi(e,io,s,null,t,i,null);return s.dependencies.length>0&&e.register(...s.dependencies),cr.set(t,r),r._hydrateCustomAttribute(),r}static $view(e,t=void 0){const i=new Pi(e.container,ci,null,e,null,null,null);return i.parent=t??null,i._hydrateSynthetic(),i}_hydrateCustomElement(e){this.logger=this.container.get(Tr).root,this.debug=this.logger.config.level<=qO.debug,this.debug&&(this.logger=this.logger.scopeTo(this.name));const t=this.container,i=this._vm,s=this.definition;this.scope=Kt.create(i,null,!0),s.watches.length>0&&qb(this,t,s,i),Kb(this,s,i),this._lifecycleHooks=zb.resolve(t),t.register(s.Type),s.injectable!==null&&ft(t,s.injectable,new jt("definition.injectable",i)),(e==null||e.hydrate!==!1)&&(this._hydrate(e==null?void 0:e.hostController),this._hydrateChildren())}_hydrate(e){this._lifecycleHooks.hydrating!=null&&this._lifecycleHooks.hydrating.forEach(RL,this),this._vmHooks._hydrating&&(this.debug&&this.logger.trace("invoking hydrating() hook"),this._vm.hydrating(this));const t=this.definition,i=this._compiledDef=this._rendering.compile(t,this.container),s=i.shadowOptions,r=i.hasSlots,o=i.containerless;let a=this.host,l=this.location,c=!1;if(e!=null?(this.hostController=e,c=!0):(this.hostController=_o(a,wL))!==null&&(a=this.host=this.container.root.get(ai).document.createElement(t.name),c=!0),c&&o&&l==null&&(l=this.location=xc(a)),Ti(a,oi,this),Ti(a,t.key,this),s!==null||r){if(l!=null)throw ie(501);Ti(this.shadowRoot=a.attachShadow(s??EL),oi,this),Ti(this.shadowRoot,t.key,this),this.mountTarget=eo}else l!=null?(Ti(l,oi,this),Ti(l,t.key,this),this.mountTarget=to):this.mountTarget=Jr;this._vm.$controller=this,this.nodes=this._rendering.createNodes(i),this._lifecycleHooks.hydrated!==void 0&&this._lifecycleHooks.hydrated.forEach(OL,this),this._vmHooks._hydrated&&(this.debug&&this.logger.trace("invoking hydrated() hook"),this._vm.hydrated(this))}_hydrateChildren(){this._rendering.render(this,this.nodes.findTargets(),this._compiledDef,this.host),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(Xb,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateCustomAttribute(){const e=this.definition,t=this._vm;e.watches.length>0&&qb(this,this.container,e,t),Kb(this,e,t),t.$controller=this,this._lifecycleHooks=zb.resolve(this.container),this._lifecycleHooks.created!==void 0&&this._lifecycleHooks.created.forEach(Xb,this),this._vmHooks._created&&(this.debug&&this.logger.trace("invoking created() hook"),this._vm.created(this))}_hydrateSynthetic(){this._compiledDef=this._rendering.compile(this.viewFactory.def,this.container),this._rendering.render(this,(this.nodes=this._rendering.createNodes(this._compiledDef)).findTargets(),this._compiledDef,void 0)}activate(e,t,i){switch(this.state){case dd:case po:if(!(t===null||t.isActive))return;this.state=Bi;break;case _r:return;case Ln:throw ie(502,this.name);default:throw ie(503,this.name,AL(this.state))}switch(this.parent=t,this.debug&&!this._fullyNamed&&(this._fullyNamed=!0,(this.logger??(this.logger=this.container.get(Tr).root.scopeTo(this.name))).trace("activate()")),this.vmKind){case hs:this.scope.parent=i??null;break;case io:this.scope=i??null;break;case ci:if(i==null)throw ie(504,this.name);this.hasLockedScope||(this.scope=i);break}this.$initiator=e,this._enterActivating();let s;return this.vmKind!==ci&&this._lifecycleHooks.binding!=null&&(this.debug&&this.logger.trace("lifecycleHooks.binding()"),s=qt(...this._lifecycleHooks.binding.map(xL,this))),this._vmHooks._binding&&(this.debug&&this.logger.trace("binding()"),s=qt(s,this._vm.binding(this.$initiator,this.parent))),Ut(s)?(this._ensurePromise(),s.then(()=>{this._isBindingDone=!0,this.state!==Bi?this._leaveActivating():this.bind()}).catch(r=>{this._reject(r)}),this.$promise):(this._isBindingDone=!0,this.bind(),this.$promise)}bind(){this.debug&&this.logger.trace("bind()");let e=0,t=0,i;if(this.bindings!==null)for(e=0,t=this.bindings.length;t>e;)this.bindings[e].bind(this.scope),++e;if(this.vmKind!==ci&&this._lifecycleHooks.bound!=null&&(this.debug&&this.logger.trace("lifecycleHooks.bound()"),i=qt(...this._lifecycleHooks.bound.map(PL,this))),this._vmHooks._bound&&(this.debug&&this.logger.trace("bound()"),i=qt(i,this._vm.bound(this.$initiator,this.parent))),Ut(i)){this._ensurePromise(),i.then(()=>{this.isBound=!0,this.state!==Bi?this._leaveActivating():this._attach()}).catch(s=>{this._reject(s)});return}this.isBound=!0,this._attach()}_append(...e){switch(this.mountTarget){case Jr:this.host.append(...e);break;case eo:this.shadowRoot.append(...e);break;case to:{let t=0;for(;t<e.length;++t)this.location.parentNode.insertBefore(e[t],this.location);break}}}_attach(){if(this.debug&&this.logger.trace("attach()"),this.hostController!==null)switch(this.mountTarget){case Jr:case eo:this.hostController._append(this.host);break;case to:this.hostController._append(this.location.$start,this.location);break}switch(this.mountTarget){case Jr:this.nodes.appendTo(this.host,this.definition!=null&&this.definition.enhance);break;case eo:{const i=this.container;(i.has(jb,!1)?i.get(jb):i.get(fL)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case to:this.nodes.insertBefore(this.location);break}let e=0,t;if(this.vmKind!==ci&&this._lifecycleHooks.attaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.attaching()"),t=qt(...this._lifecycleHooks.attaching.map(kL,this))),this._vmHooks._attaching&&(this.debug&&this.logger.trace("attaching()"),t=qt(t,this._vm.attaching(this.$initiator,this.parent))),Ut(t)&&(this._ensurePromise(),this._enterActivating(),t.then(()=>{this._leaveActivating()}).catch(i=>{this._reject(i)})),this.children!==null)for(;e<this.children.length;++e)this.children[e].activate(this.$initiator,this,this.scope);this._leaveActivating()}deactivate(e,t){var o;let i;switch(this.state&-17){case _r:this.state=Na;break;case Bi:this.state=Na,i=(o=this.$promise)==null?void 0:o.catch(a=>{this.logger.warn("The activation error will be ignored, as the controller is already scheduled for deactivation. The activation was rejected with: %s",a)});break;case dd:case po:case Ln:case po|Ln:return;default:throw ie(505,this.name,this.state)}this.debug&&this.logger.trace("deactivate()"),this.$initiator=e,e===this&&this._enterDetaching();let s=0,r;if(this.children!==null)for(s=0;s<this.children.length;++s)this.children[s].deactivate(e,this);return Ee(i,()=>{if(this.isBound&&(this.vmKind!==ci&&this._lifecycleHooks.detaching!=null&&(this.debug&&this.logger.trace("lifecycleHooks.detaching()"),r=qt(...this._lifecycleHooks.detaching.map(LL,this))),this._vmHooks._detaching&&(this.debug&&this.logger.trace("detaching()"),r=qt(r,this._vm.detaching(this.$initiator,this.parent)))),Ut(r)&&(this._ensurePromise(),e._enterDetaching(),r.then(()=>{e._leaveDetaching()}).catch(a=>{e._reject(a)})),e.head===null?e.head=this:e.tail.next=this,e.tail=this,e===this)return this._leaveDetaching(),this.$promise})}removeNodes(){switch(this.vmKind){case hs:case ci:this.nodes.remove(),this.nodes.unlink()}if(this.hostController!==null)switch(this.mountTarget){case Jr:case eo:this.host.remove();break;case to:this.location.$start.remove(),this.location.remove();break}}unbind(){this.debug&&this.logger.trace("unbind()");let e=0;if(this.bindings!==null)for(;e<this.bindings.length;++e)this.bindings[e].unbind();switch(this.parent=null,this.vmKind){case io:this.scope=null;break;case ci:this.hasLockedScope||(this.scope=null),(this.state&Ma)===Ma&&!this.viewFactory.tryReturnToCache(this)&&this.$initiator===this&&this.dispose();break;case hs:this.scope.parent=null;break}this.state=po,this.$initiator=null,this._resolve()}_ensurePromise(){this.$promise===void 0&&(this.$promise=new Promise((e,t)=>{this.$resolve=e,this.$reject=t}),this.$initiator!==this&&this.parent._ensurePromise())}_resolve(){this.$promise!==void 0&&(Fp=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Fp(),Fp=void 0)}_reject(e){this.$promise!==void 0&&($p=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,$p(e),$p=void 0),this.$initiator!==this&&this.parent._reject(e)}_enterActivating(){++this._activatingStack,this.$initiator!==this&&this.parent._enterActivating()}_leaveActivating(){if(this.state!==Bi){--this._activatingStack,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating();return}if(--this._activatingStack===0){if(this.vmKind!==ci&&this._lifecycleHooks.attached!=null&&(qr=qt(...this._lifecycleHooks.attached.map(DL,this))),this._vmHooks._attached&&(this.debug&&this.logger.trace("attached()"),qr=qt(qr,this._vm.attached(this.$initiator))),Ut(qr)){this._ensurePromise(),qr.then(()=>{this.state=_r,this._resolve(),this.$initiator!==this&&this.parent._leaveActivating()}).catch(e=>{this._reject(e)}),qr=void 0;return}qr=void 0,this.state=_r,this._resolve()}this.$initiator!==this&&this.parent._leaveActivating()}_enterDetaching(){++this._detachingStack}_leaveDetaching(){if(--this._detachingStack===0){this.debug&&this.logger.trace("detach()"),this._enterUnbinding(),this.removeNodes();let e=this.$initiator.head,t;for(;e!==null;)e!==this&&(e.debug&&e.logger.trace("detach()"),e.removeNodes()),e._isBindingDone&&(e.vmKind!==ci&&e._lifecycleHooks.unbinding!=null&&(t=qt(...e._lifecycleHooks.unbinding.map(NL,e))),e._vmHooks._unbinding&&(e.debug&&e.logger.trace("unbinding()"),t=qt(t,e.viewModel.unbinding(e.$initiator,e.parent)))),Ut(t)&&(this._ensurePromise(),this._enterUnbinding(),t.then(()=>{this._leaveUnbinding()}).catch(i=>{this._reject(i)})),t=void 0,e=e.next;this._leaveUnbinding()}}_enterUnbinding(){++this._unbindingStack}_leaveUnbinding(){if(--this._unbindingStack===0){this.debug&&this.logger.trace("unbind()");let e=this.$initiator.head,t=null;for(;e!==null;)e!==this&&(e._isBindingDone=!1,e.isBound=!1,e.unbind()),t=e.next,e.next=null,e=t;this.head=this.tail=null,this._isBindingDone=!1,this.isBound=!1,this.unbind()}}addBinding(e){this.bindings===null?this.bindings=[e]:this.bindings[this.bindings.length]=e}addChild(e){this.children===null?this.children=[e]:this.children[this.children.length]=e}is(e){switch(this.vmKind){case io:case hs:return this.definition.name===e;case ci:return this.viewFactory.name===e}}lockScope(e){this.scope=e,this.hasLockedScope=!0}setHost(e){return this.vmKind===hs&&(Ti(e,oi,this),Ti(e,this.definition.key,this)),this.host=e,this.mountTarget=Jr,this}setShadowRoot(e){return this.vmKind===hs&&(Ti(e,oi,this),Ti(e,this.definition.key,this)),this.shadowRoot=e,this.mountTarget=eo,this}setLocation(e){return this.vmKind===hs&&(Ti(e,oi,this),Ti(e,this.definition.key,this)),this.location=e,this.mountTarget=to,this}release(){this.state|=Ma}dispose(){this.debug&&this.logger.trace("dispose()"),(this.state&Ln)!==Ln&&(this.state|=Ln,this._vmHooks._dispose&&this._vm.dispose(),this.children!==null&&(this.children.forEach(IL),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,this._vm!==null&&(cr.delete(this._vm),this._vm=null),this._vm=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(e){if(e(this)===!0||this._vmHooks._accept&&this._vm.accept(e)===!0)return!0;if(this.children!==null){const{children:t}=this;for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}const cr=new WeakMap,wT=0,Jr=1,eo=2,to=3,bL=Vs({none:wT,host:Jr,shadowRoot:eo,location:to}),wL={optional:!0},CL=WO(RE);function Kb(n,e,t){var c,h;const i=e.bindables,s=WE(i),r=s.length,o=n.container.get(zo),a="propertiesChanged"in t;if(r===0)return;const l=a?(()=>{let d={},u,p=0;const f=Promise.resolve(),g=()=>{u==null&&(u=f.then(()=>{var _;const m=d;d={},p=0,u=void 0,n.isBound&&((_=t.propertiesChanged)==null||_.call(t,m),p>0&&g())}))};return(m,_,b)=>{d[m]={newValue:_,oldValue:b},p++,g()}})():rn;for(let d=0;d<r;++d){const u=s[d],p=i[u],f=p.callback,g=o.getObserver(t,u);if(p.set!==rn&&((c=g.useCoercer)==null?void 0:c.call(g,p.set,n.coercion))!==!0)throw ie(507,u);if(t[f]!=null||t.propertyChanged!=null||a){const m=(_,b)=>{var C,v;n.isBound&&((C=t[f])==null||C.call(t,_,b),(v=t.propertyChanged)==null||v.call(t,u,_,b),l(u,_,b))};if(((h=g.useCallback)==null?void 0:h.call(g,m))!==!0)throw ie(508,u)}}}const Yb=new Map,yL=n=>{let e=Yb.get(n);return e==null&&(e=new ec(n,0),Yb.set(n,e)),e};function qb(n,e,t,i){const s=e.get(zo),r=e.get(rl),o=t.watches,a=n.vmKind===hs?n.scope:Kt.create(i,null,!0),l=o.length;let c,h,d,u=0;for(;l>u;++u){if({expression:c,callback:h}=o[u],h=We(h)?h:Reflect.get(i,h),!We(h))throw ie(506,h);We(c)?n.addBinding(new bT(i,s,c,h,!0)):(d=$e(c)?r.parse(c,pn):yL(c),n.addBinding(new bg(a,e,s,d,h)))}}function SL(n){return ET(n==null?void 0:n.constructor)}class Ea{constructor(e){this._define="define"in e,this._hydrating="hydrating"in e,this._hydrated="hydrated"in e,this._created="created"in e,this._binding="binding"in e,this._bound="bound"in e,this._attaching="attaching"in e,this._attached="attached"in e,this._detaching="detaching"in e,this._unbinding="unbinding"in e,this._dispose="dispose"in e,this._accept="accept"in e}}Ea.none=new Ea({});const EL={mode:"open"},hs="customElement",io="customAttribute",ci="synthetic",dd=0,Bi=1,_r=2,Na=4,po=8,Ma=16,Ln=32,TL=Vs({none:dd,activating:Bi,activated:_r,deactivating:Na,deactivated:po,released:Ma,disposed:Ln});function AL(n){const e=[];return(n&Bi)===Bi&&e.push("activating"),(n&_r)===_r&&e.push("activated"),(n&Na)===Na&&e.push("deactivating"),(n&po)===po&&e.push("deactivated"),(n&Ma)===Ma&&e.push("released"),(n&Ln)===Ln&&e.push("disposed"),e.length===0?"none":e.join("|")}const Jc=et("IController"),xo=et("IHydrationContext");class CT{constructor(e,t,i){this.instruction=t,this.parent=i,this.controller=e}}function IL(n){n.dispose()}function Xb(n){n.instance.created(this._vm,this)}function RL(n){n.instance.hydrating(this._vm,this)}function OL(n){n.instance.hydrated(this._vm,this)}function xL(n){return n.instance.binding(this._vm,this.$initiator,this.parent)}function PL(n){return n.instance.bound(this._vm,this.$initiator,this.parent)}function kL(n){return n.instance.attaching(this._vm,this.$initiator,this.parent)}function DL(n){return n.instance.attached(this._vm,this.$initiator)}function LL(n){return n.instance.detaching(this._vm,this.$initiator,this.parent)}function NL(n){return n.instance.unbinding(this._vm,this.$initiator,this.parent)}let Fp,$p,qr;class ML{}function Ta(n,e){var t;return((t=n.$au)==null?void 0:t[e])??null}function Ti(n,e,t){(n.$au??(n.$au=new ML))[e]=t}const Vr=et("INode"),FL=et("IEventTarget",n=>n.cachedCallback(e=>e.has(Pc,!0)?e.get(Pc).host:e.get(ai).document)),Ni=et("IRenderLocation"),$d=et("ICssClassMapping"),Hd=new WeakMap;function Bd(n){if(Hd.has(n))return Hd.get(n);let e=0,t=n.nextSibling;for(;t!==null;){if(t.nodeType===8)switch(t.textContent){case"au-start":++e;break;case"au-end":if(e--===0)return t}t=t.nextSibling}if(n.parentNode===null&&n.nodeType===11){const i=_o(n,{optional:!0});if(i==null)return null;if(i.mountTarget===bL.shadowRoot)return Bd(i.host)}return n.parentNode}function $L(n,e){if(n.platform!==void 0&&!(n instanceof n.platform.Node)){const t=n.childNodes;for(let i=0,s=t.length;i<s;++i)Hd.set(t[i],e)}else Hd.set(n,e)}function xc(n){if(yT(n))return n;const e=n.ownerDocument.createComment("au-end"),t=e.$start=n.ownerDocument.createComment("au-start"),i=n.parentNode;return i!==null&&(i.replaceChild(e,n),i.insertBefore(t,e)),e}function yT(n){return n.textContent==="au-end"}class Hp{get firstChild(){return this._firstChild}get lastChild(){return this._lastChild}constructor(e,t){this.platform=e,this.next=void 0,this._isMounted=!1,this._isLinked=!1,this.ref=null;const i=(this.f=t).querySelectorAll("au-m");let s=0,r=i.length,o=this.t=Array(r),a,l;for(;r>s;)l=i[s],a=l.nextSibling,l.remove(),a.nodeType===8&&(l=a,(a=a.nextSibling).$start=l),o[s]=a,++s;const c=t.childNodes,h=this.childNodes=Array(r=c.length);for(s=0;r>s;)h[s]=c[s],++s;this._firstChild=t.firstChild,this._lastChild=t.lastChild}findTargets(){return this.t}insertBefore(e){if(this._isLinked&&this.ref)this.addToLinked();else{const t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,e.parentNode.insertBefore(this.f,e)}}appendTo(e,t=!1){if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,e.appendChild(i),i!==r);)i=s}else this._isMounted=!0,t||e.appendChild(this.f)}remove(){if(this._isMounted){this._isMounted=!1;const e=this.f,t=this._lastChild;let i,s=this._firstChild;for(;s!==null&&(i=s.nextSibling,e.appendChild(s),s!==t);)s=i}}addToLinked(){const e=this.ref,t=e.parentNode;if(this._isMounted){let i=this._firstChild,s;const r=this._lastChild;for(;i!=null&&(s=i.nextSibling,t.insertBefore(i,e),i!==r);)i=s}else this._isMounted=!0,t.insertBefore(this.f,e)}unlink(){this._isLinked=!1,this.next=void 0,this.ref=void 0}link(e){this._isLinked=!0,yT(e)?this.ref=e:(this.next=e,this._obtainRefNode())}_obtainRefNode(){this.next!==void 0?this.ref=this.next.firstChild:this.ref=void 0}}const Yu=et("IWindow",n=>n.callback(e=>e.get(ai).window)),HL=et("ILocation",n=>n.callback(e=>e.get(Yu).location)),BL=et("IHistory",n=>n.callback(e=>e.get(Yu).history)),qu=(n,e,t=n.get(ai))=>(ft(n,t.HTMLElement,ft(n,t.Element,ft(n,Vr,new jt("ElementResolver",e)))),n);function Tn(n){return function(e,t){return t.addInitializer(function(){ST(n,this)}),e}}const Bp=new WeakMap;class Vi{get type(){return vD}constructor(e,t,i,s,r,o,a,l,c,h,d,u,p,f,g,m,_,b,C){this.Type=e,this.name=t,this.aliases=i,this.key=s,this.capture=r,this.template=o,this.instructions=a,this.dependencies=l,this.injectable=c,this.needsCompile=h,this.surrogates=d,this.bindables=u,this.containerless=p,this.shadowOptions=f,this.hasSlots=g,this.enhance=m,this.watches=_,this.strict=b,this.processContent=C}static create(e,t=null){if(t===null){const s=e;if($e(s))throw ie(761,e);const r=js("name",s,Vd);We(s.Type)?t=s.Type:t=AT(dS(r));for(const o of Object.values(Xi.from(s.bindables)))Xi._add(o,t);return new Vi(t,r,Vt(s.aliases),js("key",s,()=>fa(r)),ji("capture",s,t,cs),ji("template",s,t,ls),Vt(s.instructions),Vt(Ki(t,"dependencies"),s.dependencies),js("injectable",s,ls),js("needsCompile",s,zp),Vt(s.surrogates),Xi.from(Ki(t,"bindables"),s.bindables),ji("containerless",s,t,cs),js("shadowOptions",s,ls),js("hasSlots",s,cs),js("enhance",s,cs),js("watches",s,zL),js("strict",s,Vp),Ts("processContent",t,ls))}if($e(e))return new Vi(t,e,Vt(Ki(t,"aliases"),t.aliases),fa(e),Ts("capture",t,cs),Ts("template",t,ls),Vt(Ki(t,"instructions"),t.instructions),Vt(Ki(t,"dependencies"),t.dependencies),Ts("injectable",t,ls),Ts("needsCompile",t,zp),Vt(Ki(t,"surrogates"),t.surrogates),Xi.from(...Xi.getAll(t),Ki(t,"bindables"),t.bindables),Ts("containerless",t,cs),Ts("shadowOptions",t,ls),Ts("hasSlots",t,cs),Ts("enhance",t,cs),Vt(mg.getDefinitions(t),t.watches),Ts("strict",t,Vp),Ts("processContent",t,ls));const i=js("name",e,Vd);for(const s of Object.values(Xi.from(e.bindables)))Xi._add(s,t);return new Vi(t,i,Vt(Ki(t,"aliases"),e.aliases,t.aliases),fa(i),ji("capture",e,t,cs),ji("template",e,t,ls),Vt(Ki(t,"instructions"),e.instructions,t.instructions),Vt(Ki(t,"dependencies"),e.dependencies,t.dependencies),ji("injectable",e,t,ls),ji("needsCompile",e,t,zp),Vt(Ki(t,"surrogates"),e.surrogates,t.surrogates),Xi.from(...Xi.getAll(t),Ki(t,"bindables"),t.bindables,e.bindables),ji("containerless",e,t,cs),ji("shadowOptions",e,t,ls),ji("hasSlots",e,t,cs),ji("enhance",e,t,cs),Vt(e.watches,mg.getDefinitions(t),t.watches),ji("strict",e,t,Vp),ji("processContent",e,t,ls))}static getOrCreate(e){if(e instanceof Vi)return e;if(Bp.has(e))return Bp.get(e);const t=Vi.create(e);return Bp.set(e,t),$s(t,t.Type,oi),t}register(e,t){const i=this.Type,s=typeof t=="string"?fa(t):this.key,r=this.aliases;if(e.has(s,!1)){console.warn(ie(153,this.name));return}e.register(e.has(i,!1)?null:En(i,i),Ir(i,s),...r.map(o=>Ir(i,fa(o))))}toString(){return`au:ce:${this.name}`}}const VL={name:void 0,searchParents:!1,optional:!1},ls=()=>null,Vp=()=>{},cs=()=>!1,zp=()=>!0,zL=()=>De,Po="custom-element",oi=er(Po),fa=n=>`${oi}:${n}`,Vd=(n=>()=>`unnamed-${++n}`)(0),WL=(n,e,t)=>{$s(t,n,sr(e))},ST=(n,e)=>{const t=Vi.create(n,e),i=t.Type;return $s(t,i,oi,Zs),i},ET=n=>{var e;return We(n)&&($u(oi,n)||((e=n.$au)==null?void 0:e.type)===Po)},_o=(n,e=VL)=>{if(e.name===void 0&&e.searchParents!==!0){const i=Ta(n,oi);if(i===null){if(e.optional===!0)return null;throw ie(762,n)}return i}if(e.name!==void 0){if(e.searchParents!==!0){const r=Ta(n,oi);if(r===null)throw ie(763,n);return r.is(e.name)?r:void 0}let i=n,s=!1;for(;i!==null;){const r=Ta(i,oi);if(r!==null&&(s=!0,r.is(e.name)))return r;i=Bd(i)}if(s)return;throw ie(764,n)}let t=n;for(;t!==null;){const i=Ta(t,oi);if(i!==null)return i;t=Bd(t)}throw ie(765,n)},Ki=(n,e)=>vi(sr(e),n),TT=n=>{const e=vi(oi,n)??Rr(n,Po,Vi.create);if(e==null)throw ie(760,n);return e},UL=()=>{const n={$isInterface:!1,register(){return{$isResolver:!0,resolve(e,t){return t.has(n,!0)?t.get(n):null}}}};return n},AT=function(){const n={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(t,i=e){const s=class{};return n.value=t,UE(s,"name",n),i!==e&&zE(s.prototype,i),s}}(),Qe=Vs({name:oi,keyFrom:fa,isType:ET,for:_o,define:ST,getDefinition:TT,annotate:WL,getAnnotation:Ki,generateName:Vd,createInjectable:UL,generateType:AT,find(n,e){const t=n.find(Po,e);return t==null?null:vi(oi,t)??Rr(t,Po,Vi.create)??null}}),Pc=et("IAppRoot");class Qb{get controller(){return this._controller}constructor(e,t,i,s=!1){this.config=e,this.container=t,this._hydratePromise=void 0,this._useOwnAppTasks=s;const r=this.host=e.host;i.prepare(this),ft(t,FL,new jt("IEventTarget",r)),qu(t,r,this.platform=this._createPlatform(t,r)),this._hydratePromise=Ee(this._runAppTasks("creating"),()=>{e.allowActionlessForm||r.addEventListener("submit",u=>{const p=u.target,f=!p.getAttribute("action");p.tagName==="FORM"&&f&&u.preventDefault()},!1);const o=s?t:t.createChild(),a=e.component;let l;We(a)?l=o.invoke(a):l=e.component;const c={hydrate:!1,projections:null},h=s?Vi.create({name:Vd(),template:this.host,enhance:!0,strict:e.strictBinding}):void 0,d=this._controller=Pi.$el(o,l,r,c,h);return d._hydrateCustomElement(c),Ee(this._runAppTasks("hydrating"),()=>(d._hydrate(),Ee(this._runAppTasks("hydrated"),()=>{d._hydrateChildren(),this._hydratePromise=void 0})))})}activate(){return Ee(this._hydratePromise,()=>Ee(this._runAppTasks("activating"),()=>Ee(this._controller.activate(this._controller,null,void 0),()=>this._runAppTasks("activated"))))}deactivate(){return Ee(this._runAppTasks("deactivating"),()=>Ee(this._controller.deactivate(this._controller,null),()=>this._runAppTasks("deactivated")))}_runAppTasks(e){const t=this.container,i=this._useOwnAppTasks&&!t.has(gg,!1)?[]:t.getAll(gg);return qt(...i.reduce((s,r)=>(r.slot===e&&s.push(r.run()),s),[]))}_createPlatform(e,t){let i;if(e.has(ai,!1))i=e.get(ai);else{if(t.ownerDocument.defaultView===null)throw ie(769);i=new br(t.ownerDocument.defaultView),e.register(Km(ai,i))}return i}dispose(){var e;(e=this._controller)==null||e.dispose()}}const wg=et("IAurelia");let GL=class Cg{get isRunning(){return this._isRunning}get isStarting(){return this._isStarting}get isStopping(){return this._isStopping}get root(){if(this._root==null){if(this.next==null)throw ie(767);return this.next}return this._root}constructor(e=wi.createContainer()){if(this.container=e,this._isRunning=!1,this._isStarting=!1,this._isStopping=!1,this._root=void 0,this.next=void 0,this._startPromise=void 0,this._stopPromise=void 0,e.has(wg,!0)||e.has(Cg,!0))throw ie(768);ft(e,wg,new jt("IAurelia",this)),ft(e,Cg,new jt("Aurelia",this)),ft(e,Pc,this._rootProvider=new jt("IAppRoot"))}register(...e){return this.container.register(...e),this}app(e){return this.next=new Qb(e,this.container,this._rootProvider),this}enhance(e){const t=e.container??this.container.createChild(),i=ft(t,Pc,new jt("IAppRoot")),s=new Qb({host:e.host,component:e.component},t,i,!0);return Ee(s.activate(),()=>s)}async waitForIdle(){const e=this.root.platform;await e.domQueue.yield(),await e.taskQueue.yield()}start(e=this.next){if(e==null)throw ie(770);return Ut(this._startPromise)?this._startPromise:this._startPromise=Ee(this.stop(),()=>(Reflect.set(e.host,"$aurelia",this),this._rootProvider.prepare(this._root=e),this._isStarting=!0,Ee(e.activate(),()=>{this._isRunning=!0,this._isStarting=!1,this._startPromise=void 0,this._dispatchEvent(e,"au-started",e.host)})))}stop(e=!1){if(Ut(this._stopPromise))return this._stopPromise;if(this._isRunning===!0){const t=this._root;return this._isRunning=!1,this._isStopping=!0,this._stopPromise=Ee(t.deactivate(),()=>{Reflect.deleteProperty(t.host,"$aurelia"),e&&t.dispose(),this._root=void 0,this._rootProvider.dispose(),this._isStopping=!1,this._dispatchEvent(t,"au-stopped",t.host)})}}dispose(){if(this._isRunning||this._isStopping)throw ie(771);this.container.dispose()}_dispatchEvent(e,t,i){const s=new e.platform.window.CustomEvent(t,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(s)}};const IT=et("ISVGAnalyzer",n=>n.singleton(jL));class jL{isStandardSvgAttribute(e,t){return!1}}class RT{constructor(){this.fns=[],this._tagAttrMap=st(),this._globalAttrMap=st(),this.svg=$(IT),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}useMapping(e){var o;let t,i,s,r;for(s in e){t=e[s],i=(o=this._tagAttrMap)[s]??(o[s]=st());for(r in t){if(i[r]!==void 0)throw Zb(r,s);i[r]=t[r]}}}useGlobalMapping(e){const t=this._globalAttrMap;for(const i in e){if(t[i]!==void 0)throw Zb(i,"*");t[i]=e[i]}}useTwoWay(e){this.fns.push(e)}isTwoWay(e,t){return KL(e,t)||this.fns.length>0&&this.fns.some(i=>i(e,t))}map(e,t){var i;return((i=this._tagAttrMap[e.nodeName])==null?void 0:i[t])??this._globalAttrMap[t]??(ug(e,t,this.svg)?t:null)}}RT.register=Xc(BS);function KL(n,e){switch(n.nodeName){case"INPUT":switch(n.type){case"checkbox":case"radio":return e==="checked";default:return e==="value"||e==="files"||e==="value-as-number"||e==="value-as-date"}case"TEXTAREA":case"SELECT":return e==="value";default:switch(e){case"textcontent":case"innerhtml":return n.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}function Zb(n,e){return ie(719,n,e)}const YL={register(n){n.register(TE,RT,OT)}};class qL{constructor(e,t,i){this.attrs=e,this.bindables=t,this.primary=i}}class OT{constructor(){this._resourceCache=new WeakMap,this._bindableCache=new WeakMap}el(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new Jb),t in i._element?i._element[t]:i._element[t]=Qe.find(e,t)}attr(e,t){let i=this._resourceCache.get(e);return i==null&&this._resourceCache.set(e,i=new Jb),t in i._attr?i._attr[t]:i._attr[t]=nr.find(e,t)}bindables(e){let t=this._bindableCache.get(e);if(t==null){const i=e.bindables,s=st();let r,o,a=!1,l,c;for(o in i){if(r=i[o],c=r.attribute,r.primary===!0){if(a)throw ie(714,e);a=!0,l=r}else!a&&l==null&&(l=r);s[c]=Fn.create(o,r)}r==null&&e.type==="custom-attribute"&&(l=s.value=Fn.create("value",{mode:e.defaultBindingMode??Um})),this._bindableCache.set(e,t=new qL(s,i,l??null))}return t}}OT.register=Xc(AE);class Jb{constructor(){this._element=st(),this._attr=st()}}const Wp=st();class kc{static forNs(e){return Wp[e]??(Wp[e]=new kc(e))}constructor(e){this.ns=e,this.type=$r|Sn}getValue(e,t){return e.getAttributeNS(this.ns,t)}setValue(e,t,i){e==null?t.removeAttributeNS(this.ns,i):t.setAttributeNS(this.ns,i,e)}}Gu(kc);class xT{constructor(){this.type=$r|Sn}getValue(e,t){return e.getAttribute(t)}setValue(e,t,i){e==null?t.removeAttribute(i):t.setAttribute(i,e)}}Gu(xT);const ud=new xT;class vo{static _getSelectedOptions(e){const t=[];if(e.length===0)return t;const i=e.length;let s=0,r;for(;i>s;)r=e[s],r.selected&&(t[t.length]=uo.call(r,"model")?r.model:r.value),++s;return t}static _defaultMatcher(e,t){return e===t}constructor(e,t,i,s){this.type=$r|jm|Sn,this._value=void 0,this._oldValue=void 0,this._hasChanges=!1,this._arrayObserver=void 0,this._nodeObserver=void 0,this._observing=!1,this._listened=!1,this._el=e,this._observerLocator=s,this._config=i}getValue(){return this._observing?this._value:this._el.multiple?vo._getSelectedOptions(this._el.options):this._el.value}setValue(e){this._oldValue=this._value,this._value=e,this._hasChanges=e!==this._oldValue,this._observeArray(e instanceof Array?e:null),this._flushChanges()}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){const e=this._value,t=this._el,i=Nt(e),s=t.matcher??vo._defaultMatcher,r=t.options;let o=r.length;for(;o-- >0;){const a=r[o],l=uo.call(a,"model")?a.model:a.value;if(i){a.selected=e.findIndex(c=>!!s(l,c))!==-1;continue}a.selected=!!s(l,e)}}syncValue(){const e=this._el,t=e.options,i=t.length,s=this._value;let r=0;if(e.multiple){if(!(s instanceof Array))return!0;let l;const c=e.matcher||vo._defaultMatcher,h=[];for(;r<i;)l=t[r],l.selected&&h.push(uo.call(l,"model")?l.model:l.value),++r;let d;for(r=0;r<s.length;)d=s[r],h.findIndex(u=>!!c(d,u))===-1?s.splice(r,1):++r;for(r=0;r<h.length;)d=h[r],s.findIndex(u=>!!c(d,u))===-1&&s.push(d),++r;return!1}let o=null,a;for(;r<i;){if(a=t[r],a.selected){o=uo.call(a,"model")?a.model:a.value;break}++r}return this._oldValue=this._value,this._value=o,!0}_start(){(this._nodeObserver=sT(this._el,this._handleNodeChange.bind(this))).observe(this._el,{childList:!0,subtree:!0,characterData:!0}),this._observeArray(this._value instanceof Array?this._value:null),this._observing=!0}_stop(){var e;this._nodeObserver.disconnect(),(e=this._arrayObserver)==null||e.unsubscribe(this),this._nodeObserver=this._arrayObserver=void 0,this._observing=!1}_observeArray(e){var t;if((t=this._arrayObserver)==null||t.unsubscribe(this),this._arrayObserver=void 0,e!=null){if(!this._el.multiple)throw ie(654);(this._arrayObserver=this._observerLocator.getArrayObserver(e)).subscribe(this)}}handleEvent(){this.syncValue()&&this._flush()}_handleNodeChange(e){this.syncOptions(),this.syncValue()&&this._flush()}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}s_(vo),Fs(vo,null);const XL="--";class PT{constructor(e){this.obj=e,this.type=$r|Sn,this._value="",this._oldValue="",this.styles={},this.version=0,this._hasChanges=!1}getValue(){return this.obj.style.cssText}setValue(e){this._value=e,this._hasChanges=e!==this._oldValue,this._flushChanges()}_getStyleTuplesFromString(e){const t=[],i=/url\([^)]+$/;let s=0,r="",o,a,l,c;for(;s<e.length;){if(o=e.indexOf(";",s),o===-1&&(o=e.length),r+=e.substring(s,o),s=o+1,i.test(r)){r+=";";continue}a=r.indexOf(":"),l=r.substring(0,a).trim(),c=r.substring(a+1).trim(),t.push([l,c]),r=""}return t}_getStyleTuplesFromObject(e){let t,i;const s=[];for(i in e)if(t=e[i],t!=null){if($e(t)){if(i.startsWith(XL)){s.push([i,t]);continue}s.push([uS(i),t]);continue}s.push(...this._getStyleTuples(t))}return s}_getStyleTuplesFromArray(e){const t=e.length;if(t>0){const i=[];let s=0;for(;t>s;++s)i.push(...this._getStyleTuples(e[s]));return i}return De}_getStyleTuples(e){return $e(e)?this._getStyleTuplesFromString(e):e instanceof Array?this._getStyleTuplesFromArray(e):e instanceof Object?this._getStyleTuplesFromObject(e):De}_flushChanges(){if(this._hasChanges){this._hasChanges=!1;const e=this._value,t=this.styles,i=this._getStyleTuples(e);let s,r=this.version;this._oldValue=e;let o,a,l,c=0;const h=i.length;for(;c<h;++c)o=i[c],a=o[0],l=o[1],this.setProperty(a,l),t[a]=r;if(this.styles=t,this.version+=1,r===0)return;r-=1;for(s in t)!uo.call(t,s)||t[s]!==r||this.obj.style.removeProperty(s)}}setProperty(e,t){let i="";t!=null&&We(t.indexOf)&&t.includes("!important")&&(i="important",t=t.replace("!important","")),this.obj.style.setProperty(e,t,i)}bind(){this._value=this._oldValue=this.obj.style.cssText}}Gu(PT);class yg{constructor(e,t,i){this.type=$r|jm|Sn,this._value="",this._oldValue="",this._hasChanges=!1,this._listened=!1,this._el=e,this._key=t,this._config=i}getValue(){return this._value}setValue(e){Kn(e,this._value)||(this._oldValue=this._value,this._value=e,this._hasChanges=!0,this._config.readonly||this._flushChanges())}_flushChanges(){this._hasChanges&&(this._hasChanges=!1,this._el[this._key]=this._value??this._config.default,this._flush())}handleEvent(){this._oldValue=this._value,this._value=this._el[this._key],this._oldValue!==this._value&&(this._hasChanges=!1,this._flush())}_start(){this._value=this._oldValue=this._el[this._key]}_flush(){const e=this._oldValue;this._oldValue=this._value,this.subs.notify(this._value,e)}}s_(yg),Fs(yg,null);const ew=(()=>{const n="http://www.w3.org/1999/xlink",e="http://www.w3.org/XML/1998/namespace",t="http://www.w3.org/2000/xmlns/";return zE(st(),{"xlink:actuate":["actuate",n],"xlink:arcrole":["arcrole",n],"xlink:href":["href",n],"xlink:role":["role",n],"xlink:show":["show",n],"xlink:title":["title",n],"xlink:type":["type",n],"xml:lang":["lang",e],"xml:space":["space",e],xmlns:["xmlns",t],"xmlns:xlink":["xlink",t]})})(),kT=new NE;kT.type=$r|Sn;class n_{constructor(){this.allowDirtyCheck=!0,this._events=st(),this._globalEvents=st(),this._overrides=st(),this._globalOverrides=st(),this._locator=$(FO),this._platform=$(ai),this._dirtyChecker=$($m),this.svg=$(IT);const e=["change","input"],t={events:e,default:""};this.useConfig({INPUT:{value:t,valueAsNumber:{events:e,default:0},checked:{type:Sg,events:e},files:{events:e,readonly:!0}},SELECT:{value:{type:vo,events:["change"],default:""}},TEXTAREA:{value:t}});const i={events:["change","input","blur","keyup","paste"],default:""},s={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:s,scrollLeft:s,textContent:i,innerHTML:i}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}handles(e,t){return e instanceof this._platform.Node}useConfig(e,t,i){const s=this._events;let r;if($e(e))r=s[e]??(s[e]=st()),r[t]==null?r[t]=i:Ah(e,t);else for(const o in e){r=s[o]??(s[o]=st());const a=e[o];for(t in a)r[t]==null?r[t]=a[t]:Ah(o,t)}}useConfigGlobal(e,t){const i=this._globalEvents;if(typeof e=="object")for(const s in e)i[s]==null?i[s]=e[s]:Ah("*",s);else i[e]==null?i[e]=t:Ah("*",e)}getAccessor(e,t,i){if(t in this._globalOverrides||t in(this._overrides[e.tagName]??VO))return this.getObserver(e,t,i);switch(t){case"src":case"href":case"role":case"minLength":case"maxLength":case"placeholder":case"size":case"pattern":case"title":case"popovertarget":case"popovertargetaction":return(t==="popovertarget"||t==="popovertargetaction")&&e.nodeName!=="INPUT"&&e.nodeName!=="BUTTON"&&console.warn(`[aurelia] Popover API are only valid on <input> or <button>. Detected ${t} on <${e.nodeName.toLowerCase()}>`),ud;default:{const s=ew[t];return s!==void 0?kc.forNs(s[1]):ug(e,t,this.svg)?ud:kT}}}overrideAccessor(e,t){var s,r;let i;if($e(e))i=(s=this._overrides)[e]??(s[e]=st()),i[t]=!0;else for(const o in e)for(const a of e[o])i=(r=this._overrides)[o]??(r[o]=st()),i[a]=!0}overrideAccessorGlobal(...e){for(const t of e)this._globalOverrides[t]=!0}getNodeObserverConfig(e,t){var i;return((i=this._events[e.tagName])==null?void 0:i[t])??this._globalEvents[t]}getNodeObserver(e,t,i){var o;const s=((o=this._events[e.tagName])==null?void 0:o[t])??this._globalEvents[t];let r;return s!=null?(r=new(s.type??yg)(e,t,s,i,this._locator),r.doNotCache||(ME(e)[t]=r),r):null}getObserver(e,t,i){switch(t){case"class":return new ju(e);case"css":case"style":return new PT(e)}const s=this.getNodeObserver(e,t,i);if(s!=null)return s;const r=ew[t];if(r!==void 0)return kc.forNs(r[1]);if(ug(e,t,this.svg))return ud;if(t in e.constructor.prototype){if(this.allowDirtyCheck)return this._dirtyChecker.createProperty(e,t);throw ie(652,t)}else return new Hm(e,t)}}n_.register=Xc(Bm);function QL(n,e){if(n instanceof Array)return e.getArrayObserver(n);if(n instanceof Map)return e.getMapObserver(n);if(n instanceof Set)return e.getSetObserver(n)}function Ah(n,e){throw ie(653,n,e)}function tw(n,e){return n===e}class Sg{constructor(e,t,i,s){this.type=$r|jm|Sn,this._value=void 0,this._oldValue=void 0,this._collectionObserver=void 0,this._valueObserver=void 0,this._listened=!1,this._el=e,this.oL=s,this._config=i}getValue(){return this._value}setValue(e){const t=this._value;e!==t&&(this._value=e,this._oldValue=t,this._observe(),this._synchronizeElement(),this._flush())}handleCollectionChange(){this._synchronizeElement()}handleChange(e,t){this._synchronizeElement()}_synchronizeElement(){const e=this._value,t=this._el,i=uo.call(t,"model")?t.model:t.value,s=t.type==="radio",r=t.matcher!==void 0?t.matcher:tw;if(s)t.checked=!!r(e,i);else if(e===!0)t.checked=!0;else{let o=!1;if(Nt(e))o=e.findIndex(a=>!!r(a,i))!==-1;else if(e instanceof Set){for(const a of e)if(r(a,i)){o=!0;break}}else if(e instanceof Map)for(const a of e){const l=a[0],c=a[1];if(r(l,i)&&c===!0){o=!0;break}}t.checked=o}}handleEvent(){let e=this._oldValue=this._value;const t=this._el,i=uo.call(t,"model")?t.model:t.value,s=t.checked,r=t.matcher!==void 0?t.matcher:tw;if(t.type==="checkbox"){if(Nt(e)){const o=e.findIndex(a=>!!r(a,i));s&&o===-1?e.push(i):!s&&o!==-1&&e.splice(o,1);return}else if(e instanceof Set){const o={};let a=o;for(const l of e)if(r(l,i)===!0){a=l;break}s&&a===o?e.add(i):!s&&a!==o&&e.delete(a);return}else if(e instanceof Map){let o;for(const a of e){const l=a[0];if(r(l,i)===!0){o=l;break}}e.set(o,s);return}e=s}else if(s)e=i;else return;this._value=e,this._flush()}_start(){this._observe()}_stop(){var e,t;this._value=this._oldValue=void 0,(e=this._collectionObserver)==null||e.unsubscribe(this),(t=this._valueObserver)==null||t.unsubscribe(this),this._collectionObserver=this._valueObserver=void 0}_flush(){Up=this._oldValue,this._oldValue=this._value,this.subs.notify(this._value,Up),Up=void 0}_observe(){var t,i,s,r,o;const e=this._el;(s=this._valueObserver??(this._valueObserver=((t=e.$observers)==null?void 0:t.model)??((i=e.$observers)==null?void 0:i.value)))==null||s.subscribe(this),(r=this._collectionObserver)==null||r.unsubscribe(this),this._collectionObserver=void 0,e.type==="checkbox"&&((o=this._collectionObserver=QL(this._value,this.oL))==null||o.subscribe(this))}}s_(Sg),Fs(Sg,null);let Up;class DT{bind(e,t){if(!(t instanceof xi))throw ie(9994,t);t.useTargetObserver(ud)}}DT.$au={type:_s,name:"attr"};class LT{bind(e,t){if(!("handleEvent"in t))throw ie(801);t.self=!0}unbind(e,t){t.self=!1}}LT.$au={type:_s,name:"self"};class NT{constructor(){this._observerLocator=$(zo),this._nodeObserverLocator=$(Bm)}bind(e,t,...i){if(!(this._nodeObserverLocator instanceof n_))throw ie(9993);if(i.length===0)throw ie(802);if(!(t instanceof xi)||!(t.mode&qn))throw ie(803);const s=this._nodeObserverLocator.getNodeObserverConfig(t.target,t.targetProperty);if(s==null)throw ie(9992,t);const r=this._nodeObserverLocator.getNodeObserver(t.target,t.targetProperty,this._observerLocator);r.useConfig({readonly:s.readonly,default:s.default,events:i}),t.useTargetObserver(r)}}NT.$au={type:_s,name:"updateTrigger"};class zd{constructor(){this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this._wantsDeactivate=!1,this._swapId=0,this._ifFactory=$(os),this._location=$(Ni)}attaching(e,t){return this._swap(this.value)}detaching(e,t){return this._wantsDeactivate=!0,Ee(this.pending,()=>{var i;this._wantsDeactivate=!1,this.pending=void 0,(i=this.view)==null||i.deactivate(e,this.$controller)})}valueChanged(e,t){if(this.$controller.isActive&&(e=!!e,t=!!t,e!==t))return this._swap(e)}_swap(e){const t=this.view,i=this.$controller,s=this._swapId++,r=()=>!this._wantsDeactivate&&this._swapId===s+1;let o;return Ee(this.pending,()=>this.pending=Ee(t==null?void 0:t.deactivate(t,i),()=>{var a;if(r()&&(e?o=this.view=this.ifView=this.cache&&this.ifView!=null?this.ifView:this._ifFactory.create():o=this.view=this.elseView=this.cache&&this.elseView!=null?this.elseView:(a=this.elseFactory)==null?void 0:a.create(),o!=null))return o.setLocation(this._location),Ee(o.activate(o,i,i.scope),()=>{r()&&(this.pending=void 0)})}))}dispose(){var e,t;(e=this.ifView)==null||e.dispose(),(t=this.elseView)==null||t.dispose(),this.ifView=this.elseView=this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}zd.$au={type:bi,name:"if",isTemplateController:!0,bindables:{value:!0,cache:{set:n=>n===""||!!n&&n!=="false"}}};class MT{constructor(){this._factory=$(os)}link(e,t,i,s){const r=e.children,o=r[r.length-1];if(o instanceof zd)o.elseFactory=this._factory;else if(o.viewModel instanceof zd)o.viewModel.elseFactory=this._factory;else throw ie(810)}}MT.$au={type:"custom-attribute",name:"else",isTemplateController:!0};function ZL(n){n.dispose()}const JL=["BindingBehavior","ValueConverter"];class FT{constructor(){this.views=[],this.key=null,this._oldViews=[],this._scopes=[],this._oldScopes=[],this._scopeMap=new Map,this._observer=void 0,this._observingInnerItems=!1,this._reevaluating=!1,this._innerItemsExpression=null,this._normalizedItems=void 0,this._hasDestructuredLocal=!1,this._location=$(Ni),this._parent=$(Jc),this._factory=$(os),this._resolver=$(tN);const t=$(Vo).props[0].props[0];if(t!==void 0){const{to:i,value:s,command:r}=t;if(i==="key")if(r===null)this.key=s;else if(r==="bind")this.key=$(rl).parse(s,pn);else throw ie(775,r);else throw ie(776,i)}}binding(e,t){const i=this._parent.bindings,s=i.length;let r,o,a=0;for(;s>a;++a)if(r=i[a],r.target===this&&r.targetProperty==="items"){o=this.forOf=r.ast,this._forOfBinding=r;let c=o.iterable;for(;c!=null&&JL.includes(c.$kind);)c=c.expression,this._observingInnerItems=!0;this._innerItemsExpression=c;break}this._refreshCollectionObserver();const l=o.declaration;(this._hasDestructuredLocal=l.$kind==="ArrayDestructuring"||l.$kind==="ObjectDestructuring")||(this.local=it(l,this.$controller.scope,r,null))}attaching(e,t){return this._normalizeToArray(),this._createScopes(void 0),this._activateAllViews(e,this._normalizedItems??De)}detaching(e,t){return this._refreshCollectionObserver(),this._deactivateAllViews(e)}unbinding(e,t){this._scopeMap.clear()}itemsChanged(){this.$controller.isActive&&(this._refreshCollectionObserver(),this._normalizeToArray(),this._createScopes(void 0),this._applyIndexMap(void 0))}handleCollectionChange(e,t){const i=this.$controller;if(i.isActive){if(this._observingInnerItems){if(this._reevaluating)return;this._reevaluating=!0,this.items=it(this.forOf.iterable,i.scope,this._forOfBinding,null),this._reevaluating=!1;return}this._normalizeToArray(),this._createScopes(this.key===null?t:void 0),this._applyIndexMap(t)}}_applyIndexMap(e){const t=this.views;this._oldViews=t.slice();const i=t.length,s=this.key,r=s!==null,o=this._oldScopes,a=this._scopes;if(r||e===void 0){const l=this.local,h=this._normalizedItems.length,u=this.forOf.declaration,p=this._forOfBinding,f=this._hasDestructuredLocal;e=Ao(h);let g=0;if(i===0)for(;g<h;++g)e[g]=-2;else if(h===0)for(g=0;g<i;++g)e.deletedIndices.push(g),e.deletedItems.push(pd(f,u,o[g],p,l));else if(r){const m=Array(i);for(g=0;g<i;++g)m[g]=lw(f,s,u,o[g],p,l);const _=Array(i);for(g=0;g<h;++g)_[g]=lw(f,s,u,a[g],p,l);for(g=0;g<h;++g)m.includes(_[g])?e[g]=m.indexOf(_[g]):e[g]=-2;for(g=0;g<i;++g)_.includes(m[g])||(e.deletedIndices.push(g),e.deletedItems.push(pd(f,u,o[g],p,l)))}else{for(g=0;g<h;++g)o.includes(a[g])?e[g]=o.indexOf(a[g]):e[g]=-2;for(g=0;g<i;++g)a.includes(o[g])||(e.deletedIndices.push(g),e.deletedItems.push(pd(f,u,o[g],p,l)))}}if(e.deletedIndices.length>0){const l=Ee(this._deactivateAndRemoveViewsByKey(e),()=>this._createAndActivateAndSortViewsByKey(e));Ut(l)&&l.catch(pg)}else this._createAndActivateAndSortViewsByKey(e)}_refreshCollectionObserver(){var o,a;const e=this.$controller.scope;let t=this._innerItems,i=this._observingInnerItems,s;i&&(t=this._innerItems=it(this._innerItemsExpression,e,this._forOfBinding,null)??null,i=this._observingInnerItems=!Kn(this.items,t));const r=this._observer;if(this.$controller.isActive){const l=i?t:this.items;s=this._observer=(a=(o=this._resolver.resolve(l)).getObserver)==null?void 0:a.call(o,l),r!==s&&(r==null||r.unsubscribe(this),s==null||s.subscribe(this))}else r==null||r.unsubscribe(this),this._observer=void 0}_createScopes(e){const t=this._scopes;this._oldScopes=t.slice();const i=this._normalizedItems,s=i.length,r=this._scopes=Array(i.length),o=this._scopeMap,a=new Map,l=this.$controller.scope,c=this._forOfBinding,h=this.forOf,d=this.local,u=this._hasDestructuredLocal;if(e===void 0){const p=this.key;if(p!==null){const g=Array(s);if(typeof p=="string")for(let m=0;m<s;++m)g[m]=i[m][p];else for(let m=0;m<s;++m){const _=Tg(i[m],h,l,c,d,u);Eg(u,h.declaration,_,c,d,i[m]),g[m]=it(p,_,c,null)}for(let m=0;m<s;++m)r[m]=cw(o,a,g[m],i[m],h,l,c,d,u)}else for(let g=0;g<s;++g)r[g]=cw(o,a,i[g],i[g],h,l,c,d,u)}else{const p=t.length;for(let f=0;f<s;++f){const g=e[f];g>=0&&g<p?r[f]=t[g]:r[f]=Tg(i[f],h,l,c,d,u),Eg(u,h.declaration,r[f],c,d,i[f])}}o.clear(),this._scopeMap=a}_normalizeToArray(){const e=this.items;if(Nt(e)){this._normalizedItems=e.slice(0);return}const t=[];this._resolver.resolve(e).iterate(e,(i,s)=>{t[s]=i}),this._normalizedItems=t}_activateAllViews(e,t){let i,s,r,o;const{$controller:a,_factory:l,_location:c,_scopes:h}=this,d=t.length,u=this.views=Array(d);for(let p=0;p<d;++p)r=u[p]=l.create().setLocation(c),r.nodes.unlink(),o=h[p],Rh(o.overrideContext,p,d),s=r.activate(e??r,a,o),Ut(s)&&(i??(i=[])).push(s);if(i!==void 0)return i.length===1?i[0]:Promise.all(i)}_deactivateAllViews(e){let t,i,s,r=0;const{views:o,$controller:a}=this,l=o.length;for(;l>r;++r)s=o[r],s.release(),i=s.deactivate(e??s,a),Ut(i)&&(t??(t=[])).push(i);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_deactivateAndRemoveViewsByKey(e){let t,i,s;const{$controller:r,views:o}=this,a=e.deletedIndices.slice().sort(rN),l=a.length;let c=0;for(;l>c;++c)s=o[a[c]],s.release(),i=s.deactivate(s,r),Ut(i)&&(t??(t=[])).push(i);for(c=0;l>c;++c)o.splice(a[c]-c,1);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}_createAndActivateAndSortViewsByKey(e){let t,i,s,r=0;const{$controller:o,_factory:a,_location:l,views:c,_scopes:h,_oldViews:d}=this,u=e.length;for(;u>r;++r)e[r]===-2&&(s=a.create(),c.splice(r,0,s));if(c.length!==u)throw ie(814,[c.length,u]);let p=0;for(r=0;r<e.length;++r)(p=e[r])!==-2&&(c[r]=d[p]);const f=eN(e),g=f.length;let m,_=g-1;for(r=u-1;r>=0;--r)s=c[r],m=c[r+1],s.nodes.link((m==null?void 0:m.nodes)??l),e[r]===-2?(s.setLocation(l),Rh(h[r].overrideContext,r,u),i=s.activate(s,o,h[r]),Ut(i)&&(t??(t=[])).push(i)):_<0||g===1||r!==f[_]?(Rh(s.scope.overrideContext,r,u),s.nodes.insertBefore(s.location)):(Rh(s.scope.overrideContext,r,u),--_);if(t!==void 0)return t.length===1?t[0]:Promise.all(t)}dispose(){this.views.forEach(ZL),this.views=void 0}accept(e){const{views:t}=this;if(t!==void 0){for(let i=0,s=t.length;i<s;++i)if(t[i].accept(e)===!0)return!0}}}FT.$au={type:bi,name:"repeat",isTemplateController:!0,bindables:["items"]};let Wd=16,On=new Int32Array(Wd),Ih=new Int32Array(Wd);function eN(n){const e=n.length;e>Wd&&(Wd=e,On=new Int32Array(e),Ih=new Int32Array(e));let t=0,i=0,s=0,r=0,o=0,a=0,l=0,c=0;for(;r<e;r++)if(i=n[r],i!==-2){if(o=On[t],s=n[o],s!==-2&&s<i){Ih[r]=o,On[++t]=r;continue}for(a=0,l=t;a<l;)c=a+l>>1,s=n[On[c]],s!==-2&&s<i?a=c+1:l=c;s=n[On[a]],(i<s||s===-2)&&(a>0&&(Ih[r]=On[a-1]),On[a]=r)}r=++t;const h=new Int32Array(r);for(i=On[t-1];t-- >0;)h[t]=i,i=Ih[i];for(;r-- >0;)On[r]=0;return h}class iw{get $odd(){return!this.$even}get $even(){return this.$index%2===0}get $first(){return this.$index===0}get $middle(){return!this.$first&&!this.$last}get $last(){return this.$index===this.$length-1}constructor(e=0,t=1){this.$index=e,this.$length=t}}const Rh=(n,e,t)=>{n.$index=e,n.$length=t},tN=et("IRepeatableHandlerResolver",n=>n.singleton(iN));class iN{constructor(){this._handlers=$(bm(sN))}resolve(e){if(sw.handles(e))return sw;if(nw.handles(e))return nw;if(rw.handles(e))return rw;if(ow.handles(e))return ow;if(aw.handles(e))return aw;const t=this._handlers.find(i=>i.handles(e));return t!==void 0?t:nN}}const sN=et("IRepeatableHandler"),sw={handles:Nt,getObserver:Vm,iterate(n,e){const t=n.length;let i=0;for(;i<t;++i)e(n[i],i,n)}},nw={handles:sl,getObserver:Vm,iterate(n,e){let t=0,i;for(i of n.keys())e(i,t++,n)}},rw={handles:Cr,getObserver:Vm,iterate(n,e){let t=0,i;for(i of n.entries())e(i,t++,n)}},ow={handles:vO,iterate(n,e){let t=0;for(;t<n;++t)e(t,t,n)}},aw={handles:n=>n==null,iterate(){}},nN={handles(n){return!1},iterate(n,e){throw ie(777,n)}},Eg=(n,e,t,i,s,r)=>{n?Rc(e,t,i,r):t.bindingContext[s]=r},pd=(n,e,t,i,s)=>n?it(e,t,i,null):t.bindingContext[s],lw=(n,e,t,i,s,r)=>typeof e=="string"?pd(n,t,i,s,r)[e]:it(e,i,s,null),cw=(n,e,t,i,s,r,o,a,l)=>{let c=n.get(t);if(c===void 0?c=Tg(i,s,r,o,a,l):c instanceof Kt?n.delete(t):c.length===1?(c=c[0],n.delete(t)):c=c.shift(),e.has(t)){const h=e.get(t);h instanceof Kt?e.set(t,[h,c]):h.push(c)}else e.set(t,c);return Eg(l,s.declaration,c,o,a,i),c},Tg=(n,e,t,i,s,r)=>{if(r){const o=Kt.fromParent(t,new xb,new iw);Rc(e.declaration,o,i,n)}return Kt.fromParent(t,new xb(s,n),new iw)},rN=(n,e)=>n-e;class $T{constructor(){this.view=$(os).create().setLocation($(Ni))}valueChanged(e,t){const i=this.$controller,s=this.view.bindings;let r,o=0,a=0;if(i.isActive&&s!=null)for(r=Kt.fromParent(i.scope,e===void 0?{}:e),a=s.length;a>o;++o)s[o].bind(r)}attaching(e,t){const{$controller:i,value:s}=this,r=Kt.fromParent(i.scope,s===void 0?{}:s);return this.view.activate(e,i,r)}detaching(e,t){return this.view.deactivate(e,this.$controller)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}$T.$au={type:bi,name:"with",isTemplateController:!0,bindables:["value"]};class r_{constructor(){this.cases=[],this.activeCases=[],this.promise=void 0,this._factory=$(os),this._location=$(Ni)}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return this.queue(()=>i.activate(e,s,s.scope)),this.queue(()=>this.swap(e,this.value)),this.promise}detaching(e,t){return this.queue(()=>this.view.deactivate(e,this.$controller)),this.promise}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}valueChanged(e,t){this.$controller.isActive&&this.queue(()=>this.swap(null,this.value))}caseChanged(e){this.queue(()=>this._handleCaseChange(e))}_handleCaseChange(e){const t=e.isMatch(this.value),i=this.activeCases,s=i.length;if(!t)return s>0&&i[0].id===e.id?this._clearActiveCases(null):void 0;if(s>0&&i[0].id<e.id)return;const r=[];let o=e.fallThrough;if(!o)r.push(e);else{const a=this.cases,l=a.indexOf(e);for(let c=l,h=a.length;c<h&&o;c++){const d=a[c];r.push(d),o=d.fallThrough}}return Ee(this._clearActiveCases(null,r),()=>(this.activeCases=r,this._activateCases(null)))}swap(e,t){const i=[];let s=!1;for(const o of this.cases)if((s||o.isMatch(t))&&(i.push(o),s=o.fallThrough),i.length>0&&!s)break;const r=this.defaultCase;return i.length===0&&r!==void 0&&i.push(r),Ee(this.activeCases.length>0?this._clearActiveCases(e,i):void 0,()=>{if(this.activeCases=i,i.length!==0)return this._activateCases(e)})}_activateCases(e){const t=this.$controller;if(!t.isActive)return;const i=this.activeCases,s=i.length;if(s===0)return;const r=t.scope;return s===1?i[0].activate(e,r):qt(...i.map(o=>o.activate(e,r)))}_clearActiveCases(e,t=[]){const i=this.activeCases,s=i.length;if(s!==0){if(s===1){const r=i[0];return t.includes(r)?void 0:(i.length=0,r.deactivate(e))}return Ee(qt(...i.reduce((r,o)=>(t.includes(o)||r.push(o.deactivate(e)),r),[])),()=>{i.length=0})}}queue(e){const t=this.promise;let i;i=this.promise=Ee(Ee(t,e),()=>{this.promise===i&&(this.promise=void 0)})}accept(e){if(this.$controller.accept(e)===!0||this.activeCases.some(t=>t.accept(e)))return!0}}r_.$au={type:bi,name:"switch",isTemplateController:!0,bindables:["value"]};let oN=0;const HT=["value",{name:"fallThrough",mode:Fu,set(n){switch(n){case"true":return!0;case"false":return!1;default:return!!n}}}];class o_{constructor(){this.id=++oN,this.fallThrough=!1,this.view=void 0,this._factory=$(os),this._locator=$(zo),this._location=$(Ni),this._logger=$(Tr).scopeTo(`${this.constructor.name}-#${this.id}`)}link(e,t,i,s){const r=e.parent,o=r==null?void 0:r.viewModel;if(o instanceof r_)this.$switch=o,this.linkToSwitch(o);else throw ie(815)}detaching(e,t){return this.deactivate(e)}isMatch(e){this._logger.debug("isMatch()");const t=this.value;return Nt(t)?(this._observer===void 0&&(this._observer=this._observeCollection(t)),t.includes(e)):t===e}valueChanged(e,t){var i;Nt(e)?((i=this._observer)==null||i.unsubscribe(this),this._observer=this._observeCollection(e)):this._observer!==void 0&&this._observer.unsubscribe(this),this.$switch.caseChanged(this)}handleCollectionChange(){this.$switch.caseChanged(this)}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(e??i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(e??t,this.$controller)}dispose(){var e,t;(e=this._observer)==null||e.unsubscribe(this),(t=this.view)==null||t.dispose(),this.view=void 0}linkToSwitch(e){e.cases.push(this)}_observeCollection(e){const t=this._locator.getArrayObserver(e);return t.subscribe(this),t}accept(e){var t;return this.$controller.accept(e)===!0?!0:(t=this.view)==null?void 0:t.accept(e)}}qm({name:"case",bindables:HT,isTemplateController:!0},o_);class BT extends o_{linkToSwitch(e){if(e.defaultCase!==void 0)throw ie(816);e.defaultCase=this}}qm({name:"default-case",bindables:HT,isTemplateController:!0},BT);var VT,zT,WT;class a_{constructor(){this.preSettledTask=null,this.postSettledTask=null,this._factory=$(os),this._location=$(Ni),this._platform=$(ai),this.logger=$(Tr).scopeTo("promise.resolve")}link(e,t,i,s){this.view=this._factory.create(this.$controller).setLocation(this._location)}attaching(e,t){const i=this.view,s=this.$controller;return Ee(i.activate(e,s,this.viewScope=Kt.fromParent(s.scope,{})),()=>this.swap(e))}valueChanged(e,t){this.$controller.isActive&&this.swap(null)}swap(e){var h,d;const t=this.value;if(!Ut(t)){this.logger.warn(`The value '${Ro(t)}' is not a promise. No change will be done.`);return}const i=this._platform.domQueue,s=this.fulfilled,r=this.rejected,o=this.pending,a=this.viewScope;let l;const c=()=>{qt(l=(this.preSettledTask=i.queueTask(()=>qt(s==null?void 0:s.deactivate(e),r==null?void 0:r.deactivate(e),o==null?void 0:o.activate(e,a)))).result.catch(u=>{if(!(u instanceof dg))throw u}),t.then(u=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>qt(o==null?void 0:o.deactivate(e),r==null?void 0:r.deactivate(e),s==null?void 0:s.activate(e,a,u)))).result};this.preSettledTask.status===Dp?l.then(p):(this.preSettledTask.cancel(),p())},u=>{if(this.value!==t)return;const p=()=>{this.postSettlePromise=(this.postSettledTask=i.queueTask(()=>qt(o==null?void 0:o.deactivate(e),s==null?void 0:s.deactivate(e),r==null?void 0:r.activate(e,a,u)))).result};this.preSettledTask.status===Dp?l.then(p):(this.preSettledTask.cancel(),p())}))};((h=this.postSettledTask)==null?void 0:h.status)===Dp?this.postSettlePromise.then(c):((d=this.postSettledTask)==null||d.cancel(),c())}detaching(e,t){var i,s;return(i=this.preSettledTask)==null||i.cancel(),(s=this.postSettledTask)==null||s.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(e,this.$controller)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}a_.$au={type:bi,name:"promise",isTemplateController:!0,bindables:["value"]};class UT{constructor(){this.view=void 0,this._factory=$(os),this._location=$(Ni)}link(e,t,i,s){l_(e).pending=this}activate(e,t){let i=this.view;if(i===void 0&&(i=this.view=this._factory.create().setLocation(this._location)),!i.isActive)return i.activate(i,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}UT.$au={type:bi,name:"pending",isTemplateController:!0,bindables:{value:{mode:xt}}};class GT{constructor(){this.view=void 0,this._factory=$(os),this._location=$(Ni)}link(e,t,i,s){l_(e).fulfilled=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}GT.$au={type:bi,name:"then",isTemplateController:!0,bindables:{value:{mode:qn}}};class jT{constructor(){this.view=void 0,this._factory=$(os),this._location=$(Ni)}link(e,t,i,s){l_(e).rejected=this}activate(e,t,i){this.value=i;let s=this.view;if(s===void 0&&(s=this.view=this._factory.create().setLocation(this._location)),!s.isActive)return s.activate(s,this.$controller,t)}deactivate(e){const t=this.view;if(!(t===void 0||!t.isActive))return t.deactivate(t,this.$controller)}detaching(e,t){return this.deactivate(e)}dispose(){var e;(e=this.view)==null||e.dispose(),this.view=void 0}}jT.$au={type:bi,name:"catch",isTemplateController:!0,bindables:{value:{mode:qn}}};function l_(n){const e=n.parent,t=e==null?void 0:e.viewModel;if(t instanceof a_)return t;throw ie(813)}class Ag{"promise.resolve"(e,t){return new mi(e,t,"promise","bind")}}VT=Symbol.metadata;Ag[VT]={[Hs]:Ms.create([{pattern:"promise.resolve",symbols:""}],Ag)};class Ig{then(e,t){return new mi(e,t,"then","from-view")}}zT=Symbol.metadata;Ig[zT]={[Hs]:Ms.create([{pattern:"then",symbols:""}],Ig)};class Rg{catch(e,t){return new mi(e,t,"catch","from-view")}}WT=Symbol.metadata;Rg[WT]={[Hs]:Ms.create([{pattern:"catch",symbols:""}],Rg)};class KT{constructor(){this._needsApply=!1,this._element=$(Vr),this._platform=$(ai)}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this._apply():this._needsApply=!0}attached(){this._needsApply&&(this._needsApply=!1,this._apply()),this._element.addEventListener("focus",this),this._element.addEventListener("blur",this)}detaching(){const e=this._element;e.removeEventListener("focus",this),e.removeEventListener("blur",this)}handleEvent(e){e.type==="focus"?this.value=!0:this._isElFocused||(this.value=!1)}_apply(){const e=this._element,t=this._isElFocused,i=this.value;i&&!t?e.focus():!i&&t&&e.blur()}get _isElFocused(){return this._element===this._platform.document.activeElement}}KT.$au={type:bi,name:"focus",bindables:{value:{mode:BE}}};class YT{constructor(){this.position="beforeend",this.strict=!1;const e=$(os),t=$(Ni),i=$(ai);this._platform=i,this._resolvedTarget=i.document.createElement("div"),(this.view=e.create()).setLocation(this._targetLocation=$D(i)),$L(this.view.nodes,t)}attaching(e){this.callbackContext==null&&(this.callbackContext=this.$controller.scope.bindingContext);const t=this._resolvedTarget=this._getTarget();return this._moveLocation(t,this.position),this._activating(e,t)}detaching(e){return this._deactivating(e,this._resolvedTarget)}targetChanged(){const{$controller:e}=this;if(!e.isActive)return;const t=this._getTarget();if(this._resolvedTarget===t)return;this._resolvedTarget=t;const i=Ee(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Ut(i)&&i.catch(pg)}positionChanged(){const{$controller:e,_resolvedTarget:t}=this;if(!e.isActive)return;const i=Ee(this._deactivating(null,t),()=>(this._moveLocation(t,this.position),this._activating(null,t)));Ut(i)&&i.catch(pg)}_activating(e,t){const{activating:i,callbackContext:s,view:r}=this;return Ee(i==null?void 0:i.call(s,t,r),()=>this._activate(e,t))}_activate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.insertBefore(this._targetLocation);else return Ee(s.activate(e??s,i,i.scope),()=>this._activated(t));return this._activated(t)}_activated(e){const{activated:t,callbackContext:i,view:s}=this;return t==null?void 0:t.call(i,e,s)}_deactivating(e,t){const{deactivating:i,callbackContext:s,view:r}=this;return Ee(i==null?void 0:i.call(s,t,r),()=>this._deactivate(e,t))}_deactivate(e,t){const{$controller:i,view:s}=this;if(e===null)s.nodes.remove();else return Ee(s.deactivate(e,i),()=>this._deactivated(t));return this._deactivated(t)}_deactivated(e){const{deactivated:t,callbackContext:i,view:s}=this;return Ee(t==null?void 0:t.call(i,e,s),()=>this._removeLocation())}_getTarget(){const e=this._platform,t=e.document;let i=this.target,s=this.renderContext;if(i===""){if(this.strict)throw ie(811);return t.body}if($e(i)){let r=t;$e(s)&&(s=t.querySelector(s)),s instanceof e.Node&&(r=s),i=r.querySelector(i)}if(i instanceof e.Node)return i;if(i==null){if(this.strict)throw ie(812);return t.body}return i}_removeLocation(){this._targetLocation.remove(),this._targetLocation.$start.remove()}_moveLocation(e,t){const i=this._targetLocation,s=i.$start,r=e.parentNode,o=[s,i];switch(t){case"beforeend":Th(e,null,o);break;case"afterbegin":Th(e,e.firstChild,o);break;case"beforebegin":Th(r,e,o);break;case"afterend":Th(r,e.nextSibling,o);break;default:throw ie(779,t)}}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}}YT.$au={type:bi,name:"portal",isTemplateController:!0,bindables:[{name:"target",primary:!0},"position","activated","activating","callbackContext",{name:"renderContext",callback:"targetChanged"},"strict","deactivated","deactivating"]};let aN;class Xu{constructor(){var d,u,p,f;this._parentScope=null,this._outerScope=null,this._attached=!1,this.expose=null,this.slotchange=null,this._subs=new Set,this._observer=null;const e=$(xo),t=$(Ni),i=$(Vo),s=$(Uo),r=this.name=i.data.name,o=(d=i.projections)==null?void 0:d[nT],a=(p=(u=e.instruction)==null?void 0:u.projections)==null?void 0:p[r],l=e.controller.container;let c,h;a==null?(h=l.createChild({inheritParentResources:!0}),c=s.getViewFactory(o??aN??(aN=Vi.create({name:"au-slot-empty-template",template:"",needsCompile:!1})),h),this._hasProjection=!1):(h=l.createChild(),h.useResources(e.parent.controller.container),ft(h,xo,new jt(void 0,e.parent)),c=s.getViewFactory(a,h),this._hasProjection=!0,this._slotwatchers=((f=l.getAll(VD,!1))==null?void 0:f.filter(g=>g.slotName==="*"||g.slotName===r))??De),this._hasSlotWatcher=(this._slotwatchers??(this._slotwatchers=De)).length>0,this._hdrContext=e,this.view=c.create().setLocation(this._location=t)}get nodes(){const e=[],t=this._location;let i=t.$start.nextSibling;for(;i!=null&&i!==t;)i.nodeType!==8&&e.push(i),i=i.nextSibling;return e}subscribe(e){this._subs.add(e)}unsubscribe(e){this._subs.delete(e)}binding(e,t){var r;for(this._parentScope=t.scope;t.vmKind==="synthetic"&&((r=t.parent)==null?void 0:r.viewModel)instanceof Xu;)t=t.parent.parent;const i=t.scope.bindingContext;let s;this._hasProjection&&(s=this._hdrContext.controller.scope.parent,(this._outerScope=Kt.fromParent(s,s.bindingContext)).overrideContext.$host=this.expose??i)}attaching(e,t){return Ee(this.view.activate(e,this.$controller,this._hasProjection?this._outerScope:this._parentScope),()=>{(this._hasSlotWatcher||We(this.slotchange))&&(this._slotwatchers.forEach(i=>i.watch(this)),this._observe(),this._notifySlotChange(),this._attached=!0)})}detaching(e,t){return this._attached=!1,this._unobserve(),this._slotwatchers.forEach(i=>i.unwatch(this)),this.view.deactivate(e,this.$controller)}exposeChanged(e){this._hasProjection&&this._outerScope!=null&&(this._outerScope.overrideContext.$host=e)}dispose(){this.view.dispose(),this.view=void 0}accept(e){var t;if(((t=this.view)==null?void 0:t.accept(e))===!0)return!0}_observe(){if(this._observer!=null)return;const e=this._location,t=e.parentElement;t!=null&&(this._observer=sT(t,i=>{lN(e,i)&&this._notifySlotChange()})).observe(t,{childList:!0})}_unobserve(){var e;(e=this._observer)==null||e.disconnect(),this._observer=null}_notifySlotChange(){var s;const e=this.nodes,t=new Set(this._subs);let i;this._attached&&((s=this.slotchange)==null||s.call(void 0,this.name,e));for(i of t)i.handleSlotChange(this,e)}}Xu.$au={type:Po,name:"au-slot",template:null,containerless:!0,processContent(n,e,t){t.name=n.getAttribute("name")??nT;let i=n.firstChild,s=null;for(;i!==null;)s=i.nextSibling,HD(i)&&i.hasAttribute(BD)&&(console.warn("[DEV:aurelia] detected [au-slot] attribute on a child node",`of an <au-slot> element: "<${i.nodeName} au-slot>".`,"This element will be ignored and removed"),n.removeChild(i)),i=s},bindables:["expose","slotchange"]};const Oh=(n,e)=>n.compareDocumentPosition(e),lN=(n,e)=>{for(const{addedNodes:t,removedNodes:i,nextSibling:s}of e){let r=0,o=t.length,a;for(;r<o;++r)if(a=t[r],Oh(n.$start,a)===4&&Oh(n,a)===2)return!0;if(i.length>0&&s!=null&&Oh(n.$start,s)===4&&Oh(n,s)===2)return!0}};class qT{constructor(){this.scopeBehavior="auto",this._composition=void 0,this.tag=null,this._container=$(Bs),this.parent=$(Jc),this._host=$(Vr),this._location=$(Ni),this._platform=$(ai),this._rendering=$(Uo),this._instruction=$(Vo),this._contextFactory=$(vm(hN)),this._compiler=$(ku),this._hydrationContext=$(xo),this._exprParser=$(rl),this._observerLocator=$(zo)}get composing(){return this._composing}get composition(){return this._composition}attaching(e,t){return this._composing=Ee(this.queue(new hw(this.template,this.component,this.model,void 0),e),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)})}detaching(e){const t=this._composition,i=this._composing;return this._contextFactory.invalidate(),this._composition=this._composing=void 0,Ee(i,()=>t==null?void 0:t.deactivate(e))}propertyChanged(e){var t;if(!(e==="composing"||e==="composition")){if(e==="model"&&this._composition!=null){this._composition.update(this.model);return}if(e==="tag"&&((t=this._composition)==null?void 0:t.controller.vmKind)===hs){console.warn("[DEV:aurelia] Changing tag name of a custom element composition is ignored.");return}this._composing=Ee(this._composing,()=>Ee(this.queue(new hw(this.template,this.component,this.model,e),void 0),i=>{this._contextFactory._isCurrent(i)&&(this._composing=void 0)}))}}queue(e,t){const i=this._contextFactory,s=this._composition;return Ee(i.create(e),r=>i._isCurrent(r)?Ee(this.compose(r),o=>i._isCurrent(r)?Ee(o.activate(t),()=>i._isCurrent(r)?(this._composition=o,Ee(s==null?void 0:s.deactivate(t),()=>r)):Ee(o.controller.deactivate(o.controller,this.$controller),()=>(o.controller.dispose(),r))):(o.controller.dispose(),r)):r)}compose(e){const{_template:t,_component:i,_model:s}=e.change,{_container:r,$controller:o,_location:a,_instruction:l}=this,c=this._getDefinition(this._hydrationContext.controller.container,i),h=r.createChild(),d=this._platform.document.createElement(c==null?this.tag??"div":c.name);a.parentNode.insertBefore(d,a);let u;c==null?u=this.tag==null?xc(d):null:u=c.containerless?xc(d):null;const p=()=>{var m;if(d.remove(),u!=null){let _=u.$start.nextSibling,b=null;for(;_!==null&&_!==u;)b=_.nextSibling,_.remove(),_=b;(m=u.$start)==null||m.remove(),u.remove()}},f=this._createComponentInstance(h,typeof i=="string"?c.Type:i,d,u),g=()=>{const m=l.captures??De;if(c!==null){const _=c.capture,[b,C]=m.reduce((y,S)=>{const A=!(S.target in c.bindables)&&(_===!0||We(_)&&!!_(S.target));return y[A?0:1].push(S),y},[[],[]]),v=Pi.$el(h,f,d,{projections:l.projections,captures:b},c,u);return this._createSpreadBindings(d,c,C).forEach(y=>v.addBinding(y)),new uw(v,y=>v.activate(y??v,o,o.scope.parent),y=>Ee(v.deactivate(y??v,o),p),y=>{var S;return(S=f.activate)==null?void 0:S.call(f,y)},e)}else{const _=Vi.create({name:Qe.generateName(),template:t}),b=this._rendering.getViewFactory(_,h),C=Pi.$view(b,o),v=this.scopeBehavior==="auto"?Kt.fromParent(this.parent.scope,f):Kt.create(f);return C.setHost(d),u==null?this._createSpreadBindings(d,_,m).forEach(y=>C.addBinding(y)):C.setLocation(u),new uw(C,y=>C.activate(y??C,o,v),y=>Ee(C.deactivate(y??C,o),p),y=>{var S;return(S=f.activate)==null?void 0:S.call(f,y)},e)}};return"activate"in f?Ee(f.activate(s),()=>g()):g()}_createComponentInstance(e,t,i,s){if(t==null)return new cN;if(typeof t=="object")return t;const r=this._platform;qu(e,i,r),ft(e,Ni,new jt("IRenderLocation",s));const o=e.invoke(t);return ft(e,t,new jt("au-compose.component",o)),o}_getDefinition(e,t){if(typeof t=="string"){const s=Qe.find(e,t);if(s==null)throw ie(806,t);return s}const i=We(t)?t:t==null?void 0:t.constructor;return Qe.isType(i,void 0)?Qe.getDefinition(i,null):null}_createSpreadBindings(e,t,i){const s=new CT(this.$controller,{projections:null,captures:i},this._hydrationContext.parent);return Uu.create(s,e,t,this._rendering,this._compiler,this._platform,this._exprParser,this._observerLocator)}}qT.$au={type:Po,name:"au-compose",capture:!0,containerless:!0,bindables:["template","component","model",{name:"scopeBehavior",set:n=>{if(n==="scoped"||n==="auto")return n;throw ie(805,n)}},{name:"composing",mode:qn},{name:"composition",mode:qn},"tag"]};class cN{}class hN{constructor(){this.id=0}_isCurrent(e){return e.id===this.id}create(e){return Ee(e.load(),t=>new dN(++this.id,t))}invalidate(){this.id++}}class hw{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}load(){return Ut(this._template)||Ut(this._component)?Promise.all([this._template,this._component]).then(([e,t])=>new dw(e,t,this._model,this._src)):new dw(this._template,this._component,this._model,this._src)}}class dw{constructor(e,t,i,s){this._template=e,this._component=t,this._model=i,this._src=s}}class dN{constructor(e,t){this.id=e,this.change=t}}class uw{constructor(e,t,i,s,r){this.controller=e,this.start=t,this.stop=i,this.update=s,this.context=r,this.state=0}activate(e){if(this.state!==0)throw ie(807,this);return this.state=1,this.start(e)}deactivate(e){switch(this.state){case 1:return this.state=-1,this.stop(e);case-1:throw ie(808);default:this.state=-1}}}const uN=et("ISanitizer",n=>n.singleton(class{sanitize(){throw ie(99,"sanitize")}}));class XT{constructor(){this._sanitizer=$(uN)}toView(e){return e==null?null:this._sanitizer.sanitize(e)}}XT.$au={type:ya,name:"sanitize"};class QT{constructor(){this.el=$(Vr),this.p=$(ai),this._isActive=!1,this._task=null,this.$val="",this.$prio="",this.update=()=>{this._task=null,!!this.value!==this._isToggled&&(this._isToggled===this._base?(this._isToggled=!this._base,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this._isToggled=this._base,this.el.style.setProperty("display",this.$val,this.$prio),this.el.getAttribute("style")===""&&this.el.removeAttribute("style")))};const e=$(Vo);this._isToggled=this._base=e.alias!=="hide"}binding(){this._isActive=!0,this.update()}detaching(){var e;this._isActive=!1,(e=this._task)==null||e.cancel(),this._task=null}valueChanged(){this._isActive&&this._task===null&&(this._task=this.p.domQueue.queueTask(this.update))}}QT.$au={type:bi,name:"show",bindables:["value"],aliases:["hide"]};const pN=[YL,qk,n_],fN=[eg,Jf,tg,FD],gN=[mE,uE,fE,pE,gE,_E,SE,vE,bE,yE,CE,wE,EE],mN=[QE,KE,YE,qE,ZE,JE,XE,XT,zd,MT,FT,$T,r_,o_,BT,a_,UT,GT,jT,Ag,Ig,Rg,DT,LT,NT,qT,YT,KT,QT,Xu],_N=[XD,QD,YD,qD,WD,UD,GD,jD,KD,eL,aL,tL,iL,sL,rL,ZD,lL,cL],vN=ZT(rn);function ZT(n){return{optionsProvider:n,register(e){const t={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return n(t),e.register(Km(RE,t.coercingOptions),xS,...pN,...mN,...fN,...gN,..._N)},customize(e){return ZT(e??n)}}}const bN=br.getOrCreate(globalThis);function wN(){return wi.createContainer().register(Ji.instance(ai,bN),vN)}class lc extends GL{constructor(e=wN()){super(e)}static app(e){return new lc().app(e)}static enhance(e){return new lc().enhance(e)}static register(...e){return new lc().register(...e)}app(e){if(Qe.isType(e)){const t=Qe.getDefinition(e);let i=document.querySelector(t.name);return i===null&&(i=document.body),super.app({host:i,component:e})}return super.app(e)}}var ki="top",is="bottom",ss="right",Di="left",Qu="auto",ll=[ki,is,ss,Di],ko="start",Wa="end",JT="clippingParents",c_="viewport",ga="popper",e0="reference",Og=ll.reduce(function(n,e){return n.concat([e+"-"+ko,e+"-"+Wa])},[]),h_=[].concat(ll,[Qu]).reduce(function(n,e){return n.concat([e,e+"-"+ko,e+"-"+Wa])},[]),t0="beforeRead",i0="read",s0="afterRead",n0="beforeMain",r0="main",o0="afterMain",a0="beforeWrite",l0="write",c0="afterWrite",h0=[t0,i0,s0,n0,r0,o0,a0,l0,c0];function gn(n){return n?(n.nodeName||"").toLowerCase():null}function ns(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function Do(n){var e=ns(n).Element;return n instanceof e||n instanceof Element}function vs(n){var e=ns(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function d_(n){if(typeof ShadowRoot>"u")return!1;var e=ns(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function CN(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},s=e.attributes[t]||{},r=e.elements[t];!vs(r)||!gn(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function yN(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var s=e.elements[i],r=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!vs(s)||!gn(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}const u_={name:"applyStyles",enabled:!0,phase:"write",fn:CN,effect:yN,requires:["computeStyles"]};function on(n){return n.split("-")[0]}var bo=Math.max,Ud=Math.min,Ua=Math.round;function xg(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function d0(){return!/^((?!chrome|android).)*safari/i.test(xg())}function Ga(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i=n.getBoundingClientRect(),s=1,r=1;e&&vs(n)&&(s=n.offsetWidth>0&&Ua(i.width)/n.offsetWidth||1,r=n.offsetHeight>0&&Ua(i.height)/n.offsetHeight||1);var o=Do(n)?ns(n):window,a=o.visualViewport,l=!d0()&&t,c=(i.left+(l&&a?a.offsetLeft:0))/s,h=(i.top+(l&&a?a.offsetTop:0))/r,d=i.width/s,u=i.height/r;return{width:d,height:u,top:h,right:c+d,bottom:h+u,left:c,x:c,y:h}}function p_(n){var e=Ga(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function u0(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&d_(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Xn(n){return ns(n).getComputedStyle(n)}function SN(n){return["table","td","th"].indexOf(gn(n))>=0}function zr(n){return((Do(n)?n.ownerDocument:n.document)||window.document).documentElement}function Zu(n){return gn(n)==="html"?n:n.assignedSlot||n.parentNode||(d_(n)?n.host:null)||zr(n)}function pw(n){return!vs(n)||Xn(n).position==="fixed"?null:n.offsetParent}function EN(n){var e=/firefox/i.test(xg()),t=/Trident/i.test(xg());if(t&&vs(n)){var i=Xn(n);if(i.position==="fixed")return null}var s=Zu(n);for(d_(s)&&(s=s.host);vs(s)&&["html","body"].indexOf(gn(s))<0;){var r=Xn(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||e&&r.willChange==="filter"||e&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function eh(n){for(var e=ns(n),t=pw(n);t&&SN(t)&&Xn(t).position==="static";)t=pw(t);return t&&(gn(t)==="html"||gn(t)==="body"&&Xn(t).position==="static")?e:t||EN(n)||e}function f_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function cc(n,e,t){return bo(n,Ud(e,t))}function TN(n,e,t){var i=cc(n,e,t);return i>t?t:i}function p0(){return{top:0,right:0,bottom:0,left:0}}function f0(n){return Object.assign({},p0(),n)}function g0(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var AN=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,f0(typeof e!="number"?e:g0(e,ll))};function IN(n){var e,t=n.state,i=n.name,s=n.options,r=t.elements.arrow,o=t.modifiersData.popperOffsets,a=on(t.placement),l=f_(a),c=[Di,ss].indexOf(a)>=0,h=c?"height":"width";if(!(!r||!o)){var d=AN(s.padding,t),u=p_(r),p=l==="y"?ki:Di,f=l==="y"?is:ss,g=t.rects.reference[h]+t.rects.reference[l]-o[l]-t.rects.popper[h],m=o[l]-t.rects.reference[l],_=eh(r),b=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,C=g/2-m/2,v=d[p],y=b-u[h]-d[f],S=b/2-u[h]/2+C,A=cc(v,S,y),P=l;t.modifiersData[i]=(e={},e[P]=A,e.centerOffset=A-S,e)}}function RN(n){var e=n.state,t=n.options,i=t.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||u0(e.elements.popper,s)&&(e.elements.arrow=s))}const m0={name:"arrow",enabled:!0,phase:"main",fn:IN,effect:RN,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ja(n){return n.split("-")[1]}var ON={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xN(n,e){var t=n.x,i=n.y,s=e.devicePixelRatio||1;return{x:Ua(t*s)/s||0,y:Ua(i*s)/s||0}}function fw(n){var e,t=n.popper,i=n.popperRect,s=n.placement,r=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,h=n.roundOffsets,d=n.isFixed,u=o.x,p=u===void 0?0:u,f=o.y,g=f===void 0?0:f,m=typeof h=="function"?h({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var _=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),C=Di,v=ki,y=window;if(c){var S=eh(t),A="clientHeight",P="clientWidth";if(S===ns(t)&&(S=zr(t),Xn(S).position!=="static"&&a==="absolute"&&(A="scrollHeight",P="scrollWidth")),S=S,s===ki||(s===Di||s===ss)&&r===Wa){v=is;var F=d&&S===y&&y.visualViewport?y.visualViewport.height:S[A];g-=F-i.height,g*=l?1:-1}if(s===Di||(s===ki||s===is)&&r===Wa){C=ss;var H=d&&S===y&&y.visualViewport?y.visualViewport.width:S[P];p-=H-i.width,p*=l?1:-1}}var W=Object.assign({position:a},c&&ON),J=h===!0?xN({x:p,y:g},ns(t)):{x:p,y:g};if(p=J.x,g=J.y,l){var Y;return Object.assign({},W,(Y={},Y[v]=b?"0":"",Y[C]=_?"0":"",Y.transform=(y.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",Y))}return Object.assign({},W,(e={},e[v]=b?g+"px":"",e[C]=_?p+"px":"",e.transform="",e))}function PN(n){var e=n.state,t=n.options,i=t.gpuAcceleration,s=i===void 0?!0:i,r=t.adaptive,o=r===void 0?!0:r,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:on(e.placement),variation:ja(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,fw(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,fw(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const g_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:PN,data:{}};var xh={passive:!0};function kN(n){var e=n.state,t=n.instance,i=n.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=ns(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return r&&c.forEach(function(h){h.addEventListener("scroll",t.update,xh)}),a&&l.addEventListener("resize",t.update,xh),function(){r&&c.forEach(function(h){h.removeEventListener("scroll",t.update,xh)}),a&&l.removeEventListener("resize",t.update,xh)}}const m_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kN,data:{}};var DN={left:"right",right:"left",bottom:"top",top:"bottom"};function fd(n){return n.replace(/left|right|bottom|top/g,function(e){return DN[e]})}var LN={start:"end",end:"start"};function gw(n){return n.replace(/start|end/g,function(e){return LN[e]})}function __(n){var e=ns(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function v_(n){return Ga(zr(n)).left+__(n).scrollLeft}function NN(n,e){var t=ns(n),i=zr(n),s=t.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=d0();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+v_(n),y:l}}function MN(n){var e,t=zr(n),i=__(n),s=(e=n.ownerDocument)==null?void 0:e.body,r=bo(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=bo(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+v_(n),l=-i.scrollTop;return Xn(s||t).direction==="rtl"&&(a+=bo(t.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function b_(n){var e=Xn(n),t=e.overflow,i=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+i)}function _0(n){return["html","body","#document"].indexOf(gn(n))>=0?n.ownerDocument.body:vs(n)&&b_(n)?n:_0(Zu(n))}function hc(n,e){var t;e===void 0&&(e=[]);var i=_0(n),s=i===((t=n.ownerDocument)==null?void 0:t.body),r=ns(i),o=s?[r].concat(r.visualViewport||[],b_(i)?i:[]):i,a=e.concat(o);return s?a:a.concat(hc(Zu(o)))}function Pg(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function FN(n,e){var t=Ga(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function mw(n,e,t){return e===c_?Pg(NN(n,t)):Do(e)?FN(e,t):Pg(MN(zr(n)))}function $N(n){var e=hc(Zu(n)),t=["absolute","fixed"].indexOf(Xn(n).position)>=0,i=t&&vs(n)?eh(n):n;return Do(i)?e.filter(function(s){return Do(s)&&u0(s,i)&&gn(s)!=="body"}):[]}function HN(n,e,t,i){var s=e==="clippingParents"?$N(n):[].concat(e),r=[].concat(s,[t]),o=r[0],a=r.reduce(function(l,c){var h=mw(n,c,i);return l.top=bo(h.top,l.top),l.right=Ud(h.right,l.right),l.bottom=Ud(h.bottom,l.bottom),l.left=bo(h.left,l.left),l},mw(n,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function v0(n){var e=n.reference,t=n.element,i=n.placement,s=i?on(i):null,r=i?ja(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case ki:l={x:o,y:e.y-t.height};break;case is:l={x:o,y:e.y+e.height};break;case ss:l={x:e.x+e.width,y:a};break;case Di:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?f_(s):null;if(c!=null){var h=c==="y"?"height":"width";switch(r){case ko:l[c]=l[c]-(e[h]/2-t[h]/2);break;case Wa:l[c]=l[c]+(e[h]/2-t[h]/2);break}}return l}function Ka(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=i===void 0?n.placement:i,r=t.strategy,o=r===void 0?n.strategy:r,a=t.boundary,l=a===void 0?JT:a,c=t.rootBoundary,h=c===void 0?c_:c,d=t.elementContext,u=d===void 0?ga:d,p=t.altBoundary,f=p===void 0?!1:p,g=t.padding,m=g===void 0?0:g,_=f0(typeof m!="number"?m:g0(m,ll)),b=u===ga?e0:ga,C=n.rects.popper,v=n.elements[f?b:u],y=HN(Do(v)?v:v.contextElement||zr(n.elements.popper),l,h,o),S=Ga(n.elements.reference),A=v0({reference:S,element:C,placement:s}),P=Pg(Object.assign({},C,A)),F=u===ga?P:S,H={top:y.top-F.top+_.top,bottom:F.bottom-y.bottom+_.bottom,left:y.left-F.left+_.left,right:F.right-y.right+_.right},W=n.modifiersData.offset;if(u===ga&&W){var J=W[s];Object.keys(H).forEach(function(Y){var ae=[ss,is].indexOf(Y)>=0?1:-1,ue=[ki,is].indexOf(Y)>=0?"y":"x";H[Y]+=J[ue]*ae})}return H}function BN(n,e){e===void 0&&(e={});var t=e,i=t.placement,s=t.boundary,r=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?h_:l,h=ja(i),d=h?a?Og:Og.filter(function(f){return ja(f)===h}):ll,u=d.filter(function(f){return c.indexOf(f)>=0});u.length===0&&(u=d);var p=u.reduce(function(f,g){return f[g]=Ka(n,{placement:g,boundary:s,rootBoundary:r,padding:o})[on(g)],f},{});return Object.keys(p).sort(function(f,g){return p[f]-p[g]})}function VN(n){if(on(n)===Qu)return[];var e=fd(n);return[gw(n),e,gw(e)]}function zN(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,h=t.boundary,d=t.rootBoundary,u=t.altBoundary,p=t.flipVariations,f=p===void 0?!0:p,g=t.allowedAutoPlacements,m=e.options.placement,_=on(m),b=_===m,C=l||(b||!f?[fd(m)]:VN(m)),v=[m].concat(C).reduce(function(O,D){return O.concat(on(D)===Qu?BN(e,{placement:D,boundary:h,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:g}):D)},[]),y=e.rects.reference,S=e.rects.popper,A=new Map,P=!0,F=v[0],H=0;H<v.length;H++){var W=v[H],J=on(W),Y=ja(W)===ko,ae=[ki,is].indexOf(J)>=0,ue=ae?"width":"height",te=Ka(e,{placement:W,boundary:h,rootBoundary:d,altBoundary:u,padding:c}),V=ae?Y?ss:Di:Y?is:ki;y[ue]>S[ue]&&(V=fd(V));var re=fd(V),Z=[];if(r&&Z.push(te[J]<=0),a&&Z.push(te[V]<=0,te[re]<=0),Z.every(function(O){return O})){F=W,P=!1;break}A.set(W,Z)}if(P)for(var _e=f?3:1,ge=function(D){var Ye=v.find(function(L){var z=A.get(L);if(z)return z.slice(0,D).every(function(E){return E})});if(Ye)return F=Ye,"break"},x=_e;x>0;x--){var M=ge(x);if(M==="break")break}e.placement!==F&&(e.modifiersData[i]._skip=!0,e.placement=F,e.reset=!0)}}const b0={name:"flip",enabled:!0,phase:"main",fn:zN,requiresIfExists:["offset"],data:{_skip:!1}};function _w(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function vw(n){return[ki,ss,is,Di].some(function(e){return n[e]>=0})}function WN(n){var e=n.state,t=n.name,i=e.rects.reference,s=e.rects.popper,r=e.modifiersData.preventOverflow,o=Ka(e,{elementContext:"reference"}),a=Ka(e,{altBoundary:!0}),l=_w(o,i),c=_w(a,s,r),h=vw(l),d=vw(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}const w0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:WN};function UN(n,e,t){var i=on(n),s=[Di,ki].indexOf(i)>=0?-1:1,r=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Di,ss].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function GN(n){var e=n.state,t=n.options,i=n.name,s=t.offset,r=s===void 0?[0,0]:s,o=h_.reduce(function(h,d){return h[d]=UN(d,e.rects,r),h},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}const C0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:GN};function jN(n){var e=n.state,t=n.name;e.modifiersData[t]=v0({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const w_={name:"popperOffsets",enabled:!0,phase:"read",fn:jN,data:{}};function KN(n){return n==="x"?"y":"x"}function YN(n){var e=n.state,t=n.options,i=n.name,s=t.mainAxis,r=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,h=t.altBoundary,d=t.padding,u=t.tether,p=u===void 0?!0:u,f=t.tetherOffset,g=f===void 0?0:f,m=Ka(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:h}),_=on(e.placement),b=ja(e.placement),C=!b,v=f_(_),y=KN(v),S=e.modifiersData.popperOffsets,A=e.rects.reference,P=e.rects.popper,F=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,H=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,J={x:0,y:0};if(S){if(r){var Y,ae=v==="y"?ki:Di,ue=v==="y"?is:ss,te=v==="y"?"height":"width",V=S[v],re=V+m[ae],Z=V-m[ue],_e=p?-P[te]/2:0,ge=b===ko?A[te]:P[te],x=b===ko?-P[te]:-A[te],M=e.elements.arrow,O=p&&M?p_(M):{width:0,height:0},D=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:p0(),Ye=D[ae],L=D[ue],z=cc(0,A[te],O[te]),E=C?A[te]/2-_e-z-Ye-H.mainAxis:ge-z-Ye-H.mainAxis,w=C?-A[te]/2+_e+z+L+H.mainAxis:x+z+L+H.mainAxis,T=e.elements.arrow&&eh(e.elements.arrow),B=T?v==="y"?T.clientTop||0:T.clientLeft||0:0,U=(Y=W==null?void 0:W[v])!=null?Y:0,Q=V+E-U-B,le=V+w-U,q=cc(p?Ud(re,Q):re,V,p?bo(Z,le):Z);S[v]=q,J[v]=q-V}if(a){var Ie,fe=v==="x"?ki:Di,ke=v==="x"?is:ss,Ue=S[y],Pt=y==="y"?"height":"width",Jt=Ue+m[fe],mt=Ue-m[ke],lt=[ki,Di].indexOf(_)!==-1,Xe=(Ie=W==null?void 0:W[y])!=null?Ie:0,Ft=lt?Jt:Ue-A[Pt]-P[Pt]-Xe+H.altAxis,kt=lt?Ue+A[Pt]+P[Pt]-Xe-H.altAxis:mt,$t=p&&lt?TN(Ft,Ue,kt):cc(p?Ft:Jt,Ue,p?kt:mt);S[y]=$t,J[y]=$t-Ue}e.modifiersData[i]=J}}const y0={name:"preventOverflow",enabled:!0,phase:"main",fn:YN,requiresIfExists:["offset"]};function qN(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function XN(n){return n===ns(n)||!vs(n)?__(n):qN(n)}function QN(n){var e=n.getBoundingClientRect(),t=Ua(e.width)/n.offsetWidth||1,i=Ua(e.height)/n.offsetHeight||1;return t!==1||i!==1}function ZN(n,e,t){t===void 0&&(t=!1);var i=vs(e),s=vs(e)&&QN(e),r=zr(e),o=Ga(n,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((gn(e)!=="body"||b_(r))&&(a=XN(e)),vs(e)?(l=Ga(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):r&&(l.x=v_(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function JN(n){var e=new Map,t=new Set,i=[];n.forEach(function(r){e.set(r.name,r)});function s(r){t.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),i.push(r)}return n.forEach(function(r){t.has(r.name)||s(r)}),i}function eM(n){var e=JN(n);return h0.reduce(function(t,i){return t.concat(e.filter(function(s){return s.phase===i}))},[])}function tM(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function iM(n){var e=n.reduce(function(t,i){var s=t[i.name];return t[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var bw={placement:"bottom",modifiers:[],strategy:"absolute"};function ww(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Ju(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,s=e.defaultOptions,r=s===void 0?bw:s;return function(a,l,c){c===void 0&&(c=r);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},bw,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],u=!1,p={state:h,setOptions:function(_){var b=typeof _=="function"?_(h.options):_;g(),h.options=Object.assign({},r,h.options,b),h.scrollParents={reference:Do(a)?hc(a):a.contextElement?hc(a.contextElement):[],popper:hc(l)};var C=eM(iM([].concat(i,h.options.modifiers)));return h.orderedModifiers=C.filter(function(v){return v.enabled}),f(),p.update()},forceUpdate:function(){if(!u){var _=h.elements,b=_.reference,C=_.popper;if(ww(b,C)){h.rects={reference:ZN(b,eh(C),h.options.strategy==="fixed"),popper:p_(C)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(H){return h.modifiersData[H.name]=Object.assign({},H.data)});for(var v=0;v<h.orderedModifiers.length;v++){if(h.reset===!0){h.reset=!1,v=-1;continue}var y=h.orderedModifiers[v],S=y.fn,A=y.options,P=A===void 0?{}:A,F=y.name;typeof S=="function"&&(h=S({state:h,options:P,name:F,instance:p})||h)}}}},update:tM(function(){return new Promise(function(m){p.forceUpdate(),m(h)})}),destroy:function(){g(),u=!0}};if(!ww(a,l))return p;p.setOptions(c).then(function(m){!u&&c.onFirstUpdate&&c.onFirstUpdate(m)});function f(){h.orderedModifiers.forEach(function(m){var _=m.name,b=m.options,C=b===void 0?{}:b,v=m.effect;if(typeof v=="function"){var y=v({state:h,name:_,instance:p,options:C}),S=function(){};d.push(y||S)}})}function g(){d.forEach(function(m){return m()}),d=[]}return p}}var sM=Ju(),nM=[m_,w_,g_,u_],rM=Ju({defaultModifiers:nM}),oM=[m_,w_,g_,u_,C0,b0,y0,m0,w0],C_=Ju({defaultModifiers:oM});const S0=Object.freeze(Object.defineProperty({__proto__:null,afterMain:o0,afterRead:s0,afterWrite:c0,applyStyles:u_,arrow:m0,auto:Qu,basePlacements:ll,beforeMain:n0,beforeRead:t0,beforeWrite:a0,bottom:is,clippingParents:JT,computeStyles:g_,createPopper:C_,createPopperBase:sM,createPopperLite:rM,detectOverflow:Ka,end:Wa,eventListeners:m_,flip:b0,hide:w0,left:Di,main:r0,modifierPhases:h0,offset:C0,placements:h_,popper:ga,popperGenerator:Ju,popperOffsets:w_,preventOverflow:y0,read:i0,reference:e0,right:ss,start:ko,top:ki,variationPlacements:Og,viewport:c_,write:l0},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const hr=new Map,Gp={set(n,e,t){hr.has(n)||hr.set(n,new Map);const i=hr.get(n);if(!i.has(e)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(e,t)},get(n,e){return hr.has(n)&&hr.get(n).get(e)||null},remove(n,e){if(!hr.has(n))return;const t=hr.get(n);t.delete(e),t.size===0&&hr.delete(n)}},aM=1e6,lM=1e3,kg="transitionend",E0=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(e,t)=>`#${CSS.escape(t)}`)),n),cM=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),hM=n=>{do n+=Math.floor(Math.random()*aM);while(document.getElementById(n));return n},dM=n=>{if(!n)return 0;let{transitionDuration:e,transitionDelay:t}=window.getComputedStyle(n);const i=Number.parseFloat(e),s=Number.parseFloat(t);return!i&&!s?0:(e=e.split(",")[0],t=t.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(t))*lM)},T0=n=>{n.dispatchEvent(new Event(kg))},Bn=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Or=n=>Bn(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(E0(n)):null,cl=n=>{if(!Bn(n)||n.getClientRects().length===0)return!1;const e=getComputedStyle(n).getPropertyValue("visibility")==="visible",t=n.closest("details:not([open])");if(!t)return e;if(t!==n){const i=n.closest("summary");if(i&&i.parentNode!==t||i===null)return!1}return e},xr=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",A0=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const e=n.getRootNode();return e instanceof ShadowRoot?e:null}return n instanceof ShadowRoot?n:n.parentNode?A0(n.parentNode):null},Gd=()=>{},th=n=>{n.offsetHeight},I0=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,jp=[],uM=n=>{document.readyState==="loading"?(jp.length||document.addEventListener("DOMContentLoaded",()=>{for(const e of jp)e()}),jp.push(n)):n()},ws=()=>document.documentElement.dir==="rtl",Es=n=>{uM(()=>{const e=I0();if(e){const t=n.NAME,i=e.fn[t];e.fn[t]=n.jQueryInterface,e.fn[t].Constructor=n,e.fn[t].noConflict=()=>(e.fn[t]=i,n.jQueryInterface)}})},zi=(n,e=[],t=n)=>typeof n=="function"?n(...e):t,R0=(n,e,t=!0)=>{if(!t){zi(n);return}const s=dM(e)+5;let r=!1;const o=({target:a})=>{a===e&&(r=!0,e.removeEventListener(kg,o),zi(n))};e.addEventListener(kg,o),setTimeout(()=>{r||T0(e)},s)},y_=(n,e,t,i)=>{const s=n.length;let r=n.indexOf(e);return r===-1?!t&&i?n[s-1]:n[0]:(r+=t?1:-1,i&&(r=(r+s)%s),n[Math.max(0,Math.min(r,s-1))])},pM=/[^.]*(?=\..*)\.|.*/,fM=/\..*/,gM=/::\d+$/,Kp={};let Cw=1;const O0={mouseenter:"mouseover",mouseleave:"mouseout"},mM=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function x0(n,e){return e&&`${e}::${Cw++}`||n.uidEvent||Cw++}function P0(n){const e=x0(n);return n.uidEvent=e,Kp[e]=Kp[e]||{},Kp[e]}function _M(n,e){return function t(i){return S_(i,{delegateTarget:n}),t.oneOff&&j.off(n,i.type,e),e.apply(n,[i])}}function vM(n,e,t){return function i(s){const r=n.querySelectorAll(e);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(const a of r)if(a===o)return S_(s,{delegateTarget:o}),i.oneOff&&j.off(n,s.type,e,t),t.apply(o,[s])}}function k0(n,e,t=null){return Object.values(n).find(i=>i.callable===e&&i.delegationSelector===t)}function D0(n,e,t){const i=typeof e=="string",s=i?t:e||t;let r=L0(n);return mM.has(r)||(r=n),[i,s,r]}function yw(n,e,t,i,s){if(typeof e!="string"||!n)return;let[r,o,a]=D0(e,t,i);e in O0&&(o=(f=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return f.call(this,g)})(o));const l=P0(n),c=l[a]||(l[a]={}),h=k0(c,o,r?t:null);if(h){h.oneOff=h.oneOff&&s;return}const d=x0(o,e.replace(pM,"")),u=r?vM(n,t,o):_M(n,o);u.delegationSelector=r?t:null,u.callable=o,u.oneOff=s,u.uidEvent=d,c[d]=u,n.addEventListener(a,u,r)}function Dg(n,e,t,i,s){const r=k0(e[t],i,s);r&&(n.removeEventListener(t,r,!!s),delete e[t][r.uidEvent])}function bM(n,e,t,i){const s=e[t]||{};for(const[r,o]of Object.entries(s))r.includes(i)&&Dg(n,e,t,o.callable,o.delegationSelector)}function L0(n){return n=n.replace(fM,""),O0[n]||n}const j={on(n,e,t,i){yw(n,e,t,i,!1)},one(n,e,t,i){yw(n,e,t,i,!0)},off(n,e,t,i){if(typeof e!="string"||!n)return;const[s,r,o]=D0(e,t,i),a=o!==e,l=P0(n),c=l[o]||{},h=e.startsWith(".");if(typeof r<"u"){if(!Object.keys(c).length)return;Dg(n,l,o,r,s?t:null);return}if(h)for(const d of Object.keys(l))bM(n,l,d,e.slice(1));for(const[d,u]of Object.entries(c)){const p=d.replace(gM,"");(!a||e.includes(p))&&Dg(n,l,o,u.callable,u.delegationSelector)}},trigger(n,e,t){if(typeof e!="string"||!n)return null;const i=I0(),s=L0(e),r=e!==s;let o=null,a=!0,l=!0,c=!1;r&&i&&(o=i.Event(e,t),i(n).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const h=S_(new Event(e,{bubbles:a,cancelable:!0}),t);return c&&h.preventDefault(),l&&n.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function S_(n,e={}){for(const[t,i]of Object.entries(e))try{n[t]=i}catch{Object.defineProperty(n,t,{configurable:!0,get(){return i}})}return n}function Sw(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function Yp(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}const Vn={setDataAttribute(n,e,t){n.setAttribute(`data-bs-${Yp(e)}`,t)},removeDataAttribute(n,e){n.removeAttribute(`data-bs-${Yp(e)}`)},getDataAttributes(n){if(!n)return{};const e={},t=Object.keys(n.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(const i of t){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=Sw(n.dataset[i])}return e},getDataAttribute(n,e){return Sw(n.getAttribute(`data-bs-${Yp(e)}`))}};class ih{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){const i=Bn(t)?Vn.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof i=="object"?i:{},...Bn(t)?Vn.getDataAttributes(t):{},...typeof e=="object"?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const[i,s]of Object.entries(t)){const r=e[i],o=Bn(r)?"element":cM(r);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}}const wM="5.3.3";class Ws extends ih{constructor(e,t){super(),e=Or(e),e&&(this._element=e,this._config=this._getConfig(t),Gp.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Gp.remove(this._element,this.constructor.DATA_KEY),j.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,i=!0){R0(e,t,i)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return Gp.get(Or(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,typeof t=="object"?t:null)}static get VERSION(){return wM}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(e){return`${e}${this.EVENT_KEY}`}}const qp=n=>{let e=n.getAttribute("data-bs-target");if(!e||e==="#"){let t=n.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),e=t&&t!=="#"?t.trim():null}return e?e.split(",").map(t=>E0(t)).join(","):null},we={find(n,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,n))},findOne(n,e=document.documentElement){return Element.prototype.querySelector.call(e,n)},children(n,e){return[].concat(...n.children).filter(t=>t.matches(e))},parents(n,e){const t=[];let i=n.parentNode.closest(e);for(;i;)t.push(i),i=i.parentNode.closest(e);return t},prev(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return[t];t=t.previousElementSibling}return[]},next(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return[t];t=t.nextElementSibling}return[]},focusableChildren(n){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,n).filter(t=>!xr(t)&&cl(t))},getSelectorFromElement(n){const e=qp(n);return e&&we.findOne(e)?e:null},getElementFromSelector(n){const e=qp(n);return e?we.findOne(e):null},getMultipleElementsFromSelector(n){const e=qp(n);return e?we.find(e):[]}},ep=(n,e="hide")=>{const t=`click.dismiss${n.EVENT_KEY}`,i=n.NAME;j.on(document,t,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),xr(this))return;const r=we.getElementFromSelector(this)||this.closest(`.${i}`);n.getOrCreateInstance(r)[e]()})},CM="alert",yM="bs.alert",N0=`.${yM}`,SM=`close${N0}`,EM=`closed${N0}`,TM="fade",AM="show";class tp extends Ws{static get NAME(){return CM}close(){if(j.trigger(this._element,SM).defaultPrevented)return;this._element.classList.remove(AM);const t=this._element.classList.contains(TM);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),j.trigger(this._element,EM),this.dispose()}static jQueryInterface(e){return this.each(function(){const t=tp.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ep(tp,"close");Es(tp);const IM="button",RM="bs.button",OM=`.${RM}`,xM=".data-api",PM="active",Ew='[data-bs-toggle="button"]',kM=`click${OM}${xM}`;class ip extends Ws{static get NAME(){return IM}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(PM))}static jQueryInterface(e){return this.each(function(){const t=ip.getOrCreateInstance(this);e==="toggle"&&t[e]()})}}j.on(document,kM,Ew,n=>{n.preventDefault();const e=n.target.closest(Ew);ip.getOrCreateInstance(e).toggle()});Es(ip);const DM="swipe",hl=".bs.swipe",LM=`touchstart${hl}`,NM=`touchmove${hl}`,MM=`touchend${hl}`,FM=`pointerdown${hl}`,$M=`pointerup${hl}`,HM="touch",BM="pen",VM="pointer-event",zM=40,WM={endCallback:null,leftCallback:null,rightCallback:null},UM={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class jd extends ih{constructor(e,t){super(),this._element=e,!(!e||!jd.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return WM}static get DefaultType(){return UM}static get NAME(){return DM}dispose(){j.off(this._element,hl)}_start(e){if(!this._supportPointerEvents){this._deltaX=e.touches[0].clientX;return}this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX)}_end(e){this._eventIsPointerPenTouch(e)&&(this._deltaX=e.clientX-this._deltaX),this._handleSwipe(),zi(this._config.endCallback)}_move(e){this._deltaX=e.touches&&e.touches.length>1?0:e.touches[0].clientX-this._deltaX}_handleSwipe(){const e=Math.abs(this._deltaX);if(e<=zM)return;const t=e/this._deltaX;this._deltaX=0,t&&zi(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(j.on(this._element,FM,e=>this._start(e)),j.on(this._element,$M,e=>this._end(e)),this._element.classList.add(VM)):(j.on(this._element,LM,e=>this._start(e)),j.on(this._element,NM,e=>this._move(e)),j.on(this._element,MM,e=>this._end(e)))}_eventIsPointerPenTouch(e){return this._supportPointerEvents&&(e.pointerType===BM||e.pointerType===HM)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const GM="carousel",jM="bs.carousel",Wr=`.${jM}`,M0=".data-api",KM="ArrowLeft",YM="ArrowRight",qM=500,Sl="next",ea="prev",ma="left",gd="right",XM=`slide${Wr}`,Xp=`slid${Wr}`,QM=`keydown${Wr}`,ZM=`mouseenter${Wr}`,JM=`mouseleave${Wr}`,e1=`dragstart${Wr}`,t1=`load${Wr}${M0}`,i1=`click${Wr}${M0}`,F0="carousel",Ph="active",s1="slide",n1="carousel-item-end",r1="carousel-item-start",o1="carousel-item-next",a1="carousel-item-prev",$0=".active",H0=".carousel-item",l1=$0+H0,c1=".carousel-item img",h1=".carousel-indicators",d1="[data-bs-slide], [data-bs-slide-to]",u1='[data-bs-ride="carousel"]',p1={[KM]:gd,[YM]:ma},f1={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},g1={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class sh extends Ws{constructor(e,t){super(e,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=we.findOne(h1,this._element),this._addEventListeners(),this._config.ride===F0&&this.cycle()}static get Default(){return f1}static get DefaultType(){return g1}static get NAME(){return GM}next(){this._slide(Sl)}nextWhenVisible(){!document.hidden&&cl(this._element)&&this.next()}prev(){this._slide(ea)}pause(){this._isSliding&&T0(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){j.one(this._element,Xp,()=>this.cycle());return}this.cycle()}}to(e){const t=this._getItems();if(e>t.length-1||e<0)return;if(this._isSliding){j.one(this._element,Xp,()=>this.to(e));return}const i=this._getItemIndex(this._getActive());if(i===e)return;const s=e>i?Sl:ea;this._slide(s,t[e])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(e){return e.defaultInterval=e.interval,e}_addEventListeners(){this._config.keyboard&&j.on(this._element,QM,e=>this._keydown(e)),this._config.pause==="hover"&&(j.on(this._element,ZM,()=>this.pause()),j.on(this._element,JM,()=>this._maybeEnableCycle())),this._config.touch&&jd.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const i of we.find(c1,this._element))j.on(i,e1,s=>s.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(ma)),rightCallback:()=>this._slide(this._directionToOrder(gd)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),qM+this._config.interval))}};this._swipeHelper=new jd(this._element,t)}_keydown(e){if(/input|textarea/i.test(e.target.tagName))return;const t=p1[e.key];t&&(e.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(e){return this._getItems().indexOf(e)}_setActiveIndicatorElement(e){if(!this._indicatorsElement)return;const t=we.findOne($0,this._indicatorsElement);t.classList.remove(Ph),t.removeAttribute("aria-current");const i=we.findOne(`[data-bs-slide-to="${e}"]`,this._indicatorsElement);i&&(i.classList.add(Ph),i.setAttribute("aria-current","true"))}_updateInterval(){const e=this._activeElement||this._getActive();if(!e)return;const t=Number.parseInt(e.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(e,t=null){if(this._isSliding)return;const i=this._getActive(),s=e===Sl,r=t||y_(this._getItems(),i,s,this._config.wrap);if(r===i)return;const o=this._getItemIndex(r),a=p=>j.trigger(this._element,p,{relatedTarget:r,direction:this._orderToDirection(e),from:this._getItemIndex(i),to:o});if(a(XM).defaultPrevented||!i||!r)return;const c=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const h=s?r1:n1,d=s?o1:a1;r.classList.add(d),th(r),i.classList.add(h),r.classList.add(h);const u=()=>{r.classList.remove(h,d),r.classList.add(Ph),i.classList.remove(Ph,d,h),this._isSliding=!1,a(Xp)};this._queueCallback(u,i,this._isAnimated()),c&&this.cycle()}_isAnimated(){return this._element.classList.contains(s1)}_getActive(){return we.findOne(l1,this._element)}_getItems(){return we.find(H0,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(e){return ws()?e===ma?ea:Sl:e===ma?Sl:ea}_orderToDirection(e){return ws()?e===ea?ma:gd:e===ea?gd:ma}static jQueryInterface(e){return this.each(function(){const t=sh.getOrCreateInstance(this,e);if(typeof e=="number"){t.to(e);return}if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(document,i1,d1,function(n){const e=we.getElementFromSelector(this);if(!e||!e.classList.contains(F0))return;n.preventDefault();const t=sh.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");if(i){t.to(i),t._maybeEnableCycle();return}if(Vn.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});j.on(window,t1,()=>{const n=we.find(u1);for(const e of n)sh.getOrCreateInstance(e)});Es(sh);const m1="collapse",_1="bs.collapse",nh=`.${_1}`,v1=".data-api",b1=`show${nh}`,w1=`shown${nh}`,C1=`hide${nh}`,y1=`hidden${nh}`,S1=`click${nh}${v1}`,Qp="show",Aa="collapse",kh="collapsing",E1="collapsed",T1=`:scope .${Aa} .${Aa}`,A1="collapse-horizontal",I1="width",R1="height",O1=".collapse.show, .collapse.collapsing",Lg='[data-bs-toggle="collapse"]',x1={parent:null,toggle:!0},P1={parent:"(null|element)",toggle:"boolean"};class Dc extends Ws{constructor(e,t){super(e,t),this._isTransitioning=!1,this._triggerArray=[];const i=we.find(Lg);for(const s of i){const r=we.getSelectorFromElement(s),o=we.find(r).filter(a=>a===this._element);r!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return x1}static get DefaultType(){return P1}static get NAME(){return m1}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let e=[];if(this._config.parent&&(e=this._getFirstLevelChildren(O1).filter(a=>a!==this._element).map(a=>Dc.getOrCreateInstance(a,{toggle:!1}))),e.length&&e[0]._isTransitioning||j.trigger(this._element,b1).defaultPrevented)return;for(const a of e)a.hide();const i=this._getDimension();this._element.classList.remove(Aa),this._element.classList.add(kh),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(kh),this._element.classList.add(Aa,Qp),this._element.style[i]="",j.trigger(this._element,w1)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||j.trigger(this._element,C1).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,th(this._element),this._element.classList.add(kh),this._element.classList.remove(Aa,Qp);for(const s of this._triggerArray){const r=we.getElementFromSelector(s);r&&!this._isShown(r)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(kh),this._element.classList.add(Aa),j.trigger(this._element,y1)};this._element.style[t]="",this._queueCallback(i,this._element,!0)}_isShown(e=this._element){return e.classList.contains(Qp)}_configAfterMerge(e){return e.toggle=!!e.toggle,e.parent=Or(e.parent),e}_getDimension(){return this._element.classList.contains(A1)?I1:R1}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(Lg);for(const t of e){const i=we.getElementFromSelector(t);i&&this._addAriaAndCollapsedClass([t],this._isShown(i))}}_getFirstLevelChildren(e){const t=we.find(T1,this._config.parent);return we.find(e,this._config.parent).filter(i=>!t.includes(i))}_addAriaAndCollapsedClass(e,t){if(e.length)for(const i of e)i.classList.toggle(E1,!t),i.setAttribute("aria-expanded",t)}static jQueryInterface(e){const t={};return typeof e=="string"&&/show|hide/.test(e)&&(t.toggle=!1),this.each(function(){const i=Dc.getOrCreateInstance(this,t);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e]()}})}}j.on(document,S1,Lg,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const e of we.getMultipleElementsFromSelector(this))Dc.getOrCreateInstance(e,{toggle:!1}).toggle()});Es(Dc);const Tw="dropdown",k1="bs.dropdown",Go=`.${k1}`,E_=".data-api",D1="Escape",Aw="Tab",L1="ArrowUp",Iw="ArrowDown",N1=2,M1=`hide${Go}`,F1=`hidden${Go}`,$1=`show${Go}`,H1=`shown${Go}`,B0=`click${Go}${E_}`,V0=`keydown${Go}${E_}`,B1=`keyup${Go}${E_}`,_a="show",V1="dropup",z1="dropend",W1="dropstart",U1="dropup-center",G1="dropdown-center",fo='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',j1=`${fo}.${_a}`,md=".dropdown-menu",K1=".navbar",Y1=".navbar-nav",q1=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",X1=ws()?"top-end":"top-start",Q1=ws()?"top-start":"top-end",Z1=ws()?"bottom-end":"bottom-start",J1=ws()?"bottom-start":"bottom-end",eF=ws()?"left-start":"right-start",tF=ws()?"right-start":"left-start",iF="top",sF="bottom",nF={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rF={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class an extends Ws{constructor(e,t){super(e,t),this._popper=null,this._parent=this._element.parentNode,this._menu=we.next(this._element,md)[0]||we.prev(this._element,md)[0]||we.findOne(md,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return nF}static get DefaultType(){return rF}static get NAME(){return Tw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(xr(this._element)||this._isShown())return;const e={relatedTarget:this._element};if(!j.trigger(this._element,$1,e).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Y1))for(const i of[].concat(...document.body.children))j.on(i,"mouseover",Gd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_a),this._element.classList.add(_a),j.trigger(this._element,H1,e)}}hide(){if(xr(this._element)||!this._isShown())return;const e={relatedTarget:this._element};this._completeHide(e)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(e){if(!j.trigger(this._element,M1,e).defaultPrevented){if("ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))j.off(i,"mouseover",Gd);this._popper&&this._popper.destroy(),this._menu.classList.remove(_a),this._element.classList.remove(_a),this._element.setAttribute("aria-expanded","false"),Vn.removeDataAttribute(this._menu,"popper"),j.trigger(this._element,F1,e)}}_getConfig(e){if(e=super._getConfig(e),typeof e.reference=="object"&&!Bn(e.reference)&&typeof e.reference.getBoundingClientRect!="function")throw new TypeError(`${Tw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return e}_createPopper(){if(typeof S0>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let e=this._element;this._config.reference==="parent"?e=this._parent:Bn(this._config.reference)?e=Or(this._config.reference):typeof this._config.reference=="object"&&(e=this._config.reference);const t=this._getPopperConfig();this._popper=C_(e,this._menu,t)}_isShown(){return this._menu.classList.contains(_a)}_getPlacement(){const e=this._parent;if(e.classList.contains(z1))return eF;if(e.classList.contains(W1))return tF;if(e.classList.contains(U1))return iF;if(e.classList.contains(G1))return sF;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return e.classList.contains(V1)?t?Q1:X1:t?J1:Z1}_detectNavbar(){return this._element.closest(K1)!==null}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Vn.setDataAttribute(this._menu,"popper","static"),e.modifiers=[{name:"applyStyles",enabled:!1}]),{...e,...zi(this._config.popperConfig,[e])}}_selectMenuItem({key:e,target:t}){const i=we.find(q1,this._menu).filter(s=>cl(s));i.length&&y_(i,t,e===Iw,!i.includes(t)).focus()}static jQueryInterface(e){return this.each(function(){const t=an.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}static clearMenus(e){if(e.button===N1||e.type==="keyup"&&e.key!==Aw)return;const t=we.find(j1);for(const i of t){const s=an.getInstance(i);if(!s||s._config.autoClose===!1)continue;const r=e.composedPath(),o=r.includes(s._menu);if(r.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(e.target)&&(e.type==="keyup"&&e.key===Aw||/input|select|option|textarea|form/i.test(e.target.tagName)))continue;const a={relatedTarget:s._element};e.type==="click"&&(a.clickEvent=e),s._completeHide(a)}}static dataApiKeydownHandler(e){const t=/input|textarea/i.test(e.target.tagName),i=e.key===D1,s=[L1,Iw].includes(e.key);if(!s&&!i||t&&!i)return;e.preventDefault();const r=this.matches(fo)?this:we.prev(this,fo)[0]||we.next(this,fo)[0]||we.findOne(fo,e.delegateTarget.parentNode),o=an.getOrCreateInstance(r);if(s){e.stopPropagation(),o.show(),o._selectMenuItem(e);return}o._isShown()&&(e.stopPropagation(),o.hide(),r.focus())}}j.on(document,V0,fo,an.dataApiKeydownHandler);j.on(document,V0,md,an.dataApiKeydownHandler);j.on(document,B0,an.clearMenus);j.on(document,B1,an.clearMenus);j.on(document,B0,fo,function(n){n.preventDefault(),an.getOrCreateInstance(this).toggle()});Es(an);const z0="backdrop",oF="fade",Rw="show",Ow=`mousedown.bs.${z0}`,aF={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},lF={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class W0 extends ih{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return aF}static get DefaultType(){return lF}static get NAME(){return z0}show(e){if(!this._config.isVisible){zi(e);return}this._append();const t=this._getElement();this._config.isAnimated&&th(t),t.classList.add(Rw),this._emulateAnimation(()=>{zi(e)})}hide(e){if(!this._config.isVisible){zi(e);return}this._getElement().classList.remove(Rw),this._emulateAnimation(()=>{this.dispose(),zi(e)})}dispose(){this._isAppended&&(j.off(this._element,Ow),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add(oF),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=Or(e.rootElement),e}_append(){if(this._isAppended)return;const e=this._getElement();this._config.rootElement.append(e),j.on(e,Ow,()=>{zi(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(e){R0(e,this._getElement(),this._config.isAnimated)}}const cF="focustrap",hF="bs.focustrap",Kd=`.${hF}`,dF=`focusin${Kd}`,uF=`keydown.tab${Kd}`,pF="Tab",fF="forward",xw="backward",gF={autofocus:!0,trapElement:null},mF={autofocus:"boolean",trapElement:"element"};class U0 extends ih{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return gF}static get DefaultType(){return mF}static get NAME(){return cF}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),j.off(document,Kd),j.on(document,dF,e=>this._handleFocusin(e)),j.on(document,uF,e=>this._handleKeydown(e)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,j.off(document,Kd))}_handleFocusin(e){const{trapElement:t}=this._config;if(e.target===document||e.target===t||t.contains(e.target))return;const i=we.focusableChildren(t);i.length===0?t.focus():this._lastTabNavDirection===xw?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){e.key===pF&&(this._lastTabNavDirection=e.shiftKey?xw:fF)}}const Pw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",kw=".sticky-top",Dh="padding-right",Dw="margin-right";class Ng{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Dh,t=>t+e),this._setElementAttributes(Pw,Dh,t=>t+e),this._setElementAttributes(kw,Dw,t=>t-e)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Dh),this._resetElementAttributes(Pw,Dh),this._resetElementAttributes(kw,Dw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,i){const s=this.getWidth(),r=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,t);const a=window.getComputedStyle(o).getPropertyValue(t);o.style.setProperty(t,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(e,r)}_saveInitialAttribute(e,t){const i=e.style.getPropertyValue(t);i&&Vn.setDataAttribute(e,t,i)}_resetElementAttributes(e,t){const i=s=>{const r=Vn.getDataAttribute(s,t);if(r===null){s.style.removeProperty(t);return}Vn.removeDataAttribute(s,t),s.style.setProperty(t,r)};this._applyManipulationCallback(e,i)}_applyManipulationCallback(e,t){if(Bn(e)){t(e);return}for(const i of we.find(e,this._element))t(i)}}const _F="modal",vF="bs.modal",Cs=`.${vF}`,bF=".data-api",wF="Escape",CF=`hide${Cs}`,yF=`hidePrevented${Cs}`,G0=`hidden${Cs}`,j0=`show${Cs}`,SF=`shown${Cs}`,EF=`resize${Cs}`,TF=`click.dismiss${Cs}`,AF=`mousedown.dismiss${Cs}`,IF=`keydown.dismiss${Cs}`,RF=`click${Cs}${bF}`,Lw="modal-open",OF="fade",Nw="show",Zp="modal-static",xF=".modal.show",PF=".modal-dialog",kF=".modal-body",DF='[data-bs-toggle="modal"]',LF={backdrop:!0,focus:!0,keyboard:!0},NF={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ya extends Ws{constructor(e,t){super(e,t),this._dialog=we.findOne(PF,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ng,this._addEventListeners()}static get Default(){return LF}static get DefaultType(){return NF}static get NAME(){return _F}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||j.trigger(this._element,j0,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Lw),this._adjustDialog(),this._backdrop.show(()=>this._showElement(e)))}hide(){!this._isShown||this._isTransitioning||j.trigger(this._element,CF).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Nw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){j.off(window,Cs),j.off(this._dialog,Cs),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new W0({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new U0({trapElement:this._element})}_showElement(e){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=we.findOne(kF,this._dialog);t&&(t.scrollTop=0),th(this._element),this._element.classList.add(Nw);const i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,j.trigger(this._element,SF,{relatedTarget:e})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){j.on(this._element,IF,e=>{if(e.key===wF){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),j.on(window,EF,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),j.on(this._element,AF,e=>{j.one(this._element,TF,t=>{if(!(this._element!==e.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Lw),this._resetAdjustments(),this._scrollBar.reset(),j.trigger(this._element,G0)})}_isAnimated(){return this._element.classList.contains(OF)}_triggerBackdropTransition(){if(j.trigger(this._element,yF).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(Zp)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(Zp),this._queueCallback(()=>{this._element.classList.remove(Zp),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),i=t>0;if(i&&!e){const s=ws()?"paddingLeft":"paddingRight";this._element.style[s]=`${t}px`}if(!i&&e){const s=ws()?"paddingRight":"paddingLeft";this._element.style[s]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each(function(){const i=Ya.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof i[e]>"u")throw new TypeError(`No method named "${e}"`);i[e](t)}})}}j.on(document,RF,DF,function(n){const e=we.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),j.one(e,j0,s=>{s.defaultPrevented||j.one(e,G0,()=>{cl(this)&&this.focus()})});const t=we.findOne(xF);t&&Ya.getInstance(t).hide(),Ya.getOrCreateInstance(e).toggle(this)});ep(Ya);Es(Ya);const MF="offcanvas",FF="bs.offcanvas",rr=`.${FF}`,K0=".data-api",$F=`load${rr}${K0}`,HF="Escape",Mw="show",Fw="showing",$w="hiding",BF="offcanvas-backdrop",Y0=".offcanvas.show",VF=`show${rr}`,zF=`shown${rr}`,WF=`hide${rr}`,Hw=`hidePrevented${rr}`,q0=`hidden${rr}`,UF=`resize${rr}`,GF=`click${rr}${K0}`,jF=`keydown.dismiss${rr}`,KF='[data-bs-toggle="offcanvas"]',YF={backdrop:!0,keyboard:!0,scroll:!1},qF={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Pr extends Ws{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return YF}static get DefaultType(){return qF}static get NAME(){return MF}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown||j.trigger(this._element,VF,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ng().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fw);const i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Mw),this._element.classList.remove(Fw),j.trigger(this._element,zF,{relatedTarget:e})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||j.trigger(this._element,WF).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add($w),this._backdrop.hide();const t=()=>{this._element.classList.remove(Mw,$w),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ng().reset(),j.trigger(this._element,q0)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=()=>{if(this._config.backdrop==="static"){j.trigger(this._element,Hw);return}this.hide()},t=!!this._config.backdrop;return new W0({className:BF,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?e:null})}_initializeFocusTrap(){return new U0({trapElement:this._element})}_addEventListeners(){j.on(this._element,jF,e=>{if(e.key===HF){if(this._config.keyboard){this.hide();return}j.trigger(this._element,Hw)}})}static jQueryInterface(e){return this.each(function(){const t=Pr.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}j.on(document,GF,KF,function(n){const e=we.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),xr(this))return;j.one(e,q0,()=>{cl(this)&&this.focus()});const t=we.findOne(Y0);t&&t!==e&&Pr.getInstance(t).hide(),Pr.getOrCreateInstance(e).toggle(this)});j.on(window,$F,()=>{for(const n of we.find(Y0))Pr.getOrCreateInstance(n).show()});j.on(window,UF,()=>{for(const n of we.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Pr.getOrCreateInstance(n).hide()});ep(Pr);Es(Pr);const XF=/^aria-[\w-]*$/i,X0={"*":["class","dir","id","lang","role",XF],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},QF=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ZF=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,JF=(n,e)=>{const t=n.nodeName.toLowerCase();return e.includes(t)?QF.has(t)?!!ZF.test(n.nodeValue):!0:e.filter(i=>i instanceof RegExp).some(i=>i.test(t))};function e$(n,e,t){if(!n.length)return n;if(t&&typeof t=="function")return t(n);const s=new window.DOMParser().parseFromString(n,"text/html"),r=[].concat(...s.body.querySelectorAll("*"));for(const o of r){const a=o.nodeName.toLowerCase();if(!Object.keys(e).includes(a)){o.remove();continue}const l=[].concat(...o.attributes),c=[].concat(e["*"]||[],e[a]||[]);for(const h of l)JF(h,c)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}const t$="TemplateFactory",i$={allowList:X0,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},s$={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},n$={entry:"(string|element|function|null)",selector:"(string|element)"};class r$ extends ih{constructor(e){super(),this._config=this._getConfig(e)}static get Default(){return i$}static get DefaultType(){return s$}static get NAME(){return t$}getContent(){return Object.values(this._config.content).map(e=>this._resolvePossibleFunction(e)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(e){return this._checkContent(e),this._config.content={...this._config.content,...e},this}toHtml(){const e=document.createElement("div");e.innerHTML=this._maybeSanitize(this._config.template);for(const[s,r]of Object.entries(this._config.content))this._setContent(e,r,s);const t=e.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&t.classList.add(...i.split(" ")),t}_typeCheckConfig(e){super._typeCheckConfig(e),this._checkContent(e.content)}_checkContent(e){for(const[t,i]of Object.entries(e))super._typeCheckConfig({selector:t,entry:i},n$)}_setContent(e,t,i){const s=we.findOne(i,e);if(s){if(t=this._resolvePossibleFunction(t),!t){s.remove();return}if(Bn(t)){this._putElementInTemplate(Or(t),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(t);return}s.textContent=t}}_maybeSanitize(e){return this._config.sanitize?e$(e,this._config.allowList,this._config.sanitizeFn):e}_resolvePossibleFunction(e){return zi(e,[this])}_putElementInTemplate(e,t){if(this._config.html){t.innerHTML="",t.append(e);return}t.textContent=e.textContent}}const o$="tooltip",a$=new Set(["sanitize","allowList","sanitizeFn"]),Jp="fade",l$="modal",Lh="show",c$=".tooltip-inner",Bw=`.${l$}`,Vw="hide.bs.modal",El="hover",ef="focus",h$="click",d$="manual",u$="hide",p$="hidden",f$="show",g$="shown",m$="inserted",_$="click",v$="focusin",b$="focusout",w$="mouseenter",C$="mouseleave",y$={AUTO:"auto",TOP:"top",RIGHT:ws()?"left":"right",BOTTOM:"bottom",LEFT:ws()?"right":"left"},S$={allowList:X0,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},E$={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class dl extends Ws{constructor(e,t){if(typeof S0>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(e,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return S$}static get DefaultType(){return E$}static get NAME(){return o$}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),j.off(this._element.closest(Bw),Vw,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const e=j.trigger(this._element,this.constructor.eventName(f$)),i=(A0(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(e.defaultPrevented||!i)return;this._disposePopper();const s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(s),j.trigger(this._element,this.constructor.eventName(m$))),this._popper=this._createPopper(s),s.classList.add(Lh),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))j.on(a,"mouseover",Gd);const o=()=>{j.trigger(this._element,this.constructor.eventName(g$)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||j.trigger(this._element,this.constructor.eventName(u$)).defaultPrevented)return;if(this._getTipElement().classList.remove(Lh),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))j.off(s,"mouseover",Gd);this._activeTrigger[h$]=!1,this._activeTrigger[ef]=!1,this._activeTrigger[El]=!1,this._isHovered=null;const i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),j.trigger(this._element,this.constructor.eventName(p$)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(e){const t=this._getTemplateFactory(e).toHtml();if(!t)return null;t.classList.remove(Jp,Lh),t.classList.add(`bs-${this.constructor.NAME}-auto`);const i=hM(this.constructor.NAME).toString();return t.setAttribute("id",i),this._isAnimated()&&t.classList.add(Jp),t}setContent(e){this._newContent=e,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(e){return this._templateFactory?this._templateFactory.changeContent(e):this._templateFactory=new r$({...this._config,content:e,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[c$]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(e){return this.constructor.getOrCreateInstance(e.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Jp)}_isShown(){return this.tip&&this.tip.classList.contains(Lh)}_createPopper(e){const t=zi(this._config.placement,[this,e,this._element]),i=y$[t.toUpperCase()];return C_(this._element,e,this._getPopperConfig(i))}_getOffset(){const{offset:e}=this._config;return typeof e=="string"?e.split(",").map(t=>Number.parseInt(t,10)):typeof e=="function"?t=>e(t,this._element):e}_resolvePossibleFunction(e){return zi(e,[this._element])}_getPopperConfig(e){const t={placement:e,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return{...t,...zi(this._config.popperConfig,[t])}}_setListeners(){const e=this._config.trigger.split(" ");for(const t of e)if(t==="click")j.on(this._element,this.constructor.eventName(_$),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(t!==d$){const i=t===El?this.constructor.eventName(w$):this.constructor.eventName(v$),s=t===El?this.constructor.eventName(C$):this.constructor.eventName(b$);j.on(this._element,i,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusin"?ef:El]=!0,o._enter()}),j.on(this._element,s,this._config.selector,r=>{const o=this._initializeOnDelegatedTarget(r);o._activeTrigger[r.type==="focusout"?ef:El]=o._element.contains(r.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},j.on(this._element.closest(Bw),Vw,this._hideModalHandler)}_fixTitle(){const e=this._element.getAttribute("title");e&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",e),this._element.setAttribute("data-bs-original-title",e),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(e,t){clearTimeout(this._timeout),this._timeout=setTimeout(e,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(e){const t=Vn.getDataAttributes(this._element);for(const i of Object.keys(t))a$.has(i)&&delete t[i];return e={...t,...typeof e=="object"&&e?e:{}},e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e.container=e.container===!1?document.body:Or(e.container),typeof e.delay=="number"&&(e.delay={show:e.delay,hide:e.delay}),typeof e.title=="number"&&(e.title=e.title.toString()),typeof e.content=="number"&&(e.content=e.content.toString()),e}_getDelegateConfig(){const e={};for(const[t,i]of Object.entries(this._config))this.constructor.Default[t]!==i&&(e[t]=i);return e.selector=!1,e.trigger="manual",e}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(e){return this.each(function(){const t=dl.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Es(dl);const T$="popover",A$=".popover-header",I$=".popover-body",R$={...dl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},O$={...dl.DefaultType,content:"(null|string|element|function)"};class T_ extends dl{static get Default(){return R$}static get DefaultType(){return O$}static get NAME(){return T$}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[A$]:this._getTitle(),[I$]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(e){return this.each(function(){const t=T_.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e]()}})}}Es(T_);const x$="scrollspy",P$="bs.scrollspy",A_=`.${P$}`,k$=".data-api",D$=`activate${A_}`,zw=`click${A_}`,L$=`load${A_}${k$}`,N$="dropdown-item",ta="active",M$='[data-bs-spy="scroll"]',tf="[href]",F$=".nav, .list-group",Ww=".nav-link",$$=".nav-item",H$=".list-group-item",B$=`${Ww}, ${$$} > ${Ww}, ${H$}`,V$=".dropdown",z$=".dropdown-toggle",W$={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},U$={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sp extends Ws{constructor(e,t){super(e,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return W$}static get DefaultType(){return U$}static get NAME(){return x$}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const e of this._observableSections.values())this._observer.observe(e)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(e){return e.target=Or(e.target)||document.body,e.rootMargin=e.offset?`${e.offset}px 0px -30%`:e.rootMargin,typeof e.threshold=="string"&&(e.threshold=e.threshold.split(",").map(t=>Number.parseFloat(t))),e}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(j.off(this._config.target,zw),j.on(this._config.target,zw,tf,e=>{const t=this._observableSections.get(e.target.hash);if(t){e.preventDefault();const i=this._rootElement||window,s=t.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){const e={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),e)}_observerCallback(e){const t=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(t(o))},s=(this._rootElement||document.documentElement).scrollTop,r=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(const o of e){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(o));continue}const a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&a){if(i(o),!s)return;continue}!r&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const e=we.find(tf,this._config.target);for(const t of e){if(!t.hash||xr(t))continue;const i=we.findOne(decodeURI(t.hash),this._element);cl(i)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,i))}}_process(e){this._activeTarget!==e&&(this._clearActiveClass(this._config.target),this._activeTarget=e,e.classList.add(ta),this._activateParents(e),j.trigger(this._element,D$,{relatedTarget:e}))}_activateParents(e){if(e.classList.contains(N$)){we.findOne(z$,e.closest(V$)).classList.add(ta);return}for(const t of we.parents(e,F$))for(const i of we.prev(t,B$))i.classList.add(ta)}_clearActiveClass(e){e.classList.remove(ta);const t=we.find(`${tf}.${ta}`,e);for(const i of t)i.classList.remove(ta)}static jQueryInterface(e){return this.each(function(){const t=sp.getOrCreateInstance(this,e);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(window,L$,()=>{for(const n of we.find(M$))sp.getOrCreateInstance(n)});Es(sp);const G$="tab",j$="bs.tab",jo=`.${j$}`,K$=`hide${jo}`,Y$=`hidden${jo}`,q$=`show${jo}`,X$=`shown${jo}`,Q$=`click${jo}`,Z$=`keydown${jo}`,J$=`load${jo}`,eH="ArrowLeft",Uw="ArrowRight",tH="ArrowUp",Gw="ArrowDown",sf="Home",jw="End",go="active",Kw="fade",nf="show",iH="dropdown",Q0=".dropdown-toggle",sH=".dropdown-menu",rf=`:not(${Q0})`,nH='.list-group, .nav, [role="tablist"]',rH=".nav-item, .list-group-item",oH=`.nav-link${rf}, .list-group-item${rf}, [role="tab"]${rf}`,Z0='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',of=`${oH}, ${Z0}`,aH=`.${go}[data-bs-toggle="tab"], .${go}[data-bs-toggle="pill"], .${go}[data-bs-toggle="list"]`;class qa extends Ws{constructor(e){super(e),this._parent=this._element.closest(nH),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),j.on(this._element,Z$,t=>this._keydown(t)))}static get NAME(){return G$}show(){const e=this._element;if(this._elemIsActive(e))return;const t=this._getActiveElem(),i=t?j.trigger(t,K$,{relatedTarget:e}):null;j.trigger(e,q$,{relatedTarget:t}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(t,e),this._activate(e,t))}_activate(e,t){if(!e)return;e.classList.add(go),this._activate(we.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.add(nf);return}e.removeAttribute("tabindex"),e.setAttribute("aria-selected",!0),this._toggleDropDown(e,!0),j.trigger(e,X$,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(Kw))}_deactivate(e,t){if(!e)return;e.classList.remove(go),e.blur(),this._deactivate(we.getElementFromSelector(e));const i=()=>{if(e.getAttribute("role")!=="tab"){e.classList.remove(nf);return}e.setAttribute("aria-selected",!1),e.setAttribute("tabindex","-1"),this._toggleDropDown(e,!1),j.trigger(e,Y$,{relatedTarget:t})};this._queueCallback(i,e,e.classList.contains(Kw))}_keydown(e){if(![eH,Uw,tH,Gw,sf,jw].includes(e.key))return;e.stopPropagation(),e.preventDefault();const t=this._getChildren().filter(s=>!xr(s));let i;if([sf,jw].includes(e.key))i=t[e.key===sf?0:t.length-1];else{const s=[Uw,Gw].includes(e.key);i=y_(t,e.target,s,!0)}i&&(i.focus({preventScroll:!0}),qa.getOrCreateInstance(i).show())}_getChildren(){return we.find(of,this._parent)}_getActiveElem(){return this._getChildren().find(e=>this._elemIsActive(e))||null}_setInitialAttributes(e,t){this._setAttributeIfNotExists(e,"role","tablist");for(const i of t)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(e){e=this._getInnerElement(e);const t=this._elemIsActive(e),i=this._getOuterElement(e);e.setAttribute("aria-selected",t),i!==e&&this._setAttributeIfNotExists(i,"role","presentation"),t||e.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(e,"role","tab"),this._setInitialAttributesOnTargetPanel(e)}_setInitialAttributesOnTargetPanel(e){const t=we.getElementFromSelector(e);t&&(this._setAttributeIfNotExists(t,"role","tabpanel"),e.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`${e.id}`))}_toggleDropDown(e,t){const i=this._getOuterElement(e);if(!i.classList.contains(iH))return;const s=(r,o)=>{const a=we.findOne(r,i);a&&a.classList.toggle(o,t)};s(Q0,go),s(sH,nf),i.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(e,t,i){e.hasAttribute(t)||e.setAttribute(t,i)}_elemIsActive(e){return e.classList.contains(go)}_getInnerElement(e){return e.matches(of)?e:we.findOne(of,e)}_getOuterElement(e){return e.closest(rH)||e}static jQueryInterface(e){return this.each(function(){const t=qa.getOrCreateInstance(this);if(typeof e=="string"){if(t[e]===void 0||e.startsWith("_")||e==="constructor")throw new TypeError(`No method named "${e}"`);t[e]()}})}}j.on(document,Q$,Z0,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!xr(this)&&qa.getOrCreateInstance(this).show()});j.on(window,J$,()=>{for(const n of we.find(aH))qa.getOrCreateInstance(n)});Es(qa);const lH="toast",cH="bs.toast",Ur=`.${cH}`,hH=`mouseover${Ur}`,dH=`mouseout${Ur}`,uH=`focusin${Ur}`,pH=`focusout${Ur}`,fH=`hide${Ur}`,gH=`hidden${Ur}`,mH=`show${Ur}`,_H=`shown${Ur}`,vH="fade",Yw="hide",Nh="show",Mh="showing",bH={animation:"boolean",autohide:"boolean",delay:"number"},wH={animation:!0,autohide:!0,delay:5e3};class np extends Ws{constructor(e,t){super(e,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wH}static get DefaultType(){return bH}static get NAME(){return lH}show(){if(j.trigger(this._element,mH).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(vH);const t=()=>{this._element.classList.remove(Mh),j.trigger(this._element,_H),this._maybeScheduleHide()};this._element.classList.remove(Yw),th(this._element),this._element.classList.add(Nh,Mh),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||j.trigger(this._element,fH).defaultPrevented)return;const t=()=>{this._element.classList.add(Yw),this._element.classList.remove(Mh,Nh),j.trigger(this._element,gH)};this._element.classList.add(Mh),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Nh),super.dispose()}isShown(){return this._element.classList.contains(Nh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(e,t){switch(e.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const i=e.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){j.on(this._element,hH,e=>this._onInteraction(e,!0)),j.on(this._element,dH,e=>this._onInteraction(e,!1)),j.on(this._element,uH,e=>this._onInteraction(e,!0)),j.on(this._element,pH,e=>this._onInteraction(e,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(e){return this.each(function(){const t=np.getOrCreateInstance(this,e);if(typeof e=="string"){if(typeof t[e]>"u")throw new TypeError(`No method named "${e}"`);t[e](this)}})}}ep(np);Es(np);var pt;(function(n){n.local="local",n.remote="remote"})(pt||(pt={}));class CH{constructor(e){this.rxjs=e,this._infiniteScrollBottomHit=!1}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,t,i,s){var o;const r=new Date;t&&i.service.postProcess&&i.service.postProcess(t),t&&(i!=null&&i.internalPostProcess)&&i.internalPostProcess(t),i.postProcess!==void 0&&(t instanceof Object&&(t.metrics={startTime:e,endTime:r,executionTime:r.valueOf()-e.valueOf(),itemCount:s,totalItemCount:s},(o=i.service.options)!=null&&o.infiniteScroll&&(t.infiniteScrollBottomHit=this._infiniteScrollBottomHit,delete t.itemCount)),i.postProcess(t),this.setInfiniteScrollBottomHit(!1))}onBackendError(e,t){if(typeof(t==null?void 0:t.onError)=="function")t.onError(e);else throw e}executeBackendCallback(e,t,i,s,r,o){var a;if(e){i&&!i.clearFilterTriggered&&!i.clearSortTriggered&&(o!=null&&o.emitActionChangedCallback)&&o.emitActionChangedCallback.call(this,pt.remote);const l=e.process(t);if(l instanceof Promise&&l.then)l.then(c=>{var h;this.executeBackendProcessesCallback(s,c,e,r),(h=o==null?void 0:o.successCallback)==null||h.call(this,i)}).catch(c=>{var h;(h=o==null?void 0:o.errorCallback)==null||h.call(this,i),this.onBackendError(c,e)});else if((a=this.rxjs)!=null&&a.isObservable(l)){const c=this.rxjs;c.isObservable(o==null?void 0:o.httpCancelRequestSubject)&&(o==null||o.httpCancelRequestSubject.next()),l.pipe(c.takeUntil(c.iif(()=>c.isObservable(o==null?void 0:o.httpCancelRequestSubject),o==null?void 0:o.httpCancelRequestSubject,c.EMPTY))).subscribe(h=>{var d;this.executeBackendProcessesCallback(s,h,e,r),(d=o==null?void 0:o.successCallback)==null||d.call(this,i)},h=>{var d;(d=o==null?void 0:o.errorCallback)==null||d.call(this,i),this.onBackendError(h,e)})}}}refreshBackendDataset(e){var s;let t="";const i=e==null?void 0:e.backendServiceApi;if(!i||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(i.service&&(t=i.service.buildQuery()),t&&t!==""){const r=new Date;i.preProcess&&i.preProcess();const o=((s=e==null?void 0:e.pagination)==null?void 0:s.totalItems)??0;this.executeBackendCallback(i,t,null,r,o)}}setInfiniteScrollBottomHit(e){this._infiniteScrollBottomHit=e}}function Yd(n,e){if(Array.isArray(n)){const t=["pop","push","reverse","shift","unshift","splice","sort"],i=[];return t.forEach(r=>{n[r]=(...o)=>{const a=Array.prototype[r].apply(n,o);return i.push({method:r,action:a}),e.apply(n,[n,o]),a}}),{disconnect:()=>t.forEach(r=>{n[r]=()=>i[r].action})}}return null}function I_(n,e,t){let i=n[e];Object.defineProperty(n,e,{configurable:!0,get(){return i},set(s){i=s,t.apply(n,[s,n[e]])}})}const yH=n=>n;function SH(n,e,t=yH,i=()=>{}){const s=n&&n.length?[{pointer:n,offset:0}]:[],r=[];let o;for(;s.length;)for(o=s.pop();o.offset<o.pointer.length;){const a=o.pointer[o.offset],l=i(a),c=e(a);r.push(t(a,o.node,l,o.nodeId)),o.offset+=1,c&&(s.push(o),o={pointer:c,offset:0,node:a,nodeId:l})}return r}let se=class{};se.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FILTER_SHORTCUTS:"Filter Shortcuts",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"};se.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"};se.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2;se.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2;se.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2;se.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4;se.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0;se.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0;se.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".";se.DEFAULT_NUMBER_THOUSAND_SEPARATOR="";se.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1;se.SLIDER_DEFAULT_MIN_VALUE=0;se.SLIDER_DEFAULT_MAX_VALUE=100;se.SLIDER_DEFAULT_STEP=1;se.VALIDATION_REQUIRED_FIELD="Field is required";se.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number";se.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number";se.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}";se.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}";se.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}";se.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}";se.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}";se.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}";se.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}";se.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}";se.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}";se.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}";se.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals";se.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters";se.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters";se.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters";se.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)";se.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var qw;(function(n){n[n.camelCase=0]="camelCase",n[n.pascalCase=1]="pascalCase",n[n.snakeCase=2]="snakeCase",n[n.kebabCase=3]="kebabCase"})(qw||(qw={}));var kr;(function(n){n.colon=":",n.comma=",",n.equalSign="=",n.pipe="|",n.semicolon=";",n.space=" ",n.tab="	",n.doubleColon="::",n.doublePipe="||",n.doubleSemicolon=";;"})(kr||(kr={}));var Ae;(function(n){n.autoTooltip="autoTooltip",n.cellExternalCopyManager="cellExternalCopyManager",n.cellMenu="cellMenu",n.checkboxSelector="checkboxSelector",n.columnPicker="columnPicker",n.contextMenu="contextMenu",n.customTooltip="customTooltip",n.draggableGrouping="draggableGrouping",n.groupItemMetaProvider="groupItemMetaProvider",n.gridMenu="gridMenu",n.headerButton="headerButton",n.headerMenu="headerMenu",n.rowBasedEdit="rowBasedEdit",n.rowDetailView="rowDetailView",n.rowMoveManager="rowMoveManager",n.rowSelection="rowSelection"})(Ae||(Ae={}));const N={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var mn;(function(n){n.csv="csv",n.txt="txt",n.xls="xls",n.xlsx="xlsx"})(mn||(mn={}));var dc;(function(n){n.merge="merge",n.chain="chain"})(dc||(dc={}));var Ai;(function(n){n.columns="columns",n.filter="filter",n.pagination="pagination",n.pinning="pinning",n.rowSelection="rowSelection",n.sorter="sorter",n.treeData="treeData"})(Ai||(Ai={}));var de;(function(n){n.empty="",n.custom="Custom",n.contains="Contains",n.notContains="Not_Contains",n.lessThan="LT",n.lessThanOrEqual="LE",n.greaterThan="GT",n.greaterThanOrEqual="GE",n.notEqual="NE",n.equal="EQ",n.endsWith="EndsWith",n.rangeInclusive="RangeInclusive",n.rangeExclusive="RangeExclusive",n.startsWith="StartsWith",n.startsWithEndsWith="StartsWithEndsWith",n.in="IN",n.notIn="NOT_IN",n.inContains="IN_CONTAINS",n.notInContains="NOT_IN_CONTAINS",n.inCollection="IN_COLLECTION",n.notInCollection="NOT_IN_COLLECTION"})(de||(de={}));var Ys;(function(n){n.asc="asc",n.ASC="ASC",n.desc="desc",n.DESC="DESC"})(Ys||(Ys={}));var ct;(function(n){n[n.asc=1]="asc",n[n.desc=-1]="desc",n[n.neutral=0]="neutral"})(ct||(ct={}));var pr;(function(n){n.toggleCollapse="toggle-collapse",n.fullExpand="full-expand",n.fullCollapse="full-collapse",n.toggleExpand="toggle-expand"})(pr||(pr={}));class R_ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,R_.prototype)}}function C5(n){let e=!1;return n instanceof Promise?{promise:n.then(t=>{if(e)throw new R_("Cancelled Promise");return t}),cancel:()=>e=!0}:n}function EH(n,e,t=""){let i=e;if(e instanceof Promise)return e;if(n.isObservable(e)&&(i=n.firstValueFrom(e)),!(i instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${t} is not able to convert the Observable into a Promise.`);return i}function O_(n,e,t=0){const i=zt(e,"childrenPropName");Array.isArray(n)&&n.forEach(s=>{s&&(Array.isArray(s[i])&&s[i].length>0&&(t++,O_(s[i],e,t),t--),s[e.levelPropName]=t)})}function rp(n,e,t=0,i=null){const s=zt(e,"childrenPropName"),{aggregator:r}=e;Array.isArray(n)&&n.forEach(o=>{if(o){const a=Array.isArray(o[s]);Array.isArray(o[s])&&o[s].length>0&&(r.init(o,!0),t++,rp(o[s],e,t,o),t--),i&&r.isInitialized&&typeof r.accumulate=="function"&&!(o!=null&&o.__filteredOut)&&(r.accumulate(o,a),r.storeResult(i.__treeTotals)),o[e.levelPropName]=t}})}function TH(n,e){const t=zt(e,"identifierPropName"),i=zt(e,"childrenPropName"),s=zt(e,"hasChildrenPropName"),r=zt(e,"parentPropName"),o=zt(e,"levelPropName");return e!=null&&e.shouldAddTreeLevelNumber&&(Array.isArray(e==null?void 0:e.aggregators)?e.aggregators.forEach(l=>{rp(n,{childrenPropName:i,levelPropName:o,aggregator:l})}):O_(n,{childrenPropName:i,levelPropName:o})),SH(n,l=>l[i],(l,c)=>({[t]:l[t],[r]:c!==void 0?c[t]:null,[s]:!!l[i],...IH(l,i)}))}function zt(n,e,t="id"){let i="";switch(e){case"childrenPropName":i=(n==null?void 0:n.childrenPropName)??se.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":i=(n==null?void 0:n.collapsedPropName)??se.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":i=(n==null?void 0:n.hasChildrenPropName)??se.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":i=(n==null?void 0:n.identifierPropName)??t;break;case"levelPropName":i=(n==null?void 0:n.levelPropName)??se.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":i=(n==null?void 0:n.parentPropName)??se.treeDataProperties.PARENT_PROP;break}return i}function AH(n,e){const t=zt(e,"identifierPropName"),i=zt(e,"childrenPropName"),s=zt(e,"parentPropName"),r=zt(e,"levelPropName"),o=zt(e,"collapsedPropName"),a=n||[],l=[],c={};return a.forEach(h=>{c[h[t]]=h,delete h[i]}),Object.keys(c).forEach(h=>{const d=c[h];if(!(s in d)||d[s]===null||d[s]===void 0||d[s]==="")l.push(d);else if(d[s]in c){const u=c[d[s]];i in u||(u[i]=[]),u[i].push(d),u[o]===void 0&&(u[o]=(e==null?void 0:e.initiallyCollapsed)??!1)}}),Array.isArray(e==null?void 0:e.aggregators)?e.aggregators.forEach(h=>{rp(l,{childrenPropName:i,levelPropName:r,aggregator:h},0)}):O_(l,{childrenPropName:i,levelPropName:r},0),l}function qd(n,e,t){if(!t)throw new Error('findItemInTreeStructure requires parameter "childrenPropertyName"');const i=n.find(e),s=n.filter(r=>t in r&&r[t]);if(i)return i;if(s.length){const r=[];for(const o of s)t in o&&o[t].forEach(a=>r.push(a));return qd(r,e,t)}}function af(n,e,t,i=".",s=""){if(isNaN(+n))return n;const r=e===void 0?2:e,o=t===void 0?2:t;let a=String(Math.round(+n*Math.pow(10,o))/Math.pow(10,o));for(a.indexOf(".")<0&&r>0&&(a+=".");a.length-a.indexOf(".")<=r;)a+="0";const l=a.split(".");let c,h;s?c=l.length>=1?_d(l[0],s):void 0:c=l.length>=1?l[0]:a,l.length>1&&(h=l[1]);let d="";return c!==void 0&&h!==void 0?d=`${c}${i}${h}`:c!=null&&(d=c),d}function Gr(n,e,t,i,s="",r="",o=".",a=""){if(isNaN(+n))return n;const l=Math.round(parseFloat(n)*1e6)/1e6;if(l<0){const c=Math.abs(l);if(i){if(!isNaN(e)||!isNaN(t))return`(${s}${af(c,e,t,o,a)}${r})`;const h=_d(`${c}`,a);return`(${s}${h}${r})`}else{if(!isNaN(e)||!isNaN(t))return`-${s}${af(c,e,t,o,a)}${r}`;const h=_d(`${c}`,a);return`-${s}${h}${r}`}}else{if(!isNaN(e)||!isNaN(t))return`${s}${af(n,e,t,o,a)}${r}`;const c=_d(`${n}`,a);return`${s}${c}${r}`}}function Xd(n,e,t){if(typeof n.queryFieldNameGetterFn=="function"){const i=n.queryFieldNameGetterFn(e);(i==null?void 0:i.indexOf("."))>=0?t=Dr(e,i):t=e.hasOwnProperty(i)?e[i]:t}return t}function Dr(n,e){return!n||!e?n:e.split(".").reduce((t,i)=>t&&t[i],n)}function Ko(n){return n&&n.translationNamespace?n.translationNamespace+(n.translationNamespaceSeparator||""):""}function y5(n){return n.outputType||n.type||N.string}function Lo(n){switch(n){case N.date:case N.dateTime:case N.dateIso:case N.dateTimeIso:case N.dateTimeShortIso:case N.dateTimeIsoAmPm:case N.dateTimeIsoAM_PM:case N.dateEuro:case N.dateEuroShort:case N.dateTimeEuro:case N.dateTimeShortEuro:case N.dateTimeEuroAmPm:case N.dateTimeEuroAM_PM:case N.dateTimeEuroShort:case N.dateTimeEuroShortAmPm:case N.dateTimeEuroShortAM_PM:case N.dateUs:case N.dateUsShort:case N.dateTimeUs:case N.dateTimeShortUs:case N.dateTimeUsAmPm:case N.dateTimeUsAM_PM:case N.dateTimeUsShort:case N.dateTimeUsShortAmPm:case N.dateTimeUsShortAM_PM:case N.dateUtc:return!0;default:return!1}}function S5(n){let e;switch(n){case"<":case"LT":e=de.lessThan;break;case"<=":case"LE":e=de.lessThanOrEqual;break;case">":case"GT":e=de.greaterThan;break;case">=":case"GE":e=de.greaterThanOrEqual;break;case"!=":case"NE":e=de.notEqual;break;case"*":case"a*":case"StartsWith":e=de.startsWith;break;case"*z":case"EndsWith":e=de.endsWith;break;case"=":case"==":case"EQ":e=de.equal;break;case"IN":e=de.in;break;case"NIN":case"NOT_IN":e=de.notIn;break;case"<>":case"Not_Contains":case"NOT_CONTAINS":e=de.notContains;break;case"Contains":case"CONTAINS":default:e=de.contains;break}return e}function Lc(n){let e="";switch(n){case de.greaterThan:case">":e=">";break;case de.greaterThanOrEqual:case">=":e=">=";break;case de.lessThan:case"<":e="<";break;case de.lessThanOrEqual:case"<=":e="<=";break;case de.notEqual:case"<>":e="<>";break;case de.equal:case"=":case"==":case"EQ":e="=";break;case de.startsWith:case"a*":case"*":e="a*";break;case de.endsWith:case"*z":e="*z";break;default:e=n;break}return e}function Xw(n){let e;if(Lo(n))e=de.equal;else switch(n){case N.unknown:case N.string:case N.text:case N.password:case N.readonly:e=de.contains;break;case N.float:case N.number:default:e=de.equal;break}return e}function IH(n,e){return Object.keys(n).reduce((t,i)=>(i!==e&&(t[i]=n[i]),t),{})}function _d(n,e=","){if(n!=null){const t=`${n}`,i=t.split(".");return i.length===2?`${i[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)}.${i[1]}`:t.replace(/\B(?=(\d{3})+(?!\d))/g,e)}return n}function uc(n,e,t={}){return Array.isArray(n)?n.find(e)||t:n}function x_(n){if(Array.isArray(n))for(;n.length>0;){const e=n.pop();e!=null&&e.unsubscribe&&e.unsubscribe()}return n}const RH=(n,e,t=ct.neutral)=>{let i=0;return n===e?i=0:n===null?i=-1:e===null?i=1:t?i=n<e?-1:1:i=n<e?1:-1,t*i},OH=(n,e,t=ct.neutral,i,s)=>{if(!i||!i.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const r=n!=null&&n.hasOwnProperty(i.dataKey)?n[i.dataKey]:n,o=e!=null&&e.hasOwnProperty(i.dataKey)?e[i.dataKey]:e,a=(i==null?void 0:i.valueCouldBeUndefined)??(s==null?void 0:s.cellValueCouldBeUndefined)??!1;let l=0;return typeof n!="object"?l=-1/0:typeof e!="object"?l=1/0:r===null||a&&r===void 0?l=-1:o===null||a&&o===void 0?l=1:r===o?l=0:t?l=r<o?-1:1:l=r<o?1:-1,t*l};function P_(n){let e=0,t=0,i=0,s=0;const r=window.innerHeight||0,o=window.innerWidth||0,a=eA(),l=a.top,c=a.left,h=Gt(n);if(h){const d=h.top,u=h.left;t=d-l,i=u-c,e=r-(d-l+n.clientHeight),s=o-(u-c+n.clientWidth)}return{top:t,bottom:e,left:i,right:s}}function I(n,e,t){const i=document.createElement(n);return e&&Object.keys(e).forEach(s=>{s==="innerHTML"&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${n}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);const r=e[s];typeof r=="object"?Object.assign(i[s],r):i[s]=e[s]}),t!=null&&t.appendChild&&t.appendChild(i),i}function ht(n=""){return n.split(" ").filter(e=>e)}function J0(n){typeof n=="object"&&Object.keys(n).forEach(e=>{Array.isArray(n[e])&&J0(n[e]),n[e]instanceof HTMLElement&&(n[e]=null)})}function tt(n){for(;n!=null&&n.firstChild;)n.removeChild(n.firstChild);return n}function Xa(n,e="innerHTML"){return n instanceof DocumentFragment?[].map.call(n.childNodes,t=>t[e]).join("")||n.textContent||"":n instanceof HTMLElement?n[e]:String(n??"")}function xH(n,e){if(!n||!e)return;const t=n.getBoundingClientRect(),i=e.getBoundingClientRect();return{top:i.top-t.top,right:i.right-t.right,bottom:i.bottom-t.bottom,left:i.left-t.left}}function Gt(n){let e=0,t=0,i=0,s=0;if(!n||!n.getBoundingClientRect)return{top:e,bottom:i,left:t,right:s};const r=n.getBoundingClientRect(),o=document.documentElement;return(r==null?void 0:r.top)!==void 0&&r.left!==void 0&&(e=r.top+window.pageYOffset-o.clientTop,t=r.left+window.pageXOffset-o.clientLeft,s=r.right,i=r.bottom),{top:e,left:t,bottom:i,right:s}}function Mg(n,e){let t=0;if(n){const i=e==="height"?"clientHeight":"clientWidth",s=e==="height"?["top","bottom"]:["left","right"];t=n[i];for(const r of s){const o=parseFloat(PH(n,`padding-${r}`)||"")||0;t-=o}}return t}function PH(n,e){return n?window.getComputedStyle(n).getPropertyValue(e):null}function E5(n,e){if(n)for(const t of e){const i=n.getAttribute(t);if(i)return i}return null}function Sr(n,e="auto"){return(/^[0-9]+$/i.test(`${n}`)?`${+n}px`:n)||e}function kH(n){const e=typeof n=="string"?n:String(n),t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(e||"").toString().replace(/[&<>"']/g,i=>t[i])}function T5(n){return n.replace(/&#(\d+);/g,(e,t)=>String.fromCharCode(t))}function DH(n,e){const t=n.length;let i=kH(n);if(t<e)for(let s=t;s<e;s++)i+="&nbsp;";return i}function LH(n,e){var t;(t=n.parentNode)==null||t.insertBefore(e,n.nextSibling)}function eA(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}const vd=Object.prototype.hasOwnProperty,tA=Object.prototype.toString,Qw=Object.defineProperty,Zw=Object.getOwnPropertyDescriptor,Jw=function(e){return typeof Array.isArray=="function"?Array.isArray(e):tA.call(e)==="[object Array]"},eC=function(e){if(!e||tA.call(e)!=="[object Object]")return!1;const t=vd.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&vd.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;let s;for(s in e);return typeof s>"u"||vd.call(e,s)},tC=function(e,t){Qw&&t.name==="__proto__"?Qw(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},iC=function(e,t){if(t==="__proto__")if(vd.call(e,t)){if(Zw)return Zw(e,t).value}else return;return e[t]};function Qt(...n){let e,t,i,s,r,o,a=n[0],l=1;const c=n.length;let h=!1;for(typeof a=="boolean"&&(h=a,a=n[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=n[l],e!=null)for(t in e)i=iC(a,t),s=iC(e,t),a!==s&&(h&&s&&(eC(s)||(r=Jw(s)))?(r?(r=!1,o=i&&Jw(i)?i:[]):o=i&&eC(i)?i:{},tC(a,{name:t,newValue:Qt(h,o,s)})):typeof s<"u"&&tC(a,{name:t,newValue:s}));return a}function NH(n,e,t="id"){let i=-1;e&&typeof e=="object"&&t in e?i=n.findIndex(s=>s[t]===e[t]):i=n.findIndex(s=>s===e),i<0&&n.push(e)}function sC(n,e=" "){let t="";for(let i=0;i<n;i++)t+=e;return t}function iA(n,e){return n.filter((t,i)=>e!==i)}function A5(n){if(!Array.isArray(n)&&!Ia(n))return n;const e=Array.isArray(n)?[]:{};return Qt(!0,e,n)}function Qd(n,...e){if(!e.length)return n;const t=e.shift();return n=!Ia(n)&&Ia(t)?{}:n,Ia(n)&&Ia(t)&&Object.keys(t).forEach(i=>{t.hasOwnProperty(i)&&(i in n?typeof n[i]!="object"||typeof t[i]!="object"?n[i]=t[i]:n[i].concat&&t[i].concat?n[i]=n[i].concat(t[i]):n[i]=Qd(n[i],t[i]):n[i]=t[i])}),Qd(n,...e)}function I5(n){return Ia(n)&&Object.keys(n).forEach(e=>{n.hasOwnProperty(e)&&delete n[e]}),n=null,n={},n}function nC(n,e=!0){let t=!1;const i=r=>{const o=r.toString();if(t=o.includes("async "),o.replaceAll(" ","").includes("=>({")){const c=o.match(/(({.*}))/g)||[];return c.length>=1?`return ${c[0].trimStart()}`:o}const a=!o.includes("{")&&o.includes("=>"),l=o.substring(o.indexOf("{")+1||o.indexOf("=>")+2,o.includes("}")?o.lastIndexOf("}"):o.length);return e&&a&&!l.startsWith("return")?"return "+l.trimStart():l};return{params:(r=>{const o=/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,)]*))/gm,a=/([^\s,]+)/g,l=r.toString().replace(o,"");return l.slice(l.indexOf("(")+1,l.indexOf(")")).match(a)??[]})(n),body:i(n),isAsync:t}}function rC(n){return n==null?!0:Object.entries(n).length===0}function Le(n){return n!=null&&n!==""}function ia(n){return n!==null&&!isNaN(n)&&n!==""}function Ia(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)}function k_(n){return typeof n=="boolean"||typeof n=="number"||typeof n=="string"||n===null||n===void 0}function Nc(n){return n instanceof HTMLElement||n instanceof DocumentFragment||k_(n)}function gi(n,e=!1){return e?n==null||typeof n=="string"?!1:!isNaN(n):n==null||n===""?!1:!isNaN(+n)}function MH(n){return!n||n&&typeof n=="object"&&Object.keys(n).length===0}function Fg(n){return/(true|1)/i.test(n+"")}function pc(n,e=!1){const t=typeof n.normalize=="function"?n.normalize("NFD").replace(/[\u0300-\u036f]/g,""):n;return e?t.toLowerCase():t}function FH(n,e,t){if(typeof e=="string"&&(e=e.split(".")),e.length>1){const i=e.shift();n&&i!==void 0&&FH(n[i]=Le(n[i])&&(Array.isArray(n[i])||Object.prototype.toString.call(n[i])==="[object Object]")?n[i]:{},e,t)}else n&&e[0]&&(n[e[0]]=t)}function Zd(n,e=!1){return typeof n=="string"?e?n.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()):n.charAt(0).toUpperCase()+n.slice(1):n}function $H(n){return typeof n=="string"?n.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_/])/g,(e,t)=>/[\s+\-_/]/.test(e)?"":t===0?e.toLowerCase():e.toUpperCase()):n}function Jd(n){return typeof n=="string"?$H(n).replace(/([A-Z])|([-_])/g,"-$1").toLowerCase():n}function eu(n){if(typeof n=="string"){const e=n.replace(/([A-Z])|([-_])/g," $1").replace(/\s+/g," ").trim();return e.charAt(0).toUpperCase()+e.slice(1)}return n}function HH(n){return Array.isArray(n)&&n.length>0?n.filter((e,t)=>n.indexOf(e)>=t):n}const Tl=Symbol("plaintext"),oC=Symbol("html"),aC=Symbol("comment"),BH=/<(\w*)>/g,VH=/<\/?([^\s/>]+)/;function Js(n,e,t){function i(l,c,h){if(typeof l!="string"&&(gi(l)||typeof l=="boolean"))return String(l);if(l instanceof HTMLElement&&(l=l.innerHTML),typeof l!="string"&&l!==void 0&&l!==null)throw new TypeError("'html' parameter must be a string");return r(l||"",s("",""))}function s(l,c){return{allowable_tags:o(l),tag_replacement:c,state:Tl,tag_buffer:"",depth:0,in_quote_char:""}}function r(l,c){const h=c.allowable_tags,d=c.tag_replacement;let u=c.state,p=c.tag_buffer,f=c.depth,g=c.in_quote_char,m="";for(let _=0,b=l.length;_<b;_++){const C=l[_];if(u===Tl)switch(C){case"<":u=oC,p+=C;break;default:m+=C;break}else if(u===oC)switch(C){case"<":if(g)break;f++;break;case">":if(g)break;if(f){f--;break}g="",u=Tl,p+=">",h.has(a(p))?m+=p:m+=d,p="";break;case'"':case"'":C===g?g="":g=g||C,p+=C;break;case"-":p==="<!-"&&(u=aC),p+=C;break;case" ":case`
`:if(p==="<"){u=Tl,m+="< ",p="";break}p+=C;break;default:p+=C;break}else if(u===aC)switch(C){case">":p.slice(-2)==="--"&&(u=Tl),p="";break;default:p+=C;break}}return c.state=u,c.tag_buffer=p,c.depth=f,c.in_quote_char=g,m}function o(l){let c=new Set;{let h;for(;h=BH.exec(l);)c.add(h[1])}return c}function a(l){const c=VH.exec(l);return c?c[1].toLowerCase():null}return i(n)}const zH=(n,e,t=ct.neutral,i,s)=>{let r=0;const o=(i==null?void 0:i.valueCouldBeUndefined)??(s==null?void 0:s.cellValueCouldBeUndefined)??!1;return n===e?r=0:n===null||o&&n===void 0?r=-1:e===null||o&&e===void 0?r=1:(s!=null&&s.ignoreAccentOnStringFilterAndSort&&(n=pc(n,!1),e=pc(e,!1)),t?r=n<e?-1:1:r=n<e?1:-1),t*r},WH=(n,e,t=ct.neutral,i,s)=>{const r=(i==null?void 0:i.valueCouldBeUndefined)??(s==null?void 0:s.cellValueCouldBeUndefined)??!1,o=isNaN(n)||n===""||n===null||r&&n===void 0?-1/0:parseFloat(n),a=isNaN(e)||e===""||e===null||r&&e===void 0?-1/0:parseFloat(e);return t*(o===a?0:o>a?1:-1)};var sA=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function UH(n){const e=n.match(sA);if(e){const t=Number(e[2]);if(t<1||t>12)return!1;if(typeof e[3]!==void 0){const i=Number(e[3]);if(i<1||i>31)return!1}if(typeof e[4]!==void 0){const i=Number(e[4]);if(i<0||i>23)return!1}return!0}return!1}function GH(n){const e=n.match(sA);return e&&typeof e[4]>"u"?n+="T00:00:00":n}function or(n){if(n||(n=new Date),n instanceof Date){const e=new Date(n);return e.setMilliseconds(0),e}if(n=n.trim(),UH(n))return new Date(GH(n));throw new Error(`Non ISO 8601 compliant date (${n}).`)}function jH(n){const e=or(n);return e.setDate(1),e.setMonth(e.getMonth()+1),e.setDate(0),e}function KH(n){return jH(n).getDate()}var D_="1999-03-04T02:05:01.000Z",lf=new Map,L_=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],N_=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],M_=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],tu={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function nA(n){if(/^[+-]\d{2}:\d{2}/.test(n))return 6;if(/^[+-]\d{4}/.test(n))return 5;throw new Error("Invalid offset format")}var YH=["MMMM","MMM","dddd","ddd"],Ct=new Map([...L_,...N_,...M_].map(n=>[n[0],n])),lC=new Map,rA=["full","long","medium","short"],dr=n=>String(n).padStart(2,"0"),cf=n=>String(n).padStart(2,"0");function zn(n){return n.type==="literal"&&(n.value=n.value.normalize("NFKC")),n}function qH(n,e,t,i=!1,s=null){const r=XH(n,e,t,i),o=or(n);function a({partName:l,partValue:c,token:h}){if(l==="literal")return c;const d=r[l];if(l==="hour"&&h==="H")return d.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(h)&&d.length===1)return`0${d}`;if(l==="dayPeriod"){const u=Ra(o.getUTCHours()<12?"am":"pm",t);return h==="A"?u.toUpperCase():u.toLowerCase()}return l==="timeZoneName"?s??oA(-1*o.getTimezoneOffset(),h):d}return e.map(l=>({...l,value:a(l)}))}function XH(n,e,t,i=!1){const s=or(n),r=e.filter(h=>h.hour12),o=e.filter(h=>!h.hour12),a=[],l=[];function c(h,d=!1){const u=`${t}-u-hc-${d?"h12":"h23"}`;if(a.push(...new Intl.DateTimeFormat(u,h.reduce((p,f)=>f.partName==="literal"?p:(i&&YH.includes(f.token)&&l.push(f),Object.assign(p,f.option)),{timeZone:"UTC"})).formatToParts(s).map(zn)),i&&l.length)for(const p of l){let f=[];switch(p.token){case"MMMM":f=new Intl.DateTimeFormat(u,{dateStyle:"long",timeZone:"UTC"}).formatToParts(s).map(zn);break;case"MMM":f=new Intl.DateTimeFormat(u,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(s).map(zn);break}const g=f.find(_=>_.type===p.partName),m=a.findIndex(_=>_.type===p.partName);g&&m>-1&&(a[m]=g)}}return r.length&&c(r,!0),o.length&&c(o),a.reduce((h,d)=>(h[d.type]=d.value,h),{})}function oA(n,e="Z"){const t=String(Math.floor(Math.abs(n/60))).padStart(2,"0"),i=String(Math.abs(n%60)).padStart(2,"0"),s=n<0?"-":"+";return e==="ZZ"?`${s}${t}${i}`:`${s}${t}:${i}`}function QH(n,e){aA(n,e);const[t,i,s,r]=n.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),o=Number(s)*60+Number(r);return i==="+"?o:-o}function aA(n,e="Z"){if(!(i=>{switch(i){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(n);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(n)}})(e))throw new Error(`Invalid offset: ${n}`);return n}function ZH(n){return L_.concat(N_).concat(M_).sort((e,t)=>e[0].length>t[0].length?1:-1).reduce((e,t)=>e.replace(t[0],`\\${t[0]}`),n)}function JH(n){return["numeric","2-digit"].includes(n.partValue)}function eB(n){let e;for(const t of n){if(t.partName==="literal"&&!isNaN(parseFloat(t.partValue)))throw new Error(`Numbers in format (${t.partValue}).`);if(e&&e.partName!=="literal"&&t.partName!=="literal"&&!(e.token in tu)&&!(t.token in tu)&&!(JH(e)&&t.token.toLowerCase()==="a"))throw new Error(`Illegal adjacent tokens (${e.token}, ${t.token})`);e=t}return n}function tB(n){return typeof n=="string"?n.includes("ZZ")?"ZZ":"Z":"time"in n&&n.time==="full"?"Z":"ZZ"}function Ra(n,e){const t=lC.get(e);if(t&&t[n])return t[n];const i=new Date(D_);i.setUTCHours(n==="am"?5:20);const r=new Intl.DateTimeFormat(e,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(i).map(zn).find(o=>o.type==="dayPeriod");if(r){const o=t||{};return lC.set(e,Object.assign(o,{[n]:r.value})),r.value}return n}function lA(n,e="+00:00"){const t=or(n),i=(()=>{switch(nA(e)){case 5:return"ZZ";case 6:return"Z"}})(),s=QH(e,i);return new Date(t.getTime()+s*1e3*60)}function cA(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function cC(n,e){const t=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:e,hourCycle:"h23"}).formatToParts(n).map(zn),i={};return t.forEach(s=>{i[s.type]=s.value}),new Date(`${i.year}-${i.month}-${i.day}T${i.hour}:${i.minute}:${i.second}Z`)}function iu(n,e="UTC",t="device",i="Z"){var s;t=t==="device"?(s=cA())!=null?s:"utc":t;const r=or(n),o=cC(r,e),a=cC(r,t),l=Math.round((a.getTime()-o.getTime())/1e3/60);return oA(l,i)}function iB(n,e){const t=or(n);return lA(t,iu(t,e))}function hC(n){const e=or(n);return e.setHours(0,0,0),e}function F_(n,e){if(rA.includes(n)||typeof n=="object")return sB(n,e);let t=n,i=0;const s=h=>{if(h[2]||(h[2]=new RegExp(`(.)?(${h[0]})`,"g")),h[2].test(t)){let d=0;return t=t.replace(h[2],(u,p,f)=>p==="\\"?f:`${typeof p=="string"?p:""}{!${d++?i:i++}!}`),!!d}return!1};function r(h){const d=h.map(p=>p.partName),u=new Set(d);if(d.length>u.size)throw new Error("Cannot reuse format tokens.");return h}function o(h,[d,u,p]){const f=Object.keys(u)[0],g=u[f];return{option:u,partName:f,partValue:g,token:d,pattern:p,hour12:h}}const a=L_.filter(s).concat(N_.filter(s)).map(o.bind(null,!1)),l=r(a.concat(M_.filter(s).map(o.bind(null,!0)))),c=/^\{!(\d+)!\}$/;return t.split(/(\{!\d+!\})/).map(h=>{const d=h.match(c);return d?l[Number(d[1])]:{option:{literal:h},partName:"literal",partValue:h,token:h,pattern:new RegExp(""),hour12:!1}}).filter(h=>!(h.partName==="literal"&&h.partValue===""))}function sB(n,e){const t={timeZone:"UTC"};typeof n=="string"?t.dateStyle=n:("date"in n&&(t.dateStyle=n.date),"time"in n&&(t.timeStyle=n.time));const i=new Intl.DateTimeFormat(e,t),s=i.formatToParts(new Date(D_)).map(zn),o=i.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(zn).find(l=>l.type==="hour"),a=o&&o.value==="23"?24:12;return s.map(l=>{const c=l.type,h=nB(l.type,l.value,e,l.type==="hour"?a:void 0,t);if(h===void 0)return;const d=h[1][c];if(d)return h[2]||(h[2]=new RegExp(`${h[0]}`,"g")),{option:{[c]:d},partName:c,partValue:d,token:h[0],pattern:h[2],hour12:a===12}}).filter(l=>!!l)}function nB(n,e,t,i,s){const r=e.length,o=!isNaN(Number(e));let a;switch(n){case"year":return r===2?Ct.get("YY"):Ct.get("YYYY");case"month":if(o)return r===1?Ct.get("M"):Ct.get("MM");switch(a=dC(t,n,e),a){case"long":return Ct.get("MMMM");default:return Ct.get("MMM")}case"day":return r===1?Ct.get("D"):Ct.get("DD");case"weekday":switch(a=dC(t,n,e),a){case"narrow":return Ct.get("d");case"short":return Ct.get("ddd");default:return Ct.get("dddd")}case"hour":return i===12?r===1?Ct.get("h"):Ct.get("hh"):r===1?Ct.get("H"):Ct.get("HH");case"minute":return r===1?Ct.get("m"):Ct.get("mm");case"second":return r===1?Ct.get("s"):Ct.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(e)?Ct.get("A"):Ct.get("a");case"literal":return[e,{literal:e},new RegExp("")];case"timeZoneName":return s.timeStyle==="full"?Ct.get("Z"):Ct.get("ZZ");default:return}}function dC(n,e,t){if(!lf.has(n)){const s=new Date(D_),r=[3,8,9,7,6,4,3],o=["weekday","month","dayPeriod"],a=["long","short","narrow"],l={};for(let c=0;c<12;c++){s.setMonth(0+c),c in r&&s.setDate(r[c]),s.setUTCHours(8+c);for(const h of a){const d=new Intl.DateTimeFormat(n,o.reduce((u,p)=>Object.assign(u,{[p]:h}),{hour12:!0,timeZone:"UTC"})).formatToParts(s).map(zn);if(h==="long"||h==="short"){const p=new Intl.DateTimeFormat(n,{dateStyle:h==="short"?"medium":"long",timeZone:"UTC"}).formatToParts(s).map(zn).find(g=>g.type==="month"),f=d.findIndex(g=>g.type==="month");f>-1&&p&&(d[f]=p)}d.forEach(u=>{if(u.type==="literal")return;const p=u.type;l[p]=Object.assign(l[p]||{},{[u.value]:h})})}}lf.set(n,l)}const i=lf.get(n);return i?i[e][t]:void 0}function hA(n,e="+00:00"){const t=e.slice(0,1)==="+";return lA(n,e.replace(t?"+":"-",t?"-":"+"))}function rB(){return Intl.DateTimeFormat().resolvedOptions().locale}function Wi(n,e="long",t="device",i=!1,s){let r,o;return typeof n=="object"&&!(n instanceof Date)&&({date:n,format:e,locale:t,genitive:i,partFilter:s,tz:r}=n),e==="ISO8601"?or(n).toISOString():(r&&(o=iu(n,"utc",r,tB(e))),r??(r=cA()),(r==null?void 0:r.toLowerCase())!=="utc"&&(n=hA(n,iu(n,r,"utc"))),(!t||t==="device")&&(t=rB()),qH(n,F_(e,t).filter(s??(()=>!0)),t,i,o).map(a=>a.value).join(""))}function oB(n,e="en",t=!1,i=()=>!0){return F_(n,e).filter(i).reduce((s,r)=>s+=t&&r.partName==="literal"?ZH(r.token):r.token,"").normalize("NFKC")}function aB(n){const e=new Date().getFullYear(),t=e%100,i=Math.floor(e/100),s=Number(n);return(i+(s>t+20?-1:0))*100+s}function dA(n,e="en",t=!1){const i=(s,r)=>Array(s).fill("").map((o,a)=>`${r(a)}`);if(n==="M")return i(12,s=>s+1);if(n==="MM")return i(12,s=>{const r=s+1;return r<10?`0${r}`:r});if(n.startsWith("M"))return dA("MM").map(s=>Wi(`2000-${s}-05`,n,e,t));if(n.startsWith("d"))return i(7,s=>`0${s+2}`).map(s=>Wi(`2022-10-${s}`,n,e));if(n==="a")return[Ra("am",e).toLowerCase(),Ra("pm",e).toLowerCase()];if(n==="A")return[Ra("am",e).toUpperCase(),Ra("pm",e).toUpperCase()];if(n.startsWith("Y")){const s=new Date().getFullYear();return i(120,r=>r+1).reduce((r,o)=>(o!=="120"&&r.push(Wi(`${s+Number(o)}-06-06`,n,e)),r.unshift(Wi(`${s-Number(o)}-06-06`,n,e)),r),[Wi(`${s}-06-06`,n,e)])}return n.startsWith("D")?i(31,s=>`${n==="DD"&&s<9?"0":""}${s+1}`):n.startsWith("H")?i(24,s=>`${n==="HH"&&s<10?"0":""}${s}`):n.startsWith("h")?i(12,s=>`${n==="hh"&&s<9?"0":""}${s+1}`):n.startsWith("m")||n.startsWith("s")?i(60,s=>`${n.length>1&&s<10?"0":""}${s}`):[]}function $g(n,e="ISO8601",t="device"){let i=()=>!0,s,r="backward";if(typeof n=="object"?{date:s,format:e="ISO8601",locale:t="device",dateOverflow:r="backward",partFilter:i=()=>!0}=n:s=n,!s)throw new Error("parse() requires a date string.");const o=()=>{throw new Error(`Date (${s}) does not match format (${oB(e,t)})`)};if(e==="ISO8601")return or(s);const a=rA.includes(e)||typeof e=="object",l=eB(F_(e,t).filter(i));if(!l.length)throw new Error("parse() requires a pattern.");let c;try{c=lB(s,l)}catch{return o()}const h=new Date,d=new Map([["YYYY",h.getFullYear()],["MM",h.getMonth()+1],["DD",h.getDate()],["HH",0],["mm",0],["ss",0]]);let u=null,p="";c.forEach(P=>{if(P.partName==="literal")return;if(P.token===P.value)return o();const F=Number(P.value);if(d.has(P.token))d.set(P.token,F);else if(P.token==="YY")d.set("YYYY",aB(P.value));else{const H=P.token;if(H.startsWith("d"))return;if(H==="D")d.set("DD",F);else if(H==="H"||H.startsWith("h"))d.set("HH",F);else if(H==="M")d.set("MM",F);else if(H==="a"||H==="A")u=P.value.toLowerCase()===Ra("am",t).toLowerCase();else if(H==="Z"||H==="ZZ")p=aA(P.value,H);else{const J=dA(H,t,a).indexOf(P.value);if(J!==-1)switch(H){case"MMM":case"MMMM":d.set("MM",J+1);break}}}});let f=d.get("HH")||0;u===!1?(f+=f===12?0:12,d.set("HH",f===24?0:f)):u===!0&&f===12&&d.set("HH",0),d.set("MM",(d.get("MM")||1)-1);let[g,m,_,b,C,v]=Array.from(d.values());const y=KH(new Date(`${cf(g)}-${dr(m+1)}-10`));if(y<_&&r==="throw")throw new Error(`Invalid date ${cf(g)}-${dr(m+1)}-${dr(_)}`);_=r==="backward"?Math.min(_,y):_;const S=`${cf(g)}-${dr(m+1)}-${dr(_)}T${dr(b)}:${dr(C)}:${dr(v)}${p}`,A=new Date(S);return isFinite(+A)?A:o()}function lB(n,e){let t=0;const i=a=>[a[t++],a[t]];let s=0;const r=[];let o;do{const[a,l]=i(e);o=l;let c=1;if(a.partName==="literal")c=a.partValue.length;else if(a.partName==="timeZoneName")c=nA(n.substring(s));else if(a.token in tu)c=tu[a.token];else if(l)if(l.partName==="literal"){if(c=n.indexOf(l.partValue,s)-s,c<0)throw new Error}else if(l.partName==="dayPeriod"){for(let h=1;h<=4;h++)if(isNaN(Number(n.charAt(s+h)))){c=h;break}}else{const h=n.substring(s).search(/\d/);h!==-1&&(c=s+h)}else c=n.length;r.push({...a,value:n.substring(s,s+c)}),s+=c}while(o);return r}function ys(n,e){let t;const i=(e==null?void 0:e.withZeroPadding)??!1;switch(n){case N.dateTime:case N.dateTimeIso:t="YYYY-MM-DD HH:mm:ss";break;case N.dateTimeIsoAmPm:t="YYYY-MM-DD hh:mm:ss a";break;case N.dateTimeIsoAM_PM:t="YYYY-MM-DD hh:mm:ss A";break;case N.dateTimeShortIso:t="YYYY-MM-DD HH:mm";break;case N.dateEuro:t="DD/MM/YYYY";break;case N.dateEuroShort:t=i?"DD/MM/YY":"D/M/YY";break;case N.dateTimeEuro:t="DD/MM/YYYY HH:mm:ss";break;case N.dateTimeShortEuro:t=i?"DD/MM/YYYY HH:mm":"D/M/YYYY H:m";break;case N.dateTimeEuroAmPm:t="DD/MM/YYYY hh:mm:ss a";break;case N.dateTimeEuroAM_PM:t="DD/MM/YYYY hh:mm:ss A";break;case N.dateTimeEuroShort:t=i?"DD/MM/YY HH:mm:ss":"D/M/YY H:m:s";break;case N.dateTimeEuroShortAmPm:t=i?"DD/MM/YY hh:mm:ss a":"D/M/YY h:m:s a";break;case N.dateTimeEuroShortAM_PM:t=i?"DD/MM/YY hh:mm:ss A":"D/M/YY h:m:s A";break;case N.dateUs:t="MM/DD/YYYY";break;case N.dateUsShort:t=i?"MM/DD/YY":"M/D/YY";break;case N.dateTimeUs:t="MM/DD/YYYY HH:mm:ss";break;case N.dateTimeUsAmPm:t="MM/DD/YYYY hh:mm:ss a";break;case N.dateTimeUsAM_PM:t="MM/DD/YYYY hh:mm:ss A";break;case N.dateTimeUsShort:t=i?"MM/DD/YY HH:mm:ss":"M/D/YY H:m:s";break;case N.dateTimeUsShortAmPm:t=i?"MM/DD/YY hh:mm:ss a":"M/D/YY h:m:s a";break;case N.dateTimeUsShortAM_PM:t=i?"MM/DD/YY hh:mm:ss A":"M/D/YY h:m:s A";break;case N.dateTimeShortUs:t=i?"MM/DD/YYYY HH:mm":"M/D/YYYY H:m";break;case N.dateUtc:t="ISO8601";break;case N.date:case N.dateIso:default:t=e!=null&&e.withDefaultIso8601?"ISO8601":"YYYY-MM-DD";break}return t}function va(n,e,t){const i=e?ys(e):void 0,s=ys(t),r=n instanceof Date?n:ln(n,i);return r&&n!==void 0?t===N.dateUtc?r.toISOString():Wi(r,s,"en-US"):""}function ln(n,e,t=!1){try{return n?n instanceof Date?n:$g({date:n,format:e,dateOverflow:t?"throw":"backward",locale:"en-US"}):!1}catch{return!1}}function cB(n){return hA(n,iu(n,"utc"))}function R5(n){let e="";if(typeof n=="string"&&/^[0-9\-/]*$/.test(n)){const t=decodeURIComponent(n),i=iB(t,"utc");i&&(e=i.toISOString().replace(/(.*)([.\d]{4})(Z)/gi,"$1$3"))}return e}function uC(n,e,t,i,s){let r=0;if(n===e)r=0;else{let o=ln(n,i,s),a=ln(e,i,s);o||(o=new Date(1001,1,1)),a||(a=new Date(1001,1,1)),r=o.valueOf()-a.valueOf()}return t*r}function rt(n){const e=n===N.date?void 0:ys(n);return(t,i,s)=>e===void 0?uC(t,i,s,e,!1):uC(t,i,s,e,!0)}const Fh={boolean:RH,date:rt(N.date),dateIso:rt(N.dateIso),dateUtc:rt(N.dateUtc),dateTime:rt(N.dateTime),dateTimeIso:rt(N.dateTimeIso),dateTimeIsoAmPm:rt(N.dateTimeIsoAmPm),dateTimeIsoAM_PM:rt(N.dateTimeIsoAM_PM),dateTimeShortIso:rt(N.dateTimeShortIso),dateEuro:rt(N.dateEuro),dateEuroShort:rt(N.dateEuroShort),dateTimeShortEuro:rt(N.dateTimeShortEuro),dateTimeEuro:rt(N.dateTimeEuro),dateTimeEuroAmPm:rt(N.dateTimeEuroAmPm),dateTimeEuroAM_PM:rt(N.dateTimeEuroAM_PM),dateTimeEuroShort:rt(N.dateTimeEuroShort),dateTimeEuroShortAmPm:rt(N.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:rt(N.dateTimeEuroShortAM_PM),dateUs:rt(N.dateUs),dateUsShort:rt(N.dateUsShort),dateTimeShortUs:rt(N.dateTimeShortUs),dateTimeUs:rt(N.dateTimeUs),dateTimeUsAmPm:rt(N.dateTimeUsAmPm),dateTimeUsAM_PM:rt(N.dateTimeUsAM_PM),dateTimeUsShort:rt(N.dateTimeUsShort),dateTimeUsShortAmPm:rt(N.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:rt(N.dateTimeUsShortAM_PM),numeric:WH,objectString:OH,string:zH};function fc(n,e,t,i,s,r){let o=0;if(Lo(n))o=rt(n).call(this,e,t,i,s,r);else switch(n){case N.boolean:o=Fh.boolean(e,t,i,s,r);break;case N.float:case N.integer:case N.number:o=Fh.numeric(e,t,i,s,r);break;case N.object:o=Fh.objectString(e,t,i,s,r);break;case N.string:case N.text:case N.password:case N.readonly:default:o=Fh.string(e,t,i,s,r);break}return o}var ps;(function(n){n.camelCase="camelCase",n.camelCaseWithExtraOnPrefix="camelCaseWithExtraOnPrefix",n.kebabCase="kebabCase",n.lowerCase="lowerCase",n.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix"})(ps||(ps={}));class uA{get elementSource(){return this._elementSource}set elementSource(e){this._elementSource=e}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(e=>e.name)}constructor(e){this._subscribedEvents=[],this.eventNamingStyle=ps.camelCase,this._elementSource=e||document.createElement("div")}dispose(){var e;this.unsubscribeAll(),this._subscribedEvents=[],window.clearTimeout(this._timer),(e=this._elementSource)==null||e.remove(),this._elementSource=null}dispatchCustomEvent(e,t,i=!0,s=!0,r){var l;const o={bubbles:i,cancelable:s};t&&(o.detail=t);const a=new CustomEvent(e,o);return typeof r=="function"&&r(a),(l=this._elementSource)==null?void 0:l.dispatchEvent(a)}getEventNameByNamingConvention(e,t){let i="";switch(this.eventNamingStyle===ps.lowerCaseWithoutOnPrefix?i=`${t}${e.replace(/^on/,"")}`:this.eventNamingStyle===ps.camelCaseWithExtraOnPrefix&&(i=`${t}${e.replace(/^on/,"onOn")}`),this.eventNamingStyle){case ps.camelCase:i=t!==""?`${t}${Zd(e)}`:e;break;case ps.kebabCase:i=t!==""?`${t}-${Jd(e)}`:Jd(e);break;case ps.lowerCase:i=`${t}${e}`.toLowerCase();break}return i}publish(e,t,i,s){const r=this.getEventNameByNamingConvention(e,"");return i?new Promise(o=>{window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>o(this.dispatchCustomEvent(r,t,!1,!0,s)),i)}):this.dispatchCustomEvent(r,t,!1,!0,s)}subscribe(e,t){e=Array.isArray(e)?e:[e];const i=[];return e.forEach(s=>{const r=this.getEventNameByNamingConvention(s,"");this._elementSource.addEventListener(r,o=>t.call(null,o.detail)),this._subscribedEvents.push({name:r,listener:t}),i.push(()=>this.unsubscribe(r,t))}),{unsubscribe:()=>i.forEach(s=>s())}}subscribeEvent(e,t){const i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,t),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}unsubscribe(e,t,i=!0){const s=this.getEventNameByNamingConvention(e,"");this._elementSource.removeEventListener(s,t),i&&this.removeSubscribedEventWhenFound(e,t)}unsubscribeAll(e){if(Array.isArray(e)){let t;do t=e.pop(),t!=null&&t.dispose?t.dispose():t!=null&&t.unsubscribe&&t.unsubscribe();while(t)}else{let t=this._subscribedEvents.pop();for(;t;)this.unsubscribe(t.name,t.listener,!1),t=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(e,t){const i=this._subscribedEvents.findIndex(s=>s.name===e&&s.listener===t);i>=0&&this._subscribedEvents.splice(i,1)}}function pC(n){var e=document,t=n.container||e.createElement("div"),i=n.preventSubmit||0;t.id=t.id||"autocomplete-"+b();var s=t.style,r=n.debounceWaitMs||0,o=n.disableAutoSelect||!1,a=t.parentElement,l=[],c="",h=2,d=n.showOnFocus,u,p=0,f,g=!1,m=!1;if(n.minLength!==void 0&&(h=n.minLength),!n.input)throw new Error("input undefined");var _=n.input;t.className=[t.className,"autocomplete",n.className||""].join(" ").trim(),t.setAttribute("role","listbox"),_.setAttribute("role","combobox"),_.setAttribute("aria-expanded","false"),_.setAttribute("aria-autocomplete","list"),_.setAttribute("aria-controls",t.id),_.setAttribute("aria-owns",t.id),_.setAttribute("aria-activedescendant",""),_.setAttribute("aria-haspopup","listbox"),s.position="absolute";function b(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function C(){var T=t.parentNode;T&&T.removeChild(t)}function v(){f&&window.clearTimeout(f)}function y(){t.parentNode||(a||e.body).appendChild(t)}function S(){return!!t.parentNode}function A(){p++,l=[],c="",u=void 0,_.setAttribute("aria-activedescendant",""),_.setAttribute("aria-expanded","false"),C()}function P(){if(!S())return;_.setAttribute("aria-expanded","true"),s.height="auto",s.width=_.offsetWidth+"px";var T=0,B;function U(){var Q=e.documentElement,le=Q.clientTop||e.body.clientTop||0,q=Q.clientLeft||e.body.clientLeft||0,Ie=window.pageYOffset||Q.scrollTop,fe=window.pageXOffset||Q.scrollLeft;B=_.getBoundingClientRect();var ke=B.top+_.offsetHeight+Ie-le,Ue=B.left+fe-q;s.top=ke+"px",s.left=Ue+"px",T=window.innerHeight-(B.top+_.offsetHeight),T<0&&(T=0),s.top=ke+"px",s.bottom="",s.left=Ue+"px",s.maxHeight=T+"px"}U(),U(),n.customize&&B&&n.customize(_,B,t,T)}function F(){t.textContent="",_.setAttribute("aria-activedescendant","");var T=function(q,Ie,fe){var ke=e.createElement("div");return ke.textContent=q.label||"",ke};n.render&&(T=n.render);var B=function(q,Ie){var fe=e.createElement("div");return fe.textContent=q,fe};n.renderGroup&&(B=n.renderGroup);var U=e.createDocumentFragment(),Q=b();if(l.forEach(function(q,Ie){if(q.group&&q.group!==Q){Q=q.group;var fe=B(q.group,c);fe&&(fe.className+=" group",U.appendChild(fe))}var ke=T(q,c,Ie);ke&&(ke.id=t.id+"_"+Ie,ke.setAttribute("role","option"),ke.addEventListener("click",function(Ue){m=!0;try{n.onSelect(q,_)}finally{m=!1}A(),Ue.preventDefault(),Ue.stopPropagation()}),q===u&&(ke.className+=" selected",ke.setAttribute("aria-selected","true"),_.setAttribute("aria-activedescendant",ke.id)),U.appendChild(ke))}),t.appendChild(U),l.length<1)if(n.emptyMsg){var le=e.createElement("div");le.id=t.id+"_"+b(),le.className="empty",le.textContent=n.emptyMsg,t.appendChild(le),_.setAttribute("aria-activedescendant",le.id)}else{A();return}y(),P(),ae()}function H(){S()&&F()}function W(){H()}function J(T){T.target!==t?H():T.preventDefault()}function Y(){m||O(0)}function ae(){var T=t.getElementsByClassName("selected");if(T.length>0){var B=T[0],U=B.previousElementSibling;if(U&&U.className.indexOf("group")!==-1&&!U.previousElementSibling&&(B=U),B.offsetTop<t.scrollTop)t.scrollTop=B.offsetTop;else{var Q=B.offsetTop+B.offsetHeight,le=t.scrollTop+t.offsetHeight;Q>le&&(t.scrollTop+=Q-le)}}}function ue(){var T=l.indexOf(u);u=T===-1?void 0:l[(T+l.length-1)%l.length],V(T)}function te(){var T=l.indexOf(u);u=l.length<1?void 0:T===-1?l[0]:l[(T+1)%l.length],V(T)}function V(T){l.length>0&&(Z(T),re(l.indexOf(u)),ae())}function re(T){var B=e.getElementById(t.id+"_"+T);B&&(B.classList.add("selected"),B.setAttribute("aria-selected","true"),_.setAttribute("aria-activedescendant",B.id))}function Z(T){var B=e.getElementById(t.id+"_"+T);B&&(B.classList.remove("selected"),B.removeAttribute("aria-selected"),_.removeAttribute("aria-activedescendant"))}function _e(T,B){var U=S();if(B==="Escape")A();else{if(!U||l.length<1)return;B==="ArrowUp"?ue():te()}T.preventDefault(),U&&T.stopPropagation()}function ge(T){if(u){i===2&&T.preventDefault(),m=!0;try{n.onSelect(u,_)}finally{m=!1}A()}i===1&&T.preventDefault()}function x(T){var B=T.key;switch(B){case"ArrowUp":case"ArrowDown":case"Escape":_e(T,B);break;case"Enter":ge(T);break}}function M(){d&&O(1)}function O(T){_.value.length>=h||T===1?(v(),f=window.setTimeout(function(){return D(_.value,T,_.selectionStart||0)},T===0||T===2?r:0)):A()}function D(T,B,U){if(!g){var Q=++p;n.fetch(T,function(le){p===Q&&le&&(l=le,c=T,u=l.length<1||o?void 0:l[0],F())},B,U)}}function Ye(T){if(n.keyup){n.keyup({event:T,fetch:function(){return O(0)}});return}!S()&&T.key==="ArrowDown"&&O(0)}function L(T){n.click&&n.click({event:T,fetch:function(){return O(2)}})}function z(){setTimeout(function(){e.activeElement!==_&&A()},200)}function E(){D(_.value,3,_.selectionStart||0)}t.addEventListener("mousedown",function(T){T.stopPropagation(),T.preventDefault()}),t.addEventListener("focus",function(){return _.focus()}),C();function w(){_.removeEventListener("focus",M),_.removeEventListener("keyup",Ye),_.removeEventListener("click",L),_.removeEventListener("keydown",x),_.removeEventListener("input",Y),_.removeEventListener("blur",z),window.removeEventListener("resize",W),e.removeEventListener("scroll",J,!0),_.removeAttribute("role"),_.removeAttribute("aria-expanded"),_.removeAttribute("aria-autocomplete"),_.removeAttribute("aria-controls"),_.removeAttribute("aria-activedescendant"),_.removeAttribute("aria-owns"),_.removeAttribute("aria-haspopup"),v(),A(),g=!0}return _.addEventListener("keyup",Ye),_.addEventListener("click",L),_.addEventListener("keydown",x),_.addEventListener("input",Y),_.addEventListener("blur",z),_.addEventListener("focus",M),window.addEventListener("resize",W),e.addEventListener("scroll",J,!0),{destroy:w,fetch:E}}class hB{constructor(e){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=e,this._property=e.property||"",this._elementBindings=[],e.property&&e.variable&&(e.variable.hasOwnProperty(e.property)||e.property in e.variable)?this._value=e.variable[e.property]:this._value=e.variable,typeof e.variable=="object"&&Object.defineProperty(e.variable,e.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(e){if(this._value=e,Array.isArray(this._elementBindings))for(const t of this._elementBindings)t!=null&&t.element&&(t!=null&&t.attribute)&&(t.element[t.attribute]=e)}bind(e,t,i,s){return e&&e.forEach?e.forEach(r=>this.bindSingleElement(r,t,i,s)):e&&this.bindSingleElement(e,t,i,s),this}unbind(e,t,i,s,r){if(e){e.removeEventListener(t,i,s);const o=this._boundedEventWithListeners.findIndex(a=>a.uid===r);o>=0&&this._boundedEventWithListeners.splice(o,1)}}unbindAll(){let e=this._boundedEventWithListeners.pop();for(;e;){const{element:t,eventName:i,listener:s,uid:r}=e;this.unbind(t,i,s,void 0,r),e=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(e,t,i,s){const r={element:e,attribute:t};if(e){if(i){const o=()=>{let a=e[t];if(this.hasData(a)&&(e==null?void 0:e.type)==="number"&&(a=+a),this.valueSetter(a),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),typeof s=="function")return s(this.valueGetter())};r.event=i,r.listener=o,e.addEventListener(i,o),this._boundedEventWithListeners.push({element:e,eventName:i,listener:o,uid:this.generateUuidV4()})}this._elementBindings.push(r),e[t]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}hasData(e){return e!=null&&e!==""}}class pA{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(e){this._querySelectorPrefix=e}get observers(){return this._observers}dispose(){let e=this._observers.pop();for(;e;)e.dispose(),e=this._observers.pop();this._observers=[]}addElementBinding(e,t,i,s,r,o){const a=document.querySelectorAll(`${this.querySelectorPrefix}${i}`);let l=this._observers.find(c=>c.property===e);l||(l=new hB({variable:e,property:t})),Array.isArray(r)?r.forEach(c=>l==null?void 0:l.bind(a,s,c,o)):l==null||l.bind(a,s,r,o),this._observers.push(l)}bindEventHandler(e,t,i,s){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(o=>{o!=null&&o.addEventListener&&o.addEventListener(t,i,s)})}setElementAttributeValue(e,t,i){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach(r=>{r.textContent="",r&&t in r&&(r[t]=i)})}}class as{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(e,t,i,s,r=""){const o=Array.isArray(t)?t:[t];if(!(e instanceof HTMLElement||e instanceof DocumentFragment)&&(e!=null&&e.forEach))e.forEach(a=>{for(const l of o)a.addEventListener(l,i,s),this._boundedEvents.push({element:a,eventName:l,listener:i,groupName:r})});else if(e)for(const a of o)e.addEventListener(a,i,s),this._boundedEvents.push({element:e,eventName:a,listener:i,groupName:r})}unbind(e,t,i){const s=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:[t];for(const o of r)for(const a of s)typeof(a==null?void 0:a.removeEventListener)=="function"&&a.removeEventListener(o,i)}unbindByEventName(e,t){const i=this._boundedEvents.find(s=>s.element===e&&s.eventName===t);i&&this.unbind(i.element,i.eventName,i.listener)}unbindAll(e){if(e){const t=Array.isArray(e)?e:[e];for(let i=this._boundedEvents.length-1;i>=0;--i){const s=this._boundedEvents[i];if(t.some(r=>r===s.groupName)){const{element:r,eventName:o,listener:a}=s;this.unbind(r,o,a),this._boundedEvents.splice(i,1)}}}else for(;this._boundedEvents.length>0;){const t=this._boundedEvents.pop(),{element:i,eventName:s,listener:r}=t;this.unbind(i,s,r)}}}var fC=Object.prototype.hasOwnProperty;function _n(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&_n(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(fC.call(n,t)&&++i&&!fC.call(e,t)||!(t in e)||!_n(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function dB(n,e){const t=e.fetch;t&&(e.fetch=(i,s,r,o)=>{n.classList.add("slick-autocomplete-loading");const a=s;t(i,c=>{a(c),n.classList.remove("slick-autocomplete-loading")},r,o)})}function uB(n){const e=new Date;n.settings.selected={dates:[],month:e.getMonth(),year:e.getFullYear()};const t=n.HTMLInputElement;t&&(t.value=""),n.update({dates:!0,month:!0,year:!0,time:!0})}function gC(n,e,t,i){var c,h;const{oldVal:s,newVal:r,columnDef:o,selectedSettings:a,updatePickerUI:l}=i;if(s!==r){const d=n.type||o.type,u=o.outputType||n.type||o.type||N.dateUtc,p=Array.isArray(r)?r:[r||""],f=[],g=ys(N.dateIso),m=d?ys(d):void 0;for(const b of p){const C=b instanceof Date?b:ln(b,m);C&&f.push(C)}const _=a??{dates:[f.map(b=>Wi(b,g)).join(":")],month:(c=f[0])==null?void 0:c.getMonth(),year:(h=f[0])==null?void 0:h.getFullYear(),time:m==="ISO8601"||(m||"").toLowerCase().includes("h")?Wi(f[0],"HH:mm"):void 0};_n(t.settings.selected,_)||(t.settings.selected=_,l&&(t!=null&&t.update)&&t.update({dates:!0,month:!0,year:!0,time:!0})),e.value=p.length?f.map(b=>va(b,void 0,u)).join(" — "):""}}function $_(n,e){const t=I("select",{className:"form-control"});for(const i of n){const s=document.createElement("option");s.value=i.operator,e.applyHtmlCode(s,`${DH(i.operatorAlt||i.operator,3)}${i.descAlt||i.desc}`),t.appendChild(s)}return t}function pB(n,e,t){const i=(e==null?void 0:e.filter)??{},s=(i==null?void 0:i.collectionOptions)??{};if(s&&s.collectionInsideObjectProperty){const r=s.collectionInsideObjectProperty;n=Dr(n,r)}if(!Array.isArray(n))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');i.collection=n,t(n)}async function fA(n,e,t,i,s){const r=(e==null?void 0:e.filter)??{},o=(r==null?void 0:r.collectionOptions)??{};let a=null;if(n){const l=(i==null?void 0:i.isObservable(n))??!1;l&&i&&(a=await EH(i,n));const c=await n;if(Array.isArray(c)?a=c:(c==null?void 0:c.status)>=200&&c.status<300&&typeof c.json=="function"?a=await c.json():c&&c.content&&(a=c.content),!Array.isArray(a)&&(o!=null&&o.collectionInsideObjectProperty)){const h=a||c,d=o.collectionInsideObjectProperty;a=Dr(h,d||"")}if(!Array.isArray(a))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');r.collection=a,t(a),l&&fB(e,t,i,s)}return a}function fB(n,e,t,i){const s=(n==null?void 0:n.filter)??{},r=t==null?void 0:t.createSubject();s.collectionAsync=r,i&&r&&i.push(r.subscribe(o=>pB(o,n,e)))}function fs(n,e,t,i,s){if(i!=null&&i.enableTranslate&&(s!=null&&s.translate)){const o=Ko(i);return s.translate(`${o}${n}`)}const r=i.locales||se.locales;return(r==null?void 0:r[e])??t}function gB(n,e){return[{operator:"",desc:fs("CONTAINS","TEXT_CONTAINS","Contains",n,e)},{operator:"<>",desc:fs("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",n,e)},{operator:"=",desc:fs("EQUALS","TEXT_EQUALS","Equals",n,e)},{operator:"!=",desc:fs("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",n,e)},{operator:"a*",desc:fs("STARTS_WITH","TEXT_STARTS_WITH","Starts with",n,e)},{operator:"*z",desc:fs("ENDS_WITH","TEXT_ENDS_WITH","Ends with",n,e)}]}function H_(n,e){return[{operator:"",desc:""},{operator:"=",desc:fs("EQUAL_TO","TEXT_EQUAL_TO","Equal to",n,e)},{operator:"<",desc:fs("LESS_THAN","TEXT_LESS_THAN","Less than",n,e)},{operator:"<=",desc:fs("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",n,e)},{operator:">",desc:fs("GREATER_THAN","TEXT_GREATER_THAN","Greater than",n,e)},{operator:">=",desc:fs("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",n,e)},{operator:"<>",desc:fs("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",n,e)}]}function B_(n,e,t){if(n.compoundOperatorAltTexts){for(const i of e)if(n.compoundOperatorAltTexts.hasOwnProperty(t)){const s=n.compoundOperatorAltTexts[t][i.operator];i.operatorAlt=(s==null?void 0:s.operatorAlt)||"",i.descAlt=(s==null?void 0:s.descAlt)||""}}}class Ot{get defaultPrevented(){return this._isDefaultPrevented}constructor(e,t){this.event=e,this.args=t,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.returnValue=void 0,this.nativeEvent=e,this._arguments=t,e&&["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","target","type","which","x","y"].forEach(i=>this[i]=e[i]),this._eventTarget=this.nativeEvent?this.nativeEvent.target:void 0}stopPropagation(){var e;this._isPropagationStopped=!0,(e=this.nativeEvent)==null||e.stopPropagation()}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0,this.nativeEvent&&this.nativeEvent.stopImmediatePropagation()}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}getNativeEvent(){return this.nativeEvent}preventDefault(){this.nativeEvent&&this.nativeEvent.preventDefault(),this._isDefaultPrevented=!0}isDefaultPrevented(){return this.nativeEvent?this.nativeEvent.defaultPrevented:this._isDefaultPrevented}addReturnValue(e){this.returnValue===void 0&&e!==void 0&&(this.returnValue=e)}getReturnValue(){return this.returnValue}getArguments(){return this._arguments}resetReturnValue(){this.returnValue=void 0}}class K{get subscriberCount(){return this._handlers.length}constructor(e,t){this.eventName=e,this.pubSub=t,this._handlers=[],this._pubSubService=t}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(let t=this._handlers.length-1;t>=0;t--)this._handlers[t]===e&&this._handlers.splice(t,1)}notify(e,t,i,s=!1){var o;const r=t instanceof Ot?t:new Ot(t,e);s&&r.resetReturnValue(),i=i||this;for(let a=0;a<this._handlers.length&&!(r.isPropagationStopped()||r.isImmediatePropagationStopped());a++){const l=this._handlers[a].call(i,r,e);r.addReturnValue(l)}if(typeof((o=this._pubSubService)==null?void 0:o.publish)=="function"&&this.eventName){const a=this._pubSubService.publish(this.eventName,{args:e,eventData:r},void 0,l=>r.nativeEvent??(r.nativeEvent=l));r.addReturnValue(a)}return r}setPubSubService(e){this._pubSubService=e}}class gt{constructor(){this.handlers=[]}get subscriberCount(){return this.handlers.length}subscribe(e,t){return this.handlers.push({event:e,handler:t}),e.subscribe(t),this}unsubscribe(e,t){let i=this.handlers.length;for(;i--;)if(this.handlers[i].event===e&&this.handlers[i].handler===t){this.handlers.splice(i,1),e.unsubscribe(t);return}return this}unsubscribeAll(){let e=this.handlers.length;for(;e--;)this.handlers[e].event.unsubscribe(this.handlers[e].handler);return this.handlers=[],this}}class es{constructor(e,t,i,s){i===void 0&&s===void 0&&(i=e,s=t),this.fromRow=Math.min(e,i),this.fromCell=Math.min(t,s),this.toRow=Math.max(e,i),this.toCell=Math.max(t,s)}isSingleCell(){return this.fromRow===this.toRow&&this.fromCell===this.toCell}isSingleRow(){return this.fromRow===this.toRow}contains(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell}toString(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}class gA{constructor(){this.__nonDataRow=!0}}class su extends gA{constructor(){super(),this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=""}equals(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title}}class mB extends gA{constructor(){super(),this.__groupTotals=!0,this.group=null,this.initialized=!1}}class _B{constructor(){this.activeEditController=null}isActive(e){return e?this.activeEditController===e:this.activeEditController!==null}activate(e){if(e!==this.activeEditController){if(this.activeEditController!==null)throw new Error("SlickEditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .cancelCurrentEdit()");this.activeEditController=e}}deactivate(e){if(this.activeEditController){if(this.activeEditController!==e)throw new Error("SlickEditorLock.deactivate: specified editController is not the currently active one");this.activeEditController=null}}commitCurrentEdit(){return this.activeEditController?this.activeEditController.commitCurrentEdit():!0}cancelCurrentEdit(){return this.activeEditController?this.activeEditController.cancelCurrentEdit():!0}}class k{static height(e,t){if(e){if(t===void 0)return e.getBoundingClientRect().height;k.setStyleSize(e,"height",t)}}static width(e,t){if(!(!e||!e.getBoundingClientRect)){if(t===void 0)return e.getBoundingClientRect().width;k.setStyleSize(e,"width",t)}}static setStyleSize(e,t,i){typeof i=="function"&&(i=i()),e.style[t]=typeof i=="string"?i:`${i}px`}static isHidden(e){return e.offsetWidth===0&&e.offsetHeight===0}static parents(e,t){const i=[],s=t===":visible",r=t===":hidden";for(;(e=e.parentNode)&&e!==document&&!(!e||!e.parentNode);)r?k.isHidden(e)&&i.push(e):s?k.isHidden(e)||i.push(e):(!t||e.matches(t))&&i.push(e);return i}static toFloat(e){const t=parseFloat(e);return isNaN(t)?0:t}static show(e,t=""){Array.isArray(e)?e.forEach(i=>i.style.display=t):e.style.display=t}static hide(e){Array.isArray(e)?e.forEach(t=>t.style.display="none"):e.style.display="none"}static applyDefaults(e,t){typeof t=="object"&&Object.keys(t).forEach(i=>{t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])})}static addSlickEventPubSubWhenDefined(e,t){if(e)for(const i in t)t[i]instanceof K&&typeof t[i].setPubSubService=="function"&&t[i].setPubSubService(e)}}k.storage={_storage:new WeakMap,put:function(n,e,t){this._storage.has(n)||this._storage.set(n,new Map),this._storage.get(n).set(e,t)},get:function(n,e){const t=this._storage.get(n);return t?t.get(e):null},remove:function(n,e){const t=this._storage.get(n).delete(e);return this._storage.get(n).size!==0&&this._storage.delete(n),t}};const nu=new _B,vB="slick-edit-preclick";class mA{constructor(e){this.pluginName="GroupItemMetadataProvider",this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new gt,this._options=Qt(!0,{},this._defaults,e)}get eventHandler(){return this._eventHandler}get dataView(){var e;return((e=this._grid)==null?void 0:e.getData())??{}}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())||{}}init(e,t){this._grid=e,this._options={...this._defaults,...t},this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}destroy(){this.dispose()}dispose(){var e;(e=this._eventHandler)==null||e.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options={...this._options,...e}}getGroupRowMetadata(e,t){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${(e==null?void 0:e.level)||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter||void 0,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editorClass:null}}}}getTotalsRowMetadata(e,t){var i;return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${((i=e==null?void 0:e.group)==null?void 0:i.level)||0}`,formatter:this._options.totalsFormatter,editorClass:null}}defaultGroupCellFormatter(e,t,i,s,r){var u,p;if(!this._options.enableExpandCollapse)return r.title;const o=r.level||0,a=((u=this._options)==null?void 0:u.indentation)??15,l=`${o*a}px`,c=r.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass,h=(p=this.gridOptions)!=null&&p.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;h.appendChild(I("span",{className:`${this._options.toggleCssClass} ${c}`,ariaExpanded:String(!r.collapsed),style:{marginLeft:l}}));const d=I("span",{className:this._options.groupTitleCssClass||""});return d.setAttribute("level",o),r.title instanceof HTMLElement||r.title instanceof DocumentFragment?d.appendChild(r.title):this._grid.applyHtmlCode(d,r.title??""),h.appendChild(d),h}defaultTotalsCellFormatter(e,t,i,s,r,o){var a;return((a=s==null?void 0:s.groupTotalsFormatter)==null?void 0:a.call(s,r,s,o))??""}handleGridClick(e,t){var r;const i=e.target,s=(r=this._grid)==null?void 0:r.getDataItem(t.row);s instanceof su&&i.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(s),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){var t;if(this._options.enableExpandCollapse&&e.key===" "){const i=(t=this._grid)==null?void 0:t.getActiveCell();if(i){const s=this._grid.getDataItem(i.row);s instanceof su&&(this.handleDataViewExpandOrCollapse(s),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){var i;const t=(i=this._grid)==null?void 0:i.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:t.top,ignoreDiffsAfter:t.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}}class bB{constructor(e,t){this.externalPubSub=t,this.defaults={globalItemMetadataProvider:null,groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1},this.idProperty="id",this.items=[],this.rows=[],this.idxById=new Map,this.rowsById=void 0,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.suspend=!1,this.isBulkSuspend=!1,this.bulkDeleteIds=new Map,this.sortAsc=!0,this.refreshHints={},this.prevRefreshHints={},this.filteredItems=[],this.filterCache=[],this.groupingInfoDefaults={getter:void 0,formatter:void 0,comparer:(i,s)=>i.value===s.value?0:i.value>s.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},this.groupingInfos=[],this.groups=[],this.toggledGroupsByLevel=[],this.groupingDelimiter=":|:",this.selectedRowIds=[],this.pagesize=0,this.pagenum=0,this.totalRows=0,this.onBeforePagingInfoChanged=new K("onBeforePagingInfoChanged",t),this.onGroupExpanded=new K("onGroupExpanded",t),this.onGroupCollapsed=new K("onGroupCollapsed",t),this.onPagingInfoChanged=new K("onPagingInfoChanged",t),this.onRowCountChanged=new K("onRowCountChanged",t),this.onRowsChanged=new K("onRowsChanged",t),this.onRowsOrCountChanged=new K("onRowsOrCountChanged",t),this.onSelectedRowIdsChanged=new K("onSelectedRowIdsChanged",t),this.onSetItemsCalled=new K("onSetItemsCalled",t),this._options=Qt(!0,{},this.defaults,e)}beginUpdate(e){this.suspend=!0,this.isBulkSuspend=e===!0}endUpdate(){const e=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,e&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){var e,t,i;this.items=[],this.idProperty="id",this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&((e=this._grid.onSelectedRowsChanged)==null||e.unsubscribe(),(t=this._grid.onCellCssStylesChanged)==null||t.unsubscribe()),(i=this.onRowsOrCountChanged)==null||i.unsubscribe()}setRefreshHints(e){this.refreshHints=e}getFilterArgs(){return this.filterArgs}setFilterArgs(e){this.filterArgs=e}processBulkDelete(){if(!this.idxById)return;let e,t,i=0;for(let s=0,r=this.items.length;s<r;s++){if(t=this.items[s],e=t[this.idProperty],e===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(e)?this.idxById.delete(e):(this.items[i]=t,this.idxById.set(e,i),++i)}this.items.length=i,this.bulkDeleteIds=new Map}updateIdxById(e){if(this.isBulkSuspend||!this.idxById)return;e=e||0;let t;for(let i=e,s=this.items.length;i<s;i++){if(t=this.items[i][this.idProperty],t===void 0)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(t,i)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let e;for(let t=0,i=this.items.length;t<i;t++)if(e=this.items[t][this.idProperty],e===void 0||this.idxById.get(e)!==t)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(e,t){t!==void 0&&(this.idProperty=t),this.items=this.filteredItems=e,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(e){this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()!==!1&&(Le(e.pageSize)&&(this.pagesize=e.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),Le(e.pageNum)&&(this.pagenum=Math.min(e.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){const e=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:e,dataView:this}}sort(e,t){this.sortAsc=t,this.sortComparer=e,t===!1&&this.items.reverse(),this.items.sort(e),t===!1&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer&&this.sort(this.sortComparer,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(e){this.filterCSPSafe=e,this.filter=e,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(e){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new mA),this.groups=[],this.toggledGroupsByLevel=[],e=e||[],this.groupingInfos=e instanceof Array?e:[e];for(let t=0;t<this.groupingInfos.length;t++){const i=this.groupingInfos[t]=Qt(!0,{},this.groupingInfoDefaults,this.groupingInfos[t]);i.getterIsAFn=typeof i.getter=="function",i.compiledAccumulators=[];let s=i.aggregators.length;for(;s--;)i.compiledAccumulators[s]=this.compileAccumulatorLoopCSPSafe(i.aggregators[s]);this.toggledGroupsByLevel[t]={}}this.refresh()}getItemByIdx(e){return this.items[e]}getIdxById(e){var t;return(t=this.idxById)==null?void 0:t.get(e)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let e=0,t=this.rows.length;e<t;e++)this.rowsById[this.rows[e][this.idProperty]]=e}}getRowByItem(e){var t;return this.ensureRowsByIdCache(),(t=this.rowsById)==null?void 0:t[e[this.idProperty]]}getRowById(e){var t;return this.ensureRowsByIdCache(),(t=this.rowsById)==null?void 0:t[e]}getItemById(e){return this.items[this.idxById.get(e)]}mapItemsToRows(e){var i;const t=[];this.ensureRowsByIdCache();for(let s=0,r=e.length;s<r;s++){const o=(i=this.rowsById)==null?void 0:i[e[s][this.idProperty]];Le(o)&&(t[t.length]=o)}return t}mapIdsToRows(e){var i;const t=[];this.ensureRowsByIdCache();for(let s=0,r=e.length;s<r;s++){const o=(i=this.rowsById)==null?void 0:i[e[s]];Le(o)&&(t[t.length]=o)}return t}mapRowsToIds(e){const t=[];for(let i=0,s=e.length;i<s;i++)if(e[i]<this.rows.length){const r=this.rows[e[i]];t[t.length]=r[this.idProperty]}return t}updateSingleItem(e,t){var i;if(this.idxById){if(!this.idxById.has(e))throw new Error("[SlickGrid DataView] Invalid id");if(e!==t[this.idProperty]){const s=t[this.idProperty];if(!Le(s))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(s))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(s,this.idxById.get(e)),this.idxById.delete(e),(i=this.updated)!=null&&i[e]&&delete this.updated[e],e=s}this.items[this.idxById.get(e)]=t,this.updated||(this.updated={}),this.updated[e]=!0}}updateItem(e,t){this.updateSingleItem(e,t),this.refresh()}updateItems(e,t){if(e.length!==t.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let i=0,s=t.length;i<s;i++)this.updateSingleItem(e[i],t[i]);this.refresh()}insertItem(e,t){this.items.splice(e,0,t),this.updateIdxById(e),this.refresh()}insertItems(e,t){Array.prototype.splice.apply(this.items,[e,0].concat(t)),this.updateIdxById(e),this.refresh()}addItem(e){this.items.push(e),this.updateIdxById(this.items.length-1),this.refresh()}addItems(e){this.items=this.items.concat(e),this.updateIdxById(this.items.length-e.length),this.refresh()}deleteItem(e){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(e,!0);else{const t=this.idxById.get(e);if(t===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(e),this.items.splice(t,1),this.updateIdxById(t),this.refresh()}}deleteItems(e){if(!(e.length===0||!this.idxById))if(this.isBulkSuspend)for(let t=0,i=e.length;t<i;t++){const s=e[t];if(this.idxById.get(s)===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(s,!0)}else{const t=[];for(let i=0,s=e.length;i<s;i++){const r=e[i],o=this.idxById.get(r);if(o===void 0)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(r),t.push(o)}t.sort();for(let i=t.length-1;i>=0;--i)this.items.splice(t[i],1);this.updateIdxById(t[0]),this.refresh()}}sortedAddItem(e){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(e),e)}sortedUpdateItem(e,t){if(!this.idxById)return;if(!this.idxById.has(e)||e!==t[this.idProperty])throw new Error(`[SlickGrid DataView] Invalid or non-matching id ${e}`);if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");const i=this.getItemById(e);this.sortComparer(i,t)!==0?(this.deleteItem(e),this.sortedAddItem(t)):this.updateItem(e,t)}sortedIndex(e){let t=0,i=this.items.length;for(;t<i;){const s=t+i>>>1;this.sortComparer(this.items[s],e)===-1?t=s+1:i=s}return t}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(e){var i;const t=this.rows[e];if(t!=null&&t.__group&&t.totals&&!((i=t.totals)!=null&&i.initialized)){const s=this.groupingInfos[t.level];s.displayTotalsRow||(this.calculateTotals(t.totals),t.title=s.formatter?s.formatter(t):t.value)}else t!=null&&t.__groupTotals&&!t.initialized&&this.calculateTotals(t);return t}getItemMetadata(e){var i,s,r;const t=this.rows[e];return t===void 0?null:(i=this._options.globalItemMetadataProvider)!=null&&i.getRowMetadata?this._options.globalItemMetadataProvider.getRowMetadata(t,e):t.__group&&((s=this._options.groupItemMetadataProvider)!=null&&s.getGroupRowMetadata)?this._options.groupItemMetadataProvider.getGroupRowMetadata(t,e):t.__groupTotals&&((r=this._options.groupItemMetadataProvider)!=null&&r.getTotalsRowMetadata)?this._options.groupItemMetadataProvider.getTotalsRowMetadata(t,e):null}expandCollapseAllGroups(e,t){if(Le(e))this.toggledGroupsByLevel[e]={},this.groupingInfos[e].collapsed=t,t===!0?this.onGroupCollapsed.notify({level:e,groupingKey:null}):this.onGroupExpanded.notify({level:e,groupingKey:null});else for(let i=0;i<this.groupingInfos.length;i++)this.toggledGroupsByLevel[i]={},this.groupingInfos[i].collapsed=t,t===!0?this.onGroupCollapsed.notify({level:i,groupingKey:null}):this.onGroupExpanded.notify({level:i,groupingKey:null});this.refresh()}collapseAllGroups(e){this.expandCollapseAllGroups(e,!0)}expandAllGroups(e){this.expandCollapseAllGroups(e,!1)}expandCollapseGroup(e,t,i){this.toggledGroupsByLevel[e]&&(this.toggledGroupsByLevel[e][t]=this.groupingInfos[e].collapsed^i),this.refresh()}collapseGroup(...e){const i=Array.prototype.slice.call(e)[0];let s,r;e.length===1&&i.indexOf(this.groupingDelimiter)!==-1?(s=i,r=i.split(this.groupingDelimiter).length-1):(s=e.join(this.groupingDelimiter),r=e.length-1),this.expandCollapseGroup(r,s,!0),this.onGroupCollapsed.notify({level:r,groupingKey:s})}expandGroup(...e){const i=Array.prototype.slice.call(e)[0];let s,r;e.length===1&&i.indexOf(this.groupingDelimiter)!==-1?(r=i.split(this.groupingDelimiter).length-1,s=i):(r=e.length-1,s=e.join(this.groupingDelimiter)),this.expandCollapseGroup(r,s,!1),this.onGroupExpanded.notify({level:r,groupingKey:s})}getGroups(){return this.groups}extractGroups(e,t){var h,d;let i,s;const r=[],o={};let a;const l=t?t.level+1:0,c=this.groupingInfos[l];for(let u=0,p=((h=c.predefinedValues)==null?void 0:h.length)??0;u<p;u++)s=(d=c.predefinedValues)==null?void 0:d[u],i=o[s],i||(i=new su,i.value=s,i.level=l,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+s,r[r.length]=i,o[s]=i);for(let u=0,p=e.length;u<p;u++)a=e[u],s=c.getterIsAFn?c.getter(a):a[c.getter],i=o[s],i||(i=new su,i.value=s,i.level=l,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+s,r[r.length]=i,o[s]=i),i.rows[i.count++]=a;if(l<this.groupingInfos.length-1)for(let u=0;u<r.length;u++)i=r[u],i.groups=this.extractGroups(i.rows,i);return r.length&&this.addTotals(r,l),r.sort(this.groupingInfos[l].comparer),r}calculateTotals(e){var a;const t=e.group,i=this.groupingInfos[(t==null?void 0:t.level)??0],s=t.level===this.groupingInfos.length;let r,o=i.aggregators.length;if(!s&&i.aggregateChildGroups){let l=((a=t.groups)==null?void 0:a.length)??0;for(;l--;)t.groups[l].totals.initialized||this.calculateTotals(t.groups[l].totals)}for(;o--;)r=i.aggregators[o],r.init(),!s&&i.aggregateChildGroups?i.compiledAccumulators[o].call(r,t.groups):i.compiledAccumulators[o].call(r,t.rows),r.storeResult(e);e.initialized=!0}addGroupTotals(e){const t=this.groupingInfos[e.level],i=new mB;i.group=e,e.totals=i,t.lazyTotalsCalculation||this.calculateTotals(i)}addTotals(e,t){var l,c;t=t||0;const i=this.groupingInfos[t],s=i.collapsed,r=this.toggledGroupsByLevel[t];let o=e.length,a;for(;o--;)a=e[o],!(a.collapsed&&!i.aggregateCollapsed)&&(a.groups&&this.addTotals(a.groups,t+1),(l=i.aggregators)!=null&&l.length&&(i.aggregateEmpty||a.rows.length||(c=a.groups)!=null&&c.length)&&this.addGroupTotals(a),a.collapsed=s^r[a.groupingKey],a.title=i.formatter?i.formatter(a):a.value)}flattenGroupedRows(e,t){t=t||0;const i=this.groupingInfos[t],s=[];let r,o=0,a;for(let l=0,c=e.length;l<c;l++){if(a=e[l],s[o++]=a,!a.collapsed){r=a.groups?this.flattenGroupedRows(a.groups,t+1):a.rows;for(let h=0,d=r.length;h<d;h++)s[o++]=r[h]}a.totals&&i.displayTotalsRow&&(!a.collapsed||i.aggregateCollapsed)&&(s[o++]=a.totals)}return s}compileAccumulatorLoopCSPSafe(e){return e.accumulate?function(t){let i;if(Array.isArray(t))for(let s=0;s<t.length;s++){const r=t[s];i=e.accumulate.call(e,r)}return i}:function(){}}compileFilterCSPSafe(e,t){if(typeof this.filterCSPSafe!="function")return[];const i=[],s=e.length;for(let r=0;r<s;r++)this.filterCSPSafe(e[r],t)&&i.push(e[r]);return i}compileFilter(e=!1){if(e)return null;const t=nC(this.filter),i="{ continue _coreloop; }$1",s="{ _retval[_idx++] = $item$; continue _coreloop; }$1",r=t.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,s).replace(/return!0([;}]|\}|$)/gi,s).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let o=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");o=o.replace(/\$filter\$/gi,r),o=o.replace(/\$item\$/gi,t.params[0]),o=o.replace(/\$args\$/gi,t.params[1]);const a=new Function("_items,_args",o),l="compiledFilter";return a.displayName=l,a.name=this.setFunctionName(a,l),a}compileFilterWithCaching(e=!1){if(e)return null;const t=nC(this.filter),i="{ continue _coreloop; }$1",s="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",r=t.body.replace(/return false\s*([;}]|\}|$)/gi,i).replace(/return!1([;}]|\}|$)/gi,i).replace(/return true\s*([;}]|\}|$)/gi,s).replace(/return!0([;}]|\}|$)/gi,s).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let o=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");o=o.replace(/\$filter\$/gi,r),o=o.replace(/\$item\$/gi,t.params[0]),o=o.replace(/\$args\$/gi,t.params[1]);const a=new Function("_items,_args,_cache",o),l="compiledFilterWithCaching";return a.displayName=l,a.name=this.setFunctionName(a,l),a}compileFilterWithCachingCSPSafe(e,t,i){if(typeof this.filterCSPSafe!="function")return[];const s=[],r=e.length;for(let o=0;o<r;o++)(i[o]||this.filterCSPSafe(e[o],t))&&s.push(e[o]);return s}setFunctionName(e,t){try{Object.defineProperty(e,"name",{writable:!0,value:t})}catch{e.name=t}}uncompiledFilter(e,t){var r;const i=[];let s=0;for(let o=0,a=e.length;o<a;o++)(r=this.filter)!=null&&r.call(this,e[o],t)&&(i[s++]=e[o]);return i}uncompiledFilterWithCaching(e,t,i){var a;const s=[];let r=0,o;for(let l=0,c=e.length;l<c;l++)o=e[l],i[l]?s[r++]=o:(a=this.filter)!=null&&a.call(this,o,t)&&(s[r++]=o,i[l]=!0);return s}getFilteredAndPagedItems(e){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let i,s;this._options.useCSPSafeFilter?(i=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,s=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(i=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,s=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=i.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=s.call(this,e,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=i.call(this,e,this.filterArgs))}else this.filteredItems=this.pagesize?e:e.concat();let t;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(this.filteredItems.length===0?this.pagenum=0:this.pagenum=Math.floor((this.filteredItems.length-1)/this.pagesize)),t=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):t=this.filteredItems,{totalRows:this.filteredItems.length,rows:t}}getRowDiffs(e,t){var c,h,d;let i,s,r;const o=[];let a=0,l=Math.max(t.length,e.length);(c=this.refreshHints)!=null&&c.ignoreDiffsBefore&&(a=Math.max(0,Math.min(t.length,this.refreshHints.ignoreDiffsBefore))),(h=this.refreshHints)!=null&&h.ignoreDiffsAfter&&(l=Math.min(t.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let u=a,p=e.length;u<l;u++)u>=p?o[o.length]=u:(i=t[u],s=e[u],(!i||this.groupingInfos.length&&(r=i.__nonDataRow||s.__nonDataRow)&&i.__group!==s.__group||i.__group&&!i.equals(s)||r&&(i.__groupTotals||s.__groupTotals)||i[this.idProperty]!==s[this.idProperty]||(d=this.updated)!=null&&d[i[this.idProperty]])&&(o[o.length]=u));return o}recalc(e){this.rowsById=void 0,(this.refreshHints.isFilterNarrowing!==this.prevRefreshHints.isFilterNarrowing||this.refreshHints.isFilterExpanding!==this.prevRefreshHints.isFilterExpanding)&&(this.filterCache=[]);const t=this.getFilteredAndPagedItems(e);this.totalRows=t.totalRows;let i=t.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(i),this.groups.length&&(i=this.flattenGroupedRows(this.groups)));const s=this.getRowDiffs(this.rows,i);return this.rows=i,s}refresh(){if(this.suspend)return;const e=Qt(!0,{},this.getPagingInfo()),t=this.rows.length,i=this.totalRows;let s=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),s=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},i!==this.totalRows&&this.onBeforePagingInfoChanged.notify(e,null,this).getReturnValue()!==!1&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),t!==this.rows.length&&this.onRowCountChanged.notify({previous:t,current:this.rows.length,itemCount:this.items.length,dataView:this,changedRows:s,callingOnRowsChanged:s.length>0},null,this),s.length>0&&this.onRowsChanged.notify({rows:s,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:t!==this.rows.length},null,this),(t!==this.rows.length||s.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:s,previousRowCount:t,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:t!==this.rows.length,rowsChanged:s.length>0,dataView:this},null,this)}syncGridSelection(e,t,i){this._grid=e;let s;this.selectedRowIds=this.mapRowsToIds(e.getSelectedRows());const r=e.getOptions(),o=l=>{l===!1?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==l.sort().join(",")&&(this.selectedRowIds=l)},a=()=>{if((this.selectedRowIds||[]).length>0&&!s){s=!0;const l=this.mapIdsToRows(this.selectedRowIds||[]);if(!t){const c={grid:this._grid,ids:this.mapRowsToIds(l),rows:l,dataView:this};this.preSelectedRowIdsChangeFn(c),this.onSelectedRowIdsChanged.notify(Object.assign(c,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Ot,this)}e.setSelectedRows(l),s=!1}};return e.onSelectedRowsChanged.subscribe((l,c)=>{if(!s){const h=this.mapRowsToIds(c.rows),d={grid:this._grid,ids:h,rows:c.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(d),this.onSelectedRowIdsChanged.notify(Object.assign(d,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Ot,this)}}),this.preSelectedRowIdsChangeFn=l=>{var c,h;if(!s){if(s=!0,typeof l.added>"u")o(l.ids);else{let u;if(l.added)i&&r.multiSelect?u=((c=this.selectedRowIds)==null?void 0:c.filter(f=>this.getRowById(f)===void 0)).concat(l.ids):u=l.ids;else if(i&&r.multiSelect){const p=new Set(l.ids);u=(h=this.selectedRowIds)==null?void 0:h.filter(f=>!p.has(f))}else u=[];o(u)}s=!1}},this.onRowsOrCountChanged.subscribe(a.bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map(e=>e[this.idProperty])}setSelectedIds(e,t){var l;let i=t==null?void 0:t.isRowBeingAdded;const s=t==null?void 0:t.shouldTriggerEvent,r=t==null?void 0:t.applyRowSelectionToGrid;i!==!1&&(i=!0);const o=this.mapIdsToRows(e),a={grid:this._grid,ids:e,rows:o,added:i,dataView:this};(l=this.preSelectedRowIdsChangeFn)==null||l.call(this,a),s!==!1&&this.onSelectedRowIdsChanged.notify(Object.assign(a,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new Ot,this),r!==!1&&this._grid&&this._grid.setSelectedRows(o)}getAllSelectedItems(){const e=[];return this.getAllSelectedIds().forEach(i=>{e.push(this.getItemById(i))}),e}getAllSelectedFilteredItems(){if(!Array.isArray(this.selectedRowIds))return[];const e=new Set(this.selectedRowIds);return this.filteredItems.filter(i=>e.has(i[this.idProperty]))||[]}syncGridCellCssStyles(e,t){let i,s;const r=a=>{i={},typeof a=="object"&&Object.keys(a).forEach(l=>{if(a&&this.rows[l]){const c=this.rows[l][this.idProperty];i[c]=a[l]}})};r(e.getCellCssStyles(t));const o=()=>{if(typeof i=="object"){s=!0,this.ensureRowsByIdCache();const a={};Object.keys(i).forEach(l=>{var h;const c=(h=this.rowsById)==null?void 0:h[l];Le(c)&&(a[c]=i[l])}),e.setCellCssStyles(t,a),s=!1}};e.onCellCssStylesChanged.subscribe((a,l)=>{s||t!==l.key||(l.hash?r(l.hash):(e.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(o)))}),this.onRowsOrCountChanged.subscribe(o.bind(this))}}/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function mC(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function vn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mC(Object(t),!0).forEach(function(i){wB(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mC(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function bd(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bd=function(e){return typeof e}:bd=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bd(n)}function wB(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Qn(){return Qn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qn.apply(this,arguments)}function CB(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function yB(n,e){if(n==null)return{};var t=CB(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}var SB="1.15.6";function Wn(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var ar=Wn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rh=Wn(/Edge/i),_C=Wn(/firefox/i),gc=Wn(/safari/i)&&!Wn(/chrome/i)&&!Wn(/android/i),V_=Wn(/iP(ad|od|hone)/i),_A=Wn(/chrome/i)&&Wn(/android/i),vA={capture:!1,passive:!1};function ze(n,e,t){n.addEventListener(e,t,!ar&&vA)}function Be(n,e,t){n.removeEventListener(e,t,!ar&&vA)}function ru(n,e){if(e){if(e[0]===">"&&(e=e.substring(1)),n)try{if(n.matches)return n.matches(e);if(n.msMatchesSelector)return n.msMatchesSelector(e);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(e)}catch{return!1}return!1}}function bA(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function Ps(n,e,t,i){if(n){t=t||document;do{if(e!=null&&(e[0]===">"?n.parentNode===t&&ru(n,e):ru(n,e))||i&&n===t)return n;if(n===t)break}while(n=bA(n))}return null}var vC=/\s+/g;function Yi(n,e,t){if(n&&e)if(n.classList)n.classList[t?"add":"remove"](e);else{var i=(" "+n.className+" ").replace(vC," ").replace(" "+e+" "," ");n.className=(i+(t?" "+e:"")).replace(vC," ")}}function Se(n,e,t){var i=n&&n.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(t=n.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function Fa(n,e){var t="";if(typeof n=="string")t=n;else do{var i=Se(n,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(n=n.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(t)}function wA(n,e,t){if(n){var i=n.getElementsByTagName(e),s=0,r=i.length;if(t)for(;s<r;s++)t(i[s],s);return i}return[]}function cn(){var n=document.scrollingElement;return n||document.documentElement}function Wt(n,e,t,i,s){if(!(!n.getBoundingClientRect&&n!==window)){var r,o,a,l,c,h,d;if(n!==window&&n.parentNode&&n!==cn()?(r=n.getBoundingClientRect(),o=r.top,a=r.left,l=r.bottom,c=r.right,h=r.height,d=r.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,d=window.innerWidth),(e||t)&&n!==window&&(s=s||n.parentNode,!ar))do if(s&&s.getBoundingClientRect&&(Se(s,"transform")!=="none"||t&&Se(s,"position")!=="static")){var u=s.getBoundingClientRect();o-=u.top+parseInt(Se(s,"border-top-width")),a-=u.left+parseInt(Se(s,"border-left-width")),l=o+r.height,c=a+r.width;break}while(s=s.parentNode);if(i&&n!==window){var p=Fa(s||n),f=p&&p.a,g=p&&p.d;p&&(o/=g,a/=f,d/=f,h/=g,l=o+h,c=a+d)}return{top:o,left:a,bottom:l,right:c,width:d,height:h}}}function bC(n,e,t){for(var i=wr(n,!0),s=Wt(n)[e];i;){var r=Wt(i)[t],o=void 0;if(o=s>=r,!o)return i;if(i===cn())break;i=wr(i,!1)}return!1}function Qa(n,e,t,i){for(var s=0,r=0,o=n.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==ve.ghost&&(i||o[r]!==ve.dragged)&&Ps(o[r],t.draggable,n,!1)){if(s===e)return o[r];s++}r++}return null}function z_(n,e){for(var t=n.lastElementChild;t&&(t===ve.ghost||Se(t,"display")==="none"||e&&!ru(t,e));)t=t.previousElementSibling;return t||null}function ds(n,e){var t=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==ve.clone&&(!e||ru(n,e))&&t++;return t}function wC(n){var e=0,t=0,i=cn();if(n)do{var s=Fa(n),r=s.a,o=s.d;e+=n.scrollLeft*r,t+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[e,t]}function EB(n,e){for(var t in n)if(n.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===n[t][i])return Number(t)}return-1}function wr(n,e){if(!n||!n.getBoundingClientRect)return cn();var t=n,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var s=Se(t);if(t.clientWidth<t.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return cn();if(i||e)return t;i=!0}}while(t=t.parentNode);return cn()}function TB(n,e){if(n&&e)for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function hf(n,e){return Math.round(n.top)===Math.round(e.top)&&Math.round(n.left)===Math.round(e.left)&&Math.round(n.height)===Math.round(e.height)&&Math.round(n.width)===Math.round(e.width)}var mc;function CA(n,e){return function(){if(!mc){var t=arguments,i=this;t.length===1?n.call(i,t[0]):n.apply(i,t),mc=setTimeout(function(){mc=void 0},e)}}}function AB(){clearTimeout(mc),mc=void 0}function yA(n,e,t){n.scrollLeft+=e,n.scrollTop+=t}function SA(n){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(n).cloneNode(!0):t?t(n).clone(!0)[0]:n.cloneNode(!0)}function EA(n,e,t){var i={};return Array.from(n.children).forEach(function(s){var r,o,a,l;if(!(!Ps(s,e.draggable,n,!1)||s.animated||s===t)){var c=Wt(s);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((a=i.right)!==null&&a!==void 0?a:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ui="Sortable"+new Date().getTime();function IB(){var n=[],e;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(s){if(!(Se(s,"display")==="none"||s===ve.ghost)){n.push({target:s,rect:Wt(s)});var r=vn({},n[n.length-1].rect);if(s.thisAnimationDuration){var o=Fa(s,!0);o&&(r.top-=o.f,r.left-=o.e)}s.fromRect=r}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(EB(n,{target:i}),1)},animateAll:function(i){var s=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var r=!1,o=0;n.forEach(function(a){var l=0,c=a.target,h=c.fromRect,d=Wt(c),u=c.prevFromRect,p=c.prevToRect,f=a.rect,g=Fa(c,!0);g&&(d.top-=g.f,d.left-=g.e),c.toRect=d,c.thisAnimationDuration&&hf(u,d)&&!hf(h,d)&&(f.top-d.top)/(f.left-d.left)===(h.top-d.top)/(h.left-d.left)&&(l=OB(f,u,p,s.options)),hf(d,h)||(c.prevFromRect=h,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,f,d,l)),l&&(r=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),r?e=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,s,r,o){if(o){Se(i,"transition",""),Se(i,"transform","");var a=Fa(this.el),l=a&&a.a,c=a&&a.d,h=(s.left-r.left)/(l||1),d=(s.top-r.top)/(c||1);i.animatingX=!!h,i.animatingY=!!d,Se(i,"transform","translate3d("+h+"px,"+d+"px,0)"),this.forRepaintDummy=RB(i),Se(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Se(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Se(i,"transition",""),Se(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function RB(n){return n.offsetWidth}function OB(n,e,t,i){return Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var sa=[],df={initializeByDefault:!0},oh={mount:function(e){for(var t in df)df.hasOwnProperty(t)&&!(t in e)&&(e[t]=df[t]);sa.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),sa.push(e)},pluginEvent:function(e,t,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var r=e+"Global";sa.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](vn({sortable:t},i)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](vn({sortable:t},i)))})},initializePlugins:function(e,t,i,s){sa.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,Qn(i,c.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);typeof o<"u"&&(e.options[r]=o)}},getEventProperties:function(e,t){var i={};return sa.forEach(function(s){typeof s.eventProperties=="function"&&Qn(i,s.eventProperties.call(t[s.pluginName],e))}),i},modifyOption:function(e,t,i){var s;return sa.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(s=r.optionListeners[t].call(e[r.pluginName],i))}),s}};function xB(n){var e=n.sortable,t=n.rootEl,i=n.name,s=n.targetEl,r=n.cloneEl,o=n.toEl,a=n.fromEl,l=n.oldIndex,c=n.newIndex,h=n.oldDraggableIndex,d=n.newDraggableIndex,u=n.originalEvent,p=n.putSortable,f=n.extraEventProperties;if(e=e||t&&t[Ui],!!e){var g,m=e.options,_="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!ar&&!rh?g=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(g=document.createEvent("Event"),g.initEvent(i,!0,!0)),g.to=o||t,g.from=a||t,g.item=s||t,g.clone=r,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=h,g.newDraggableIndex=d,g.originalEvent=u,g.pullMode=p?p.lastPutMode:void 0;var b=vn(vn({},f),oh.getEventProperties(i,e));for(var C in b)g[C]=b[C];t&&t.dispatchEvent(g),m[_]&&m[_].call(e,g)}}var PB=["evt"],Hi=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=i.evt,r=yB(i,PB);oh.pluginEvent.bind(ve)(e,t,vn({dragEl:ee,parentEl:Tt,ghostEl:xe,rootEl:bt,nextEl:so,lastDownEl:wd,cloneEl:yt,cloneHidden:vr,dragStarted:$l,putSortable:ni,activeSortable:ve.active,originalEvent:s,oldIndex:Oa,oldDraggableIndex:_c,newIndex:qi,newDraggableIndex:fr,hideGhostForTarget:RA,unhideGhostForTarget:OA,cloneNowHidden:function(){vr=!0},cloneNowShown:function(){vr=!1},dispatchSortableEvent:function(a){Ei({sortable:t,name:a,originalEvent:s})}},r))};function Ei(n){xB(vn({putSortable:ni,cloneEl:yt,targetEl:ee,rootEl:bt,oldIndex:Oa,oldDraggableIndex:_c,newIndex:qi,newDraggableIndex:fr},n))}var ee,Tt,xe,bt,so,wd,yt,vr,Oa,qi,_c,fr,$h,ni,ba=!1,ou=!1,au=[],Xr,Is,uf,pf,CC,yC,$l,na,vc,bc=!1,Hh=!1,Cd,hi,ff=[],Hg=!1,lu=[],op=typeof document<"u",Bh=V_,SC=rh||ar?"cssFloat":"float",kB=op&&!_A&&!V_&&"draggable"in document.createElement("div"),TA=function(){if(op){if(ar)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}}(),AA=function(e,t){var i=Se(e),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=Qa(e,0,t),o=Qa(e,1,t),a=r&&Se(r),l=o&&Se(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Wt(r).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Wt(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return r&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&i[SC]==="none"||o&&i[SC]==="none"&&c+h>s)?"vertical":"horizontal"},DB=function(e,t,i){var s=i?e.left:e.top,r=i?e.right:e.bottom,o=i?e.width:e.height,a=i?t.left:t.top,l=i?t.right:t.bottom,c=i?t.width:t.height;return s===a||r===l||s+o/2===a+c/2},LB=function(e,t){var i;return au.some(function(s){var r=s[Ui].options.emptyInsertThreshold;if(!(!r||z_(s))){var o=Wt(s),a=e>=o.left-r&&e<=o.right+r,l=t>=o.top-r&&t<=o.bottom+r;if(a&&l)return i=s}}),i},IA=function(e){function t(r,o){return function(a,l,c,h){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(r==null&&(o||d))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return t(r(a,l,c,h),o)(a,l,c,h);var u=(o?a:l).options.group.name;return r===!0||typeof r=="string"&&r===u||r.join&&r.indexOf(u)>-1}}var i={},s=e.group;(!s||bd(s)!="object")&&(s={name:s}),i.name=s.name,i.checkPull=t(s.pull,!0),i.checkPut=t(s.put),i.revertClone=s.revertClone,e.group=i},RA=function(){!TA&&xe&&Se(xe,"display","none")},OA=function(){!TA&&xe&&Se(xe,"display","")};op&&!_A&&document.addEventListener("click",function(n){if(ou)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),ou=!1,!1},!0);var Qr=function(e){if(ee){e=e.touches?e.touches[0]:e;var t=LB(e.clientX,e.clientY);if(t){var i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Ui]._onDragOver(i)}}},NB=function(e){ee&&ee.parentNode[Ui]._isOutsideThisEl(e.target)};function ve(n,e){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=e=Qn({},e),n[Ui]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return AA(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:ve.supportPointer!==!1&&"PointerEvent"in window&&(!gc||V_),emptyInsertThreshold:5};oh.initializePlugins(this,n,t);for(var i in t)!(i in e)&&(e[i]=t[i]);IA(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:kB,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ze(n,"pointerdown",this._onTapStart):(ze(n,"mousedown",this._onTapStart),ze(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(ze(n,"dragover",this),ze(n,"dragenter",this)),au.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qn(this,IB())}ve.prototype={constructor:ve,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(na=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,ee):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,s=this.options,r=s.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=s.filter;if(WB(i),!ee&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&gc&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Ps(l,s.draggable,i,!1),!(l&&l.animated)&&wd!==l)){if(Oa=ds(l),_c=ds(l,s.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Ei({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),Hi("filter",t,{evt:e}),r&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(d){if(d=Ps(c,d.trim(),i,!1),d)return Ei({sortable:t,rootEl:d,name:"filter",targetEl:l,fromEl:i,toEl:i}),Hi("filter",t,{evt:e}),!0}),h)){r&&e.preventDefault();return}s.handle&&!Ps(c,s.handle,i,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,i){var s=this,r=s.el,o=s.options,a=r.ownerDocument,l;if(i&&!ee&&i.parentNode===r){var c=Wt(i);if(bt=r,ee=i,Tt=ee.parentNode,so=ee.nextSibling,wd=i,$h=o.group,ve.dragged=ee,Xr={target:ee,clientX:(t||e).clientX,clientY:(t||e).clientY},CC=Xr.clientX-c.left,yC=Xr.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ee.style["will-change"]="all",l=function(){if(Hi("delayEnded",s,{evt:e}),ve.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!_C&&s.nativeDraggable&&(ee.draggable=!0),s._triggerDragStart(e,t),Ei({sortable:s,name:"choose",originalEvent:e}),Yi(ee,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){wA(ee,h.trim(),gf)}),ze(a,"dragover",Qr),ze(a,"mousemove",Qr),ze(a,"touchmove",Qr),o.supportPointer?(ze(a,"pointerup",s._onDrop),!this.nativeDraggable&&ze(a,"pointercancel",s._onDrop)):(ze(a,"mouseup",s._onDrop),ze(a,"touchend",s._onDrop),ze(a,"touchcancel",s._onDrop)),_C&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ee.draggable=!0),Hi("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(rh||ar))){if(ve.eventCanceled){this._onDrop();return}o.supportPointer?(ze(a,"pointerup",s._disableDelayedDrag),ze(a,"pointercancel",s._disableDelayedDrag)):(ze(a,"mouseup",s._disableDelayedDrag),ze(a,"touchend",s._disableDelayedDrag),ze(a,"touchcancel",s._disableDelayedDrag)),ze(a,"mousemove",s._delayedDragTouchMoveHandler),ze(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&ze(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ee&&gf(ee),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Be(e,"mouseup",this._disableDelayedDrag),Be(e,"touchend",this._disableDelayedDrag),Be(e,"touchcancel",this._disableDelayedDrag),Be(e,"pointerup",this._disableDelayedDrag),Be(e,"pointercancel",this._disableDelayedDrag),Be(e,"mousemove",this._delayedDragTouchMoveHandler),Be(e,"touchmove",this._delayedDragTouchMoveHandler),Be(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?ze(document,"pointermove",this._onTouchMove):t?ze(document,"touchmove",this._onTouchMove):ze(document,"mousemove",this._onTouchMove):(ze(ee,"dragend",this),ze(bt,"dragstart",this._onDragStart));try{document.selection?yd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ba=!1,bt&&ee){Hi("dragStarted",this,{evt:t}),this.nativeDraggable&&ze(document,"dragover",NB);var i=this.options;!e&&Yi(ee,i.dragClass,!1),Yi(ee,i.ghostClass,!0),ve.active=this,e&&this._appendGhost(),Ei({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Is){this._lastX=Is.clientX,this._lastY=Is.clientY,RA();for(var e=document.elementFromPoint(Is.clientX,Is.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Is.clientX,Is.clientY),e!==t);)t=e;if(ee.parentNode[Ui]._isOutsideThisEl(e),t)do{if(t[Ui]){var i=void 0;if(i=t[Ui]._onDragOver({clientX:Is.clientX,clientY:Is.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=bA(t));OA()}},_onTouchMove:function(e){if(Xr){var t=this.options,i=t.fallbackTolerance,s=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=xe&&Fa(xe,!0),a=xe&&o&&o.a,l=xe&&o&&o.d,c=Bh&&hi&&wC(hi),h=(r.clientX-Xr.clientX+s.x)/(a||1)+(c?c[0]-ff[0]:0)/(a||1),d=(r.clientY-Xr.clientY+s.y)/(l||1)+(c?c[1]-ff[1]:0)/(l||1);if(!ve.active&&!ba){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(xe){o?(o.e+=h-(uf||0),o.f+=d-(pf||0)):o={a:1,b:0,c:0,d:1,e:h,f:d};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");Se(xe,"webkitTransform",u),Se(xe,"mozTransform",u),Se(xe,"msTransform",u),Se(xe,"transform",u),uf=h,pf=d,Is=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!xe){var e=this.options.fallbackOnBody?document.body:bt,t=Wt(ee,!0,Bh,!0,e),i=this.options;if(Bh){for(hi=e;Se(hi,"position")==="static"&&Se(hi,"transform")==="none"&&hi!==document;)hi=hi.parentNode;hi!==document.body&&hi!==document.documentElement?(hi===document&&(hi=cn()),t.top+=hi.scrollTop,t.left+=hi.scrollLeft):hi=cn(),ff=wC(hi)}xe=ee.cloneNode(!0),Yi(xe,i.ghostClass,!1),Yi(xe,i.fallbackClass,!0),Yi(xe,i.dragClass,!0),Se(xe,"transition",""),Se(xe,"transform",""),Se(xe,"box-sizing","border-box"),Se(xe,"margin",0),Se(xe,"top",t.top),Se(xe,"left",t.left),Se(xe,"width",t.width),Se(xe,"height",t.height),Se(xe,"opacity","0.8"),Se(xe,"position",Bh?"absolute":"fixed"),Se(xe,"zIndex","100000"),Se(xe,"pointerEvents","none"),ve.ghost=xe,e.appendChild(xe),Se(xe,"transform-origin",CC/parseInt(xe.style.width)*100+"% "+yC/parseInt(xe.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,s=e.dataTransfer,r=i.options;if(Hi("dragStart",this,{evt:e}),ve.eventCanceled){this._onDrop();return}Hi("setupClone",this),ve.eventCanceled||(yt=SA(ee),yt.removeAttribute("id"),yt.draggable=!1,yt.style["will-change"]="",this._hideClone(),Yi(yt,this.options.chosenClass,!1),ve.clone=yt),i.cloneId=yd(function(){Hi("clone",i),!ve.eventCanceled&&(i.options.removeCloneOnHide||bt.insertBefore(yt,ee),i._hideClone(),Ei({sortable:i,name:"clone"}))}),!t&&Yi(ee,r.dragClass,!0),t?(ou=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Be(document,"mouseup",i._onDrop),Be(document,"touchend",i._onDrop),Be(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",r.setData&&r.setData.call(i,s,ee)),ze(document,"drop",i),Se(ee,"transform","translateZ(0)")),ba=!0,i._dragStartId=yd(i._dragStarted.bind(i,t,e)),ze(document,"selectstart",i),$l=!0,window.getSelection().removeAllRanges(),gc&&Se(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,s,r,o,a=this.options,l=a.group,c=ve.active,h=$h===l,d=a.sort,u=ni||c,p,f=this,g=!1;if(Hg)return;function m(re,Z){Hi(re,f,vn({evt:e,isOwner:h,axis:p?"vertical":"horizontal",revert:o,dragRect:s,targetRect:r,canSort:d,fromSortable:u,target:i,completed:b,onMove:function(ge,x){return Vh(bt,t,ee,s,ge,Wt(ge),e,x)},changed:C},Z))}function _(){m("dragOverAnimationCapture"),f.captureAnimationState(),f!==u&&u.captureAnimationState()}function b(re){return m("dragOverCompleted",{insertion:re}),re&&(h?c._hideClone():c._showClone(f),f!==u&&(Yi(ee,ni?ni.options.ghostClass:c.options.ghostClass,!1),Yi(ee,a.ghostClass,!0)),ni!==f&&f!==ve.active?ni=f:f===ve.active&&ni&&(ni=null),u===f&&(f._ignoreWhileAnimating=i),f.animateAll(function(){m("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(i===ee&&!ee.animated||i===t&&!i.animated)&&(na=null),!a.dragoverBubble&&!e.rootEl&&i!==document&&(ee.parentNode[Ui]._isOutsideThisEl(e.target),!re&&Qr(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),g=!0}function C(){qi=ds(ee),fr=ds(ee,a.draggable),Ei({sortable:f,name:"change",toEl:t,newIndex:qi,newDraggableIndex:fr,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ps(i,a.draggable,t,!0),m("dragOver"),ve.eventCanceled)return g;if(ee.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||f._ignoreWhileAnimating===i)return b(!1);if(ou=!1,c&&!a.disabled&&(h?d||(o=Tt!==bt):ni===this||(this.lastPutMode=$h.checkPull(this,c,ee,e))&&l.checkPut(this,c,ee,e))){if(p=this._getDirection(e,i)==="vertical",s=Wt(ee),m("dragOverValid"),ve.eventCanceled)return g;if(o)return Tt=bt,_(),this._hideClone(),m("revert"),ve.eventCanceled||(so?bt.insertBefore(ee,so):bt.appendChild(ee)),b(!0);var v=z_(t,a.draggable);if(!v||HB(e,p,this)&&!v.animated){if(v===ee)return b(!1);if(v&&t===e.target&&(i=v),i&&(r=Wt(i)),Vh(bt,t,ee,s,i,r,e,!!i)!==!1)return _(),v&&v.nextSibling?t.insertBefore(ee,v.nextSibling):t.appendChild(ee),Tt=t,C(),b(!0)}else if(v&&$B(e,p,this)){var y=Qa(t,0,a,!0);if(y===ee)return b(!1);if(i=y,r=Wt(i),Vh(bt,t,ee,s,i,r,e,!1)!==!1)return _(),t.insertBefore(ee,y),Tt=t,C(),b(!0)}else if(i.parentNode===t){r=Wt(i);var S=0,A,P=ee.parentNode!==t,F=!DB(ee.animated&&ee.toRect||s,i.animated&&i.toRect||r,p),H=p?"top":"left",W=bC(i,"top","top")||bC(ee,"top","top"),J=W?W.scrollTop:void 0;na!==i&&(A=r[H],bc=!1,Hh=!F&&a.invertSwap||P),S=BB(e,i,r,p,F?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,Hh,na===i);var Y;if(S!==0){var ae=ds(ee);do ae-=S,Y=Tt.children[ae];while(Y&&(Se(Y,"display")==="none"||Y===xe))}if(S===0||Y===i)return b(!1);na=i,vc=S;var ue=i.nextElementSibling,te=!1;te=S===1;var V=Vh(bt,t,ee,s,i,r,e,te);if(V!==!1)return(V===1||V===-1)&&(te=V===1),Hg=!0,setTimeout(FB,30),_(),te&&!ue?t.appendChild(ee):i.parentNode.insertBefore(ee,te?ue:i),W&&yA(W,0,J-W.scrollTop),Tt=ee.parentNode,A!==void 0&&!Hh&&(Cd=Math.abs(A-Wt(i)[H])),C(),b(!0)}if(t.contains(ee))return b(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Be(document,"mousemove",this._onTouchMove),Be(document,"touchmove",this._onTouchMove),Be(document,"pointermove",this._onTouchMove),Be(document,"dragover",Qr),Be(document,"mousemove",Qr),Be(document,"touchmove",Qr)},_offUpEvents:function(){var e=this.el.ownerDocument;Be(e,"mouseup",this._onDrop),Be(e,"touchend",this._onDrop),Be(e,"pointerup",this._onDrop),Be(e,"pointercancel",this._onDrop),Be(e,"touchcancel",this._onDrop),Be(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(qi=ds(ee),fr=ds(ee,i.draggable),Hi("drop",this,{evt:e}),Tt=ee&&ee.parentNode,qi=ds(ee),fr=ds(ee,i.draggable),ve.eventCanceled){this._nulling();return}ba=!1,Hh=!1,bc=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Bg(this.cloneId),Bg(this._dragStartId),this.nativeDraggable&&(Be(document,"drop",this),Be(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),gc&&Se(document.body,"user-select",""),Se(ee,"transform",""),e&&($l&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),xe&&xe.parentNode&&xe.parentNode.removeChild(xe),(bt===Tt||ni&&ni.lastPutMode!=="clone")&&yt&&yt.parentNode&&yt.parentNode.removeChild(yt),ee&&(this.nativeDraggable&&Be(ee,"dragend",this),gf(ee),ee.style["will-change"]="",$l&&!ba&&Yi(ee,ni?ni.options.ghostClass:this.options.ghostClass,!1),Yi(ee,this.options.chosenClass,!1),Ei({sortable:this,name:"unchoose",toEl:Tt,newIndex:null,newDraggableIndex:null,originalEvent:e}),bt!==Tt?(qi>=0&&(Ei({rootEl:Tt,name:"add",toEl:Tt,fromEl:bt,originalEvent:e}),Ei({sortable:this,name:"remove",toEl:Tt,originalEvent:e}),Ei({rootEl:Tt,name:"sort",toEl:Tt,fromEl:bt,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:Tt,originalEvent:e})),ni&&ni.save()):qi!==Oa&&qi>=0&&(Ei({sortable:this,name:"update",toEl:Tt,originalEvent:e}),Ei({sortable:this,name:"sort",toEl:Tt,originalEvent:e})),ve.active&&((qi==null||qi===-1)&&(qi=Oa,fr=_c),Ei({sortable:this,name:"end",toEl:Tt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Hi("nulling",this),bt=ee=Tt=xe=so=yt=wd=vr=Xr=Is=$l=qi=fr=Oa=_c=na=vc=ni=$h=ve.dragged=ve.ghost=ve.clone=ve.active=null,lu.forEach(function(e){e.checked=!0}),lu.length=uf=pf=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ee&&(this._onDragOver(e),MB(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,s=0,r=i.length,o=this.options;s<r;s++)t=i[s],Ps(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||zB(t));return e},sort:function(e,t){var i={},s=this.el;this.toArray().forEach(function(r,o){var a=s.children[o];Ps(a,this.options.draggable,s,!1)&&(i[r]=a)},this),t&&this.captureAnimationState(),e.forEach(function(r){i[r]&&(s.removeChild(i[r]),s.appendChild(i[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ps(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var s=oh.modifyOption(this,e,t);typeof s<"u"?i[e]=s:i[e]=t,e==="group"&&IA(i)},destroy:function(){Hi("destroy",this);var e=this.el;e[Ui]=null,Be(e,"mousedown",this._onTapStart),Be(e,"touchstart",this._onTapStart),Be(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Be(e,"dragover",this),Be(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),au.splice(au.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!vr){if(Hi("hideClone",this),ve.eventCanceled)return;Se(yt,"display","none"),this.options.removeCloneOnHide&&yt.parentNode&&yt.parentNode.removeChild(yt),vr=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(vr){if(Hi("showClone",this),ve.eventCanceled)return;ee.parentNode==bt&&!this.options.group.revertClone?bt.insertBefore(yt,ee):so?bt.insertBefore(yt,so):bt.appendChild(yt),this.options.group.revertClone&&this.animate(ee,yt),Se(yt,"display",""),vr=!1}}};function MB(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function Vh(n,e,t,i,s,r,o,a){var l,c=n[Ui],h=c.options.onMove,d;return window.CustomEvent&&!ar&&!rh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=n,l.dragged=t,l.draggedRect=i,l.related=s||e,l.relatedRect=r||Wt(e),l.willInsertAfter=a,l.originalEvent=o,n.dispatchEvent(l),h&&(d=h.call(c,l,o)),d}function gf(n){n.draggable=!1}function FB(){Hg=!1}function $B(n,e,t){var i=Wt(Qa(t.el,0,t.options,!0)),s=EA(t.el,t.options,xe),r=10;return e?n.clientX<s.left-r||n.clientY<i.top&&n.clientX<i.right:n.clientY<s.top-r||n.clientY<i.bottom&&n.clientX<i.left}function HB(n,e,t){var i=Wt(z_(t.el,t.options.draggable)),s=EA(t.el,t.options,xe),r=10;return e?n.clientX>s.right+r||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>s.bottom+r||n.clientX>i.right&&n.clientY>i.top}function BB(n,e,t,i,s,r,o,a){var l=i?n.clientY:n.clientX,c=i?t.height:t.width,h=i?t.top:t.left,d=i?t.bottom:t.right,u=!1;if(!o){if(a&&Cd<c*s){if(!bc&&(vc===1?l>h+c*r/2:l<d-c*r/2)&&(bc=!0),bc)u=!0;else if(vc===1?l<h+Cd:l>d-Cd)return-vc}else if(l>h+c*(1-s)/2&&l<d-c*(1-s)/2)return VB(e)}return u=u||o,u&&(l<h+c*r/2||l>d-c*r/2)?l>h+c/2?1:-1:0}function VB(n){return ds(ee)<ds(n)?1:-1}function zB(n){for(var e=n.tagName+n.className+n.src+n.href+n.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function WB(n){lu.length=0;for(var e=n.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&lu.push(i)}}function yd(n){return setTimeout(n,0)}function Bg(n){return clearTimeout(n)}op&&ze(document,"touchmove",function(n){(ve.active||ba)&&n.cancelable&&n.preventDefault()});ve.utils={on:ze,off:Be,css:Se,find:wA,is:function(e,t){return!!Ps(e,t,e,!1)},extend:TB,throttle:CA,closest:Ps,toggleClass:Yi,clone:SA,index:ds,nextTick:yd,cancelNextTick:Bg,detectDirection:AA,getChild:Qa,expando:Ui};ve.get=function(n){return n[Ui]};ve.mount=function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(ve.utils=vn(vn({},ve.utils),i.utils)),oh.mount(i)})};ve.create=function(n,e){return new ve(n,e)};ve.version=SB;var Bt=[],Hl,Vg,zg=!1,mf,_f,cu,Bl;function UB(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return n.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ze(document,"pointermove",this._handleFallbackAutoScroll):i.touches?ze(document,"touchmove",this._handleFallbackAutoScroll):ze(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?Be(document,"dragover",this._handleAutoScroll):(Be(document,"pointermove",this._handleFallbackAutoScroll),Be(document,"touchmove",this._handleFallbackAutoScroll),Be(document,"mousemove",this._handleFallbackAutoScroll)),EC(),Sd(),AB()},nulling:function(){cu=Vg=Hl=zg=Bl=mf=_f=null,Bt.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var s=this,r=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(r,o);if(cu=t,i||this.options.forceAutoScrollFallback||rh||ar||gc){vf(t,this.options,a,i);var l=wr(a,!0);zg&&(!Bl||r!==mf||o!==_f)&&(Bl&&EC(),Bl=setInterval(function(){var c=wr(document.elementFromPoint(r,o),!0);c!==l&&(l=c,Sd()),vf(t,s.options,c,i)},10),mf=r,_f=o)}else{if(!this.options.bubbleScroll||wr(a,!0)===cn()){Sd();return}vf(t,this.options,wr(a,!1),!1)}}},Qn(n,{pluginName:"scroll",initializeByDefault:!0})}function Sd(){Bt.forEach(function(n){clearInterval(n.pid)}),Bt=[]}function EC(){clearInterval(Bl)}var vf=CA(function(n,e,t,i){if(e.scroll){var s=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=cn(),c=!1,h;Vg!==t&&(Vg=t,Sd(),Hl=e.scroll,h=e.scrollFn,Hl===!0&&(Hl=wr(t,!0)));var d=0,u=Hl;do{var p=u,f=Wt(p),g=f.top,m=f.bottom,_=f.left,b=f.right,C=f.width,v=f.height,y=void 0,S=void 0,A=p.scrollWidth,P=p.scrollHeight,F=Se(p),H=p.scrollLeft,W=p.scrollTop;p===l?(y=C<A&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),S=v<P&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(y=C<A&&(F.overflowX==="auto"||F.overflowX==="scroll"),S=v<P&&(F.overflowY==="auto"||F.overflowY==="scroll"));var J=y&&(Math.abs(b-s)<=o&&H+C<A)-(Math.abs(_-s)<=o&&!!H),Y=S&&(Math.abs(m-r)<=o&&W+v<P)-(Math.abs(g-r)<=o&&!!W);if(!Bt[d])for(var ae=0;ae<=d;ae++)Bt[ae]||(Bt[ae]={});(Bt[d].vx!=J||Bt[d].vy!=Y||Bt[d].el!==p)&&(Bt[d].el=p,Bt[d].vx=J,Bt[d].vy=Y,clearInterval(Bt[d].pid),(J!=0||Y!=0)&&(c=!0,Bt[d].pid=setInterval((function(){i&&this.layer===0&&ve.active._onTouchMove(cu);var ue=Bt[this.layer].vy?Bt[this.layer].vy*a:0,te=Bt[this.layer].vx?Bt[this.layer].vx*a:0;typeof h=="function"&&h.call(ve.dragged.parentNode[Ui],te,ue,n,cu,Bt[this.layer].el)!=="continue"||yA(Bt[this.layer].el,te,ue)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&u!==l&&(u=wr(u,!1)));zg=c}},30),xA=function(e){var t=e.originalEvent,i=e.putSortable,s=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=i||r;a();var h=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function W_(){}W_.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=Qa(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(t,s):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:xA};Qn(W_,{pluginName:"revertOnSpill"});function U_(){}U_.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,s=i||this.sortable;s.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),s.animateAll()},drop:xA};Qn(U_,{pluginName:"removeOnSpill"});ve.mount(new UB);ve.mount(U_,W_);function TC(n){let{containerElement:e}=n;const{onDragInit:t,onDragStart:i,onDrag:s,onDragEnd:r,preventDragFromKeys:o}=n;let a,l,c,h,d,u;e||(e=document.body);let p={dragSource:e,dragHandle:null};function f(){e&&(e.addEventListener("mousedown",b),e.addEventListener("touchstart",b))}function g(y,S,A){if(typeof y=="function")return y(S,A)}function m(){e&&(e.removeEventListener("mousedown",b),e.removeEventListener("touchstart",b))}function _(y){let S=!1;return o&&o.forEach(A=>{y[A]&&(S=!0)}),S}function b(y){var S;if(a=y.target,!_(y)){const A=((S=y==null?void 0:y.touches)==null?void 0:S[0])??y,{target:P}=A;if(!n.allowDragFrom||n.allowDragFrom&&a.matches(n.allowDragFrom)||n.allowDragFromClosest&&a.closest(n.allowDragFromClosest)){p.dragHandle=a;const F=eA();l=F.left+A.clientX,c=F.top+A.clientY,h=A.clientX-A.clientX,d=A.clientY-A.clientY,p=Object.assign(p,{deltaX:h,deltaY:d,startX:l,startY:c,target:P}),g(t,y,p)!==!1&&(document.body.addEventListener("mousemove",C),document.body.addEventListener("touchmove",C),document.body.addEventListener("mouseup",v),document.body.addEventListener("touchend",v),document.body.addEventListener("touchcancel",v))}}}function C(y){var A;const S=((A=y==null?void 0:y.touches)==null?void 0:A[0])??y;if(!_(y)){h=S.clientX-l,d=S.clientY-c;const{target:P}=S;u||(p=Object.assign(p,{deltaX:h,deltaY:d,startX:l,startY:c,target:P}),g(i,y,p),u=!0),p=Object.assign(p,{deltaX:h,deltaY:d,startX:l,startY:c,target:P}),g(s,y,p)}}function v(y){if(document.body.removeEventListener("mousemove",C),document.body.removeEventListener("touchmove",C),document.body.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v),document.body.removeEventListener("touchcancel",v),u){const{target:S}=y;p=Object.assign(p,{target:S}),g(r,y,p),u=!1}}return f(),{destroy:m}}function AC(n){const{element:e,onMouseWheel:t}=n;function i(){e.removeEventListener("wheel",r),e.removeEventListener("mousewheel",r)}function s(){e.addEventListener("wheel",r),e.addEventListener("mousewheel",r)}function r(o){const a=o||window.event;let l=0,c=0,h=0;a.wheelDelta&&(l=a.wheelDelta/120),a.detail&&(l=-a.detail/3),h=l,a.axis!==void 0&&a.axis===a.HORIZONTAL_AXIS&&(h=0,c=-1*l),a.wheelDeltaY!==void 0&&(h=a.wheelDeltaY/120),a.wheelDeltaX!==void 0&&(c=-1*a.wheelDeltaX/120),typeof t=="function"&&t(o,l,c,h)}return s(),{destroy:i}}function GB(n){const{resizeableElement:e,resizeableHandleElement:t,onResizeStart:i,onResize:s,onResizeEnd:r}=n;if(!t||typeof t.addEventListener!="function")throw new Error("[SlickResizable] You did not provide a valid html element that will be used for the handle to resize.");function o(){t.addEventListener("mousedown",c),t.addEventListener("touchstart",c)}function a(){typeof(t==null?void 0:t.removeEventListener)=="function"&&(t.removeEventListener("mousedown",c),t.removeEventListener("touchstart",c))}function l(u,p){if(typeof u=="function")return u(p,{resizeableElement:e,resizeableHandleElement:t})}function c(u){u.preventDefault();const p=u.touches?u.changedTouches[0]:u;l(i,p)!==!1&&(document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseup",d),document.body.addEventListener("touchmove",h),document.body.addEventListener("touchend",d))}function h(u){u.preventDefault&&u.type!=="touchmove"&&u.preventDefault();const p=u.touches?u.changedTouches[0]:u;typeof s=="function"&&s(p,{resizeableElement:e,resizeableHandleElement:t})}function d(u){const p=u.touches?u.changedTouches[0]:u;l(r,p),document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseup",d),document.body.removeEventListener("touchmove",h),document.body.removeEventListener("touchend",d)}return o(),{destroy:a}}class jB{constructor(e,t,i,s,r){if(this.container=e,this.data=t,this.columns=i,this.externalPubSub=r,this.canvas=null,this.canvas_context=null,this._defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableHtmlRendering:!0,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoEditNewRow:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,unorderableColumnCssClass:"unorderable",asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,columnResizingDelay:300,nonce:"",editorLock:nu,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,createTopHeaderPanel:!1,showPreHeaderPanel:!1,showTopHeaderPanel:!1,preHeaderPanelHeight:25,preHeaderPanelWidth:"auto",topHeaderPanelHeight:25,topHeaderPanelWidth:"auto",showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",rowHighlightCssClass:"highlight-animate",rowHighlightDuration:400,selectedCellCssClass:"selected",multiSelect:!0,enableCellRowSpan:!1,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:this.defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,preventDragFromKeys:["ctrlKey","metaKey"],showCellSelection:!0,viewportClass:void 0,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,rowTopOffsetRenderType:"top",scrollRenderThrottling:10,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,maxPartialRowSpanRemap:5e3,sanitizer:void 0,mixinDefaults:!1,shadowRoot:void 0},this._columnDefaults={name:"",headerCssClass:null,defaultSortAsc:!0,focusable:!0,hidden:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,reorderable:!0,resizable:!0,sortable:!1,selectable:!0},this.page=0,this.offset=0,this.vScrollDir=1,this._bindingEventService=new as,this.initialized=!1,this.uid=`slickgrid_${Math.round(1e6*Math.random())}`,this._groupHeaders=[],this._headerScroller=[],this._headers=[],this._boundAncestors=[],this.viewportH=0,this.viewportW=0,this.canvasWidth=0,this.canvasWidthL=0,this.canvasWidthR=0,this.headersWidth=0,this.headersWidthL=0,this.headersWidthR=0,this.viewportHasHScroll=!1,this.viewportHasVScroll=!1,this.headerColumnWidthDiff=0,this.headerColumnHeightDiff=0,this.cellWidthDiff=0,this.cellHeightDiff=0,this.hasFrozenRows=!1,this.frozenRowsHeight=0,this.actualFrozenRow=-1,this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.topPanelH=0,this.headerRowH=0,this.footerRowH=0,this.tabbingDirection=1,this.activeCellNode=null,this.currentEditor=null,this._prevDataLength=0,this._prevInvalidatedRowsCount=0,this._rowSpanIsCached=!1,this._colsWithRowSpanCache={},this.rowsCache={},this.renderedRows=0,this.numVisibleRows=0,this.prevScrollTop=0,this.scrollHeight=0,this.scrollTop=0,this.lastRenderedScrollTop=0,this.lastRenderedScrollLeft=0,this.prevScrollLeft=0,this.scrollLeft=0,this.selectedRows=[],this.plugins=[],this.cellCssClasses={},this.columnsById={},this.sortColumns=[],this.columnPosLeft=[],this.columnPosRight=[],this.pagingActive=!1,this.pagingIsLastPage=!1,this.postProcessedRows={},this.postProcessToRow=null,this.postProcessFromRow=null,this.postProcessedCleanupQueue=[],this.postProcessgroupId=0,this.counter_rows_rendered=0,this.counter_rows_removed=0,this.cssShow={position:"absolute",visibility:"hidden",display:"block"},this._hiddenParents=[],this.oldProps=[],this.enforceFrozenRowHeightRecalc=!1,this.columnResizeDragging=!1,this.slickDraggableInstance=null,this.slickMouseWheelInstances=[],this.slickResizableInstances=[],this._container=typeof this.container=="string"?document.querySelector(this.container):this.container,!this._container)throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);this._pubSubService=r,this.onActiveCellChanged=new K("onActiveCellChanged",r),this.onActiveCellPositionChanged=new K("onActiveCellPositionChanged",r),this.onAddNewRow=new K("onAddNewRow",r),this.onAfterSetColumns=new K("onAfterSetColumns",r),this.onAutosizeColumns=new K("onAutosizeColumns",r),this.onBeforeAppendCell=new K("onBeforeAppendCell",r),this.onBeforeCellEditorDestroy=new K("onBeforeCellEditorDestroy",r),this.onBeforeColumnsResize=new K("onBeforeColumnsResize",r),this.onBeforeDestroy=new K("onBeforeDestroy",r),this.onBeforeEditCell=new K("onBeforeEditCell",r),this.onBeforeFooterRowCellDestroy=new K("onBeforeFooterRowCellDestroy",r),this.onBeforeHeaderCellDestroy=new K("onBeforeHeaderCellDestroy",r),this.onBeforeHeaderRowCellDestroy=new K("onBeforeHeaderRowCellDestroy",r),this.onBeforeRemoveCachedRow=new K("onRowRemovedFromCache",r),this.onBeforeSetColumns=new K("onBeforeSetColumns",r),this.onBeforeSort=new K("onBeforeSort",r),this.onBeforeUpdateColumns=new K("onBeforeUpdateColumns",r),this.onCellChange=new K("onCellChange",r),this.onCellCssStylesChanged=new K("onCellCssStylesChanged",r),this.onClick=new K("onClick",r),this.onColumnsReordered=new K("onColumnsReordered",r),this.onColumnsDrag=new K("onColumnsDrag",r),this.onColumnsResized=new K("onColumnsResized",r),this.onColumnsResizeDblClick=new K("onColumnsResizeDblClick",r),this.onCompositeEditorChange=new K("onCompositeEditorChange",r),this.onContextMenu=new K("onContextMenu",r),this.onDblClick=new K("onDblClick",r),this.onDrag=new K("onDrag",r),this.onDragInit=new K("onDragInit",r),this.onDragStart=new K("onDragStart",r),this.onDragEnd=new K("onDragEnd",r),this.onFooterClick=new K("onFooterClick",r),this.onFooterContextMenu=new K("onFooterContextMenu",r),this.onFooterRowCellRendered=new K("onFooterRowCellRendered",r),this.onHeaderCellRendered=new K("onHeaderCellRendered",r),this.onHeaderClick=new K("onHeaderClick",r),this.onHeaderContextMenu=new K("onHeaderContextMenu",r),this.onHeaderMouseEnter=new K("onHeaderMouseEnter",r),this.onHeaderMouseLeave=new K("onHeaderMouseLeave",r),this.onHeaderMouseOver=new K("onHeaderMouseOver",r),this.onHeaderMouseOut=new K("onHeaderMouseOut",r),this.onHeaderRowMouseOver=new K("onHeaderRowMouseOver",r),this.onHeaderRowMouseOut=new K("onHeaderRowMouseOut",r),this.onHeaderRowCellRendered=new K("onHeaderRowCellRendered",r),this.onHeaderRowMouseEnter=new K("onHeaderRowMouseEnter",r),this.onHeaderRowMouseLeave=new K("onHeaderRowMouseLeave",r),this.onKeyDown=new K("onKeyDown",r),this.onMouseEnter=new K("onMouseEnter",r),this.onMouseLeave=new K("onMouseLeave",r),this.onPreHeaderClick=new K("onPreHeaderClick",r),this.onPreHeaderContextMenu=new K("onPreHeaderContextMenu",r),this.onRendered=new K("onRendered",r),this.onScroll=new K("onScroll",r),this.onSelectedRowsChanged=new K("onSelectedRowsChanged",r),this.onSetOptions=new K("onSetOptions",r),this.onActivateChangedOptions=new K("onActivateChangedOptions",r),this.onSort=new K("onSort",r),this.onValidationError=new K("onValidationError",r),this.onViewportChanged=new K("onViewportChanged",r),this.initialize(s)}init(){!this._options.silenceWarnings&&document.body.style.zoom&&document.body.style.zoom!=="100%"&&console.warn("[Slickgrid] Zoom level other than 100% is not supported by the library and will give subpar experience. SlickGrid relies on the `rowHeight` grid option to do row positioning & calculation and when zoom is not 100% then calculation becomes all offset."),this.finishInitialization()}applyHtmlCode(e,t="",i){if(e)if(t instanceof HTMLElement||t instanceof DocumentFragment)(i==null?void 0:i.emptyTarget)!==!1&&tt(e),e.appendChild(t);else{if((i==null?void 0:i.skipEmptyReassignment)!==!1&&!Le(t)&&!e.innerHTML)return;if(typeof t=="number"||typeof t=="boolean")e.textContent=String(t);else{const r=this.sanitizeHtmlString(t);this._options.enableHtmlRendering&&r?e.innerHTML=r:e.textContent=r}}}initialize(e){e!=null&&e.mixinDefaults?(this._options||(this._options=e),k.applyDefaults(this._options,this._defaults)):this._options=Qt(!0,{},this._defaults,e),this.scrollThrottle=this.actionThrottle(this.render.bind(this),this._options.scrollRenderThrottling),this.maxSupportedCssHeight=this.maxSupportedCssHeight||this.getMaxSupportedCssHeight(),this.validateAndEnforceOptions(),this._columnDefaults.width=this._options.defaultColumnWidth,this._options.suppressCssChangesOnHiddenInit||this.cacheCssForHiddenInit(),this.updateColumnProps(),this.editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},tt(this._container),this._container.style.outline=String(0),this._container.classList.add(this.uid),this._container.classList.add("slick-widget"),this._container.setAttribute("role","grid");const t=window.getComputedStyle(this._container);/relative|absolute|fixed/.test(t.position)||(this._container.style.position="relative"),this._focusSink=I("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},this._container),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller=I("div",{className:"slick-topheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._container),this._topHeaderPanelScroller.appendChild(document.createElement("div")),this._topHeaderPanel=I("div",null,this._topHeaderPanelScroller),this._topHeaderPanelSpacer=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._topHeaderPanelScroller),this._options.showTopHeaderPanel||k.hide(this._topHeaderPanelScroller)),this._paneHeaderL=I("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},this._container),this._paneHeaderR=I("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},this._container),this._paneTopL=I("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},this._container),this._paneTopR=I("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},this._container),this._paneBottomL=I("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},this._container),this._paneBottomR=I("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},this._container),this._options.createPreHeaderPanel&&(this._preHeaderPanelScroller=I("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderL),this._preHeaderPanelScroller.appendChild(document.createElement("div")),this._preHeaderPanel=I("div",null,this._preHeaderPanelScroller),this._preHeaderPanelSpacer=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScroller),this._preHeaderPanelScrollerR=I("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderR),this._preHeaderPanelR=I("div",null,this._preHeaderPanelScrollerR),this._preHeaderPanelSpacerR=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScrollerR),this._options.showPreHeaderPanel||(k.hide(this._preHeaderPanelScroller),k.hide(this._preHeaderPanelScrollerR))),this._headerScrollerL=I("div",{className:"slick-header slick-state-default slick-header-left"},this._paneHeaderL),this._headerScrollerR=I("div",{className:"slick-header slick-state-default slick-header-right"},this._paneHeaderR),this._headerScroller.push(this._headerScrollerL),this._headerScroller.push(this._headerScrollerR),this._headerL=I("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},this._headerScrollerL),this._headerR=I("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},this._headerScrollerR),this._headers=[this._headerL,this._headerR],this._headerRowScrollerL=I("div",{className:"slick-headerrow slick-state-default"},this._paneTopL),this._headerRowScrollerR=I("div",{className:"slick-headerrow slick-state-default"},this._paneTopR),this._headerRowScroller=[this._headerRowScrollerL,this._headerRowScrollerR],this._headerRowSpacerL=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerL),this._headerRowSpacerR=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerR),this._headerRowL=I("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},this._headerRowScrollerL),this._headerRowR=I("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},this._headerRowScrollerR),this._headerRows=[this._headerRowL,this._headerRowR],this._topPanelScrollerL=I("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopL),this._topPanelScrollerR=I("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopR),this._topPanelScrollers=[this._topPanelScrollerL,this._topPanelScrollerR],this._topPanelL=I("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerL),this._topPanelR=I("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerR),this._topPanels=[this._topPanelL,this._topPanelR],this._options.showColumnHeader||this._headerScroller.forEach(i=>{k.hide(i)}),this._options.showTopPanel||this._topPanelScrollers.forEach(i=>{k.hide(i)}),this._options.showHeaderRow||this._headerRowScroller.forEach(i=>{k.hide(i)}),this._viewportTopL=I("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},this._paneTopL),this._viewportTopR=I("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},this._paneTopR),this._viewportBottomL=I("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},this._paneBottomL),this._viewportBottomR=I("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},this._paneBottomR),this._viewport=[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR],this._options.viewportClass&&this._viewport.forEach(i=>{i.classList.add(...ht(this._options.viewportClass))}),this._activeViewportNode=this._viewportTopL,this._canvasTopL=I("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},this._viewportTopL),this._canvasTopR=I("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},this._viewportTopR),this._canvasBottomL=I("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},this._viewportBottomL),this._canvasBottomR=I("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},this._viewportBottomR),this._canvas=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR],this.scrollbarDimensions=this.scrollbarDimensions||this.measureScrollbar(),this._activeCanvasNode=this._canvasTopL,this._topHeaderPanelSpacer&&k.width(this._topHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._preHeaderPanelSpacer&&k.width(this._preHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._headers.forEach(i=>{k.width(i,this.getHeadersWidth())}),k.width(this._headerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),k.width(this._headerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._options.createFooterRow&&(this._footerRowScrollerR=I("div",{className:"slick-footerrow slick-state-default"},this._paneTopR),this._footerRowScrollerL=I("div",{className:"slick-footerrow slick-state-default"},this._paneTopL),this._footerRowScroller=[this._footerRowScrollerL,this._footerRowScrollerR],this._footerRowSpacerL=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerL),k.width(this._footerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowSpacerR=I("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerR),k.width(this._footerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowL=I("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},this._footerRowScrollerL),this._footerRowR=I("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},this._footerRowScrollerR),this._footerRow=[this._footerRowL,this._footerRowR],this._options.showFooterRow||this._footerRowScroller.forEach(i=>{k.hide(i)})),this._focusSink2=this._focusSink.cloneNode(!0),this._container.appendChild(this._focusSink2),this._options.explicitInitialization||this.finishInitialization()}finishInitialization(){this.initialized||(this.initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),this.disableSelection(this._headers),this._options.enableTextSelectionOnCells||this._viewport.forEach(e=>{this._bindingEventService.bind(e,"selectstart",t=>{t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement})}),this.setFrozenOptions(),this.setPaneFrozenClasses(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateColumnCaches(),this.createColumnHeaders(),this.createColumnFooter(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._bindingEventService.bind(this._container,"resize",this.resizeCanvas.bind(this)),this._viewport.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleScroll.bind(this))}),this._options.enableMouseWheelScrollHandler&&this._viewport.forEach(e=>{this.slickMouseWheelInstances.push(AC({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))}),this._headerScroller.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleHeaderContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleHeaderClick.bind(this))}),this._headerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleHeaderRowScroll.bind(this))}),this._options.createFooterRow&&(this._footerRow.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleFooterContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleFooterClick.bind(this))}),this._footerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleFooterRowScroll.bind(this))})),this._options.createTopHeaderPanel&&this._bindingEventService.bind(this._topHeaderPanelScroller,"scroll",this.handleTopHeaderPanelScroll.bind(this)),this._options.createPreHeaderPanel&&(this._bindingEventService.bind(this._preHeaderPanelScroller,"scroll",this.handlePreHeaderPanelScroll.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"contextmenu",this.handlePreHeaderContextMenu.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"click",this.handlePreHeaderClick.bind(this))),this._bindingEventService.bind(this._focusSink,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(this._focusSink2,"keydown",this.handleKeyDown.bind(this)),this._canvas.forEach(e=>{this._bindingEventService.bind(e,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(e,"click",this.handleClick.bind(this)),this._bindingEventService.bind(e,"dblclick",this.handleDblClick.bind(this)),this._bindingEventService.bind(e,"contextmenu",this.handleContextMenu.bind(this)),this._bindingEventService.bind(e,"mouseover",this.handleCellMouseOver.bind(this)),this._bindingEventService.bind(e,"mouseout",this.handleCellMouseOut.bind(this))}),TC&&(this.slickDraggableInstance=TC({containerElement:this._container,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",preventDragFromKeys:this._options.preventDragFromKeys,onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)})),this._options.suppressCssChangesOnHiddenInit||this.restoreCssFromHiddenInit())}cacheCssForHiddenInit(){this._hiddenParents=k.parents(this._container,":hidden"),this.oldProps=[],this._hiddenParents.forEach(e=>{const t={};Object.keys(this.cssShow).forEach(i=>{this.cssShow&&(t[i]=e.style[i],e.style[i]=this.cssShow[i])}),this.oldProps.push(t)})}restoreCssFromHiddenInit(){let e=0;this._hiddenParents&&(this._hiddenParents.forEach(t=>{const i=this.oldProps[e++];Object.keys(this.cssShow).forEach(s=>{this.cssShow&&(t.style[s]=i[s])})}),this._hiddenParents=[])}hasFrozenColumns(){return this._options.frozenColumn>-1}registerPlugin(e){this.plugins.unshift(e),e.init(this)}unregisterPlugin(e){var t;for(let i=this.plugins.length;i>=0;i--)if(this.plugins[i]===e){(t=this.plugins[i])==null||t.destroy(),this.plugins.splice(i,1);break}}getPluginByName(e){var t;for(let i=this.plugins.length-1;i>=0;i--)if(((t=this.plugins[i])==null?void 0:t.pluginName)===e)return this.plugins[i]}getPubSubService(){return this._pubSubService}setSelectionModel(e){this.selectionModel&&(this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this)),this.selectionModel.destroy&&this.selectionModel.destroy()),this.selectionModel=e,this.selectionModel&&(this.selectionModel.init(this),this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this)))}getSelectionModel(){return this.selectionModel}getCanvasNode(e,t){return this._getContainerElement(this.getCanvases(),e,t)}getActiveCanvasNode(e){var t;return e===void 0?this._activeCanvasNode:(e instanceof Ot&&(e=e.getNativeEvent()),this._activeCanvasNode=(t=e==null?void 0:e.target)==null?void 0:t.closest(".grid-canvas"),this._activeCanvasNode)}getCanvases(){return this._canvas}getViewportNode(e,t){return this._getContainerElement(this.getViewports(),e,t)}getViewports(){return this._viewport}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){var t;return e instanceof Ot&&(e=e.getNativeEvent()),this._activeViewportNode=(t=e==null?void 0:e.target)==null?void 0:t.closest(".slick-viewport"),this._activeViewportNode}_getContainerElement(e,t,i){if(!e)return;t||(t=0),i||(i=0);const s=typeof t=="number"?t:this.getColumnIndex(t),r=this.hasFrozenRows&&i>=this.actualFrozenRow+(this._options.frozenBottom?0:1),o=this.hasFrozenColumns()&&s>this._options.frozenColumn;return e[(r?2:0)+(o?1:0)]}measureScrollbar(){let e="";this._viewport.forEach(r=>e+=r.className);const t=I("div",{className:e,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),i=I("div",{style:{width:"200px",height:"200px",overflow:"auto"}},t),s={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return i.remove(),t.remove(),s}getHeadersWidth(){var s,r,o,a;this.headersWidth=this.headersWidthL=this.headersWidthR=0;const e=!this._options.autoHeight;let t=0;const i=this.columns.length;for(t=0;t<i;t++){if(!this.columns[t]||this.columns[t].hidden)continue;const l=this.columns[t].width;this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=l||0:this.headersWidthL+=l||0}return e&&(this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=((s=this.scrollbarDimensions)==null?void 0:s.width)||0:this.headersWidthL+=((r=this.scrollbarDimensions)==null?void 0:r.width)||0),this.hasFrozenColumns()?(this.headersWidthL=this.headersWidthL+1e3,this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.headersWidthL,this.headersWidthR+=((o=this.scrollbarDimensions)==null?void 0:o.width)||0):(this.headersWidthL+=((a=this.scrollbarDimensions)==null?void 0:a.width)||0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidth=this.headersWidthL+this.headersWidthR,Math.max(this.headersWidth,this.viewportW)+1e3}getCanvasWidth(){const e=this.getViewportInnerWidth();let t=this.columns.length;for(this.canvasWidthL=this.canvasWidthR=0;t--;)!this.columns[t]||this.columns[t].hidden||(this.hasFrozenColumns()&&t>this._options.frozenColumn?this.canvasWidthR+=this.columns[t].width||0:this.canvasWidthL+=this.columns[t].width||0);let i=this.canvasWidthL+this.canvasWidthR;if(this._options.fullWidthRows){const s=Math.max(i,e)-i;s>0&&(i+=s,this.hasFrozenColumns()?this.canvasWidthR+=s:this.canvasWidthL+=s)}return i}updateCanvasWidth(e){var o,a,l,c,h;const t=this.canvasWidth,i=this.canvasWidthL,s=this.canvasWidthR;this.canvasWidth=this.getCanvasWidth(),this._options.createTopHeaderPanel&&k.width(this._topHeaderPanel,this._options.topHeaderPanelWidth??this.canvasWidth);const r=this.canvasWidth!==t||this.canvasWidthL!==i||this.canvasWidthR!==s;if(r||this.hasFrozenColumns()||this.hasFrozenRows)if(k.width(this._canvasTopL,this.canvasWidthL),this.getHeadersWidth(),k.width(this._headerL,this.headersWidthL),k.width(this._headerR,this.headersWidthR),this.hasFrozenColumns()){const d=k.width(this._container)||0;if(d>0&&this.canvasWidthL>d&&this._options.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");k.width(this._canvasTopR,this.canvasWidthR),k.width(this._paneHeaderL,this.canvasWidthL),k.setStyleSize(this._paneHeaderR,"left",this.canvasWidthL),k.setStyleSize(this._paneHeaderR,"width",this.viewportW-this.canvasWidthL),k.width(this._paneTopL,this.canvasWidthL),k.setStyleSize(this._paneTopR,"left",this.canvasWidthL),k.width(this._paneTopR,this.viewportW-this.canvasWidthL),k.width(this._headerRowScrollerL,this.canvasWidthL),k.width(this._headerRowScrollerR,this.viewportW-this.canvasWidthL),k.width(this._headerRowL,this.canvasWidthL),k.width(this._headerRowR,this.canvasWidthR),this._options.createFooterRow&&(k.width(this._footerRowScrollerL,this.canvasWidthL),k.width(this._footerRowScrollerR,this.viewportW-this.canvasWidthL),k.width(this._footerRowL,this.canvasWidthL),k.width(this._footerRowR,this.canvasWidthR)),this._options.createPreHeaderPanel&&k.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),k.width(this._viewportTopL,this.canvasWidthL),k.width(this._viewportTopR,this.viewportW-this.canvasWidthL),this.hasFrozenRows&&(k.width(this._paneBottomL,this.canvasWidthL),k.setStyleSize(this._paneBottomR,"left",this.canvasWidthL),k.width(this._viewportBottomL,this.canvasWidthL),k.width(this._viewportBottomR,this.viewportW-this.canvasWidthL),k.width(this._canvasBottomL,this.canvasWidthL),k.width(this._canvasBottomR,this.canvasWidthR))}else k.width(this._paneHeaderL,"100%"),k.width(this._paneTopL,"100%"),k.width(this._headerRowScrollerL,"100%"),k.width(this._headerRowL,this.canvasWidth),this._options.createFooterRow&&(k.width(this._footerRowScrollerL,"100%"),k.width(this._footerRowL,this.canvasWidth)),this._options.createPreHeaderPanel&&k.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),k.width(this._viewportTopL,"100%"),this.hasFrozenRows&&(k.width(this._viewportBottomL,"100%"),k.width(this._canvasBottomL,this.canvasWidthL));this.viewportHasHScroll=this.canvasWidth>=this.viewportW-(((o=this.scrollbarDimensions)==null?void 0:o.width)||0),k.width(this._headerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&((a=this.scrollbarDimensions)==null?void 0:a.width)||0)),k.width(this._headerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&((l=this.scrollbarDimensions)==null?void 0:l.width)||0)),this._options.createFooterRow&&(k.width(this._footerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&((c=this.scrollbarDimensions)==null?void 0:c.width)||0)),k.width(this._footerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&((h=this.scrollbarDimensions)==null?void 0:h.width)||0))),(r||e)&&this.applyColumnWidths()}disableSelection(e){e.forEach(t=>{t.setAttribute("unselectable","on"),t.style.mozUserSelect="none",this._bindingEventService.bind(t,"selectstart",()=>!1)})}getMaxSupportedCssHeight(){let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?this._options.ffMaxSupportedCssHeight:this._options.maxSupportedCssHeight,i=I("div",{style:{display:"hidden"}},document.body);let s=!0;for(;s;){const r=e*2;k.height(i,r);const o=k.height(i);if(r>t||o!==r){s=!1;break}else e=r}return i.remove(),e}getUID(){return this.uid}getHeaderColumnWidthDiff(){return this.headerColumnWidthDiff}getScrollbarDimensions(){return this.scrollbarDimensions}getDisplayedScrollbarDimensions(){var e,t;return{width:this.viewportHasVScroll&&((e=this.scrollbarDimensions)!=null&&e.width)?this.scrollbarDimensions.width:0,height:this.viewportHasHScroll&&((t=this.scrollbarDimensions)!=null&&t.height)?this.scrollbarDimensions.height:0}}getAbsoluteColumnMinWidth(){return this.absoluteColumnMinWidth}bindAncestorScrollEvents(){let e=this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;for(;(e=e.parentNode)!==document.body&&e;)(e===this._viewportTopL||e.scrollWidth!==e.clientWidth||e.scrollHeight!==e.clientHeight)&&(this._boundAncestors.push(e),this._bindingEventService.bind(e,"scroll",this.handleActiveCellPositionChange.bind(this)))}unbindAncestorScrollEvents(){this._boundAncestors.forEach(e=>{this._bindingEventService.unbindByEventName(e,"scroll")}),this._boundAncestors=[]}updateColumnHeader(e,t,i){if(this.initialized){const s=this.getColumnIndex(e);if(!Le(s))return;const r=this.columns[s],o=this.getColumnByIndex(s);return o&&(t!==void 0&&(this.columns[s].name=t),i!==void 0&&(this.columns[s].toolTip=i),this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:o,column:r,grid:this}),o.setAttribute("title",i||""),t!==void 0&&this.applyHtmlCode(o.children[0],t),this.triggerEvent(this.onHeaderCellRendered,{node:o,column:r,grid:this})),o}}getHeader(e){if(!e)return this.hasFrozenColumns()?this._headers:this._headerL;const t=this.getColumnIndex(e.id);return this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL}getHeaderColumn(e){const t=typeof e=="number"?e:this.getColumnIndex(e),i=this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,s=this.hasFrozenColumns()?t<=this._options.frozenColumn?t:t-this._options.frozenColumn-1:t;return i.children[s]}getHeaderRow(){var e;return this.hasFrozenColumns()?this._headerRows:(e=this._headerRows)==null?void 0:e[0]}getFooterRow(){var e;return this.hasFrozenColumns()?this._footerRow:(e=this._footerRow)==null?void 0:e[0]}getPreHeaderPanel(){return this._preHeaderPanel}getPreHeaderPanelLeft(){return this._preHeaderPanel}getPreHeaderPanelRight(){return this._preHeaderPanelR}getTopHeaderPanel(){return this._topHeaderPanel}getHeaderRowColumn(e){let t=typeof e=="number"?e:this.getColumnIndex(e),i;return this.hasFrozenColumns()?t<=this._options.frozenColumn?i=this._headerRowL:(i=this._headerRowR,t-=this._options.frozenColumn+1):i=this._headerRowL,i.children[t]}getFooterRowColumn(e){let t=typeof e=="number"?e:this.getColumnIndex(e),i;return this.hasFrozenColumns()?t<=this._options.frozenColumn?i=this._footerRowL:(i=this._footerRowR,t-=this._options.frozenColumn+1):i=this._footerRowL,i==null?void 0:i.children[t]}createColumnFooter(){if(this._options.createFooterRow){this._footerRow.forEach(e=>{e.querySelectorAll(".slick-footerrow-column").forEach(i=>{const s=k.storage.get(i,"column");this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:i,column:s,grid:this})})}),tt(this._footerRowL),tt(this._footerRowR);for(let e=0;e<this.columns.length;e++){const t=this.columns[e];if(!t||t.hidden)continue;const i=I("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()&&e>this._options.frozenColumn?this._footerRowR:this._footerRowL),s=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;s&&i.classList.add(s),k.storage.put(i,"column",t),this.triggerEvent(this.onFooterRowCellRendered,{node:i,column:t,grid:this})}}}handleHeaderMouseHoverOn(e){e==null||e.target.classList.add("slick-state-hover")}handleHeaderMouseHoverOff(e){e==null||e.target.classList.remove("slick-state-hover")}createColumnHeaders(){this._headers.forEach(e=>{e.querySelectorAll(".slick-header-column").forEach(i=>{const s=k.storage.get(i,"column");s&&this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:i,column:s,grid:this})})}),tt(this._headerL),tt(this._headerR),this.getHeadersWidth(),k.width(this._headerL,this.headersWidthL),k.width(this._headerR,this.headersWidthR),this._headerRows.forEach(e=>{e.querySelectorAll(".slick-headerrow-column").forEach(i=>{const s=k.storage.get(i,"column");s&&this.triggerEvent(this.onBeforeHeaderRowCellDestroy,{node:this,column:s,grid:this})})}),tt(this._headerRowL),tt(this._headerRowR),this._options.createFooterRow&&(this._footerRowL.querySelectorAll(".slick-footerrow-column").forEach(t=>{const i=k.storage.get(t,"column");i&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:i,grid:this})}),tt(this._footerRowL),this.hasFrozenColumns()&&(this._footerRowR.querySelectorAll(".slick-footerrow-column").forEach(i=>{const s=k.storage.get(i,"column");s&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:s,grid:this})}),tt(this._footerRowR)));for(let e=0;e<this.columns.length;e++){const t=this.columns[e];if(!t||t.hidden)continue;const i=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,s=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerRowL:this._headerRowR:this._headerRowL,r=I("div",{id:`${this.uid+t.id}`,dataset:{id:String(t.id)},role:"columnheader",className:"slick-state-default slick-header-column"},i);t.toolTip&&(r.title=t.toolTip),t.reorderable||r.classList.add(this._options.unorderableColumnCssClass);const o=I("span",{className:"slick-column-name"},r);this.applyHtmlCode(o,t.name),k.width(r,t.width-this.headerColumnWidthDiff);let a=t.headerCssClass||null;if(a&&r.classList.add(...ht(a)),a=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null,a&&r.classList.add(a),this._bindingEventService.bind(r,"mouseenter",this.handleHeaderMouseEnter.bind(this)),this._bindingEventService.bind(r,"mouseleave",this.handleHeaderMouseLeave.bind(this)),this._bindingEventService.bind(r,"mouseover",this.handleHeaderMouseOver.bind(this)),this._bindingEventService.bind(r,"mouseout",this.handleHeaderMouseOut.bind(this)),k.storage.put(r,"column",t),(this._options.enableColumnReorder||t.sortable)&&(this._bindingEventService.bind(r,"mouseenter",this.handleHeaderMouseHoverOn.bind(this)),this._bindingEventService.bind(r,"mouseleave",this.handleHeaderMouseHoverOff.bind(this))),t.hasOwnProperty("headerCellAttrs")&&t.headerCellAttrs instanceof Object&&Object.keys(t.headerCellAttrs).forEach(l=>{t.headerCellAttrs.hasOwnProperty(l)&&r.setAttribute(l,t.headerCellAttrs[l])}),t.sortable&&(r.classList.add("slick-header-sortable"),I("div",{className:`slick-sort-indicator ${this._options.numberedMultiColumnSort&&!this._options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":""}`},r),this._options.numberedMultiColumnSort&&this._options.sortColNumberInSeparateSpan&&I("div",{className:"slick-sort-indicator-numbered"},r)),this.triggerEvent(this.onHeaderCellRendered,{node:r,column:t,grid:this}),this._options.showHeaderRow){const l=I("div",{className:`slick-state-default slick-headerrow-column l${e} r${e}`},s),c=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;c&&l.classList.add(c),this._bindingEventService.bind(l,"mouseenter",this.handleHeaderRowMouseEnter.bind(this)),this._bindingEventService.bind(l,"mouseleave",this.handleHeaderRowMouseLeave.bind(this)),this._bindingEventService.bind(l,"mouseover",this.handleHeaderRowMouseOver.bind(this)),this._bindingEventService.bind(l,"mouseout",this.handleHeaderRowMouseOut.bind(this)),k.storage.put(l,"column",t),this.triggerEvent(this.onHeaderRowCellRendered,{node:l,column:t,grid:this})}if(this._options.createFooterRow&&this._options.showFooterRow){const l=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._footerRow[0]:this._footerRow[1]:this._footerRow[0],c=I("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},l);k.storage.put(c,"column",t),this.triggerEvent(this.onFooterRowCellRendered,{node:c,column:t,grid:this})}}this.setSortColumns(this.sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&(typeof this._options.enableColumnReorder=="function"?this._options.enableColumnReorder(this,this._headers,this.headerColumnWidthDiff,this.setColumns,this.setupColumnResize,this.columns,this.getColumnIndex,this.uid,this.triggerEvent):this.setupColumnReorder())}setupColumnSort(){this._headers.forEach(e=>{this._bindingEventService.bind(e,"click",t=>{var r;if(this.columnResizeDragging||t.target.classList.contains("slick-resizable-handle"))return;const i=t.target.closest(".slick-header-column");if(!i)return;const s=k.storage.get(i,"column");if(s!=null&&s.sortable){if(!((r=this.getEditorLock())!=null&&r.commitCurrentEdit()))return;const o=this.sortColumns.slice();let a=null,l=0;for(;l<this.sortColumns.length;l++)if(this.sortColumns[l].columnId===s.id){a=this.sortColumns[l],a.sortAsc=!a.sortAsc;break}const c=!!a;this._options.tristateMultiColumnSort?(a||(a={columnId:s.id,sortAsc:s.defaultSortAsc,sortCol:s}),c&&a.sortAsc&&(this.sortColumns.splice(l,1),a=null),this._options.multiColumnSort||(this.sortColumns=[]),a&&(!c||!this._options.multiColumnSort)&&this.sortColumns.push(a)):t.metaKey&&this._options.multiColumnSort?a&&this.sortColumns.splice(l,1):((!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort)&&(this.sortColumns=[]),a?this.sortColumns.length===0&&this.sortColumns.push(a):(a={columnId:s.id,sortAsc:s.defaultSortAsc,sortCol:s},this.sortColumns.push(a)));let h;this._options.multiColumnSort?h={multiColumnSort:!0,previousSortColumns:o,sortCols:this.sortColumns.map(d=>{const u=this.columns[this.getColumnIndex(d.columnId)];return u&&!u.hidden?{columnId:u.id,sortCol:u,sortAsc:d.sortAsc}:null}).filter(d=>d)}:h={multiColumnSort:!1,previousSortColumns:o,columnId:this.sortColumns.length>0?s.id:null,sortCol:this.sortColumns.length>0?s:null,sortAsc:this.sortColumns.length>0?this.sortColumns[0].sortAsc:!0},this.triggerEvent(this.onBeforeSort,h,t).getReturnValue()!==!1&&(this.setSortColumns(this.sortColumns),this.triggerEvent(this.onSort,h,t))}})})}setupColumnReorder(){var o,a;(o=this.sortableSideLeftInstance)==null||o.destroy(),(a=this.sortableSideRightInstance)==null||a.destroy();let e;const t=()=>this._viewportScrollContainerX.scrollLeft+=10,i=()=>this._viewportScrollContainerX.scrollLeft-=10;let s=!1;const r={animation:50,direction:"horizontal",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),filter:`.${this._options.unorderableColumnCssClass}`,onMove:l=>!l.related.classList.contains(this._options.unorderableColumnCssClass),onStart:l=>{l.item.classList.add("slick-header-column-active"),s=!this.hasFrozenColumns()||Gt(l.item).left>Gt(this._viewportScrollContainerX).left,s&&l.originalEvent.pageX>this._container.clientWidth?e||(e=window.setInterval(t,100)):s&&l.originalEvent.pageX<Gt(this._viewportScrollContainerX).left?e||(e=window.setInterval(i,100)):window.clearInterval(e)},onEnd:l=>{var d,u,p;if(l.item.classList.remove("slick-header-column-active"),window.clearInterval(e),!((d=this.getEditorLock())!=null&&d.commitCurrentEdit()))return;let c=((u=this.sortableSideLeftInstance)==null?void 0:u.toArray())??[];c=c.concat(((p=this.sortableSideRightInstance)==null?void 0:p.toArray())??[]);const h=[];for(let f=0;f<c.length;f++)h.push(this.columns[this.getColumnIndex(c[f])]);this.setColumns(h),this.triggerEvent(this.onColumnsReordered,{impactedColumns:this.columns}),l.stopPropagation(),this.setupColumnResize(),this.activeCellNode&&this.setFocus()}};this.sortableSideLeftInstance=ve.create(this._headerL,r),this.sortableSideRightInstance=ve.create(this._headerR,r)}getHeaderChildren(){const e=Array.from(this._headers[0].children),t=Array.from(this._headers[1].children);return e.concat(t)}handleResizeableDoubleClick(e){const t=e.target.parentElement.id.replace(this.uid,"");this.triggerEvent(this.onColumnsResizeDblClick,{triggeredByColumn:t})}setupColumnResize(){var u;let e,t,i,s,r,o,a,l=-1,c=0;const h=this.getHeaderChildren(),d=this.getVisibleColumns();for(let p=0;p<h.length;p++)h[p].querySelectorAll(".slick-resizable-handle").forEach(m=>m.remove()),p<d.length&&((u=d[p])!=null&&u.resizable)&&(a===void 0&&(a=p),l=p);if(a!==void 0)for(let p=0;p<h.length;p++){const f=h[p];if(p>=d.length||!d[p]||p<a||this._options.forceFitColumns&&p>=l)continue;const g=I("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},f);this._bindingEventService.bind(g,"dblclick",this.handleResizeableDoubleClick.bind(this)),this.slickResizableInstances.push(GB({resizeableElement:f,resizeableHandleElement:g,onResizeStart:(m,_)=>{var A;const b=m.touches?m.changedTouches[0]:m;if(!((A=this.getEditorLock())!=null&&A.commitCurrentEdit()))return!1;s=b.pageX,c=0,_.resizeableElement.classList.add("slick-header-column-active");let C=null,v=null;for(let P=0;P<h.length;P++)P<d.length&&d[P]&&(d[P].previousWidth=h[P].offsetWidth);if(this._options.forceFitColumns)for(C=0,v=0,e=p+1;e<d.length;e++)i=d[e],i!=null&&i.resizable&&(v!==null&&(i.maxWidth?v+=i.maxWidth-(i.previousWidth||0):v=null),C+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));let y=0,S=0;for(e=0;e<=p;e++)i=d[e],i!=null&&i.resizable&&(S!==null&&(i.maxWidth?S+=i.maxWidth-(i.previousWidth||0):S=null),y+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));o=s+Math.min(C??1e5,S??1e5),r=s-Math.min(y??1e5,v??1e5)},onResize:(m,_)=>{const b=m.touches?m.changedTouches[0]:m;this.columnResizeDragging=!0;let C;const v=b.pageX,y=Math.min(o,Math.max(r,v))-s;let S,A=0,P=0;const F=this.getViewportInnerWidth();if(y<0){for(S=y,e=p;e>=0;e--)i=d[e],i&&i.resizable&&!i.hidden&&(C=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),S&&(i.previousWidth||0)+S<C?(S+=(i.previousWidth||0)-C,i.width=C):(i.width=(i.previousWidth||0)+S,S=0));for(t=0;t<=p;t++)i=d[t],i&&!i.hidden&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?P+=i.width||0:A+=i.width||0);if(this._options.forceFitColumns)for(S=-y,e=p+1;e<d.length;e++)i=d[e],i&&!i.hidden&&i.resizable&&(S&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<S?(S-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+S,S=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?P+=i.width||0:A+=i.width||0);else for(e=p+1;e<d.length;e++)i=d[e],i&&!i.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?P+=i.width||0:A+=i.width||0);if(this._options.forceFitColumns)for(S=-y,e=p+1;e<d.length;e++)i=d[e],i&&!i.hidden&&i.resizable&&(S&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<S?(S-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+S,S=0))}else{for(S=y,A=0,P=0,e=p;e>=0;e--)if(i=d[e],i&&!i.hidden&&i.resizable)if(S&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<S)S-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth;else{const H=(i.previousWidth||0)+S,W=this.canvasWidthL+S;this.hasFrozenColumns()&&e<=this._options.frozenColumn?(H>c&&W<F-this._options.frozenRightViewportMinWidth&&(c=H),i.width=W+this._options.frozenRightViewportMinWidth>F?c:H):i.width=H,S=0}for(t=0;t<=p;t++)i=d[t],i&&!i.hidden&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?P+=i.width||0:A+=i.width||0);if(this._options.forceFitColumns)for(S=-y,e=p+1;e<d.length;e++)i=d[e],i&&!i.hidden&&i.resizable&&(C=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),S&&(i.previousWidth||0)+S<C?(S+=(i.previousWidth||0)-C,i.width=C):(i.width=(i.previousWidth||0)+S,S=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?P+=i.width||0:A+=i.width||0);else for(e=p+1;e<d.length;e++)i=d[e],i&&!i.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?P+=i.width||0:A+=i.width||0)}this.hasFrozenColumns()&&A!==this.canvasWidthL&&(k.width(this._headerL,A+1e3),k.setStyleSize(this._paneHeaderR,"left",A)),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths(),this.triggerEvent(this.onColumnsDrag,{triggeredByColumn:_.resizeableElement,resizeHandle:_.resizeableHandleElement})},onResizeEnd:(m,_)=>{_.resizeableElement.classList.remove("slick-header-column-active");const b=_.resizeableElement.id.replace(this.uid,"");this.triggerEvent(this.onBeforeColumnsResize,{triggeredByColumn:b}).getReturnValue()===!0&&this.applyColumnHeaderWidths();let C;for(e=0;e<d.length;e++)i=d[e],i&&!i.hidden&&h[e]&&(C=h[e].offsetWidth,i.previousWidth!==C&&i.rerenderOnResize&&this.invalidateAllRows());this.updateCanvasWidth(!0),this.render(),this.triggerEvent(this.onColumnsResized,{triggeredByColumn:b}),window.clearTimeout(this._columnResizeTimer),this._columnResizeTimer=window.setTimeout(()=>this.columnResizeDragging=!1,this._options.columnResizingDelay)}}))}}getVBoxDelta(e){const t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=getComputedStyle(e);let s=0;return t.forEach(r=>s+=k.toFloat(i[r])),s}setFrozenOptions(){if(this._options.frozenColumn=this._options.frozenColumn>=0&&this._options.frozenColumn<this.columns.length?parseInt(this._options.frozenColumn,10):-1,this._options.frozenRow>-1){this.hasFrozenRows=!0,this.frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;const e=this.getDataLength();this.actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this.hasFrozenRows=!1}setPaneFrozenClasses(){const e=this.hasFrozenColumns()?"add":"remove";for(const t of[this._paneHeaderL,this._paneTopL,this._paneBottomL])t.classList[e]("frozen")}setPaneVisibility(){this.hasFrozenColumns()?(k.show(this._paneHeaderR),k.show(this._paneTopR),this.hasFrozenRows?(k.show(this._paneBottomL),k.show(this._paneBottomR)):(k.hide(this._paneBottomR),k.hide(this._paneBottomL))):(k.hide(this._paneHeaderR),k.hide(this._paneTopR),k.hide(this._paneBottomR),this.hasFrozenRows?k.show(this._paneBottomL):(k.hide(this._paneBottomR),k.hide(this._paneBottomL)))}setOverflow(){if(this._viewportTopL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportTopR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?this.hasFrozenRows?"scroll":"auto":this.hasFrozenRows?"scroll":"auto",this._viewportBottomL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportBottomR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"auto"):(this.hasFrozenRows,"auto"),this._options.viewportClass){const e=ht(this._options.viewportClass);this._viewportTopL.classList.add(...e),this._viewportTopR.classList.add(...e),this._viewportBottomL.classList.add(...e),this._viewportBottomR.classList.add(...e)}}setScroller(){this.hasFrozenColumns()?(this._headerScrollContainer=this._headerScrollerR,this._headerRowScrollContainer=this._headerRowScrollerR,this._footerRowScrollContainer=this._footerRowScrollerR,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomR,this._viewportScrollContainerY=this._viewportTopR):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomR:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopR):(this._headerScrollContainer=this._headerScrollerL,this._headerRowScrollContainer=this._headerRowScrollerL,this._footerRowScrollContainer=this._footerRowScrollerL,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomL,this._viewportScrollContainerY=this._viewportTopL):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomL:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopL)}measureCellPaddingAndBorder(){const e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=this._headers[0];this.headerColumnWidthDiff=this.headerColumnHeightDiff=0,this.cellWidthDiff=this.cellHeightDiff=0;let s=I("div",{className:"slick-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},i),r=getComputedStyle(s);r.boxSizing!=="border-box"&&(e.forEach(a=>this.headerColumnWidthDiff+=k.toFloat(r[a])),t.forEach(a=>this.headerColumnHeightDiff+=k.toFloat(r[a]))),s.remove();const o=I("div",{className:"slick-row"},this._canvas[0]);s=I("div",{className:"slick-cell",id:"",style:{visibility:"hidden"},textContent:"-"},o),r=getComputedStyle(s),r.boxSizing!=="border-box"&&(e.forEach(a=>this.cellWidthDiff+=k.toFloat(r[a])),t.forEach(a=>this.cellHeightDiff+=k.toFloat(r[a]))),o.remove(),this.absoluteColumnMinWidth=Math.max(this.headerColumnWidthDiff,this.cellWidthDiff)}createCssRules(){this._style=document.createElement("style"),this._style.nonce=this._options.nonce||"",(this._options.shadowRoot||document.head).appendChild(this._style);const e=this._options.rowHeight-this.cellHeightDiff,t=[`.${this.uid} .slick-group-header-column { left: 1000px; }`,`.${this.uid} .slick-header-column { left: 1000px; }`,`.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,`.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,`.${this.uid} .slick-topheader-panel { height: ${this._options.topHeaderPanelHeight}px; }`,`.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,`.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,`.${this.uid} .slick-cell { height: ${e}px; }`,`.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`],i=this._style.sheet;if(i){t.forEach(s=>i.insertRule(s));for(let s=0;s<this.columns.length;s++)this.columns[s]&&!this.columns[s].hidden&&(i.insertRule(`.${this.uid} .l${s} { }`),i.insertRule(`.${this.uid} .r${s} { }`))}else this.createCssRulesAlternative(t)}createCssRulesAlternative(e){const t=document.createElement("template");t.innerHTML='<style type="text/css" rel="stylesheet" />',this._style=t.content.firstChild,(this._options.shadowRoot||document.head).appendChild(this._style);for(let i=0;i<this.columns.length;i++)this.columns[i]&&!this.columns[i].hidden&&(e.push(`.${this.uid} .l${i} { }`),e.push(`.${this.uid} .r${i} { }`));this._style.styleSheet?this._style.styleSheet.cssText=e.join(" "):this._style.appendChild(document.createTextNode(e.join(" ")))}getColumnCssRules(e){let t;if(!this.stylesheet){const i=(this._options.shadowRoot||document).styleSheets;for(this._options.devMode&&typeof this._options.devMode.ownerNodeIndex=="number"&&this._options.devMode.ownerNodeIndex>=0&&(i[this._options.devMode.ownerNodeIndex].ownerNode=this._style),t=0;t<i.length;t++){const a=i[t];if((a.ownerNode||a.owningElement)===this._style){this.stylesheet=a;break}}if(!this.stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");this.columnCssRulesL=[],this.columnCssRulesR=[];const s=this.stylesheet.cssRules||this.stylesheet.rules;let r,o;for(t=0;t<s.length;t++){const a=s[t].selectorText;(r=/\.l\d+/.exec(a))?(o=parseInt(r[0].substr(2,r[0].length-2),10),this.columnCssRulesL[o]=s[t]):(r=/\.r\d+/.exec(a))&&(o=parseInt(r[0].substr(2,r[0].length-2),10),this.columnCssRulesR[o]=s[t])}}return{left:this.columnCssRulesL[e],right:this.columnCssRulesR[e]}}removeCssRules(){var e;(e=this._style)==null||e.remove(),this.stylesheet=null}clearAllTimers(){window.clearTimeout(this._columnResizeTimer),window.clearTimeout(this._executionBlockTimer),window.clearTimeout(this._flashCellTimer),window.clearTimeout(this._highlightRowTimer),window.clearTimeout(this.h_editorLoader)}destroy(e){var r,o,a;this._bindingEventService.unbindAll(),this.slickDraggableInstance=this.destroyAllInstances(this.slickDraggableInstance),this.slickMouseWheelInstances=this.destroyAllInstances(this.slickMouseWheelInstances),this.slickResizableInstances=this.destroyAllInstances(this.slickResizableInstances),(r=this.getEditorLock())==null||r.cancelCurrentEdit(),this.triggerEvent(this.onBeforeDestroy,{});let t=this.plugins.length;for(;t--;)this.unregisterPlugin(this.plugins[t]);this._options.enableColumnReorder&&typeof((o=this.sortableSideLeftInstance)==null?void 0:o.destroy)=="function"&&typeof((a=this.sortableSideRightInstance)==null?void 0:a.destroy)=="function"&&(this.sortableSideLeftInstance.destroy(),this.sortableSideRightInstance.destroy()),this.unbindAncestorScrollEvents(),this._bindingEventService.unbindByEventName(this._container,"resize"),this.removeCssRules(),this._canvas.forEach(l=>{this._bindingEventService.unbindByEventName(l,"keydown"),this._bindingEventService.unbindByEventName(l,"click"),this._bindingEventService.unbindByEventName(l,"dblclick"),this._bindingEventService.unbindByEventName(l,"contextmenu"),this._bindingEventService.unbindByEventName(l,"mouseover"),this._bindingEventService.unbindByEventName(l,"mouseout")}),this._viewport.forEach(l=>{this._bindingEventService.unbindByEventName(l,"scroll")}),this._headerScroller.forEach(l=>{this._bindingEventService.unbindByEventName(l,"contextmenu"),this._bindingEventService.unbindByEventName(l,"click")}),this._headerRowScroller.forEach(l=>{this._bindingEventService.unbindByEventName(l,"scroll")}),this._footerRow&&this._footerRow.forEach(l=>{this._bindingEventService.unbindByEventName(l,"contextmenu"),this._bindingEventService.unbindByEventName(l,"click")}),this._footerRowScroller&&this._footerRowScroller.forEach(l=>{this._bindingEventService.unbindByEventName(l,"scroll")}),this._preHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller,"scroll"),this._topHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._topHeaderPanelScroller,"scroll"),this._bindingEventService.unbindByEventName(this._focusSink,"keydown"),this._bindingEventService.unbindByEventName(this._focusSink2,"keydown");const i=this._container.querySelectorAll(".slick-resizable-handle");[].forEach.call(i,l=>{this._bindingEventService.unbindByEventName(l,"dblclick")});const s=this._container.querySelectorAll(".slick-header-column");[].forEach.call(s,l=>{this._bindingEventService.unbindByEventName(l,"mouseenter"),this._bindingEventService.unbindByEventName(l,"mouseleave"),this._bindingEventService.unbindByEventName(l,"mouseover"),this._bindingEventService.unbindByEventName(l,"mouseout")}),tt(this._container),this._container.classList.remove(this.uid),this.clearAllTimers(),e&&J0(this)}destroyAllInstances(e){if(e){const t=Array.isArray(e)?e:[e];let i;for(;Le(i=t.pop());)i&&typeof i.destroy=="function"&&i.destroy()}return e=Array.isArray(e)?[]:null,e}autosizeColumns(){this.legacyAutosizeColumns()}legacyAutosizeColumns(){let e,t,i=0,s=0,r=0;const o=[],a=this.getViewportInnerWidth();for(e=0;e<this.columns.length;e++){if(t=this.columns[e],!t||t.hidden){o.push(0);continue}o.push(t.width||0),s+=t.width||0,t.resizable&&(i+=(t.width||0)-Math.max(t.minWidth||0,this.absoluteColumnMinWidth))}for(r=s;s>a&&i;){const c=(s-a)/i;for(e=0;e<this.columns.length&&s>a;e++)if(t=this.columns[e],t&&!t.hidden){const h=o[e];if(!t.resizable||h<=t.minWidth||h<=this.absoluteColumnMinWidth)continue;const d=Math.max(t.minWidth,this.absoluteColumnMinWidth);let u=Math.floor(c*(h-d))||1;u=Math.min(u,h-d),s-=u,i-=u,o[e]-=u}if(r<=s)break;r=s}for(r=s;s<a;){const c=a/s;for(e=0;e<this.columns.length&&s<a;e++)if(t=this.columns[e],t&&!t.hidden){const h=o[e];let d;!t.resizable||t.maxWidth<=h?d=0:d=Math.min(Math.floor(c*h)-h,t.maxWidth-h||1e6)||1,s+=d,o[e]+=s<=a?d:0}if(r>=s)break;r=s}let l=!1;for(e=0;e<this.columns.length;e++)t&&!t.hidden&&(this.columns[e].rerenderOnResize&&this.columns[e].width!==o[e]&&(l=!0),this.columns[e].width=o[e]);this.reRenderColumns(l)}reRenderColumns(e){this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),this.triggerEvent(this.onAutosizeColumns,{columns:this.columns}),e&&(this.invalidateAllRows(),this.render())}getVisibleColumns(){return this.columns.filter(e=>!e.hidden)}triggerEvent(e,t,i){const s=i||new Ot(i,t),r=t||{};return r.grid=this,e.notify(r,s,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this.editController}getColumnIndex(e){return this.columnsById[e]}applyColumnHeaderWidths(){if(this.initialized){let e=0;const t=this.getVisibleColumns();this._headers.forEach(i=>{for(let s=0;s<i.children.length;s++,e++){const r=i.children[s],a=((t[e]||{}).width||0)-this.headerColumnWidthDiff;k.width(r)!==a&&k.width(r,a)}}),this.updateColumnCaches()}}applyColumnWidths(){var s;let e=0,t=0,i;for(let r=0;r<this.columns.length;r++)(s=this.columns[r])!=null&&s.hidden||(t=this.columns[r].width||0,i=this.getColumnCssRules(r),i.left&&(i.left.style.left=`${e}px`),i.right&&(i.right.style.right=(this._options.frozenColumn!==-1&&r>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-t+"px"),this._options.frozenColumn!==r&&(e+=this.columns[r].width)),this._options.frozenColumn===r&&(e=0)}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}getColumnByIndex(e){let t;return this._headers.every(i=>{const s=i.children.length;return e<s?(t=i.children[e],!1):(e-=s,!0)}),t}setSortColumns(e){this.sortColumns=e;const t=this._options.numberedMultiColumnSort&&this.sortColumns.length>1;this._headers.forEach(s=>{let r=s.querySelectorAll(".slick-header-column-sorted");r.forEach(o=>o.classList.remove("slick-header-column-sorted")),r=s.querySelectorAll(".slick-sort-indicator"),r.forEach(o=>o.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")),r=s.querySelectorAll(".slick-sort-indicator-numbered"),r.forEach(o=>o.textContent="")});let i=1;this.sortColumns.forEach(s=>{Le(s.sortAsc)||(s.sortAsc=!0);const r=this.getColumnIndex(s.columnId);if(Le(r)){const o=this.getColumnByIndex(r);if(o){o.classList.add("slick-header-column-sorted");let a=o.querySelector(".slick-sort-indicator");a==null||a.classList.add(s.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),t&&(a=o.querySelector(".slick-sort-indicator-numbered"),a&&(a.textContent=String(i)))}}i++})}getSortColumns(){return this.sortColumns}handleSelectedRangesChanged(e,t){var o;const i=e.getNativeEvent(),s=this.selectedRows.slice(0);this.selectedRows=[];const r={};for(let a=0;a<t.length;a++)for(let l=t[a].fromRow;l<=t[a].toRow;l++){r[l]||(this.selectedRows.push(l),r[l]={});for(let c=t[a].fromCell;c<=t[a].toCell;c++)this.canCellBeSelected(l,c)&&(r[l][this.columns[c].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass||"",r),this.simpleArrayEquals(s,this.selectedRows)){const a=((o=i==null?void 0:i.detail)==null?void 0:o.caller)??"click",l=new Set(this.getSelectedRows()),c=new Set(s),h=Array.from(l).filter(u=>!c.has(u)),d=Array.from(c).filter(u=>!l.has(u));this.triggerEvent(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:s,caller:a,changedSelectedRows:h,changedUnselectedRows:d},e)}}simpleArrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&t.sort().toString()!==e.sort().toString()}getColumns(){return this.columns}updateColumnCaches(){this.columnPosLeft=[],this.columnPosRight=[];let e=0;for(let t=0,i=this.columns.length;t<i;t++)this.columns[t]&&!this.columns[t].hidden&&(this.columnPosLeft[t]=e,this.columnPosRight[t]=e+(this.columns[t].width||0),this._options.frozenColumn===t?e=0:e+=this.columns[t].width||0)}updateColumnProps(){this.columnsById={};for(let e=0;e<this.columns.length;e++){let t=this.columns[e]||{};t.width&&(t.widthRequest=t.width),this._options.mixinDefaults?k.applyDefaults(t,this._columnDefaults):t=this.columns[e]=Qt({},this._columnDefaults,t),this.columnsById[t.id]=e,t.minWidth&&(t.width||0)<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&(t.width||0)>t.maxWidth&&(t.width=t.maxWidth)}}setColumns(e){this.triggerEvent(this.onBeforeSetColumns,{previousColumns:this.columns,newColumns:e,grid:this}),this.columns=e,this.updateColumnsInternal(),this.triggerEvent(this.onAfterSetColumns,{newColumns:e,grid:this})}updateColumns(){this.triggerEvent(this.onBeforeUpdateColumns,{columns:this.columns,grid:this}),this.updateColumnsInternal()}updateColumnsInternal(){var e;this.updateColumnProps(),this.updateColumnCaches(),this.initialized&&(this.setPaneFrozenClasses(),this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooter(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnWidths(),this.handleScroll(),(e=this.getSelectionModel())==null||e.refreshSelections())}getOptions(){return this._options}setOptions(e,t,i,s){this.prepareForOptionsChange(),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),e.frozenColumn!==void 0&&e.frozenColumn>=0&&(this.getViewports().forEach(o=>o.scrollLeft=0),this.handleScroll());const r=Qt(!0,{},this._options);this._options=Qt(!0,this._options,e),this.triggerEvent(this.onSetOptions,{optionsBefore:r,optionsAfter:this._options}),this.internal_setOptions(t,i,s)}activateChangedOptions(e,t,i){this.prepareForOptionsChange(),this.invalidateRow(this.getDataLength()),this.triggerEvent(this.onActivateChangedOptions,{options:this._options}),this.internal_setOptions(e,t,i)}prepareForOptionsChange(){var e;(e=this.getEditorLock())!=null&&e.commitCurrentEdit()&&this.makeActiveCellNormal()}internal_setOptions(e,t,i){this._options.showColumnHeader!==void 0&&this.setColumnHeaderVisibility(this._options.showColumnHeader),this.validateAndEnforceOptions(),this.setFrozenOptions(),this._options.frozenBottom!==void 0&&(this.enforceFrozenRowHeightRecalc=!0),this._viewport.forEach(s=>{s.style.overflowY=this._options.autoHeight?"hidden":"auto"}),e||this.render(),this.setScroller(),i||this.setOverflow(),t||this.setColumns(this.columns),this._options.enableMouseWheelScrollHandler&&this._viewport&&(!this.slickMouseWheelInstances||this.slickMouseWheelInstances.length===0)?this._viewport.forEach(s=>{this.slickMouseWheelInstances.push(AC({element:s,onMouseWheel:this.handleMouseWheel.bind(this)}))}):this._options.enableMouseWheelScrollHandler===!1&&this.destroyAllInstances(this.slickMouseWheelInstances)}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}setData(e,t){this.data=e,this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this.data}getDataLength(){var e;return this.data.getLength?this.data.getLength():((e=this.data)==null?void 0:e.length)||0}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this.pagingActive||this.pagingIsLastPage)?1:0)}getDataItem(e){return this.data.getItem?this.data.getItem(e):this.data[e]}getItemMetadaWhenExists(e){return"getItemMetadata"in this.data?this.data.getItemMetadata(e):null}getTopPanel(){return this._topPanels[0]}getTopPanels(){return this._topPanels}hasDataView(){return!Array.isArray(this.data)}togglePanelVisibility(e,t,i){this._options[e]!==i&&(this._options[e]=i,i?k.show(t):k.hide(t),this.resizeCanvas())}setTopPanelVisibility(e){this.togglePanelVisibility("showTopPanel",this._topPanelScrollers,e)}setHeaderRowVisibility(e){this.togglePanelVisibility("showHeaderRow",this._headerRowScroller,e)}setColumnHeaderVisibility(e){this.togglePanelVisibility("showColumnHeader",this._headerScroller,e)}setFooterRowVisibility(e){this.togglePanelVisibility("showFooterRow",this._footerRowScroller,e)}setPreHeaderPanelVisibility(e){this.togglePanelVisibility("showPreHeaderPanel",[this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],e)}setTopHeaderPanelVisibility(e){this.togglePanelVisibility("showTopHeaderPanel",this._topHeaderPanelScroller,e)}getContainerNode(){return this._container}getRowHeight(){return this._options.rowHeight}getRowTop(e){return Math.round(this._options.rowHeight*e-this.offset)}getRowBottom(e){return this.getRowTop(e)+this._options.rowHeight}getRowFromPosition(e){return Math.floor((e+this.offset)/this._options.rowHeight)}scrollTo(e){var s;e=Math.max(e,0),e=Math.min(e,(this.th||0)-k.height(this._viewportScrollContainerY)+((this.viewportHasHScroll||this.hasFrozenColumns())&&((s=this.scrollbarDimensions)==null?void 0:s.height)||0));const t=this.offset;this.offset=Math.round(this.page*(this.cj||0)),this.page=Math.min((this.n||0)-1,Math.floor(e/(this.ph||0)));const i=e-this.offset;if(this.offset!==t){const r=this.getVisibleRange(i);this.cleanupRows(r),this.updateRowPositions()}this.prevScrollTop!==i&&(this.vScrollDir=this.prevScrollTop+t<i+this.offset?1:-1,this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=i,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=i),this.hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=i),this._viewportScrollContainerY&&(this._viewportScrollContainerY.scrollTop=i),this.triggerEvent(this.onViewportChanged,{}))}defaultFormatter(e,t,i){return Le(i)?(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}getFormatter(e,t){var r,o,a;const i=(o=(r=this.data)==null?void 0:r.getItemMetadata)==null?void 0:o.call(r,e),s=(i==null?void 0:i.columns)&&(i.columns[t.id]||i.columns[this.getColumnIndex(t.id)]);return(s==null?void 0:s.formatter)||(i==null?void 0:i.formatter)||t.formatter||((a=this._options.formatterFactory)==null?void 0:a.getFormatter(t))||this._options.defaultFormatter}getEditor(e,t){var o,a,l,c;const i=this.columns[t],s=this.getItemMetadaWhenExists(e),r=s==null?void 0:s.columns;return((o=r==null?void 0:r[i.id])==null?void 0:o.editorClass)!==void 0?r[i.id].editorClass:((a=r==null?void 0:r[t])==null?void 0:a.editorClass)!==void 0?r[t].editorClass:i.editorClass||((c=(l=this._options)==null?void 0:l.editorFactory)==null?void 0:c.getEditor(i))}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,s,r){const o=this.getDataItem(i),a=i<r&&!o;let l="slick-row"+(this.hasFrozenRows&&i<=this._options.frozenRow?" frozen":"")+(a?" loading":"")+(i===this.activeRow&&this._options.showCellSelection?" active":"")+(i%2===1?" odd":" even");o||(l+=` ${this._options.addNewRowCssClass}`);const c=this.getItemMetadaWhenExists(i);c!=null&&c.cssClasses&&(l+=` ${c.cssClasses}`);const h=I("div",{className:`ui-widget-content ${l}`,role:"row",dataset:{row:`${i}`}}),d=this.getFrozenRowOffset(i),u=this.getRowTop(i)-d;this._options.rowTopOffsetRenderType==="transform"?h.style.transform=`translateY(${u}px)`:h.style.top=`${u}px`;let p;e.push(h),this.hasFrozenColumns()&&(p=h.cloneNode(!0),t.push(p));const f=this.columns.length;let g,m,_,b,C=!0;for(let v=0,y=f;v<y;v++)if(C=!0,b=this.columns[v],b&&!b.hidden){m=1,_=1,g=null,c!=null&&c.columns&&(g=c.columns[b.id]||c.columns[v],m=(g==null?void 0:g.colspan)||1,_=(g==null?void 0:g.rowspan)||1,m==="*"&&(m=y-v),_>r-i&&(_=r-i)),!this._options.enableCellRowSpan&&_>1&&console.warn('[SlickGrid] Cell "rowspan" is an opt-in grid option because of its small perf hit, you must enable it via the "enableCellRowSpan" grid option.');const S=m;if(this.getParentRowSpanByCell(i,v))continue;if(this.columnPosRight[Math.min(y-1,v+S-1)]>s.leftPx){if(!b.alwaysRenderColumn&&this.columnPosLeft[v]>s.rightPx&&(C=!1),C){const A=this.hasFrozenColumns()&&v>this._options.frozenColumn?p:h;this.appendCellHtml(A,i,v,S,_,g,o)}}else(b.alwaysRenderColumn||this.hasFrozenColumns()&&v<=this._options.frozenColumn)&&this.appendCellHtml(h,i,v,S,_,g,o);S>1&&(v+=S-1)}}appendCellHtml(e,t,i,s,r,o,a){const l=this.columns[i];let c=`slick-cell l${i} r${Math.min(this.columns.length-1,i+s-1)}`+(l.cssClass?` ${l.cssClass}`:"")+(r>1?" rowspan":"")+(o!=null&&o.cssClass?` ${o.cssClass}`:"");this.hasFrozenColumns()&&i<=this._options.frozenColumn&&(c+=" frozen"),t===this.activeRow&&i===this.activeCell&&this._options.showCellSelection&&(c+=" active"),Object.keys(this.cellCssClasses).forEach(b=>{var C;(C=this.cellCssClasses[b][t])!=null&&C[l.id]&&(c+=` ${this.cellCssClasses[b][t][l.id]}`)});let h=null,d="";a&&(h=this.getDataItemValueForColumn(a,l),d=this.getFormatter(t,l)(t,i,h,l,a,this),d==null&&(d=""));const p=this.triggerEvent(this.onBeforeAppendCell,{row:t,cell:i,value:h,dataContext:a}).getReturnValue();let f=typeof p=="string"?p:"";d!=null&&d.addClasses&&(f+=ht((f?" ":"")+d.addClasses).join(" "));const g=d!=null&&d.toolTip?`${d.toolTip}`:"",m=I("div",{className:ht(`${c} ${f||""}`).join(" "),role:"gridcell",tabIndex:-1});m.setAttribute("aria-describedby",this.uid+l.id),g&&m.setAttribute("title",g);const _=this.getCellHeight(t,r);if(r>1&&_!==this._options.rowHeight-this.cellHeightDiff&&(m.style.height=`${_||0}px`),l.hasOwnProperty("cellAttrs")&&l.cellAttrs instanceof Object&&Object.keys(l.cellAttrs).forEach(b=>{l.cellAttrs.hasOwnProperty(b)&&m.setAttribute(b,l.cellAttrs[b])}),a){const b=Nc(d)?d:d.html||d.text;this.applyHtmlCode(m,b)}e.appendChild(m),d.insertElementAfterTarget&&LH(m,d.insertElementAfterTarget),this.rowsCache[t].cellRenderQueue.push(i),this.rowsCache[t].cellColSpans[i]=s}cleanupRows(e){const t=new Set;if(this._options.enableCellRowSpan)for(let i=e.top,s=e.bottom;i<=s;i++){const r=this.getRowSpanIntersect(i);r!==null&&t.add(r)}Object.keys(this.rowsCache).forEach(i=>{if(this.rowsCache){let s=+i,r=!0;this.hasFrozenRows&&(this._options.frozenBottom&&s>=this.actualFrozenRow||!this._options.frozenBottom&&s<=this.actualFrozenRow)&&(r=!1),(s=parseInt(i,10))!==this.activeRow&&(s<e.top||s>e.bottom)&&r&&!t.has(s)&&this.removeRowFromCache(s)}}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}getRowSpanColumnIntersects(e){return this.getRowSpanIntersection(e,"columns")}getRowSpanIntersect(e){return this.getRowSpanIntersection(e)}getRowSpanIntersection(e,t){const i=[];let s=null;for(let r=0,o=this.columns.length;r<o;r++){const a=this._colsWithRowSpanCache[r];if(a)for(const l of Array.from(a)){const[c,h]=l.split(":").map(Number);if(e>=c&&e<=h)if(t==="columns")i.push(r);else{s=c;break}}}return t==="columns"?i:s}getParentRowSpanByCell(e,t,i=!0){let s=null;const r=this._colsWithRowSpanCache[t]||new Set;for(const o of Array.from(r)){const[a,l]=o.split(":").map(Number);if((i?e>a:e>=a)&&e<=l){s={start:a,end:l,range:o};break}}return s}remapAllColumnsRowSpan(){const e=this.getDataLength();if(e>0){this._colsWithRowSpanCache={};for(let t=0;t<e;t++)this.remapRowSpanMetadataByRow(t);this._rowSpanIsCached=!0}}remapRowSpanMetadataByRow(e){const t=this.getItemMetadaWhenExists(e);t!=null&&t.columns&&Object.keys(t.columns).forEach(i=>{const s=+i,r=t.columns[s],o=+((r==null?void 0:r.colspan)||1),a=+((r==null?void 0:r.rowspan)||1);this.remapRowSpanMetadata(e,s,o,a)})}remapRowSpanMetadata(e,t,i,s){var r,o,a;if(s>1){const l=`${e}:${e+s-1}`;if((r=this._colsWithRowSpanCache)[t]??(r[t]=new Set),this._colsWithRowSpanCache[t].add(l),i>1)for(let c=1;c<i;c++)(o=this._colsWithRowSpanCache)[a=t+c]??(o[a]=new Set),this._colsWithRowSpanCache[t+c].add(l)}}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render()}invalidateAllRows(){this.currentEditor&&this.makeActiveCellNormal(),typeof this.rowsCache=="object"&&Object.keys(this.rowsCache).forEach(e=>{this.rowsCache&&this.removeRowFromCache(+e)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRows(e){if(!e||!e.length)return;let t;this.vScrollDir=0;const i=e.length,s=new Set,r=new Set,o=e.length>this._options.maxPartialRowSpanRemap||e.length===this.getDataLength()||this._prevInvalidatedRowsCount+e.length===this.getDataLength();for(let a=0;a<i;a++)if(t=e[a],this.currentEditor&&this.activeRow===t&&this.makeActiveCellNormal(),this.rowsCache[t]&&this.removeRowFromCache(t),this._options.enableCellRowSpan&&!o){s.add(t);const l=this.getRowSpanIntersect(t);l!==null&&s.add(l)}if(this._options.enableCellRowSpan&&!o){for(const a of Array.from(s)){const l=this.getRowSpanColumnIntersects(a);for(const c of l){const h=this.getParentRowSpanByCell(a,c);h&&this._colsWithRowSpanCache[c]&&(this._colsWithRowSpanCache[c].delete(h.range),r.add(h.range.split(":").map(Number)[0]))}}for(const a of Array.from(r))this.remapRowSpanMetadataByRow(a)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this._prevInvalidatedRowsCount=e.length}invalidateRow(e){if(e>=0){const t=[e];if(this._options.enableCellRowSpan){const i=this.getRowSpanIntersect(e);i!==null&&t.push(i)}this.invalidateRows(t)}}queuePostProcessedRowForCleanup(e,t,i){var s;this.postProcessgroupId++,typeof t=="object"&&Object.keys(t).forEach(r=>{t.hasOwnProperty(r)&&this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e.cellNodesByColumnIdx[+r],columnIdx:+r,rowIdx:i})}),e.rowNode||(e.rowNode=[]),this.postProcessedCleanupQueue.push({actionType:"R",groupId:this.postProcessgroupId,node:e.rowNode}),(s=e.rowNode)==null||s.forEach(r=>r.remove())}queuePostProcessedCellForCleanup(e,t,i){this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e,columnIdx:t,rowIdx:i}),e.remove()}removeRowFromCache(e){var i;const t=this.rowsCache[e];t!=null&&t.rowNode&&(this.triggerEvent(this.onBeforeRemoveCachedRow,{row:e}),this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this.postProcessedRows[e],e):(i=t.rowNode)==null||i.forEach(s=>{var r;return(r=s.parentElement)==null?void 0:r.removeChild(s)}),delete this.rowsCache[e],delete this.postProcessedRows[e],this.renderedRows--,this.counter_rows_removed++)}applyFormatResultToCellNode(e,t,i){if(e==null&&(e=""),Nc(e)){this.applyHtmlCode(t,e);return}const s=e.html||e.text;this.applyHtmlCode(t,s),e.removeClasses&&!i&&t.classList.remove(...ht(e.removeClasses)),e.addClasses&&t.classList.add(...ht(e.addClasses)),e.toolTip&&t.setAttribute("title",e.toolTip)}updateCell(e,t){const i=this.getCellNode(e,t);if(i){const s=this.columns[t],r=this.getDataItem(e);if(this.currentEditor&&this.activeRow===e&&this.activeCell===t)this.currentEditor.loadValue(r);else{const o=r?this.getFormatter(e,s)(e,t,this.getDataItemValueForColumn(r,s),s,r,this):"";this.applyFormatResultToCellNode(o,i),this.invalidatePostProcessingResults(e)}}}updateRow(e){const t=this.rowsCache[e];if(!t)return;this.ensureCellNodesInRowsCache(e);let i;const s=this.getDataItem(e);Object.keys(t.cellNodesByColumnIdx).forEach(r=>{if(t.cellNodesByColumnIdx.hasOwnProperty(r)){const o=+r,a=this.columns[o],l=t.cellNodesByColumnIdx[o];this.currentEditor&&e===this.activeRow&&o===this.activeCell?this.currentEditor.loadValue(s):s?(i=this.getFormatter(e,a)(e,o,this.getDataItemValueForColumn(s,a),a,s,this),this.applyFormatResultToCellNode(i,l)):tt(l)}}),this.invalidatePostProcessingResults(e)}getCellHeight(e,t){let i=this._options.rowHeight||0;if(t>1){const s=e+t-1;i=this.getRowBottom(s)-this.getRowTop(e)}else{const s=this.getRowHeight();s!==i-this.cellHeightDiff&&(i=s)}return i-=this.cellHeightDiff,Math.ceil(i)}getViewportRowCount(){var i;const e=this.getViewportHeight(),t=((i=this.getScrollbarDimensions())==null?void 0:i.height)||0;return Math.floor((e-t)/this._options.rowHeight)}getViewportHeight(){var e;if((!this._options.autoHeight||this._options.frozenColumn!==-1)&&(this.topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelScrollers[0]):0,this.headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,this.footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0),this._options.autoHeight){let t=this._paneHeaderL.offsetHeight;t+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,t+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0,t+=this.getCanvasWidth()>this.viewportW&&((e=this.scrollbarDimensions)==null?void 0:e.height)||0,this.viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew()+(this._options.frozenColumn===-1?t:0)}else{const t=this._options.showColumnHeader?k.toFloat(k.height(this._headerScroller[0]))+this.getVBoxDelta(this._headerScroller[0]):0,i=this._options.createPreHeaderPanel&&this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight+this.getVBoxDelta(this._preHeaderPanelScroller):0,s=this._options.createTopHeaderPanel&&this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight+this.getVBoxDelta(this._topHeaderPanelScroller):0,r=getComputedStyle(this._container);this.viewportH=k.toFloat(r.height)-k.toFloat(r.paddingTop)-k.toFloat(r.paddingBottom)-t-this.topPanelH-this.headerRowH-this.footerRowH-i-s}return this.numVisibleRows=Math.ceil(this.viewportH/this._options.rowHeight),this.viewportH}getViewportInnerWidth(){var e;return this.viewportHasVScroll?this.viewportW-(((e=this.scrollbarDimensions)==null?void 0:e.width)||0):this.viewportW}getViewportWidth(){return this.viewportW=parseFloat(Mg(this._container,"width"))||this._options.devMode&&this._options.devMode.containerClientWidth||0,this.viewportW}resizeCanvas(){var e,t,i;if(this.initialized){if(this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.getViewportWidth(),this.getViewportHeight(),this.hasFrozenRows?this._options.frozenBottom?(this.paneTopH=this.viewportH-this.frozenRowsHeight-(((e=this.scrollbarDimensions)==null?void 0:e.height)||0),this.paneBottomH=this.frozenRowsHeight+(((t=this.scrollbarDimensions)==null?void 0:t.height)||0)):(this.paneTopH=this.frozenRowsHeight,this.paneBottomH=this.viewportH-this.frozenRowsHeight):this.paneTopH=this.viewportH,this.paneTopH+=this.topPanelH+this.headerRowH+this.footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this.paneTopH+=((i=this.scrollbarDimensions)==null?void 0:i.height)||0),this.viewportTopH=this.paneTopH-this.topPanelH-this.headerRowH-this.footerRowH,this._options.autoHeight){if(this.hasFrozenColumns()){const o=getComputedStyle(this._headerScrollerL);k.height(this._container,this.paneTopH+k.toFloat(o.height))}this._paneTopL.style.position="relative"}let s=k.height(this._paneHeaderL);s?s+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0:s=(this._options.showHeaderRow?this._options.headerRowHeight:0)+(this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight:0),k.setStyleSize(this._paneTopL,"top",s||s),k.height(this._paneTopL,this.paneTopH);const r=this._paneTopL.offsetTop+this.paneTopH;if(this._options.autoHeight||k.height(this._viewportTopL,this.viewportTopH),this.hasFrozenColumns()){let o=k.height(this._paneHeaderL);o&&(o+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0),k.setStyleSize(this._paneTopR,"top",o),k.height(this._paneTopR,this.paneTopH),k.height(this._viewportTopR,this.viewportTopH),this.hasFrozenRows&&(k.setStyleSize(this._paneBottomL,"top",r),k.height(this._paneBottomL,this.paneBottomH),k.setStyleSize(this._paneBottomR,"top",r),k.height(this._paneBottomR,this.paneBottomH),k.height(this._viewportBottomR,this.paneBottomH))}else this.hasFrozenRows&&(k.width(this._paneBottomL,"100%"),k.height(this._paneBottomL,this.paneBottomH),k.setStyleSize(this._paneBottomL,"top",r));this.hasFrozenRows?(k.height(this._viewportBottomL,this.paneBottomH),this._options.frozenBottom?(k.height(this._canvasBottomL,this.frozenRowsHeight),this.hasFrozenColumns()&&k.height(this._canvasBottomR,this.frozenRowsHeight)):(k.height(this._canvasTopL,this.frozenRowsHeight),this.hasFrozenColumns()&&k.height(this._canvasTopR,this.frozenRowsHeight))):k.height(this._viewportTopR,this.viewportTopH),(!this.scrollbarDimensions||!this.scrollbarDimensions.width)&&(this.scrollbarDimensions=this.measureScrollbar()),this._options.forceFitColumns&&this.legacyAutosizeColumns(),this.updateRowCount(),this.handleScroll(),this.lastRenderedScrollLeft=-1,this.render()}}updatePagingStatusFromView(e){this.pagingActive=e.pageSize!==0,this.pagingIsLastPage=e.pageNum===e.totalPages-1}updateRowCount(){var e,t;if(this.initialized){const i=this.getDataLength();i>0&&i!==this._prevDataLength&&(this._rowSpanIsCached=!1),this._options.enableCellRowSpan&&!this._rowSpanIsCached&&this.remapAllColumnsRowSpan(),this._prevDataLength=i;const s=this.getDataLengthIncludingAddNew();let r=0,o=this.hasFrozenRows&&!this._options.frozenBottom?k.height(this._canvasBottomL):k.height(this._canvasTopL);this.hasFrozenRows?r=this.getDataLength()-this._options.frozenRow:r=s+(this._options.leaveSpaceForNewRows?this.numVisibleRows-1:0);const a=k.height(this._viewportScrollContainerY),l=this.viewportHasVScroll;this.viewportHasVScroll=this._options.alwaysShowVerticalScroll||!this._options.autoHeight&&r*this._options.rowHeight>a,this.makeActiveCellNormal();const c=i-1;typeof this.rowsCache=="object"&&Object.keys(this.rowsCache).forEach(d=>{const u=+d;u>c&&this.removeRowFromCache(u)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this.activeCellNode&&this.activeRow>c&&this.resetActiveCell(),o=this.h,this._options.autoHeight?this.h=this._options.rowHeight*r:(this.th=Math.max(this._options.rowHeight*r,a-(((e=this.scrollbarDimensions)==null?void 0:e.height)||0)),this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1))),(this.h!==o||this.enforceFrozenRowHeightRecalc)&&(this.hasFrozenRows&&!this._options.frozenBottom?(k.height(this._canvasBottomL,this.h),this.hasFrozenColumns()&&k.height(this._canvasBottomR,this.h)):(k.height(this._canvasTopL,this.h),k.height(this._canvasTopR,this.h)),this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollHeight=this._viewportScrollContainerY.scrollHeight,this.enforceFrozenRowHeightRecalc=!1);const h=this.scrollTop+this.offset<=this.th-a;this.th===0||this.scrollTop===0?this.page=this.offset=0:h?this.scrollTo(this.scrollTop+this.offset):this.scrollTo(this.th-a+(((t=this.scrollbarDimensions)==null?void 0:t.height)||0)),this.h!==o&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&l!==this.viewportHasVScroll&&this.legacyAutosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e??(e=this.scrollTop),t??(t=this.scrollLeft),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this.viewportH)+1,leftPx:t,rightPx:t+this.viewportW}}getRenderedRange(e,t){const i=this.getVisibleRange(e,t),s=Math.round(this.viewportH/this._options.rowHeight),r=this._options.minRowBuffer;return this.vScrollDir===-1?(i.top-=s,i.bottom+=r):this.vScrollDir===1?(i.top-=r,i.bottom+=s):(i.top-=r,i.bottom+=r),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),i.leftPx-=this.viewportW,i.rightPx+=this.viewportW,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this.canvasWidth,i.rightPx),i}getRowCache(){return this.rowsCache}ensureCellNodesInRowsCache(e){var i;const t=this.rowsCache[e];if(t!=null&&t.cellRenderQueue.length&&((i=t.rowNode)!=null&&i.length)){const s=t.rowNode;let r=Array.from(s[0].children);s.length>1&&(r=r.concat(Array.from(s[1].children)));let o=r.length-1;for(;t.cellRenderQueue.length;){const a=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[a]=r[o--]}}}cleanUpCells(e,t){var a,l;if(this.hasFrozenRows&&(this._options.frozenBottom&&t>this.actualFrozenRow||t<=this.actualFrozenRow))return;const i=this.rowsCache[t],s=[];Object.keys(i.cellNodesByColumnIdx).forEach(c=>{var u;if(!i.cellNodesByColumnIdx.hasOwnProperty(c))return;const h=+c;if(h<=this._options.frozenColumn||Array.isArray(this.columns)&&((u=this.columns[h])!=null&&u.alwaysRenderColumn))return;const d=i.cellColSpans[h];(this.columnPosLeft[h]>e.rightPx||this.columnPosRight[Math.min(this.columns.length-1,(h||0)+d-1)]<e.leftPx)&&(t===this.activeRow&&Number(h)===this.activeCell||s.push(h))});let r,o;for(;Le(r=s.pop());)o=i.cellNodesByColumnIdx[r],this._options.enableAsyncPostRenderCleanup&&((a=this.postProcessedRows[t])!=null&&a[r])?this.queuePostProcessedCellForCleanup(o,r,t):(l=o.parentElement)==null||l.removeChild(o),delete i.cellColSpans[r],delete i.cellNodesByColumnIdx[r],this.postProcessedRows[t]&&delete this.postProcessedRows[t][r]}cleanUpAndRenderCells(e){let t;const i=document.createElement("div"),s=[];let r,o,a;const l=this.columns.length;for(let d=e.top,u=e.bottom;d<=u;d++)if(t=this.rowsCache[d],t){this.ensureCellNodesInRowsCache(d),(!this._options.enableCellRowSpan||this.getRowSpanIntersect(d)===null)&&this.cleanUpCells(e,d),r=0;let p=this.getItemMetadaWhenExists(d);p=p==null?void 0:p.columns;const f=this.getDataItem(d);for(let g=0,m=l;g<m;g++)if(this.columns[g]&&!this.columns[g].hidden){if(this.columnPosLeft[g]>e.rightPx)break;if(Le(o=t.cellColSpans[g])){g+=o>1?o-1:0;continue}o=1,a=null,p&&(a=p[this.columns[g].id]||p[g],o=(a==null?void 0:a.colspan)??1,o==="*"&&(o=m-g));const _=o;if(this.getParentRowSpanByCell(d,g))continue;if(this.columnPosRight[Math.min(m-1,g+_-1)]>e.leftPx){const b=this.getRowspan(d,g);this.appendCellHtml(i,d,g,_,b,a,f),r++}g+=_>1?_-1:0}r&&s.push(d)}if(!i.children.length)return;let c,h;for(;Le(c=s.pop());){t=this.rowsCache[c];let d;for(;Le(d=t.cellRenderQueue.pop());)h=i.lastChild,h&&(this.hasFrozenColumns()&&d>this._options.frozenColumn?t.rowNode[1].appendChild(h):t.rowNode[0].appendChild(h),t.cellNodesByColumnIdx[d]=h)}}createEmptyCachingRow(){return{rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]}}renderRows(e){var h,d,u,p;const t=[],i=[],s=[];let r=!1;const o=this.getDataLength(),a=new Set,l=new Set;for(let f=e.top,g=e.bottom;f<=g;f++)if(!(this.rowsCache[f]||this.hasFrozenRows&&this._options.frozenBottom&&f===this.getDataLength())){if(this.renderedRows++,s.push(f),l.add(f),this.rowsCache[f]=this.createEmptyCachingRow(),this._options.enableCellRowSpan){const m=this.getRowSpanIntersect(f);m!==null&&l.add(m)}this.appendRowHtml(t,i,f,e,o),a.add(f),this.activeCellNode&&this.activeRow===f&&(r=!0),this.counter_rows_rendered++}const c=this.setDifference(l,a);if(c.size>0&&c.forEach(f=>{this.removeRowFromCache(f),s.push(f),this.rowsCache[f]=this.createEmptyCachingRow(),this.appendRowHtml(t,i,f,e,o)}),s.length){const f=document.createElement("div"),g=document.createElement("div");t.forEach(m=>f.appendChild(m)),i.forEach(m=>g.appendChild(m));for(let m=0,_=s.length;m<_;m++)this.hasFrozenRows&&s[m]>=this.actualFrozenRow?this.hasFrozenColumns()?(h=this.rowsCache)!=null&&h.hasOwnProperty(s[m])&&f.firstChild&&g.firstChild&&(this.rowsCache[s[m]].rowNode=[f.firstChild,g.firstChild],this._canvasBottomL.appendChild(f.firstChild),this._canvasBottomR.appendChild(g.firstChild)):(d=this.rowsCache)!=null&&d.hasOwnProperty(s[m])&&f.firstChild&&(this.rowsCache[s[m]].rowNode=[f.firstChild],this._canvasBottomL.appendChild(f.firstChild)):this.hasFrozenColumns()?(u=this.rowsCache)!=null&&u.hasOwnProperty(s[m])&&f.firstChild&&g.firstChild&&(this.rowsCache[s[m]].rowNode=[f.firstChild,g.firstChild],this._canvasTopL.appendChild(f.firstChild),this._canvasTopR.appendChild(g.firstChild)):(p=this.rowsCache)!=null&&p.hasOwnProperty(s[m])&&f.firstChild&&(this.rowsCache[s[m]].rowNode=[f.firstChild],this._canvasTopL.appendChild(f.firstChild));r&&(this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell))}}setDifference(e,t){return new Set(Array.from(e).filter(i=>!t.has(i)))}startPostProcessing(){this._options.enableAsyncPostRender&&(window.clearTimeout(this.h_postrender),this.h_postrender=window.setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(window.clearTimeout(this.h_postrenderCleanup),this.h_postrenderCleanup=window.setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay))}invalidatePostProcessingResults(e){typeof this.postProcessedRows[e]=="object"&&Object.keys(this.postProcessedRows[e]).forEach(t=>{this.postProcessedRows[e].hasOwnProperty(t)&&(this.postProcessedRows[e][t]="C")}),this.postProcessFromRow=Math.min(this.postProcessFromRow,e),this.postProcessToRow=Math.max(this.postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){this.rowsCache&&typeof this.rowsCache=="object"&&Object.keys(this.rowsCache).forEach(e=>{const t=e?parseInt(e,10):0,i=this.rowsCache[t].rowNode[0];this._options.rowTopOffsetRenderType==="transform"?i.style.transform=`translateY(${this.getRowTop(t)}px)`:i.style.top=`${this.getRowTop(t)}px`})}render(){if(this.initialized){this.scrollThrottle.dequeue();const e=this.getVisibleRange(),t=this.getRenderedRange();if(this.cleanupRows(t),this.lastRenderedScrollLeft!==this.scrollLeft){if(this.hasFrozenRows){const i=Qt(!0,{},t);this._options.frozenBottom?(i.top=this.actualFrozenRow,i.bottom=this.getDataLength()):(i.top=0,i.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(i)}this.cleanUpAndRenderCells(t)}this.renderRows(t),this.hasFrozenRows&&(this._options.frozenBottom?this.renderRows({top:this.actualFrozenRow,bottom:this.getDataLength()-1,leftPx:t.leftPx,rightPx:t.rightPx}):this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:t.leftPx,rightPx:t.rightPx})),this.postProcessFromRow=e.top,this.postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this.lastRenderedScrollTop=this.scrollTop,this.lastRenderedScrollLeft=this.scrollLeft,this.triggerEvent(this.onRendered,{startRow:e.top,endRow:e.bottom,grid:this})}}handleHeaderRowScroll(){const e=this._headerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handleFooterRowScroll(){const e=this._footerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handlePreHeaderPanelScroll(){this.handleElementScroll(this._preHeaderPanelScroller)}handleTopHeaderPanelScroll(){this.handleElementScroll(this._topHeaderPanelScroller)}handleElementScroll(e){const t=e.scrollLeft;t!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=t)}handleScroll(e){return this.scrollHeight=this._viewportScrollContainerY.scrollHeight,this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollLeft=this._viewportScrollContainerX.scrollLeft,this._handleScroll(e?"scroll":"system")}_handleScroll(e="system"){let t=this._viewportScrollContainerY.scrollHeight-this._viewportScrollContainerY.clientHeight,i=this._viewportScrollContainerY.scrollWidth-this._viewportScrollContainerY.clientWidth;t=Math.max(0,t),i=Math.max(0,i),this.scrollTop>t&&(this.scrollTop=t,this.scrollHeight=t),this.scrollLeft>i&&(this.scrollLeft=i);const s=Math.abs(this.scrollTop-this.prevScrollTop),r=Math.abs(this.scrollLeft-this.prevScrollLeft);if(r&&(this.prevScrollLeft=this.scrollLeft,this._viewportScrollContainerX.scrollLeft=this.scrollLeft,this._headerScrollContainer.scrollLeft=this.scrollLeft,this._topPanelScrollers[0].scrollLeft=this.scrollLeft,this._options.createFooterRow&&(this._footerRowScrollContainer.scrollLeft=this.scrollLeft),this._options.createPreHeaderPanel&&(this.hasFrozenColumns()?this._preHeaderPanelScrollerR.scrollLeft=this.scrollLeft:this._preHeaderPanelScroller.scrollLeft=this.scrollLeft),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller.scrollLeft=this.scrollLeft),this.hasFrozenColumns()?(this.hasFrozenRows&&(this._viewportTopR.scrollLeft=this.scrollLeft),this._headerRowScrollerR.scrollLeft=this.scrollLeft):(this.hasFrozenRows&&(this._viewportTopL.scrollLeft=this.scrollLeft),this._headerRowScrollerL.scrollLeft=this.scrollLeft)),s&&!this._options.autoHeight&&(this.vScrollDir=this.prevScrollTop<this.scrollTop?1:-1,this.prevScrollTop=this.scrollTop,e==="mousewheel"&&(this._viewportScrollContainerY.scrollTop=this.scrollTop),this.hasFrozenColumns()&&(this.hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this.scrollTop:this._viewportTopL.scrollTop=this.scrollTop),s<this.viewportH?this.scrollTo(this.scrollTop+this.offset):(this.h===this.viewportH?this.page=0:this.page=Math.min(this.n-1,Math.floor(this.scrollTop*((this.th-this.viewportH)/(this.h-this.viewportH))*(1/this.ph))),this.offset=Math.round(this.page*this.cj))),r||s){const o=Math.abs(this.lastRenderedScrollLeft-this.scrollLeft),a=Math.abs(this.lastRenderedScrollTop-this.scrollTop);(o>20||a>20)&&(this._options.forceSyncScrolling||a<this.viewportH&&o<this.viewportW?this.render():this.scrollThrottle.enqueue(),this.triggerEvent(this.onViewportChanged,{}))}return this.triggerEvent(this.onScroll,{triggeredBy:e,scrollHeight:this.scrollHeight,scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),!!(r||s)}actionThrottle(e,t){let i=!1,s=!1;const r=()=>{i?s=!0:a()},o=()=>{s=!1},a=()=>{i=!0,window.clearTimeout(this._executionBlockTimer),this._executionBlockTimer=window.setTimeout(l,t),e.call(this)},l=()=>{s?(o(),a()):i=!1};return{enqueue:r.bind(this),dequeue:o.bind(this)}}asyncPostProcessRows(){const e=this.getDataLength();for(;this.postProcessFromRow<=this.postProcessToRow;){const t=this.vScrollDir>=0?this.postProcessFromRow++:this.postProcessToRow--,i=this.rowsCache[t];if(!(!i||t>=e)){this.postProcessedRows[t]||(this.postProcessedRows[t]={}),this.ensureCellNodesInRowsCache(t),Object.keys(i.cellNodesByColumnIdx).forEach(s=>{if(i.cellNodesByColumnIdx.hasOwnProperty(s)){const r=+s,o=this.columns[r],a=this.postProcessedRows[t][r];if(o.asyncPostRender&&a!=="R"){const l=i.cellNodesByColumnIdx[r];l&&o.asyncPostRender(l,t,this.getDataItem(t),o,a==="C"),this.postProcessedRows[t][r]="R"}}}),this.h_postrender=window.setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}asyncPostProcessCleanupRows(){if(this.postProcessedCleanupQueue.length>0){const e=this.postProcessedCleanupQueue[0].groupId;for(;this.postProcessedCleanupQueue.length>0&&this.postProcessedCleanupQueue[0].groupId===e;){const t=this.postProcessedCleanupQueue.shift();if((t==null?void 0:t.actionType)==="R"&&t.node.forEach(i=>{i.remove()}),(t==null?void 0:t.actionType)==="C"){const i=this.columns[t.columnIdx];i.asyncPostRenderCleanup&&t.node&&i.asyncPostRenderCleanup(t.node,t.rowIdx,i)}}this.h_postrenderCleanup=window.setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay)}}updateCellCssStylesOnRenderedRows(e,t){let i,s,r;typeof this.rowsCache=="object"&&Object.keys(this.rowsCache).forEach(o=>{this.rowsCache&&(r=t==null?void 0:t[o],s=e==null?void 0:e[o],r&&Object.keys(r).forEach(a=>{(!s||r[a]!==s[a])&&(i=this.getCellNode(+o,this.getColumnIndex(a)),i&&i.classList.remove(r[a]))}),s&&Object.keys(s).forEach(a=>{(!r||r[a]!==s[a])&&(i=this.getCellNode(+o,this.getColumnIndex(a)),i&&i.classList.add(s[a]))}))})}addCellCssStyles(e,t){if(this.cellCssClasses[e])throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key "${e}" already exists.`);this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}removeCellCssStyles(e){this.cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[e]),delete this.cellCssClasses[e],this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:null,grid:this}))}setCellCssStyles(e,t){const i=this.cellCssClasses[e];this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}getCellCssStyles(e){return this.cellCssClasses[e]}flashCell(e,t,i=250){const s=(r,o)=>{o>0&&(window.clearTimeout(this._flashCellTimer),this._flashCellTimer=window.setTimeout(()=>{o%2===0?r.classList.add(this._options.cellFlashingCssClass||""):r.classList.remove(this._options.cellFlashingCssClass||""),s(r,o-1)},i))};if(this.rowsCache[e]){const r=this.getCellNode(e,t);r&&s(r,5)}}highlightRow(e,t){const i=this.rowsCache[e];t||(t=this._options.rowHighlightDuration),Array.isArray(i==null?void 0:i.rowNode)&&this._options.rowHighlightCssClass&&(i.rowNode.forEach(s=>s.classList.add(...ht(this._options.rowHighlightCssClass))),window.clearTimeout(this._highlightRowTimer),this._highlightRowTimer=window.setTimeout(()=>{var s;(s=i.rowNode)==null||s.forEach(r=>r.classList.remove(...ht(this._options.rowHighlightCssClass)))},t))}handleMouseWheel(e,t,i,s){this.scrollHeight=this._viewportScrollContainerY.scrollHeight,e.shiftKey?this.scrollLeft=this._viewportScrollContainerX.scrollLeft+i*10:(this.scrollTop=Math.max(0,this._viewportScrollContainerY.scrollTop-s*this._options.rowHeight),this.scrollLeft=this._viewportScrollContainerX.scrollLeft+i*10),this._handleScroll("mousewheel")&&e.preventDefault()}handleDragInit(e,t){const i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;const s=this.triggerEvent(this.onDragInit,t,e);return s.isImmediatePropagationStopped()?s.getReturnValue():!1}handleDragStart(e,t){const i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;const s=this.triggerEvent(this.onDragStart,t,e);return s.isImmediatePropagationStopped()?s.getReturnValue():!1}handleDrag(e,t){return this.triggerEvent(this.onDrag,t,e).getReturnValue()}handleDragEnd(e,t){this.triggerEvent(this.onDragEnd,t,e)}handleKeyDown(e){var s,r,o;let i=this.triggerEvent(this.onKeyDown,{row:this.activeRow,cell:this.activeCell},e).isImmediatePropagationStopped();if(!i&&!e.shiftKey&&!e.altKey){if(this._options.editable&&((s=this.currentEditor)!=null&&s.keyCaptureList)&&this.currentEditor.keyCaptureList.indexOf(e.which)>-1)return;e.ctrlKey&&e.key==="Home"?this.navigateTopStart():e.ctrlKey&&e.key==="End"?this.navigateBottomEnd():e.ctrlKey&&e.key==="ArrowUp"?this.navigateTop():e.ctrlKey&&e.key==="ArrowDown"?this.navigateBottom():e.ctrlKey&&e.key==="ArrowLeft"||!e.ctrlKey&&e.key==="Home"?this.navigateRowStart():(e.ctrlKey&&e.key==="ArrowRight"||!e.ctrlKey&&e.key==="End")&&this.navigateRowEnd()}if(!i)if(!e.shiftKey&&!e.altKey&&!e.ctrlKey)if(e.key==="Escape"){if(!((r=this.getEditorLock())!=null&&r.isActive()))return;this.cancelEditAndSetFocus()}else e.key==="PageDown"?(this.navigatePageDown(),i=!0):e.key==="PageUp"?(this.navigatePageUp(),i=!0):e.key==="ArrowLeft"?i=this.navigateLeft():e.key==="ArrowRight"?i=this.navigateRight():e.key==="ArrowUp"?i=this.navigateUp():e.key==="ArrowDown"?i=this.navigateDown():e.key==="Tab"?i=this.navigateNext():e.key==="Enter"&&(this._options.editable&&(this.currentEditor?this.activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():(o=this.getEditorLock())!=null&&o.commitCurrentEdit()&&this.makeActiveCellEditable(void 0,void 0,e)),i=!0);else e.key==="Tab"&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(i=this.navigatePrev());i&&(e.stopPropagation(),e.preventDefault())}handleClick(e){var s,r,o;const t=e instanceof Ot?e.getNativeEvent():e;if(!this.currentEditor&&(t.target!==document.activeElement||t.target.classList.contains("slick-cell"))){const a=this.getTextSelection();this.setFocus(),this.setTextSelection(a)}const i=this.getCellFromEvent(t);if(!(!i||this.currentEditor!==null&&this.activeRow===i.row&&this.activeCell===i.cell)&&(e=this.triggerEvent(this.onClick,{row:i.row,cell:i.cell},e||t),!(e.isImmediatePropagationStopped()||t.defaultPrevented)&&this.canCellBeActive(i.row,i.cell)&&(!((s=this.getEditorLock())!=null&&s.isActive())||(r=this.getEditorLock())!=null&&r.commitCurrentEdit()))){this.scrollRowIntoView(i.row,!1);const a=((o=t.target)==null?void 0:o.className)===vB,l=this.columns[i.cell],c=!!(this._options.editable&&(l!=null&&l.editorClass)&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(i.row,i.cell),null,a,c,t)}}handleContextMenu(e){const t=e.target.closest(".slick-cell");t&&(this.activeCellNode===t&&this.currentEditor!==null||this.triggerEvent(this.onContextMenu,{},e))}handleDblClick(e){const t=this.getCellFromEvent(e);!t||this.currentEditor!==null&&this.activeRow===t.row&&this.activeCell===t.cell||(this.triggerEvent(this.onDblClick,{row:t.row,cell:t.cell},e),!e.defaultPrevented&&this._options.editable&&this.gotoCell(t.row,t.cell,!0,e))}handleHeaderMouseEnter(e){const t=k.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseEnter,{column:t,grid:this},e)}handleHeaderMouseOver(e){const t=k.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseOver,{column:t,grid:this},e)}handleHeaderMouseLeave(e){const t=k.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseLeave,{column:t,grid:this},e)}handleHeaderMouseOut(e){const t=k.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseOut,{column:t,grid:this},e)}handleHeaderRowMouseEnter(e){const t=k.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseEnter,{column:t,grid:this},e)}handleHeaderRowMouseOver(e){const t=k.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseOver,{column:t,grid:this},e)}handleHeaderRowMouseLeave(e){const t=k.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseLeave,{column:t,grid:this},e)}handleHeaderRowMouseOut(e){const t=k.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseOut,{column:t,grid:this},e)}handleHeaderContextMenu(e){const t=e.target.closest(".slick-header-column"),i=t&&k.storage.get(t,"column");this.triggerEvent(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){if(!this.columnResizeDragging){const t=e.target.closest(".slick-header-column"),i=t&&k.storage.get(t,"column");i&&this.triggerEvent(this.onHeaderClick,{column:i},e)}}handlePreHeaderContextMenu(e){this.triggerEvent(this.onPreHeaderContextMenu,{node:e.target},e)}handlePreHeaderClick(e){this.columnResizeDragging||this.triggerEvent(this.onPreHeaderClick,{node:e.target},e)}handleFooterContextMenu(e){const t=e.target.closest(".slick-footerrow-column"),i=t&&k.storage.get(t,"column");this.triggerEvent(this.onFooterContextMenu,{column:i},e)}handleFooterClick(e){const t=e.target.closest(".slick-footerrow-column"),i=t&&k.storage.get(t,"column");this.triggerEvent(this.onFooterClick,{column:i},e)}handleCellMouseOver(e){this.triggerEvent(this.onMouseEnter,{},e)}handleCellMouseOut(e){this.triggerEvent(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this.columns.length)}getCellFromPoint(e,t){let i=this.getRowFromPosition(t),s=0,r=0;for(let o=0;o<this.columns.length&&r<=e;o++)this.columns[o]&&(r+=this.columns[o].width,s++);return s-=1,i<-1&&(i=-1),{row:i,cell:s}}getCellFromNode(e){const t=/l\d+/.exec(e.className);if(!t)throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${e.className}`);return parseInt(t[0].substr(1,t[0].length-1),10)}getRowFromNode(e){var t;for(const i in this.rowsCache)if(this.rowsCache){for(const s in this.rowsCache[i].rowNode)if(((t=this.rowsCache[i].rowNode)==null?void 0:t[+s])===e)return i?parseInt(i,10):0}return null}getFrozenRowOffset(e){let t=0;return this.hasFrozenRows?this._options.frozenBottom?e>=this.actualFrozenRow?this.h<this.viewportTopH?t=this.actualFrozenRow*this._options.rowHeight:t=this.h:t=0:e>=this.actualFrozenRow?t=this.frozenRowsHeight:t=0:t=0,t}getCellFromEvent(e){const t=e instanceof Ot?e.getNativeEvent():e;if(!t)return null;const i=t.touches?t.touches[0]:t,s=t.target.closest(".slick-cell");if(!s)return null;let r=this.getRowFromNode(s.parentNode);if(this.hasFrozenRows){let a=0;const l=Gt(k.parents(s,".grid-canvas")[0]);k.parents(s,".grid-canvas-bottom").length&&(a=this._options.frozenBottom?k.height(this._canvasTopL):this.frozenRowsHeight);const h=i.clientX-l.left,d=i.clientY-l.top+a+document.documentElement.scrollTop;r=this.getCellFromPoint(h,d).row}const o=this.getCellFromNode(s);return!ia(r)||!ia(o)?null:{row:r,cell:o}}getCellNodeBox(e,t){var l;if(!this.cellExists(e,t))return null;const i=this.getFrozenRowOffset(e),s=this.getRowTop(e)-i,r=s+this._options.rowHeight-1;let o=0;for(let c=0;c<t;c++)this.columns[c]&&!this.columns[c].hidden&&(o+=this.columns[c].width||0,this._options.frozenColumn===c&&(o=0));const a=o+(((l=this.columns[t])==null?void 0:l.width)||0);return{top:s,left:o,bottom:r,right:a}}resetActiveCell(){this.setActiveCellInternal(null,!1)}unsetActiveCell(){var e,t;Le(this.activeCellNode)&&(this.makeActiveCellNormal(),this.activeCellNode.classList.remove("active"),(t=(e=this.rowsCache[this.activeRow])==null?void 0:e.rowNode)==null||t.forEach(i=>i.classList.remove("active")))}focus(){this.setFocus()}setFocus(){this.tabbingDirection===-1?this._focusSink.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),t>this._options.frozenColumn){const s=this.getColspan(e,t);this.internalScrollColumnIntoView(this.columnPosLeft[t],this.columnPosRight[t+(s>1?s-1:0)])}}internalScrollColumnIntoView(e,t){var s;const i=this.scrollLeft+k.width(this._viewportScrollContainerX)-(this.viewportHasVScroll&&((s=this.scrollbarDimensions)==null?void 0:s.width)||0);e<this.scrollLeft?(this._viewportScrollContainerX.scrollLeft=e,this.handleScroll(),this.render()):t>i&&(this._viewportScrollContainerX.scrollLeft=Math.min(e,t-this._viewportScrollContainerX.clientWidth),this.handleScroll(),this.render())}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this.columnPosLeft[e],this.columnPosRight[e])}setActiveCellInternal(e,t,i,s,r){var o,a;if(this.unsetActiveCell(),this.activeCellNode=e,Le(this.activeCellNode)){const l=Gt(this.activeCellNode);let c=Math.floor(Gt(k.parents(this.activeCellNode,".grid-canvas")[0]).top);const h=k.parents(this.activeCellNode,".grid-canvas-bottom").length;this.hasFrozenRows&&h&&(c-=this._options.frozenBottom?k.height(this._canvasTopL):this.frozenRowsHeight);const d=this.getCellFromPoint(l.left,Math.ceil(l.top)-c);this.activeRow=this.activePosY=d.row,this.activeCell=this.activePosX=this.getCellFromNode(this.activeCellNode),!Le(t)&&this._options.autoEditNewRow&&(t=this.activeRow===this.getDataLength()||this._options.autoEdit),this._options.showCellSelection&&(document.querySelectorAll(".slick-cell.active").forEach(u=>u.classList.remove("active")),this.activeCellNode.classList.add("active"),(a=(o=this.rowsCache[this.activeRow])==null?void 0:o.rowNode)==null||a.forEach(u=>u.classList.add("active"))),this._options.editable&&t&&this.isCellPotentiallyEditable(this.activeRow,this.activeCell)&&(this._options.asyncEditorLoading?(window.clearTimeout(this.h_editorLoader),this.h_editorLoader=window.setTimeout(()=>{this.makeActiveCellEditable(void 0,i,r)},this._options.asyncEditorLoadDelay)):this.makeActiveCellEditable(void 0,i,r))}else this.activeRow=this.activeCell=null;s||this.triggerEvent(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){var e;if((e=document.selection)!=null&&e.empty)try{document.selection.empty()}catch{}else if(window.getSelection){const t=window.getSelection();t!=null&&t.removeAllRanges&&t.removeAllRanges()}}isCellPotentiallyEditable(e,t){const i=this.getDataLength();return!(e<i&&!this.getDataItem(e)||this.columns[t].cannotTriggerInsert&&e>=i||!this.columns[t]||this.columns[t].hidden||!this.getEditor(e,t))}makeActiveCellNormal(e=!1){var t;if(this.currentEditor){if(this.triggerEvent(this.onBeforeCellEditorDestroy,{editor:this.currentEditor}),this.currentEditor.destroy(),this.currentEditor=null,this.activeCellNode){const i=this.getDataItem(this.activeRow);if(this.activeCellNode.classList.remove("editable"),this.activeCellNode.classList.remove("invalid"),i){const s=this.columns[this.activeCell],o=this.getFormatter(this.activeRow,s)(this.activeRow,this.activeCell,this.getDataItemValueForColumn(i,s),s,i,this);this.applyFormatResultToCellNode(o,this.activeCellNode),this.invalidatePostProcessingResults(this.activeRow)}e&&this.setFocus()}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),(t=this.getEditorLock())==null||t.deactivate(this.editController)}}editActiveCell(e,t,i){this.makeActiveCellEditable(e,t,i)}makeActiveCellEditable(e,t,i){var a,l,c,h;if(!this.activeCellNode)return;if(!this._options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when grid options.editable is false");if(window.clearTimeout(this.h_editorLoader),!this.isCellPotentiallyEditable(this.activeRow,this.activeCell))return;const s=this.columns[this.activeCell],r=this.getDataItem(this.activeRow);if(this.triggerEvent(this.onBeforeEditCell,{row:this.activeRow,cell:this.activeCell,item:r,column:s,target:"grid"}).getReturnValue()===!1){this.setFocus();return}(a=this.getEditorLock())==null||a.activate(this.editController),this.activeCellNode.classList.add("editable");const o=e||this.getEditor(this.activeRow,this.activeCell);if(typeof o=="function"){!e&&!o.suppressClearOnEdit&&tt(this.activeCellNode);let d=this.getItemMetadaWhenExists(this.activeRow);d=d==null?void 0:d.columns;const u=d&&(d[s.id]||d[this.activeCell]),p={grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:s,columnMetaData:u,item:r||{},event:i,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)};this.currentEditor=new o(p),r&&this.currentEditor&&(this.currentEditor.loadValue(r),t&&typeof((l=this.currentEditor)==null?void 0:l.preClick)=="function"&&this.currentEditor.preClick()),this.serializedEditorValue=(c=this.currentEditor)==null?void 0:c.serializeValue(),(h=this.currentEditor)!=null&&h.position&&this.handleActiveCellPositionChange()}}commitEditAndSetFocus(e=!0){var t;(t=this.getEditorLock())!=null&&t.commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&!this._options.autoCommitEdit&&e&&this.navigateDown())}cancelEditAndSetFocus(){var e;(e=this.getEditorLock())!=null&&e.cancelCurrentEdit()&&this.setFocus()}absBox(e){const t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:e.offsetWidth,height:e.offsetWidth,visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;let i=e.offsetParent;for(;(e=e.parentNode)!==document.body&&!(!e||!e.parentNode);){const s=getComputedStyle(e);t.visible&&e.scrollHeight!==e.offsetHeight&&s.overflowY!=="visible"&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!==e.offsetWidth&&s.overflowX!=="visible"&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===i&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,i=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width}return t}getActiveCellPosition(){return this.absBox(this.activeCellNode)}getGridPosition(){return this.absBox(this._container)}handleActiveCellPositionChange(){if(this.activeCellNode&&(this.triggerEvent(this.onActiveCellPositionChanged,{}),this.currentEditor)){const e=this.getActiveCellPosition();this.currentEditor.show&&this.currentEditor.hide&&(e.visible?this.currentEditor.show():this.currentEditor.hide()),this.currentEditor.position&&this.currentEditor.position(e)}}getCellEditor(){return this.currentEditor}getActiveCell(){return this.activeCellNode?{row:this.activeRow,cell:this.activeCell}:null}getActiveCellNode(){return this.activeCellNode}getTextSelection(){let e=null;if(window.getSelection){const t=window.getSelection();((t==null?void 0:t.rangeCount)||0)>0&&(e=t.getRangeAt(0))}return e}setTextSelection(e){if(window.getSelection&&e){const t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}}scrollRowIntoView(e,t){var i;if(!this.hasFrozenRows||!this._options.frozenBottom&&e>this.actualFrozenRow-1||this._options.frozenBottom&&e<this.actualFrozenRow-1){const s=k.height(this._viewportScrollContainerY),r=this.hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,o=r*this._options.rowHeight,a=(r+1)*this._options.rowHeight-s+(this.viewportHasHScroll&&((i=this.scrollbarDimensions)==null?void 0:i.height)||0);(r+1)*this._options.rowHeight>this.scrollTop+s+this.offset?(this.scrollTo(t?o:a),this.render()):r*this._options.rowHeight<this.scrollTop+this.offset&&(this.scrollTo(t?a:o),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){const t=e*this.numVisibleRows,i=this.scrollTop+this._options.rowHeight-1;if(this.scrollTo((this.getRowFromPosition(i)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&Le(this.activeRow)){let s=this.activeRow+t;const r=this.getDataLengthIncludingAddNew();s>=r&&(s=r-1),s<0&&(s=0);const o=e===1?this.gotoDown(s-1||0,this.activeCell,this.activePosY,this.activePosX):this.gotoUp(s+1,this.activeCell,this.activePosY,this.activePosX);this.navigateToPos(o)}}navigatePageDown(){this.unsetActiveCell(),this.scrollPage(1)}navigatePageUp(){this.unsetActiveCell(),this.scrollPage(-1)}navigateTop(){this.unsetActiveCell(),this.navigateToRow(0)}navigateBottom(){var i;const e=this.getDataLength()-1;let t=((i=this.getParentRowSpanByCell(e,this.activeCell))==null?void 0:i.start)??e;do if(this._options.enableCellRowSpan&&this.setActiveRow(t),this.navigateToRow(t)&&this.activeCell===this.activePosX||!Le(this.activeCell))break;while(--t>0)}navigateToRow(e){const t=this.getDataLength();if(!t)return!1;e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0);let i=!Le(this.activeCell)||!Le(this.activeRow);if(this._options.enableCellNavigation&&Le(this.activeRow)){let s=0,r=null;const o=this.activePosX;for(;s<=this.activePosX;)this.canCellBeActive(e,s)&&(r=s,(!Le(this.activeCell)||s===this.activeCell)&&(i=!0)),s+=this.getColspan(e,s);r!==null?(this.setActiveCellInternal(this.getCellNode(e,r)),this.activePosX=o):this.resetActiveCell()}return i}getColspan(e,t){const i=this.getItemMetadaWhenExists(e);if(!i||!i.columns)return 1;t>=this.columns.length&&(t=this.columns.length-1);const s=i.columns[this.columns[t].id]||i.columns[t];let r=s==null?void 0:s.colspan;return r==="*"?r=this.columns.length-t:r=r||1,r}getRowspan(e,t){let i=1;const s=this.getItemMetadaWhenExists(e);return s!=null&&s.columns&&Object.keys(s.columns).forEach(r=>{const o=Number(r);if(o===t){const a=s.columns[o];i=Number((a==null?void 0:a.rowspan)||1)}}),i}findFocusableRow(e,t,i){let s=e;const r=this._colsWithRowSpanCache[t]||new Set;let o=!1;return Array.from(r).forEach(a=>{const[l,c]=a.split(":").map(Number);!o&&e>=l&&e<=c&&(s=i==="up"?l:c,this.canCellBeActive(s,t)&&(o=!0))}),s}findFirstFocusableCell(e){let t=0,i=e,s=-1;for(;t<this.columns.length;){const r=this.getParentRowSpanByCell(e,t);if(i=r!==null&&r.start!==e?r.start:e,this.canCellBeActive(i,t)){s=t;break}t+=this.getColspan(i,t)}return{cell:s,row:i}}findLastFocusableCell(e){let t=0,i=e,s=-1;for(;t<this.columns.length;){const r=this.getParentRowSpanByCell(e,t);i=r!==null&&r.start!==e?r.start:e,this.canCellBeActive(i,t)&&(s=t),t+=this.getColspan(i,t)}return{cell:s,row:i}}findSpanStartingCell(e,t){const i=this.getParentRowSpanByCell(e,t),s=i!==null&&i.start!==e?i.start:e;let r=0,o=0;for(;r<this.columns.length;){if(r+=this.getColspan(s,r),r>t)return r=o,{cell:r,row:s};o=r}return{cell:r,row:s}}gotoRight(e,t,i,s){if(t<this.columns.length){let r=t+1,o=i;do{const a=this.findSpanStartingCell(i,r);if(o=a.row,r=a.cell,this.canCellBeActive(o,r)&&r>t)break;r+=this.getColspan(o,a.cell)}while(r<this.columns.length);if(r<this.columns.length)return{row:o,cell:r,posX:r,posY:i}}return null}gotoLeft(e,t,i,s){const r=this.findFirstFocusableCell(e);if(t<=0||r.cell>=t)return null;let o,a={row:e,cell:r.cell,posX:r.cell,posY:i};for(;;){if(o=this.gotoRight(a.row,a.cell,a.posY,a.posX),!o)return null;if(o.cell>=t){const l=this.findFocusableRow(i,a.cell,"up");return l!==a.row&&(a.row=l),a}a=o}}gotoDown(e,t,i,s){let r;const o=this.getDataLengthIncludingAddNew();do for(e+=this.getRowspan(e,s),r=t=0;t<=s;)r=t,t+=this.getColspan(e,t);while(e<=o&&!this.canCellBeActive(e,r));return e<=o?{row:e,cell:r,posX:s,posY:e}:null}gotoUp(e,t,i,s){let r;if(e>0){do for(e=this.findFocusableRow(e-1,s,"up"),r=t=0;t<=s;)r=t,t+=this.getColspan(e,t);while(e>=0&&!this.canCellBeActive(e,r));if(t<=this.columns.length)return{row:e,cell:r,posX:s,posY:e}}return null}gotoNext(e,t,i,s){var o;if(!ia(e)&&!ia(t)&&(e=t=i=s=0,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t,posY:i};let r=this.gotoRight(e,t,i,s);if(!r){let a;for(;!r&&++i<this.getDataLength()+(this._options.enableAddRow?1:0);)a=this.findFirstFocusableCell(i),e=((o=this.getParentRowSpanByCell(i,a.cell))==null?void 0:o.start)??i,r={row:e,cell:a.cell,posX:a.cell,posY:i}}return r}gotoPrev(e,t,i,s){var o;if(!ia(e)&&!ia(t)&&(e=i=this.getDataLengthIncludingAddNew()-1,t=s=this.columns.length-1,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t,posY:i};let r=this.gotoLeft(e,t,i,s);if(!r){let a;for(;!r&&--i>=0;)a=this.findLastFocusableCell(i),a.cell>-1&&(e=((o=this.getParentRowSpanByCell(i,a.cell))==null?void 0:o.start)??i,r={row:e,cell:a.cell,posX:a.cell,posY:i})}return r}gotoRowStart(e,t,i,s){const r=this.findFirstFocusableCell(e);return{row:r.row,cell:r.cell,posX:r.cell,posY:e}}gotoRowEnd(e,t,i,s){const r=this.findLastFocusableCell(e);return r.cell===-1?null:{row:r.row,cell:r.cell,posX:r.cell,posY:e}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigateTopStart(){return this.unsetActiveCell(),this.navigateToRow(0),this.navigate("home")}navigateBottomEnd(){return this.navigateBottom(),this.navigate("end")}navigate(e){var o;if(!this._options.enableCellNavigation||!this.activeCellNode&&e!=="prev"&&e!=="next")return!1;if(!((o=this.getEditorLock())!=null&&o.commitCurrentEdit()))return!0;this.setFocus(),this.unsetActiveCell();const t={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1};this.tabbingDirection=t[e];const r={up:this.gotoUp,down:this.gotoDown,left:this.gotoLeft,right:this.gotoRight,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd}[e].call(this,this.activeRow,this.activeCell,this.activePosY,this.activePosX);return this.navigateToPos(r)}navigateToPos(e){if(e){if(this.hasFrozenRows&&this._options.frozenBottom&&e.row===this.getDataLength())return;const t=e.row===this.getDataLength();return(!this._options.frozenBottom&&e.row>=this.actualFrozenRow||this._options.frozenBottom&&e.row<this.actualFrozenRow)&&this.scrollCellIntoView(e.row,e.cell,!t&&this._options.emulatePagingWhenScrolling),this.setActiveCellInternal(this.getCellNode(e.row,e.cell)),this.activePosX=e.posX,this.activePosY=e.posY,!0}else return this.setActiveCellInternal(this.getCellNode(this.activeRow,this.activeCell)),!1}getCellNode(e,t){if(this.rowsCache[e]){this.ensureCellNodesInRowsCache(e);try{return this.rowsCache[e].cellNodesByColumnIdx.length>t?this.rowsCache[e].cellNodesByColumnIdx[t]:null}catch{return this.rowsCache[e].cellNodesByColumnIdx[t]}}return null}setActiveCell(e,t,i,s,r){!this.initialized||!this._options.enableCellNavigation||e>this.getDataLength()||e<0||t>=this.columns.length||t<0||(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),i,s,r))}setActiveRow(e,t,i){t??(t=0),!(!this.initialized||e>this.getDataLength()||e<0||t>=this.columns.length||t<0)&&(this.activeRow=e,i||this.scrollCellIntoView(e,t,!1))}canCellBeActive(e,t){var o,a,l;if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=this.columns.length||t<0||!this.columns[t]||this.columns[t].hidden||(((o=this.getParentRowSpanByCell(e,t))==null?void 0:o.start)??e)!==e)return!1;const s=this.getItemMetadaWhenExists(e);if((s==null?void 0:s.focusable)!==void 0)return!!s.focusable;const r=s==null?void 0:s.columns;return((a=r==null?void 0:r[this.columns[t].id])==null?void 0:a.focusable)!==void 0?!!r[this.columns[t].id].focusable:((l=r==null?void 0:r[t])==null?void 0:l.focusable)!==void 0?!!r[t].focusable:!!this.columns[t].focusable}canCellBeSelected(e,t){if(e>=this.getDataLength()||e<0||t>=this.columns.length||t<0||!this.columns[t]||this.columns[t].hidden)return!1;const i=this.getItemMetadaWhenExists(e);if((i==null?void 0:i.selectable)!==void 0)return!!i.selectable;const s=(i==null?void 0:i.columns)&&(i.columns[this.columns[t].id]||i.columns[t]);return(s==null?void 0:s.selectable)!==void 0?!!s.selectable:!!this.columns[t].selectable}gotoCell(e,t,i,s){var r;if(this.initialized&&this.canCellBeActive(e,t)&&((r=this.getEditorLock())!=null&&r.commitCurrentEdit())){this.scrollCellIntoView(e,t,!1);const o=this.getCellNode(e,t),a=this.columns[t],l=!!(this._options.editable&&(a!=null&&a.editorClass)&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(o,i||e===this.getDataLength()||this._options.autoEdit,null,l,s),this.currentEditor||this.setFocus()}}commitCurrentEdit(){var s;const e=this,t=e.getDataItem(e.activeRow),i=e.columns[e.activeCell];if(e.currentEditor){if(e.currentEditor.isValueChanged()){const r=e.currentEditor.validate();if(r.valid){const o=e.activeRow,a=e.activeCell,l=e.currentEditor,c=e.currentEditor.serializeValue(),h=e.serializedEditorValue;if(e.activeRow<e.getDataLength()){const d={row:o,cell:a,editor:l,serializedValue:c,prevSerializedValue:h,execute:()=>{l.applyValue(t,c),e.updateRow(o),e.triggerEvent(e.onCellChange,{command:"execute",row:o,cell:a,item:t,column:i})},undo:()=>{l.applyValue(t,h),e.updateRow(o),e.triggerEvent(e.onCellChange,{command:"undo",row:o,cell:a,item:t,column:i})}};e._options.editCommandHandler?(e.makeActiveCellNormal(!0),e._options.editCommandHandler(t,i,d)):(d.execute(),e.makeActiveCellNormal(!0))}else{const d={};e.currentEditor.applyValue(d,e.currentEditor.serializeValue()),e.makeActiveCellNormal(!0),e.triggerEvent(e.onAddNewRow,{item:d,column:i})}return!((s=e.getEditorLock())!=null&&s.isActive())}else return e.activeCellNode&&(e.activeCellNode.classList.remove("invalid"),k.width(e.activeCellNode),e.activeCellNode.classList.add("invalid")),e.triggerEvent(e.onValidationError,{editor:e.currentEditor,cellNode:e.activeCellNode,validationResults:r,row:e.activeRow,cell:e.activeCell,column:i}),e.currentEditor.focus(),!1}e.makeActiveCellNormal(!0)}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){const t=[],i=this.columns.length-1;for(let s=0;s<e.length;s++)t.push(new es(e[s],0,e[s],i));return t}getSelectedRows(){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");return this.selectedRows.slice(0)}setSelectedRows(e,t){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");const i=this.getEditorLock();typeof(i==null?void 0:i.isActive)=="function"&&!i.isActive()&&this.selectionModel.setSelectedRanges(this.rowsToRanges(e),t||"SlickGrid.setSelectedRows")}sanitizeHtmlString(e){var t;return typeof((t=this._options)==null?void 0:t.sanitizer)!="function"||!e||typeof e!="string"?e:this._options.sanitizer(e)}}class KB{constructor(e,t,i){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._clearFilterTriggered=!1,this._collectionObservers=[],this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new as}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){var e,t;return((t=(e=this.columnDef)==null?void 0:e.filter)==null?void 0:t.collectionOptions)??{}}get collection(){return this._collection}get columnFilter(){var e;return((e=this.columnDef)==null?void 0:e.filter)||{}}get filterDomElement(){return this._filterElm}get filterOptions(){var e,t;return{...(e=this.gridOptions.defaultFilterOptions)==null?void 0:e.autocompleter,...(t=this.columnFilter)==null?void 0:t.filterOptions}}get customStructure(){var i,s,r,o,a;let e=(i=this.columnFilter)==null?void 0:i.customStructure;const t=((s=this.columnFilter)==null?void 0:s.type)??((r=this.columnDef)==null?void 0:r.type);return!e&&t===N.object&&((o=this.columnDef)!=null&&o.dataKey)&&((a=this.columnDef)!=null&&a.labelKey)&&(e={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),e}get defaultOperator(){return de.equal}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}get instance(){return this._instance}get operator(){var e;return((e=this.columnFilter)==null?void 0:e.operator)??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var i,s,r,o,a,l;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);this.enableTranslateLabel=((i=this.columnFilter)==null?void 0:i.enableTranslateLabel)??!1,this.labelName=((s=this.customStructure)==null?void 0:s.label)??"label",this.valueName=((r=this.customStructure)==null?void 0:r.value)??"value",this.labelPrefixName=((o=this.customStructure)==null?void 0:o.labelPrefix)??"labelPrefix",this.labelSuffixName=((a=this.customStructure)==null?void 0:a.labelSuffix)??"labelSuffix",this._locales=((l=this.gridOptions)==null?void 0:l.locales)??se.locales;const t=this.columnFilter.collection;return this._collection=t,this.renderDomElement(t),new Promise(async(c,h)=>{try{const d=this.columnFilter.collectionAsync;let u;d&&!this.columnFilter.collection?(u=fA(d,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),c(u)):(u=t,c(t)),(d||this.columnFilter.enableCollectionWatch)&&(await(u??d),this.watchCollectionChanges())}catch(d){h(d)}})}clear(e=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this.updateFilterStyle(!1))}destroy(){var e,t,i;typeof((e=this._instance)==null?void 0:e.destroy)=="function"&&this._instance.destroy(),this._filterElm,(i=(t=this._filterElm)==null?void 0:t.remove)==null||i.call(t),this._collection=void 0,this._bindEventService.unbindAll(),this._collectionObservers.forEach(s=>s==null?void 0:s.disconnect()),x_(this.subscriptions)}getValues(){var e;return((e=this._filterElm)==null?void 0:e.value)||""}setValues(e,t,i=!1){e&&this._filterElm&&(this._filterElm.value=e),this.updateFilterStyle(this.getValues()!==""),this.operator=t||this.defaultOperator,i&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[this.getValues()],shouldTriggerQuery:!0})}filterCollection(e){var i;let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const s=this.columnFilter.collectionFilterBy,r=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=((i=this.collectionService)==null?void 0:i.filterCollection(t,s,r))||[]}return t}sortCollection(e){var i;let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const s=this.columnFilter.collectionSortBy;t=((i=this.collectionService)==null?void 0:i.sortCollection(this.columnDef,t,s,this.enableTranslateLabel))||[]}return t}watchCollectionChanges(){var e;(e=this.columnFilter)!=null&&e.collection&&(this._collectionObservers.push(Yd(this.columnFilter.collection,t=>{this.renderDomElement(this.columnFilter.collection||t||[])})),I_(this.columnFilter,"collection",t=>{this.renderDomElement(t||[]),this.columnFilter.collection&&this._collectionObservers.push(Yd(this.columnFilter.collection,i=>{this.renderDomElement(this.columnFilter.collection||i||[])}))}))}renderDomElement(e){var s;if(!Array.isArray(e)&&((s=this.collectionOptions)!=null&&s.collectionInsideObjectProperty)){const r=this.collectionOptions.collectionInsideObjectProperty;e=Dr(e,r||"")}let t=e;t&&(t=this.filterCollection(t),t=this.sortCollection(t));const i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=t,this._filterElm=this.createFilterElement(t,i),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(e,t){var a,l,c,h,d,u,p,f,g,m,_;this._collection=e;const i=((a=this.columnDef)==null?void 0:a.id)??"";tt(this.filterContainerElm);let s=((l=this.gridOptions)==null?void 0:l.defaultFilterPlaceholder)??"";(c=this.columnFilter)!=null&&c.placeholder&&(s=this.columnFilter.placeholder),this._filterElm=I("input",{type:"text",ariaLabel:((h=this.columnFilter)==null?void 0:h.ariaLabel)??`${eu(i+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:s,className:`form-control search-filter slick-filter filter-${i} slick-autocomplete-container`,value:t??"",dataset:{columnid:`${i}`}});const r=t;Array.isArray(e)&&(e.every(b=>k_(b))?e=e.map(b=>({label:b,value:b})):e=e.map(b=>({label:b==null?void 0:b[this.labelName],value:b==null?void 0:b[this.valueName],labelPrefix:(b==null?void 0:b[this.labelPrefixName])??"",labelSuffix:(b==null?void 0:b[this.labelSuffixName])??""}))),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${((d=this.filterOptions)==null?void 0:d.className)??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&((u=this.translaterService)!=null&&u.translate)?this.translaterService.translate("NO_ELEMENTS_FOUND"):((p=this._locales)==null?void 0:p.TEXT_NO_ELEMENTS_FOUND)??"No elements found",customize:(b,C,v)=>{v.style.width=""},onSelect:b=>{this.isItemSelected=!0,this.handleSelect(b)},...this.filterOptions},(f=this.gridOptions)!=null&&f.darkMode&&(this._autocompleterOptions.className+=" slick-dark-mode"),this.autocompleterOptions.className=ht(this.autocompleterOptions.className).join(" "),(g=this._autocompleterOptions.renderItem)!=null&&g.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Jd(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(e)?this._autocompleterOptions.render=((m=this._autocompleterOptions.render)==null?void 0:m.bind(this))??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),(_=this.filterOptions)!=null&&_.fetch?(dB(this._filterElm,this._autocompleterOptions),this._instance=pC(this._autocompleterOptions)):this._instance=pC({...this._autocompleterOptions,fetch:(b,C)=>{e&&C(e.filter(v=>((typeof v=="string"?v:v==null?void 0:v.label)||"").toLowerCase().includes(b.toLowerCase())))}}),this._filterElm.value=r??"";const o=I("div",{className:"autocomplete-filter-container"});return o.appendChild(this._filterElm),o.appendChild(I("span")),t&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(o),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(e){var t;if(e!==void 0){const s=((t=this.filterOptions)==null?void 0:t.renderItem)??!1,r=typeof e=="string"?e:s?e[this.labelName]:e.label;let o=typeof e=="string"?e:s?e[this.valueName]:e.value;o=this.trimWhitespaceWhenEnabled(o),this.updateFilterStyle(o!==""),this.setValues(r),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[o],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){var s;let t=((s=e==null?void 0:e.target)==null?void 0:s.value)??"";const i=this.filterOptions.triggerOnEveryKeyStroke??!1;if(t=this.trimWhitespaceWhenEnabled(t),this._clearFilterTriggered||t===""||i){const r={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?r.clearFilterTriggered=this._clearFilterTriggered:(r.operator=this.operator,r.searchTerms=[t]),this.updateFilterStyle(t!==""),this.callback(e,r)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(e){const t=typeof e=="string"?e:(e==null?void 0:e.label)??"";return I("div",{textContent:t||""})}renderCustomItem(e){var s,r;const t=((r=(s=this._autocompleterOptions)==null?void 0:s.renderItem)==null?void 0:r.templateCallback(e))??"",i=document.createElement("div");return this.grid.applyHtmlCode(i,t),i}renderCollectionItem(e){var c;const t=((c=this.columnFilter)==null?void 0:c.enableRenderHtml)??!1,i=e.labelPrefix||"",s=e.label||"",r=e.labelSuffix||"",o=i+s+r,a=this.grid.sanitizeHtmlString(o)||"",l=document.createElement("div");return l[t?"innerHTML":"textContent"]=a,l}trimWhitespaceWhenEnabled(e){let t=e;const i=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;return typeof e=="string"&&i&&(t=e.trim()),t}updateFilterStyle(e){this.isItemSelected=e,e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}}/*! name: vanilla-calendar-pro v2.9.10 | url: https://github.com/uvarov-frontend/vanilla-calendar-pro */var YB=Object.defineProperty,IC=Object.getOwnPropertySymbols,qB=Object.prototype.hasOwnProperty,XB=Object.prototype.propertyIsEnumerable,Wg=(n,e,t)=>e in n?YB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,PA=(n,e)=>{for(var t in e||(e={}))qB.call(e,t)&&Wg(n,t,e[t]);if(IC)for(var t of IC(e))XB.call(e,t)&&Wg(n,t,e[t]);return n},Pe=(n,e,t)=>(Wg(n,typeof e!="symbol"?e+"":e,t),t);const QB={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"},ZB=n=>`<div class="${n.controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${n.grid}"><#Multiple><div class="${n.column}"><div class="${n.header}"><div class="${n.headerContent}"><#Month /><#Year /></div></div><div class="${n.wrapper}"><#WeekNumbers /><div class="${n.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,JB=n=>`<div class="${n.header}"><div class="${n.headerContent}"><#Month /><#Year /></div></div><div class="${n.wrapper}"><div class="${n.content}"><#Months /></div></div>`,eV=n=>`<div class="${n.header}"><#ArrowPrev /><div class="${n.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${n.wrapper}"><div class="${n.content}"><#Years /></div></div>`;class tV{constructor(){var e;Pe(this,"isInit",!1),Pe(this,"isInputInit",!1),Pe(this,"input",!1),Pe(this,"type","default"),Pe(this,"months",2),Pe(this,"jumpMonths",1),Pe(this,"jumpToSelectedDate",!1),Pe(this,"toggleSelected",!0),Pe(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),Pe(this,"settings",{lang:"en",iso8601:!0,range:{min:void 0,max:void 0,disablePast:!1,disableGaps:!1,edgesOnly:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),Pe(this,"locale",{months:[],weekday:[]}),Pe(this,"sanitizer",t=>t),Pe(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),Pe(this,"popups",{}),Pe(this,"CSSClasses",PA({},QB)),Pe(this,"DOMTemplates",{default:(e=this.CSSClasses,`<div class="${e.header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div><#ControlTime />`),multiple:ZB(this.CSSClasses),month:JB(this.CSSClasses),year:eV(this.CSSClasses)}),Pe(this,"HTMLElement"),Pe(this,"HTMLOriginalElement"),Pe(this,"HTMLInputElement"),Pe(this,"rangeMin"),Pe(this,"rangeMax"),Pe(this,"rangeDisabled"),Pe(this,"rangeEnabled"),Pe(this,"selectedDates"),Pe(this,"selectedHolidays"),Pe(this,"selectedMonth"),Pe(this,"selectedYear"),Pe(this,"selectedHours"),Pe(this,"selectedMinutes"),Pe(this,"selectedKeeping"),Pe(this,"selectedTime"),Pe(this,"currentType"),Pe(this,"correctMonths"),Pe(this,"viewYear"),Pe(this,"dateMin"),Pe(this,"dateMax")}}const bn=n=>`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`,ut=n=>new Date(`${n}T00:00:00`),Za=n=>n.reduce((e,t)=>{if(t instanceof Date||typeof t=="number"){const i=t instanceof Date?t:new Date(t);e.push(i.toISOString().substring(0,10))}else t.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(t):t.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,(i,s,r)=>{const o=ut(s),a=ut(r),l=new Date(o.getTime());for(;l<=a;l.setDate(l.getDate()+1))e.push(bn(l));return i});return e},[]),zh=()=>{const n=new Date;return new Date(n.getTime()-6e4*n.getTimezoneOffset()).toISOString().substring(0,10)},Mc=n=>n?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(n)]||String(n):"",ul={notFoundSelector:n=>`${n} is not found, check the first argument passed to new VanillaCalendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:'You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".',incorrectTheme:'Incorrect name of theme in "settings.visibility.theme".',incorrectTime:"The value of the time property can be: false, true, 12 or 24."},iV=n=>{var e;if(n.jumpToSelectedDate&&((e=n.settings.selected.dates)!=null&&e.length)&&n.settings.selected.month===void 0&&n.settings.selected.year===void 0){const s=ut(Za(n.settings.selected.dates)[0]);n.settings.selected.month=s.getMonth(),n.settings.selected.year=s.getFullYear()}const t=n.settings.selected.month!==void 0&&Number(n.settings.selected.month)>=0&&Number(n.settings.selected.month)<12,i=n.settings.selected.year!==void 0&&Number(n.settings.selected.year)>=0&&Number(n.settings.selected.year)<=9999;n.selectedMonth=t?Number(n.settings.selected.month):n.date.today.getMonth(),n.selectedYear=i?Number(n.settings.selected.year):n.date.today.getFullYear(),n.viewYear=n.selectedYear},sV=n=>{var e,t,i;n.date.min==="today"&&(n.date.min=zh()),n.date.max==="today"&&(n.date.max=zh()),n.settings.range.min==="today"&&(n.settings.range.min=zh()),n.settings.range.max==="today"&&(n.settings.range.max=zh()),n.settings.range.min=n.settings.range.min?ut(n.date.min)>=ut(n.settings.range.min)?n.date.min:n.settings.range.min:n.date.min,n.settings.range.max=n.settings.range.max?ut(n.date.max)<=ut(n.settings.range.max)?n.date.max:n.settings.range.max:n.date.max;const s=n.settings.range.disablePast&&!n.settings.range.disableAllDays&&ut(n.settings.range.min)<n.date.today;n.rangeMin=s||n.settings.range.disableAllDays?bn(n.date.today):n.settings.range.min,n.rangeMax=n.settings.range.disableAllDays?bn(n.date.today):n.settings.range.max,n.rangeDisabled=n.settings.range.disabled&&!n.settings.range.disableAllDays?Za(n.settings.range.disabled):n.settings.range.disableAllDays?[n.rangeMin]:[],n.rangeDisabled.length>1&&n.rangeDisabled.sort((r,o)=>+new Date(r)-+new Date(o)),n.rangeEnabled=n.settings.range.enabled?Za(n.settings.range.enabled):[],(e=n.rangeEnabled)!=null&&e[0]&&((t=n.rangeDisabled)!=null&&t[0])&&(n.rangeDisabled=n.rangeDisabled.filter(r=>!n.rangeEnabled.includes(r))),n.rangeEnabled.length>1&&n.rangeEnabled.sort((r,o)=>+new Date(r)-+new Date(o)),(i=n.rangeEnabled)!=null&&i[0]&&n.settings.range.disableAllDays&&(n.rangeMin=n.rangeEnabled[0],n.rangeMax=n.rangeEnabled[n.rangeEnabled.length-1])},nV=n=>{var e,t;n.selectedDates=(e=n.settings.selected.dates)!=null&&e[0]?Za(n.settings.selected.dates):[],n.selectedHolidays=(t=n.settings.selected.holidays)!=null&&t[0]?Za(n.settings.selected.holidays):[]},rV=n=>{n.dateMin=n.settings.visibility.disabled?ut(n.date.min):ut(n.rangeMin),n.dateMax=n.settings.visibility.disabled?ut(n.date.max):ut(n.rangeMax)},oV=n=>{const e=n.settings.selection.time===!0||n.settings.selection.time===12;if(e||n.settings.selection.time===24){let t=!1;if(typeof n.settings.selected.time=="string"){const i=e?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g;n.settings.selected.time.replace(i,(s,r,o,a)=>(r&&o&&(t=!0,n.selectedHours=r,n.selectedMinutes=o),a&&e?n.selectedKeeping=a:e&&(n.selectedKeeping="AM"),""))}!t&&e?(n.selectedHours=Mc(String(n.date.today.getHours())),n.selectedMinutes=String(n.date.today.getMinutes()),n.selectedKeeping=Number(n.date.today.getHours())>=12?"PM":"AM"):t||(n.selectedHours=String(n.date.today.getHours()),n.selectedMinutes=String(n.date.today.getMinutes())),n.selectedHours=Number(n.selectedHours)<10?`0${Number(n.selectedHours)}`:`${n.selectedHours}`,n.selectedMinutes=Number(n.selectedMinutes)<10?`0${Number(n.selectedMinutes)}`:`${n.selectedMinutes}`,n.selectedTime=`${n.selectedHours}:${n.selectedMinutes}${n.selectedKeeping?` ${n.selectedKeeping}`:""}`}else if(n.settings.selection.time)throw new Error(ul.incorrectTime)},aV=n=>{n.correctMonths=n.type==="multiple"?n.months===1?2:n.months>12?12:n.months:1},kA=n=>{n.currentType=n.type,iV(n),sV(n),nV(n),rV(n),oV(n),aV(n)},RC=({arrowPrev:n,arrowNext:e,isPrevHidden:t,isNextHidden:i})=>{n.style.visibility=t?"hidden":"",e.style.visibility=i?"hidden":""},G_=n=>{var e,t;if(n.currentType==="month")return;const i=(e=n.HTMLElement)==null?void 0:e.querySelector(`.${n.CSSClasses.arrowPrev}`),s=(t=n.HTMLElement)==null?void 0:t.querySelector(`.${n.CSSClasses.arrowNext}`);!i||!s||{default:()=>{const r=ut(bn(new Date(n.selectedYear,n.selectedMonth,1))),o=new Date(r.getTime()),a=new Date(r.getTime());o.setMonth(o.getMonth()-n.jumpMonths),a.setMonth(a.getMonth()+n.jumpMonths),n.settings.selection.year||(n.dateMin.setFullYear(r.getFullYear()),n.dateMax.setFullYear(r.getFullYear()));const l=!n.settings.selection.month||o.getFullYear()<n.dateMin.getFullYear()||o.getFullYear()===n.dateMin.getFullYear()&&o.getMonth()<n.dateMin.getMonth(),c=!n.settings.selection.month||a.getFullYear()>n.dateMax.getFullYear()||a.getFullYear()===n.dateMax.getFullYear()&&a.getMonth()>n.dateMax.getMonth();RC({arrowPrev:i,arrowNext:s,isPrevHidden:l,isNextHidden:c})},year:()=>{RC({arrowPrev:i,arrowNext:s,isPrevHidden:n.dateMin.getFullYear()&&n.viewYear-7<=n.dateMin.getFullYear(),isNextHidden:n.dateMax.getFullYear()&&n.viewYear+7>=n.dateMax.getFullYear()})}}[n.currentType==="multiple"?"default":n.currentType]()},DA=(n,e)=>{if(!n)return null;const t=ut(n),i=e?t.getDay()||7:t.getDay();t.setDate(t.getDate()+4-i);const s=new Date(t.getFullYear(),0,1),r=Math.ceil(((+t-+s)/864e5+1)/7);return{year:t.getFullYear(),week:r}};function j_(n){if(!n||!n.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const e=n.getBoundingClientRect(),t=document.documentElement;return{bottom:e.bottom,right:e.right,top:e.top+window.scrollY-t.clientTop,left:e.left+window.scrollX-t.clientLeft}}function lV(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function K_(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function cV(n){const{top:e,left:t}=lV(),{top:i,left:s}=j_(n),{vh:r,vw:o}=K_(),a=i-e,l=s-t;return{top:a,bottom:r-(a+n.clientHeight),left:l,right:o-(l+n.clientWidth)}}function LA(n,e,t=5){const i={top:!0,bottom:!0,left:!0,right:!0},s=[];if(!e||!n)return{canShow:i,parentPositions:s};const{bottom:r,top:o}=cV(n),{top:a,left:l}=j_(n),{height:c,width:h}=e.getBoundingClientRect(),{vh:d,vw:u}=K_(),p=u/2,f=d/2;return[{condition:a<f,position:"top"},{condition:a>f,position:"bottom"},{condition:l<p,position:"left"},{condition:l>p,position:"right"}].forEach(({condition:g,position:m})=>{g&&s.push(m)}),Object.assign(i,{top:c<=o-t,bottom:c<=r-t,left:h<=l,right:h<=u-l}),{canShow:i,parentPositions:s}}function hV(n,e){const t="left";if(!e||!n)return t;const{canShow:i,parentPositions:s}=LA(n,e),r=i.left&&i.right;return(r&&i.bottom?"center":r&&i.top?["top","center"]:Array.isArray(s)?[s[0]==="bottom"?"top":"bottom",...s.slice(1)]:s)||t}const Ug=(n,e,t,i)=>{if(n){const s=t==="auto"?hV(n,e):t,r={top:-e.offsetHeight,bottom:n.offsetHeight,left:0,center:n.offsetWidth/2-e.offsetWidth/2,right:n.offsetWidth-e.offsetWidth},o=Array.isArray(s)?s[0]:"bottom",a=Array.isArray(s)?s[1]:s;o==="bottom"?(e.classList.remove(i.calendarToInputTop),e.classList.add(i.calendarToInputBottom)):(e.classList.remove(i.calendarToInputBottom),e.classList.add(i.calendarToInputTop));const{top:l,left:c}=j_(n),h=l+r[o];let d=c+r[a];const{vw:u}=K_();if(d+e.clientWidth>u){const p=window.innerWidth-document.body.clientWidth;d=u-e.clientWidth-p}else d<0&&(d=0);Object.assign(e.style,{left:`${d}px`,top:`${h}px`})}},dV=(n,e,t,i)=>{const s=n.CSSClasses.dayPopup,r=i.querySelector(`[data-calendar-day="${e}"]`);if(r&&(t!=null&&t.modifier&&r.classList.add(...t.modifier.trim().split(" ")),t==null?void 0:t.html)){const o=r.parentElement,a=document.createElement("div");a.className=s,a.innerHTML=n.sanitizer(t.html),o.appendChild(a),setTimeout(()=>{if(a){const{canShow:l}=LA(o,a),c=5;let h=o.offsetHeight,d=0;l.bottom||(h=-a.offsetHeight-c),l.left&&!l.right&&(d=o.offsetWidth-a.offsetWidth/2),!l.left&&l.right&&(d=a.offsetWidth/2),Object.assign(a.style,{left:`${d}px`,top:`${h}px`})}})}},uV=(n,e)=>{var t;n.popups&&((t=Object.entries(n.popups))==null||t.forEach(([i,s])=>dV(n,i,s,e)))},pV=(n,e,t,i,s)=>{const r=e[t].querySelector(`.${n.CSSClasses.dayBtn}`),o=DA(r==null?void 0:r.dataset.calendarDay,n.settings.iso8601);if(!o)return;const a=i.cloneNode(!0);a.innerText=String(o.week),a.dataset.calendarYearWeek=String(o.year),s.appendChild(a)},fV=(n,e,t,i,s)=>{if(!n.settings.visibility.weekNumbers)return;i.textContent="";const r=document.createElement("b");r.className=n.CSSClasses.weekNumbersTitle,r.innerText="#",i.appendChild(r);const o=document.createElement("div");o.className=n.CSSClasses.weekNumbersContent,i.appendChild(o);const a=document.createElement("button");a.type="button",a.className=n.CSSClasses.weekNumber;const l=s.querySelectorAll(`.${n.CSSClasses.day}`),c=Math.ceil((e+t)/7);for(let h=0;h<c;h++)pV(n,l,h===0?6:7*h,a,o)},gV=(n,e,t)=>{var i,s,r,o,a;const l=(i=n.settings.range.disableWeekday)==null?void 0:i.includes(t),c=n.settings.range.disableAllDays&&!!((s=n.rangeEnabled)!=null&&s[0]);!l&&!c||(r=n.rangeEnabled)!=null&&r.includes(e)||(o=n.rangeDisabled)!=null&&o.includes(e)||(n.rangeDisabled.push(e),(a=n.rangeDisabled)==null||a.sort((h,d)=>+new Date(h)-+new Date(d)))},mV=(n,e,t,i,s,r,o)=>{var a,l,c;if((ut(n.rangeMin)>ut(r)||ut(n.rangeMax)<ut(r)||(a=n.rangeDisabled)!=null&&a.includes(r)||!n.settings.selection.month&&o||!n.settings.selection.year&&ut(r).getFullYear()!==e)&&(i.classList.add(n.CSSClasses.dayBtnDisabled),i.tabIndex=-1),n.settings.visibility.today&&bn(n.date.today)===r&&i.classList.add(n.CSSClasses.dayBtnToday),!n.settings.visibility.weekend||s!==0&&s!==6||i.classList.add(n.CSSClasses.dayBtnWeekend),(l=n.selectedHolidays)!=null&&l.includes(r)&&i.classList.add(n.CSSClasses.dayBtnHoliday),(c=n.selectedDates)!=null&&c.includes(r)&&(i.classList.add(n.CSSClasses.dayBtnSelected),n.selectedDates.length>1&&n.settings.selection.day==="multiple-ranged"&&(n.selectedDates[0]===r&&t.classList.add(n.CSSClasses.daySelectedFirst),n.selectedDates[n.selectedDates.length-1]===r&&t.classList.add(n.CSSClasses.daySelectedLast),n.selectedDates[0]!==r&&n.selectedDates[n.selectedDates.length-1]!==r&&t.classList.add(n.CSSClasses.daySelectedIntermediate))),n.settings.range.edgesOnly&&n.selectedDates.length>1&&n.settings.selection.day==="multiple-ranged"){const h=+new Date(n.selectedDates[0]),d=+new Date(n.selectedDates[n.selectedDates.length-1]),u=+new Date(r);u>h&&u<d&&(i.classList.add(n.CSSClasses.dayBtnSelected),t.classList.add(n.CSSClasses.daySelectedIntermediate))}},Y_=(n,e,t,i,s,r,o,a)=>{const l=document.createElement("div");l.className=n.CSSClasses.day;const c=document.createElement("button");c.className=`${n.CSSClasses.dayBtn}${a?` ${a}`:""}`,c.type="button",c.innerText=String(i),c.dataset.calendarDay=r,n.settings.visibility.weekNumbers&&(()=>{const h=DA(r,n.settings.iso8601);h&&(c.dataset.calendarWeekNumber=String(h.week))})(),o?n.settings.visibility.daysOutside&&l.appendChild(c):l.appendChild(c),gV(n,r,s),mV(n,e,l,c,s,r,o),t.appendChild(l),n.actions.getDays&&n.actions.getDays(i,r,l,c,n)},_V=(n,e,t,i,s)=>{let r=new Date(t,i,0).getDate()-(s-1);const o=i===0?t-1:t,a=i===0?12:i<10?`0${i}`:i;for(let l=s;l>0;l--,r++){const c=`${o}-${a}-${r}`,h=ut(c).getDay();Y_(n,t,e,r,h,c,!0,n.CSSClasses.dayBtnPrev)}},vV=(n,e,t,i,s)=>{for(let r=1;r<=t;r++){const o=new Date(i,s,r),a=bn(o),l=o.getDay();Y_(n,i,e,r,l,a,!1,null)}},bV=(n,e,t,i,s,r)=>{const o=r+t,a=7*Math.ceil(o/7)-o,l=s+1===12?i+1:i,c=s+1===12?"01":s+2<10?`0${s+2}`:s+2;for(let h=1;h<=a;h++){const d=`${l}-${c}-${h<10?`0${h}`:String(h)}`,u=ut(d).getDay();Y_(n,i,e,h,u,d,!0,n.CSSClasses.dayBtnNext)}},hu=n=>{const e=n.HTMLElement.querySelectorAll(`.${n.CSSClasses.days}`),t=n.HTMLElement.querySelectorAll(`.${n.CSSClasses.weekNumbers}`),i=new Date(n.selectedYear,n.selectedMonth,1);e.forEach((s,r)=>{const o=new Date(i);o.setMonth(o.getMonth()+r);const a=o.getMonth(),l=o.getFullYear(),c=new Date(l,a,1),h=new Date(l,a+1,0).getDate(),d=n.settings.iso8601?(c.getDay()!==0?c.getDay():7)-1:c.getDay();n.settings.selection.day&&s.classList.add(n.CSSClasses.daysSelecting),s.textContent="",_V(n,s,l,a,d),vV(n,s,h,l,a),bV(n,s,h,l,a,d),fV(n,d,h,t[r],s),uV(n,s)})},wV=(n,e,t,i)=>{const s=new Date(i.setMonth(n.selectedMonth+t)).getMonth(),r=n.settings.selection.month===!1||n.settings.selection.month==="only-arrows";e.tabIndex=r?-1:0,e.classList.toggle(n.CSSClasses.monthDisabled,r),e.setAttribute("data-calendar-selected-month",String(s)),e.innerText=n.locale.months[s]},CV=(n,e,t,i)=>{const s=new Date(i.setFullYear(n.selectedYear,n.selectedMonth+t)).getFullYear(),r=n.settings.selection.year===!1||n.settings.selection.year==="only-arrows";e.tabIndex=r?-1:0,e.classList.toggle(n.CSSClasses.yearDisabled,r),e.setAttribute("data-calendar-selected-year",String(s)),e.innerText=String(s)},ap=n=>{var e,t;const i=(e=n.HTMLElement)==null?void 0:e.querySelectorAll("[data-calendar-selected-month]"),s=(t=n.HTMLElement)==null?void 0:t.querySelectorAll("[data-calendar-selected-year]");if(!(i!=null&&i[0])&&(s!=null&&s[0]))return;const r=new Date(n.selectedYear,n.selectedMonth,1);i==null||i.forEach((o,a)=>wV(n,o,a,r)),s==null||s.forEach((o,a)=>CV(n,o,a,r))},Gg=(n,e)=>{const t=ut(bn(new Date(n.selectedYear,n.selectedMonth,1)));({prev:()=>t.setMonth(t.getMonth()-n.jumpMonths),next:()=>t.setMonth(t.getMonth()+n.jumpMonths)})[e](),[n.selectedMonth,n.selectedYear]=[t.getMonth(),t.getFullYear()],ap(n),G_(n),hu(n)},yV=n=>`<button type="button"class="${n.CSSClasses.arrow} ${n.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,SV=n=>`<button type="button"class="${n.CSSClasses.arrow} ${n.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,EV=n=>`<button type="button"class="${n.CSSClasses.month}"data-calendar-selected-month></button>`,TV=n=>`<button type="button"class="${n.CSSClasses.year}"data-calendar-selected-year></button>`,AV=n=>`<div class="${n.CSSClasses.week}"></div>`,IV=n=>`<div class="${n.CSSClasses.days}"></div>`,RV=n=>`<div class="${n.CSSClasses.months}"></div>`,OV=n=>`<div class="${n.CSSClasses.years}"></div>`,xV=n=>n.settings.visibility.weekNumbers?`<div class="${n.CSSClasses.weekNumbers}"></div>`:"",PV=n=>n.settings.selection.time?`<div class="${n.CSSClasses.time}"></div>`:"",kV=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:SV,ArrowPrev:yV,ControlTime:PV,Days:IV,Month:EV,Months:RV,Week:AV,WeekNumbers:xV,Year:TV,Years:OV},Symbol.toStringTag,{value:"Module"})),Al=(n,e)=>e.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,(t,i)=>{const s=(r=i.replace(/[/\s\n\t]/g,""),kV[r]);var r;const o=s?s(n):"";return n.sanitizer(o)}).replace(/[\n\t]/g,""),DV=(n,e)=>e.replace(/<#Multiple>(.*?)<#\/Multiple>/g,(t,i)=>{let s="";for(let r=0;r<n.correctMonths;r++)s+=i;return n.sanitizer(s)}).replace(/[\n\t]/g,""),q_=(n,e)=>{const{HTMLElement:t,CSSClasses:i,DOMTemplates:s,type:r,currentType:o,correctMonths:a}=n,l=(h,d)=>{if(!e)return;const u=t.querySelector(`.${i.controls}`);u&&t.removeChild(u),t.querySelector(`.${i.grid}`).classList.add(i.gridDisabled);const p=e.closest(`.${i.column}`);p.classList.add(h),p.innerHTML=Al(n,d)},c={default:()=>{t.classList.add(i.calendarDefault),t.classList.remove(i.calendarMonth,i.calendarYear),t.innerHTML=Al(n,s.default)},multiple:()=>{a&&(t.classList.add(i.calendarMultiple),t.classList.remove(i.calendarMonth,i.calendarYear),t.innerHTML=DV(n,Al(n,s.multiple)))},month:()=>{r!=="multiple"?(t.classList.add(i.calendarMonth),t.classList.remove(i.calendarDefault,i.calendarYear),t.innerHTML=Al(n,s.month)):l(i.columnMonth,s.month)},year:()=>{r!=="multiple"?(t.classList.add(i.calendarYear),t.classList.remove(i.calendarDefault,i.calendarMonth),t.innerHTML=Al(n,s.year)):l(i.columnYear,s.year)}};t.classList.add(i.calendar),c[o]()},LV=(n,e,t,i,s)=>{const r=e.cloneNode(!1);return r.className=`${n.CSSClasses.yearsYear}${t===s?` ${n.CSSClasses.yearsYearSelected}`:i?` ${n.CSSClasses.yearsYearDisabled}`:""}`,r.dataset.calendarYear=String(s),r.title=String(s),r.innerText=String(s),i&&(r.tabIndex=-1),r},X_=(n,e)=>{const t=e!=null&&e.dataset.calendarSelectedYear?Number(e==null?void 0:e.dataset.calendarSelectedYear):n.selectedYear;n.currentType="year",q_(n,e),ap(n),G_(n);const i=n.HTMLElement.querySelector(`.${n.CSSClasses.years}`);if(!n.settings.selection.year||!i)return;i.classList.add(n.CSSClasses.yearsSelecting);const s=n.type!=="multiple"||n.selectedYear===t?0:1,r=document.createElement("button");r.type="button";for(let o=n.viewYear-7;o<n.viewYear+8;o++){const a=o<n.dateMin.getFullYear()+s||o>n.dateMax.getFullYear(),l=LV(n,r,t,a,o);i.appendChild(l),n.actions.getYears&&n.actions.getYears(o,l,n)}},NV=(n,e)=>{const t=e.target.closest(`.${n.CSSClasses.arrow}`);t&&(["default","multiple"].includes(n.currentType)?Gg(n,t.dataset.calendarArrow):n.currentType==="year"&&n.viewYear!==void 0&&(n.viewYear+={prev:-15,next:15}[t.dataset.calendarArrow],X_(n,e.target)),n.actions.clickArrow&&n.actions.clickArrow(e,n))},MV=(n,e)=>{var t;if(!n.settings.visibility.weekNumbers||!n.actions.clickWeekNumber)return;const i=e.target.closest(`.${n.CSSClasses.weekNumber}`),s=(t=n.HTMLElement)==null?void 0:t.querySelectorAll("[data-calendar-week-number]");if(!i||!s)return;const r=Number(i.innerText),o=Number(i.dataset.calendarYearWeek),a=Array.from(s).filter(l=>Number(l.dataset.calendarWeekNumber)===r);n.actions.clickWeekNumber(e,r,a,o,n)},NA=n=>`${n.charAt(0).toUpperCase()}${n.substring(1,n.length)}`.replace(/\./,""),FV=(n,e)=>{const t=new Date(`1978-01-0${e+1}T00:00:00.000Z`).toLocaleString(n.settings.lang,{weekday:"short",timeZone:"UTC"});n.locale.weekday.push(NA(t))},$V=(n,e)=>{const t=new Date(`1978-${e+1<=9?`0${e+1}`:e+1}-01T00:00:00.000Z`).toLocaleString(n.settings.lang,{month:"long",timeZone:"UTC"});n.locale.months.push(NA(t))},HV=n=>{if(n.settings.lang!=="define"||!n.locale.weekday[6]||!n.locale.months[11]){if(n.settings.lang==="define")throw new Error(ul.notLocale);n.locale.weekday=[],n.locale.months=[];for(let e=0;e<7;e++)FV(n,e);for(let e=0;e<12;e++)$V(n,e)}},OC=n=>{if(n.type!=="multiple")return 0;const e=n.HTMLElement.querySelectorAll(`.${n.CSSClasses.column}`),t=Array.from(e).findIndex(i=>i.classList.contains(`${n.CSSClasses.columnMonth}`));return t>0?t:0},BV=(n,e,t,i,s,r)=>{const o=e.cloneNode(!1);return o.className=`${n.CSSClasses.monthsMonth}${t===r?` ${n.CSSClasses.monthsMonthSelected}`:s?` ${n.CSSClasses.monthsMonthDisabled}`:""}`,o.title=i,o.innerText=`${n.settings.visibility.monthShort?i.substring(0,3):i}`,o.dataset.calendarMonth=String(r),s&&(o.tabIndex=-1),o},MA=(n,e)=>{var t,i;const s=e!=null&&e.dataset.calendarSelectedMonth?Number(e.dataset.calendarSelectedMonth):n.selectedMonth,r=(t=e==null?void 0:e.closest(`.${n.CSSClasses.column}`))==null?void 0:t.querySelector(`.${n.CSSClasses.year}`),o=r?Number(r.dataset.calendarSelectedYear):n.selectedYear;n.currentType="month",q_(n,e),ap(n);const a=(i=n.HTMLElement)==null?void 0:i.querySelector(`.${n.CSSClasses.months}`);if(!n.settings.selection.month||!a)return;a.classList.add(n.CSSClasses.monthsSelecting);const l=n.jumpMonths>1?n.locale.months.map((h,d)=>s-n.jumpMonths*d).concat(n.locale.months.map((h,d)=>s+n.jumpMonths*d)).filter(h=>h>=0&&h<=12):Array.from(Array(12).keys()),c=document.createElement("button");c.type="button";for(let h=0;h<12;h++){const d=n.locale.months[h],u=h<n.dateMin.getMonth()+OC(n)&&o<=n.dateMin.getFullYear()||h>n.dateMax.getMonth()+OC(n)&&o>=n.dateMax.getFullYear()||h!==s&&!l.includes(h),p=BV(n,c,s,d,u,h);a.appendChild(p),n.actions.getMonths&&n.actions.getMonths(h,p,n)}},Q_=(n,e)=>n&&e?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(n)][e]:"",Wh=(n,e,t)=>n.querySelector(`.${e}${t?` input[name="${t}"]`:""}`),xC=(n,e,t)=>{n.addEventListener("mouseover",()=>e.classList.add(t)),n.addEventListener("mouseout",()=>e.classList.remove(t))},wo=(n,e,t,i)=>{({hours:()=>{n.selectedHours=t},minutes:()=>{n.selectedMinutes=t}})[i](),n.selectedTime=`${n.selectedHours}:${n.selectedMinutes}${n.selectedKeeping?` ${n.selectedKeeping}`:""}`,n.actions.changeTime&&n.actions.changeTime(e,n),n.input&&n.HTMLInputElement&&n.actions.changeToInput&&n.actions.changeToInput(e,n)},PC=(n,e,t,i,s,r)=>{e.addEventListener("input",o=>{const a=o.target,l=Number(a.value),c=l<10?`0${l}`:`${l}`;if(s!=="hours"||r!==12)return t.value=c,void wo(n,o,c,s);l<r&&l>0?(t.value=c,n.selectedKeeping="AM",i.innerText=n.selectedKeeping,wo(n,o,c,s)):(l===0?(n.selectedKeeping="AM",i.innerText="AM"):(n.selectedKeeping="PM",i.innerText="PM"),t.value=Mc(a.value),wo(n,o,Mc(a.value),s))})},kC=(n,e,t,i,s,r)=>{t.addEventListener("change",o=>{const a=o.target,l=Number(a.value),c=l<10?`0${l}`:`${l}`;s==="hours"&&r===12?a.value&&l<=r&&l>0?(a.value=c,e.value=Q_(c,n.selectedKeeping),wo(n,o,c,s)):a.value&&l<24&&(l>r||l===0)?(l===0?(n.selectedKeeping="AM",i.innerText="AM"):(n.selectedKeeping="PM",i.innerText="PM"),a.value=Mc(a.value),e.value=c,wo(n,o,Mc(a.value),s)):a.value=n.selectedHours:a.value&&l<=r&&l>=0?(a.value=c,e.value=c,wo(n,o,c,s)):s==="hours"?a.value=n.selectedHours:s==="minutes"&&(a.value=n.selectedMinutes)})},VV=(n,e,t)=>{e.addEventListener("click",i=>{n.selectedKeeping=e.innerText.includes("AM")?"PM":"AM",e.innerText=n.selectedKeeping,t.value=Q_(n.selectedHours,n.selectedKeeping),wo(n,i,n.selectedHours,"hours")})},zV=(n,e,t)=>{const i=t===24?23:t||12,s=Wh(e,n.CSSClasses.timeRange,"hours"),r=Wh(e,n.CSSClasses.timeRange,"minutes"),o=Wh(e,n.CSSClasses.timeHours,"hours"),a=Wh(e,n.CSSClasses.timeMinutes,"minutes"),l=e.querySelector(`.${n.CSSClasses.timeKeeping}`);xC(s,o,n.CSSClasses.isFocus),xC(r,a,n.CSSClasses.isFocus),PC(n,s,o,l,"hours",i),PC(n,r,a,l,"minutes",0),kC(n,s,o,l,"hours",i),kC(n,r,a,l,"minutes",59),l&&VV(n,l,s)},DC=(n,e,t,i)=>`<label class="${e}"><input type="text"name="${n}"maxlength="2"value="${t}"${i?"disabled":""}></label>`,LC=(n,e,t,i,s,r)=>`<label class="${e}"><input type="range"name="${n}"min="${t}"max="${i}"step="${s}"value="${r}"></label>`,WV=n=>{const e=n.HTMLElement.querySelector(`.${n.CSSClasses.time}`);if(!e)return;const t=n.settings.selection.time===!0?12:n.settings.selection.time,i=n.settings.selection.controlTime==="range",[s,r]=[0,23],[o,a]=[0,59];e.innerHTML=n.sanitizer(`<div class="${n.CSSClasses.timeContent}">${DC("hours",n.CSSClasses.timeHours,n.selectedHours,i)}${DC("minutes",n.CSSClasses.timeMinutes,n.selectedMinutes,i)}${t===12?`<button type="button" class="${n.CSSClasses.timeKeeping}"${i?"disabled":""}>${n.selectedKeeping}</button>`:""}</div><div class="${n.CSSClasses.timeRanges}">${LC("hours",n.CSSClasses.timeRange,s,r,n.settings.selection.stepHours,n.selectedKeeping?Q_(n.selectedHours,n.selectedKeeping):n.selectedHours)}${LC("minutes",n.CSSClasses.timeRange,o,a,n.settings.selection.stepMinutes,n.selectedMinutes)}</div>`),zV(n,e,t)},UV=(n,e,t)=>{const i=document.createElement("b");e.textContent="";for(let s=0;s<t.length;s++){const r=t[s],o=i.cloneNode(!0);o.className=`${n.CSSClasses.weekDay}`,o.className=`${n.CSSClasses.weekDay}${n.settings.visibility.weekend&&n.settings.iso8601?s===5||s===6?` ${n.CSSClasses.weekDayWeekend}`:"":n.settings.visibility.weekend&&!n.settings.iso8601&&(s===0||s===6)?` ${n.CSSClasses.weekDayWeekend}`:""}`,o.innerText=`${r}`,e.appendChild(o)}},NC=n=>{const e=[...n.locale.weekday];e[0]&&(n.settings.iso8601&&e.push(e.shift()),n.HTMLElement.querySelectorAll(`.${n.CSSClasses.week}`).forEach(t=>UV(n,t,e)))},FA=["light","dark","system"],du={value:!1,set:()=>{du.value=!0},check:()=>du.value},$A=(n,e)=>FA.find(t=>{var i;return t!=="system"&&((i=n.getAttribute(e))==null?void 0:i.includes(t))}),Co=(n,e)=>{n.dataset.calendarTheme=e},MC=(n,e)=>{var t;if(t=e,Co(n.HTMLElement,t.matches?"dark":"light"),n.settings.visibility.theme!=="system"||du.check())return;const i=s=>{const r=document.querySelectorAll(`.${n.CSSClasses.calendar}`);r==null||r.forEach(o=>Co(o,s.matches?"dark":"light"))};e.addEventListener?e.addEventListener("change",i):e.addListener(i),du.set()},GV=(n,e,t)=>{new MutationObserver(i=>{for(let s=0;s<i.length;s++)if(i[s].attributeName===t){const r=$A(e,t);r&&Co(n.HTMLElement,r);break}}).observe(e,{attributes:!0})},jV=(n,e)=>{const t=n.settings.visibility.themeDetect?document.querySelector(n.settings.visibility.themeDetect):null;if(!t)return void MC(n,e);const i=n.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,(r,o)=>o),s=$A(t,i);s?(Co(n.HTMLElement,s),GV(n,t,i)):MC(n,e)},KV=n=>{if(!FA.includes(n.settings.visibility.theme))throw new Error(ul.incorrectTheme);if(window.matchMedia("(prefers-color-scheme)").media==="not all")return void Co(n.HTMLElement,"light");({light:()=>Co(n.HTMLElement,"light"),dark:()=>Co(n.HTMLElement,"dark"),system:()=>jV(n,window.matchMedia("(prefers-color-scheme: dark)"))})[n.settings.visibility.theme]()},ah=n=>{const e={default:()=>{NC(n),hu(n)},multiple:()=>{NC(n),hu(n)},month:()=>MA(n),year:()=>X_(n)};KV(n),HV(n),q_(n),ap(n),G_(n),WV(n),e[n.currentType]()},Fe={self:null,rangeMin:void 0,rangeMax:void 0},FC=()=>{var n;if(!((n=Fe.self)!=null&&n.HTMLElement))return;const{CSSClasses:e}=Fe.self;Fe.self.HTMLElement.querySelectorAll(`.${Fe.self.CSSClasses.dayBtnHover}`).forEach(t=>{var i;t.classList.remove(Fe.self.CSSClasses.dayBtnHover),(i=t.parentElement)==null||i.classList.remove(e.dayHoverIntermediate,e.dayHoverFirst,e.dayHoverLast)})},YV=(n,e,t)=>{var i,s,r;if(!((i=Fe.self)!=null&&i.selectedDates))return;const o=bn(n),{CSSClasses:a}=Fe.self;if((s=Fe.self.rangeDisabled)!=null&&s.includes(o))return;const l=(r=Fe.self.HTMLElement)==null?void 0:r.querySelectorAll(`[data-calendar-day="${o}"]`);l==null||l.forEach(c=>{var h;c.classList.add(a.dayBtnHover),(h=c.parentElement)==null||h.classList.add(a.dayHoverIntermediate)}),e==null||e.forEach(c=>{var h;return(h=c.parentElement)==null?void 0:h.classList.add(a.dayHoverFirst)}),t==null||t.forEach(c=>{var h;return(h=c.parentElement)==null?void 0:h.classList.add(a.dayHoverLast)})},jg=n=>{var e;if(!n.target||!((e=Fe.self)!=null&&e.selectedDates))return;if(!n.target.closest(`.${Fe.self.CSSClasses.days}`))return void FC();const t=n.target.closest("[data-calendar-day]");if(!t)return;const i=t.dataset.calendarDay,s=ut(Fe.self.selectedDates[0]),r=ut(i),o=Fe.self.HTMLElement.querySelectorAll(`[data-calendar-day="${Fe.self.selectedDates[0]}"]`),a=Fe.self.HTMLElement.querySelectorAll(`[data-calendar-day="${i}"]`),[l,c]=s<r?[o,a]:[a,o],[h,d]=s<r?[s,r]:[r,s];FC();for(let u=new Date(h);u<=d;u.setDate(u.getDate()+1))YV(u,l,c)},Kg=n=>{Fe.self&&n.key==="Escape"&&(Fe.self.selectedDates=[],Fe.self.HTMLElement.removeEventListener("mousemove",jg),document.removeEventListener("keydown",Kg),ah(Fe.self))},qV=()=>{var n,e,t;if(!((e=(n=Fe.self)==null?void 0:n.selectedDates)!=null&&e[0])||!((t=Fe.self.rangeDisabled)!=null&&t[0]))return;const i=ut(Fe.self.selectedDates[0]),[s,r]=Fe.self.rangeDisabled.map(o=>ut(o)).reduce(([o,a],l)=>[i>=l?l:o,i<l&&a===null?l:a],[null,null]);s&&(Fe.self.rangeMin=bn(new Date(s.setDate(s.getDate()+1)))),r&&(Fe.self.rangeMax=bn(new Date(r.setDate(r.getDate()-1))))},HA=(n,e)=>{var t;if(e){const i=n.selectedDates.length===1&&n.selectedDates[0].includes(e);n.selectedDates=i&&!n.settings.selection.cancelableDay?[e,e]:i&&n.settings.selection.cancelableDay?[]:n.selectedDates.length>1?[e]:[...n.selectedDates,e],(t=n.selectedDates)==null||t.sort((s,r)=>+new Date(s)-+new Date(r))}n.settings.range.disableGaps&&(Fe.rangeMin=Fe.rangeMin?Fe.rangeMin:n.rangeMin,Fe.rangeMax=Fe.rangeMax?Fe.rangeMax:n.rangeMax),Fe.self=n,{set:()=>{n.HTMLElement.addEventListener("mousemove",jg),document.addEventListener("keydown",Kg),n.settings.range.disableGaps&&qV()},reset:()=>{const[i,s]=[n.selectedDates[0],n.selectedDates[n.selectedDates.length-1]];n.selectedDates=n.selectedDates[0]!==n.selectedDates[n.selectedDates.length-1]?n.settings.range.edgesOnly?[i,s]:Za([`${i}:${s}`]):[n.selectedDates[0],n.selectedDates[0]],n.HTMLElement.removeEventListener("mousemove",jg),document.removeEventListener("keydown",Kg),n.settings.range.disableGaps&&Fe.self&&(Fe.self.rangeMin=Fe.rangeMin,Fe.self.rangeMax=Fe.rangeMax)}}[n.selectedDates.length===1?"set":"reset"]()},$C=(n,e,t)=>{if(!e.dataset.calendarDay)return;const i=e.dataset.calendarDay,s=e.classList.contains(n.CSSClasses.dayBtnSelected);if(s&&!n.settings.selection.cancelableDay)return;let r=!0;n.toggleSelected!==void 0&&(r=typeof n.toggleSelected=="function"?n.toggleSelected(n):n.toggleSelected),s&&!r||(n.selectedDates=s?n.selectedDates.filter(o=>o!==i):t?[...n.selectedDates,i]:[i])},XV=(n,e)=>{var t;const i=e.target,s=l=>i.closest(`.${l}`),r=s(n.CSSClasses.dayBtn);if(!n.settings.selection.day||!["single","multiple","multiple-ranged"].includes(n.settings.selection.day)||!r)return;({single:()=>$C(n,r,!1),multiple:()=>$C(n,r,!0),"multiple-ranged":()=>HA(n,r.dataset.calendarDay)})[n.settings.selection.day](),(t=n.selectedDates)==null||t.sort((l,c)=>+new Date(l)-+new Date(c)),n.actions.clickDay&&n.actions.clickDay(e,n),n.input&&n.HTMLInputElement&&n.HTMLElement&&n.actions.changeToInput&&n.actions.changeToInput(e,n);const o=s(n.CSSClasses.dayBtnPrev),a=s(n.CSSClasses.dayBtnNext);({prev:()=>Gg(n,"prev"),next:()=>Gg(n,"next"),default:()=>hu(n)})[o?"prev":a?"next":"default"]()},HC=(n,e,t,i,s)=>{const r=n.HTMLElement.querySelectorAll(`.${n.CSSClasses.column}`),o=Array.from(r).findIndex(l=>l.classList.contains(e)),a=Number(r[o].querySelector(`.${t}`).getAttribute(s));return n.currentType==="month"&&o>=0?i-o:n.currentType==="year"&&n.selectedYear!==a?i-1:i},QV=(n,e,t,i,s)=>{const r={year:()=>{var o,a;return(a=(o=n.actions).clickYear)==null?void 0:a.call(o,e,n)},month:()=>{var o,a;return(a=(o=n.actions).clickMonth)==null?void 0:a.call(o,e,n)}};({year:()=>{if(n.type==="multiple"){const o=HC(n,n.CSSClasses.columnYear,n.CSSClasses.year,Number(s.dataset.calendarYear),"data-calendar-selected-year"),a=n.selectedMonth<n.dateMin.getMonth()&&o<=n.dateMin.getFullYear(),l=n.selectedMonth>n.dateMax.getMonth()&&o>=n.dateMax.getFullYear(),c=o<n.dateMin.getFullYear(),h=o>n.dateMax.getFullYear();a||c?(n.selectedYear=n.dateMin.getFullYear(),n.selectedMonth=n.dateMin.getMonth()):l||h?(n.selectedYear=n.dateMax.getFullYear(),n.selectedMonth=n.dateMax.getMonth()):n.selectedYear=o}else n.selectedYear=Number(s.dataset.calendarYear)},month:()=>{if(n.type==="multiple"){const o=HC(n,n.CSSClasses.columnMonth,n.CSSClasses.month,Number(s.dataset.calendarMonth),"data-calendar-selected-month"),a=s.closest(`.${i.column}`).querySelector(`.${n.CSSClasses.year}`);n.selectedYear=Number(a.dataset.calendarSelectedYear);const l=o<n.dateMin.getMonth()&&n.selectedYear<=n.dateMin.getFullYear(),c=o>n.dateMax.getMonth()&&n.selectedYear>=n.dateMax.getFullYear();n.selectedMonth=l?n.dateMin.getMonth():c?n.dateMax.getMonth():o}else n.selectedMonth=Number(s.dataset.calendarMonth)}})[t](),r[t](),n.currentType=n.type,ah(n)},BC=(n,e,t,i)=>{if(!n.settings.selection[t])return;const s=e.target,r=h=>s.closest(`.${h}`),o=r(i.header),a=r(i.item),l=r(n.CSSClasses.grid),c=r(n.CSSClasses.column);n.currentType!==t&&o?{year:()=>X_(n,s),month:()=>MA(n,s)}[t]():a?QV(n,e,t,i,a):(n.currentType===t&&o||n.type==="multiple"&&n.currentType===t&&l&&!c)&&(n.currentType=n.type,ah(n))},BA=n=>{const e=t=>{NV(n,t),MV(n,t),XV(n,t),BC(n,t,"month",{header:n.CSSClasses.month,item:n.CSSClasses.monthsMonth,column:n.CSSClasses.columnMonth}),BC(n,t,"year",{header:n.CSSClasses.year,item:n.CSSClasses.yearsYear,column:n.CSSClasses.columnYear})};return n.HTMLElement.addEventListener("click",e),()=>n.HTMLElement.removeEventListener("click",e)},VA=(n,{year:e,month:t,dates:i,holidays:s,time:r}={})=>{var o;const a=PA({},n.settings.selected);n.settings.selected.year=e?a.year:n.selectedYear,n.settings.selected.month=t?a.month:n.selectedMonth,n.settings.selected.holidays=s?a.holidays:n.selectedHolidays,n.settings.selected.time=r?a.time:n.selectedTime,n.settings.selected.dates=i==="only-first"&&((o=n.selectedDates)!=null&&o[0])?[n.selectedDates[0]]:i===!0?a.dates:n.selectedDates,kA(n),ah(n),n.settings.selected=a,n.settings.selection.day==="multiple-ranged"&&i&&HA(n)},zA=(n,e=!0)=>{n.isInputInit=!0;const t=document.createElement("div");return t.className=`${n.CSSClasses.calendar} ${n.CSSClasses.calendarToInput} ${n.CSSClasses.calendarHidden}`,n.HTMLElement=t,document.body.appendChild(n.HTMLElement),n.HTMLElement.style.visibility="hidden",e&&queueMicrotask(()=>{Ug(n.HTMLInputElement,t,n.settings.visibility.positionToInput,n.CSSClasses),n.HTMLElement.style.visibility="visible",n.show()}),VA(n,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),n.actions.initCalendar&&n.actions.initCalendar(n),BA(n)},ZV=n=>{const e=[];n.HTMLInputElement=n.HTMLElement;const t=()=>Ug(n.HTMLInputElement,n.HTMLElement,n.settings.visibility.positionToInput,n.CSSClasses),i=o=>{o.key==="Escape"&&(n!=null&&n.HTMLInputElement&&(n!=null&&n.HTMLElement)&&n.hide(),document.removeEventListener("keydown",i))},s=o=>{var a;n&&o.target!==n.HTMLInputElement&&!((a=n.HTMLElement)!=null&&a.contains(o.target))&&(n.HTMLInputElement&&n.HTMLElement&&n.hide(),window.removeEventListener("resize",t),document.removeEventListener("click",s,{capture:!0}))},r=()=>{n.isInputInit?(Ug(n.HTMLInputElement,n.HTMLElement,n.settings.visibility.positionToInput,n.CSSClasses),n.HTMLElement.style.visibility="visible",n.show()):e.push(zA(n)),window.addEventListener("resize",t),document.addEventListener("click",s,{capture:!0}),document.addEventListener("keydown",i)};return n.HTMLInputElement.addEventListener("click",r),n.HTMLInputElement.addEventListener("focus",r),()=>{e.forEach(o=>o())}},JV=(n,{year:e,month:t,dates:i,holidays:s,time:r}={})=>{if(!n.isInit)throw new Error(ul.notInit);n.input&&!n.isInputInit&&zA(n,!1),VA(n,{year:e,month:t,dates:i,holidays:s,time:r}),n.actions.updateCalendar&&n.actions.updateCalendar(n)},ez=n=>{var e,t,i,s,r,o;if(!n.isInit)throw new Error(ul.notInit);n.input?((t=(e=n.HTMLElement)==null?void 0:e.parentElement)==null||t.removeChild(n.HTMLElement),(s=(i=n.HTMLInputElement)==null?void 0:i.replaceWith)==null||s.call(i,n.HTMLOriginalElement),n.HTMLInputElement=void 0):(o=(r=n.HTMLElement)==null?void 0:r.replaceWith)==null||o.call(r,n.HTMLOriginalElement),n.HTMLElement=n.HTMLOriginalElement,n.actions.destroyCalendar&&n.actions.destroyCalendar(n)};class tz extends tV{constructor(e,t){if(super(),Pe(this,"init",()=>{return(s=this).HTMLOriginalElement=s.HTMLElement.cloneNode(!0),s.isInit=!0,s.input?ZV(s):(kA(s),ah(s),s.actions.initCalendar&&s.actions.initCalendar(s),BA(s));var s}),Pe(this,"update",s=>JV(this,s)),Pe(this,"destroy",()=>ez(this)),Pe(this,"show",()=>{var s;(s=this).currentType?(s.HTMLElement.classList.remove(s.CSSClasses.calendarHidden),s.actions.showCalendar&&s.actions.showCalendar(s)):s.HTMLElement.click()}),Pe(this,"hide",()=>{var s;(s=this).currentType&&(s.HTMLElement.classList.add(s.CSSClasses.calendarHidden),s.actions.hideCalendar&&s.actions.hideCalendar(s))}),this.HTMLElement=typeof e=="string"?document.querySelector(e):e,!this.HTMLElement)throw new Error(ul.notFoundSelector(e));if(!t)return;const i=(s,r)=>{Object.keys(r).forEach(o=>{typeof s[o]!="object"||typeof r[o]!="object"||r[o]instanceof Date?s[o]=r[o]:i(s[o],r[o])})};i(this,t)}}class WA{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._lastClickIsDate=!1,this._shouldTriggerQuery=!0,this.hasTimePicker=!1,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new as}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}get columnFilter(){var e;return((e=this.columnDef)==null?void 0:e.filter)||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return this.inputFilterType==="compound"?de.empty:this.gridOptions.defaultFilterRangeOperator||de.rangeInclusive}get pickerOptions(){return this._pickerOptions||{}}get filterOptions(){var e,t;return{...(e=this.gridOptions.defaultFilterOptions)==null?void 0:e.date,...(t=this.columnFilter)==null?void 0:t.filterOptions}}get operator(){var e;return this.inputFilterType==="compound"?this._operator||this.columnFilter.operator||this.defaultOperator:((e=this.columnFilter)==null?void 0:e.operator)??this.defaultOperator}set operator(e){this.inputFilterType==="compound"?this._operator=e:this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.inputFilterType==="compound"&&(this.operator=e.operator||""),this.searchTerms=(e==null?void 0:e.searchTerms)??[],this.filterContainerElm=e.filterContainerElm;const t=this.inputFilterType==="compound"?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(t),this.updateFilterStyle(this.searchTerms.length>0),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this)),this._bindEventService.bind(document.body,"keydown",i=>{(i.key==="Escape"||i.key==="Tab")&&this.hide()}),this._bindEventService.bind(this._dateInputElm,"keydown",i=>{i.key==="Backspace"&&this.clear(!0,!1)})}clear(e=!0,t=!0){this.calendarInstance&&(this._clearFilterTriggered=t,this._shouldTriggerQuery=e,this._currentValue="",this.searchTerms=[],this._currentDateStrings=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.calendarInstance&&uB(this.calendarInstance)),this.onTriggerEvent(new Event("keyup")),this.updateFilterStyle(!1)}destroy(){var e,t,i,s;this._bindEventService.unbindAll(),(e=this.calendarInstance)==null||e.destroy(),tt(this.filterContainerElm),(t=this.filterContainerElm)==null||t.remove(),(i=this._selectOperatorElm)==null||i.remove(),(s=this._filterElm)==null||s.remove()}hide(){var e;typeof((e=this.calendarInstance)==null?void 0:e.hide)=="function"&&this.calendarInstance.hide()}show(){var e;typeof((e=this.calendarInstance)==null?void 0:e.show)=="function"&&this.calendarInstance.show()}getValues(){return this._currentDateOrDates}setValues(e,t,i=!1){let s;this.inputFilterType==="compound"?s=Array.isArray(e)?e[0]:e:typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?s=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(s=e),this.calendarInstance&&s!==void 0&&(gC(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:s,updatePickerUI:!0}),this._currentDateOrDates=e&&s?s:void 0);const r=this.getValues()||[],o=Array.isArray(r)?r:[r];if(this.updateFilterStyle(o.length>0),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){const a=Lc(this.operator);this._selectOperatorElm.value=a}i&&this.callback(void 0,{columnDef:this.columnDef,searchTerms:o,operator:this.operator,shouldTriggerQuery:!0})}buildDatePickerInput(e){var u,p,f,g,m,_,b,C,v,y,S;const t=((u=this.columnDef)==null?void 0:u.id)??"",i=this.columnFilter.type||this.columnDef.type||N.dateIso,s=this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||N.dateUtc,r=ys(s),o=this.columnFilter.type||this.columnDef.type||N.dateIso;r&&this.inputFilterType!=="range"&&(r==="ISO8601"||r.toLowerCase().includes("h"))&&(this.hasTimePicker=!0);const a=ys(this.hasTimePicker?N.dateTimeIsoAM_PM:N.dateIso),l=(((p=this.filterOptions)==null?void 0:p.locale)??((g=(f=this.translaterService)==null?void 0:f.getCurrentLanguage)==null?void 0:g.call(f)))||this.gridOptions.locale||"en";let c;this.inputFilterType==="compound"?e&&(c=e,this._currentDateOrDates=e):(typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"&&e[0].indexOf("..")>0?c=typeof e=="string"?[e]:e[0].split(".."):Array.isArray(e)&&(c=e),Array.isArray(c)&&(this._currentDateOrDates=c,this._currentDateStrings=c.map(A=>va(A,void 0,o))));const h={input:!0,jumpToSelectedDate:!0,type:this.inputFilterType==="range"?"multiple":"default",sanitizer:A=>this.grid.sanitizeHtmlString(A),toggleSelected:!1,actions:{clickDay:A=>{this._lastClickIsDate=!0},changeToInput:(A,P)=>{if(P.HTMLInputElement){let F=[],H="",W="";if(P.selectedDates[1]){P.selectedDates.sort((ae,ue)=>+new Date(ae)-+new Date(ue)),H=P.selectedDates[0],W=P.selectedDates[P.selectedDates.length-1];const J=Wi(P.selectedDates[0],r,"en-US"),Y=Wi(W,r,"en-US");P.HTMLInputElement.value=`${J} — ${Y}`,F=[H,W]}else P.selectedDates[0]?(H=P.selectedDates[0],P.HTMLInputElement.value=va(H,N.dateIso,s),F=P.selectedDates):P.HTMLInputElement.value="";if(this.hasTimePicker&&H){const J=$g(H,a);J.setHours(+(P.selectedHours||0)),J.setMinutes(+(P.selectedMinutes||0)),P.HTMLInputElement.value=va(J,void 0,s),F=[J]}if(this.inputFilterType==="compound"?this._currentValue=va(F[0],void 0,i):Array.isArray(F)&&(this._currentDateStrings=F.map(J=>va(J,void 0,i)),this._currentValue=this._currentDateStrings.join("..")),this._currentDateOrDates=F.map(J=>J instanceof Date?J:$g(J,a)),this._currentValue){const J=this.hasTimePicker?new Event("keyup"):void 0;this.onTriggerEvent(J)}this.inputFilterType==="range"&&P.selectedDates.length<2&&(this._lastClickIsDate=!1),this._lastClickIsDate&&(P.hide(),this._lastClickIsDate=!1)}}},settings:{lang:l,iso8601:!1,visibility:{theme:(m=this.gridOptions)!=null&&m.darkMode?"dark":"light",positionToInput:"auto",weekend:!1}}};this.inputFilterType==="range"&&(h.type="multiple",h.months=2,h.jumpMonths=2,h.settings={...h.settings,range:{edgesOnly:!0},selection:{day:"multiple-ranged"},visibility:{...(_=h.settings)==null?void 0:_.visibility,daysOutside:!1}}),this.hasTimePicker&&((b=h.settings).selection??(b.selection={}),h.settings.selection.time=24),this._pickerOptions=Qt(!0,{},h,{settings:this.filterOptions});let d=((C=this.gridOptions)==null?void 0:C.defaultFilterPlaceholder)??"";(v=this.columnFilter)!=null&&v.placeholder&&(d=this.columnFilter.placeholder),this._dateInputElm=I("input",{type:"text",className:"form-control date-picker",placeholder:d,readOnly:!0,dataset:{input:"",columnid:`${t}`}}),this.calendarInstance=new tz(this._dateInputElm,this._pickerOptions),this.calendarInstance.init(),(S=(y=this._pickerOptions.settings)==null?void 0:y.selected)!=null&&S.dates&&(c=this._pickerOptions.settings.selected.dates),c&&gC(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:void 0,newVal:c,updatePickerUI:!1})}getOperatorOptionValues(){var t;let e;return(t=this.columnFilter)!=null&&t.compoundOperatorList?e=this.columnFilter.compoundOperatorList:e=H_(this.gridOptions,this.translaterService),B_(this.gridOptions,e,"numeric"),e}createDomFilterElement(e){var i;const t=((i=this.columnDef)==null?void 0:i.id)??"";if(tt(this.filterContainerElm),this.buildDatePickerInput(e),this.inputFilterType==="range"){const s=I("div",{className:`date-picker form-group search-filter slick-filter filter-${t}`});return Array.isArray(e)&&e.length>0&&e[0]!==""&&(this._currentDateOrDates=e,this._currentValue=e[0]),s.appendChild(this._dateInputElm),s&&this.filterContainerElm.appendChild(s),s}else{this._selectOperatorElm=$_(this.getOperatorOptionValues(),this.grid);const s=I("div",{className:`date-picker form-group search-filter slick-filter filter-${t}`}),r=I("div",{className:"input-group date-picker"},s);if(I("div",{className:"input-group-addon input-group-prepend operator"},r).appendChild(this._selectOperatorElm),r.appendChild(this._dateInputElm),this.operator){const a=Lc(this.operator);this._selectOperatorElm.value=a}return this._currentDateOrDates=e,this._currentValue=e,s&&this.filterContainerElm.appendChild(s),s}}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else if(this.inputFilterType==="range"){const t=this._currentDateStrings?this._currentDateStrings:[this._currentValue];this.updateFilterStyle(t.length>0),this.callback(e,{columnDef:this.columnDef,searchTerms:t,operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})}else if(this.inputFilterType==="compound"&&this._selectOperatorElm){const t=this._selectOperatorElm.value;this.updateFilterStyle(!!this._currentValue);const i=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput===void 0,s=i&&Le(this._currentDateOrDates)||this._currentDateOrDates===""&&Le(this._lastSearchValue);(!i||!i||s)&&this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._lastSearchValue=this._currentValue}updateFilterStyle(e){e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}}class iz extends WA{constructor(e){super(e),this.translaterService=e,this.inputFilterType="compound"}}class sz{constructor(e){this.translaterService=e}filterCollection(e,t,i=dc.chain){let s=[];return Array.isArray(t)?(s=i===dc.merge?[]:[...e],t.forEach(r=>{if(i===dc.merge){const o=this.singleFilterCollection(e,r);s=HH([...s,...o])}else s=this.singleFilterCollection(s,r)})):s=this.singleFilterCollection(e,t),s}preParseByMutationDateItems(e,t,i){const s=[];t.getColumns().forEach(r=>{const o=this.getParseDateInfo(r,i);o&&s.push(o)}),e.forEach(r=>{s.forEach(({columnId:o,dateFormat:a,queryFieldName:l})=>{this.reassignDateWhenValid(r,o,a,l)})})}parseSingleDateItem(e,t,i){i&&t.getColumns().forEach(s=>{const r=this.getParseDateInfo(s,i);r&&this.reassignDateWhenValid(e,s.id,r.dateFormat,r.queryFieldName)})}singleFilterCollection(e,t){let i=[];if(t){const s=t.property,r=t.operator||de.equal,o=typeof t.value>"u"?"":t.value;switch(r){case de.equal:s?i=e.filter(a=>a[s]===o):i=e.filter(a=>a===o);break;case de.contains:s?i=e.filter(a=>{var l;return((l=a[s])==null?void 0:l.toString().indexOf(o.toString()))!==-1}):i=e.filter(a=>a!=null&&a.toString().indexOf(o.toString())!==-1);break;case de.notContains:s?i=e.filter(a=>{var l;return((l=a[s])==null?void 0:l.toString().indexOf(o.toString()))===-1}):i=e.filter(a=>a!=null&&a.toString().indexOf(o.toString())===-1);break;case de.notEqual:default:s?i=e.filter(a=>a[s]!==o):i=e.filter(a=>a!==o)}}return i}sortCollection(e,t,i,s){if(s&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let r=[];if(i){if(Array.isArray(i))r=t.sort((o,a)=>{var l,c,h,d;for(let u=0,p=i.length;u<p;u++){const f=i[u];if(f!=null&&f.property){const g=f.sortDesc?ct.desc:ct.asc,m=f.property,_=(f==null?void 0:f.fieldType)??(e==null?void 0:e.type)??N.string,b=s?(c=(l=this.translaterService)==null?void 0:l.translate)==null?void 0:c.call(l,o[m]||" "):o[m],C=s?(d=(h=this.translaterService)==null?void 0:h.translate)==null?void 0:d.call(h,a[m]||" "):a[m],v=fc(_,b,C,g,e);if(v!==ct.neutral)return v}}return ct.neutral});else if(i!=null&&i.property){const o=i.property,a=i.sortDesc?ct.desc:ct.asc,l=(i==null?void 0:i.fieldType)??(e==null?void 0:e.type)??N.string;r=t.sort((c,h)=>{var f,g;const d=s?((f=this.translaterService)==null?void 0:f.translate)&&this.translaterService.translate(c[o]||" "):c[o],u=s?((g=this.translaterService)==null?void 0:g.translate)&&this.translaterService.translate(h[o]||" "):h[o],p=fc(l,d,u,a,e);return p!==ct.neutral?p:ct.neutral})}else if(i&&!i.property){const o=i.sortDesc?ct.desc:ct.asc,a=(i==null?void 0:i.fieldType)??(e==null?void 0:e.type)??N.string;r=t.sort((l,c)=>{var p,f;const h=s?((p=this.translaterService)==null?void 0:p.translate)&&this.translaterService.translate(l||" "):l,d=s?((f=this.translaterService)==null?void 0:f.translate)&&this.translaterService.translate(c||" "):c,u=fc(a,h,d,o,e);return u!==ct.neutral?u:ct.neutral})}}return r}getParseDateInfo(e,t){const i=e.type||N.string,s=ys(i);if(Lo(i)&&t){const r=typeof t=="string"?`${t}${e.id}`:`${e.id}`;return{columnId:e.id,dateFormat:s,queryFieldName:r}}}reassignDateWhenValid(e,t,i,s){const r=ln(e[t],i,!1);r&&(e[s]=r)}}class nz{init(e){this._grid=e,e.hasDataView()&&(this._dataView=e.getData())}getDataItem(e){return this._dataView?this._dataView.getItem(e):this._grid.getDataItem(e)}getDataItems(){return this._dataView?this._dataView.getItems():this._grid.getData()}getDataLength(){return this._dataView?this._dataView.getItemCount():this._grid.getDataLength()}setDataItems(e){this._dataView?this._dataView.setItems(e):this._grid.setData(e)}}function rz(n,e,t,i,s=!1,r,o){var P,F,H,W,J;const a=(t==null?void 0:t.id)??"",l=i.getOptions(),c=(n==="editor"?t==null?void 0:t.editor:t==null?void 0:t.filter)??{},h=(c==null?void 0:c.collectionOptions)??{},d=(h==null?void 0:h.separatorBetweenTextLabels)??"",u=(c==null?void 0:c.enableTranslateLabel)??!1,p=(l==null?void 0:l.enableTranslate)??!1,f=(c==null?void 0:c.enableRenderHtml)??!1,g=((P=c==null?void 0:c.customStructure)==null?void 0:P.label)??"label",m=((F=c==null?void 0:c.customStructure)==null?void 0:F.labelPrefix)??"labelPrefix",_=((H=c==null?void 0:c.customStructure)==null?void 0:H.labelSuffix)??"labelSuffix",b=((W=c==null?void 0:c.customStructure)==null?void 0:W.optionLabel)??"value",C=((J=c==null?void 0:c.customStructure)==null?void 0:J.value)??"value",v=I("select",{className:"ms-filter search-filter"}),y=n==="filter"?["search-filter",`filter-${a}`]:["select-editor",`editor-${a}`];v.classList.add(...y),v.multiple=s;const S=[];let A=!1;return Array.isArray(e)&&(e.every(Y=>typeof Y=="number"||typeof Y=="string")?e.forEach(Y=>{const ae={text:String(Y),value:Y};n==="filter"&&Array.isArray(o)&&(ae.selected=o.findIndex(ue=>ue===Y)>=0),S.push(ae),(ae.selected&&s||ae.selected&&!s&&Y!=="")&&(A=!0)}):e.forEach(Y=>{if(Y===void 0||typeof Y=="object"&&Y[g]===void 0&&Y.labelKey===void 0)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const ae=Y.labelKey||Y[g],ue=(Y.labelKey||u&&r)&&ae&&p?r==null?void 0:r.translate(ae||" "):ae;let te=Y[m]||"",V=Y[_]||"",re=Y.hasOwnProperty(b)?Y[b]:"";re!=null&&re.toString&&(re=re.toString().replace(/"/g,"'")),te=u&&r&&te&&typeof te=="string"?r.translate(te||" "):te,V=u&&r&&V&&typeof V=="string"?r.translate(V||" "):V,re=u&&r&&re&&typeof re=="string"?r.translate(re||" "):re;let _e=[te,typeof ue=="string"||typeof ue=="number"?ue.toString():ue,V].filter(M=>M).join(d);const ge={text:"",value:""};f&&(_e=i.sanitizeHtmlString(_e)),ge.text=_e;let x=Y[C];x==null&&(x=""),n==="filter"&&Array.isArray(o)&&(ge.selected=o.findIndex(M=>`${M}`==`${Y[C]}`)>=0),ge.value=`${x??""}`,S.push(ge),(ge.selected&&s||ge.selected&&!s&&Y[C]!=="")&&(A=!0)})),{selectElement:v,dataCollection:S,hasFoundSearchTerm:A}}class oz{constructor(e,t,i){this.sharedService=e,this.backendUtilities=t,this.translaterService=i}getPickerTitleOutputString(e,t){var d,u,p,f,g,m,_,b,C,v,y,S,A,P;if((d=this.sharedService.gridOptions)!=null&&d.enableTranslate&&!((u=this.translaterService)!=null&&u.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let i="";const s=((p=this.sharedService.gridOptions)==null?void 0:p[t])??{},r=((f=this.sharedService.gridOptions)==null?void 0:f.enableTranslate)??!1,o=((g=this.sharedService.gridOptions)==null?void 0:g.locales)??se.locales,a=s==null?void 0:s[e],l=s==null?void 0:s[`${e}Key`],c=this.sharedService.gridOptions,h=Ko(c);if(l&&((m=this.translaterService)!=null&&m.translate))i=this.translaterService.translate(l||" ");else switch(e){case"commandTitle":i=a||r&&((_=this.translaterService)==null?void 0:_.getCurrentLanguage)&&((b=this.translaterService)==null?void 0:b.translate(`${h}COMMANDS`))||(o==null?void 0:o.TEXT_COMMANDS);break;case"columnTitle":i=a||r&&((C=this.translaterService)==null?void 0:C.getCurrentLanguage)&&((v=this.translaterService)==null?void 0:v.translate(`${h}COLUMNS`))||(o==null?void 0:o.TEXT_COLUMNS);break;case"forceFitTitle":i=a||r&&((y=this.translaterService)==null?void 0:y.getCurrentLanguage)&&((S=this.translaterService)==null?void 0:S.translate(`${h}FORCE_FIT_COLUMNS`))||(o==null?void 0:o.TEXT_FORCE_FIT_COLUMNS);break;case"syncResizeTitle":i=a||r&&((A=this.translaterService)==null?void 0:A.getCurrentLanguage)&&((P=this.translaterService)==null?void 0:P.translate(`${h}SYNCHRONOUS_RESIZE`))||(o==null?void 0:o.TEXT_SYNCHRONOUS_RESIZE);break;default:i=a;break}return i}readjustFrozenColumnIndexWhenNeeded(e,t,i){if(e>=0){const s=i.findIndex(r=>r.id===this.sharedService.frozenVisibleColumnId);s>=0&&s!==e&&(this.sharedService.gridOptions.frozenColumn=s,this.sharedService.slickGrid.setOptions({frozenColumn:s})),Array.isArray(i)&&Array.isArray(t)&&i.length!==t.length&&this.sharedService.slickGrid.setColumns(i)}}refreshBackendDataset(e){var i;let t=this.sharedService.gridOptions;e&&(t={...this.sharedService.gridOptions,...e},this.sharedService.gridOptions=t),(i=this.backendUtilities)==null||i.refreshBackendDataset(t)}runOverrideFunctionWhenExists(e,t){return typeof e=="function"?!!e.call(this,t):!0}sortItems(e,t){Array.isArray(e)&&e.sort((i,s)=>i&&s&&i.hasOwnProperty(t)&&s.hasOwnProperty(t)?i[t]-s[t]:0)}translateItems(e,t,i){var s,r;if(Array.isArray(e))for(const o of e)o.hasOwnProperty(t)&&(o[i]=(r=(s=this.translaterService)==null?void 0:s.translate)==null?void 0:r.call(s,o[t]))}translateMenuItemsFromTitleKey(e,t="commandItems"){for(const i of e)typeof i=="object"&&(i.titleKey&&(i.title=this.translateWhenEnabledAndServiceExist(`${i.titleKey}`,`TEXT_${i.titleKey}`)),i.subMenuTitleKey&&(i.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${i.subMenuTitleKey}`,`TEXT_${i.subMenuTitleKey}`))),Array.isArray(i==null?void 0:i[t])&&this.translateMenuItemsFromTitleKey(i==null?void 0:i[t])}translateWhenEnabledAndServiceExist(e,t,i){var a,l;let s="";const r=(a=this.sharedService)==null?void 0:a.gridOptions,o=(r==null?void 0:r.locales)??se.locales;return i?s=i:r.enableTranslate&&((l=this.translaterService)!=null&&l.translate)?s=this.translaterService.translate(e||" "):t in o?s=o[t]:s=t,s}}class az{constructor(e){this.pluginName="AutoTooltips",this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this._eventHandler=new gt,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}destroy(){this.dispose()}dispose(){var e;(e=this._eventHandler)==null||e.unsubscribeAll()}handleMouseEnter(e){var i,s,r,o;const t=this._grid.getCellFromEvent(e);if(t){let a=this._grid.getCellNode(t.row,t.cell),l;this._addonOptions&&a&&(!a.title||(i=this._addonOptions)!=null&&i.replaceExisting)&&(a.clientWidth<a.scrollWidth?(l=((s=a.textContent)==null?void 0:s.trim())??"",(r=this._addonOptions)!=null&&r.maxToolTipLength&&l.length>((o=this._addonOptions)==null?void 0:o.maxToolTipLength)&&(l=l.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):l="",a.title=l),a=null}}handleHeaderMouseEnter(e,t){const i=t.column;let s;const r=e.target;if(r&&(s=r.closest(".slick-header-column"),s&&!(i!=null&&i.toolTip))){const o=r.clientWidth<s.clientWidth?(i==null?void 0:i.name)??"":"";s.title=Js(Xa(o,"innerHTML"))}s=null}}class lz{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new gt,this._bindingEventService=new as}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,t){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new pz,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...t},this._cellExternalCopyManagerPlugin=new hz,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(i,s)=>{this._addonOptions&&typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(i,s)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(i,s)=>{this._addonOptions&&typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(i,s)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(i,s)=>{this._addonOptions&&typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(i,s)})}dispose(){var e,t;this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),(e=this._cellSelectionModel)==null||e.dispose(),(t=this._cellExternalCopyManagerPlugin)==null||t.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:t=>{this._commandQueue[e]=t,e++,t.execute()},undo:()=>{if(e===0)return;e--;const t=this._commandQueue[e];t&&nu.cancelCurrentEdit()&&t.undo()},redo:()=>{if(e>=this._commandQueue.length)return;const t=this._commandQueue[e];e++,t&&nu.cancelCurrentEdit()&&t.execute()}}}getDefaultOptions(){let e=0;return{clipboardCommandHandler:t=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,t)},dataItemColumnValueExtractor:(t,i,s=0,r=0)=>{var c,h,d;const o=this._grid.getActiveCell(),a=this._grid.getCellEditor()&&(o==null?void 0:o.row)===s&&(o==null?void 0:o.cell)===r,l=((c=this.addonOptions)==null?void 0:c.copyActiveEditorCell)||!1;if(!this.gridOptions.editable||!i.editor||!a||l){const u=i.exportWithFormatter!==void 0?i.exportWithFormatter:(h=this.gridOptions.textExportOptions)==null?void 0:h.exportWithFormatter;if(i.formatter&&u){const p=i.formatter(s,r,t[i.field],i,t,this._grid),f=Nc(p)?p:p.html||p.text;if(i.sanitizeDataExport||(d=this.gridOptions.textExportOptions)!=null&&d.sanitizeDataExport){const g=f instanceof HTMLElement?f.innerHTML:f;return Js(g??"")}return p}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:t=>{for(let i=0;i<t;i++)this._grid.getData().addItem({[this.gridOptions.datasetIdPropertyName||"id"]:`newRow_${e++}`})},replaceNewlinesWith:!1,removeDoubleQuotesOnPaste:!1}}handleBodyKeyDown(e){e.key==="Z"&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}const cz=2e3,VC=100,Uh=()=>{};class hz{constructor(){this.pluginName="CellExternalCopyManager",this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this._dataWrapper=new nz,this.onCopyCells=new K("onCopyCells"),this.onCopyCancelled=new K("onCopyCancelled"),this.onPasteCells=new K("onPasteCells"),this.onBeforePasteCell=new K("onBeforePasteCell"),this._eventHandler=new gt}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e,t){var r;this._grid=e,this._dataWrapper.init(e),this._addonOptions={...this._addonOptions,...t},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0;const i=e.getPubSubService();i&&k.addSlickEventPubSubWhenDefined(i,this),this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const s=e.getSelectionModel();if(!s)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new SlickCellSelectionModel())");this._eventHandler.subscribe(s.onSelectedRangesChanged,()=>{var o;!this._grid.getEditorLock().isActive()&&!((o=document.activeElement)!=null&&o.classList.contains("slick-filter"))&&this._grid.focus()}),e&&typeof((r=this._addonOptions)==null?void 0:r.onBeforePasteCell)=="function"&&this._eventHandler.subscribe(this.onBeforePasteCell,(o,a)=>{var h,d;const l=e.getColumns()[a.cell],c={row:a.row,cell:a.cell,dataView:e.getData(),grid:e,columnDef:l,dataContext:e.getDataItem(a.row)};return(d=(h=this._addonOptions).onBeforePasteCell)==null?void 0:d.call(h,o,c)})}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if(typeof this._addonOptions.headerColumnValueExtractor=="function"){const t=Xa(this._addonOptions.headerColumnValueExtractor(e),"innerHTML");if(t)return Js(t)}return Xa(e.name||"","innerHTML")}getDataItemValueForColumn(e,t,i,s,r){if(typeof this._addonOptions.dataItemColumnValueExtractor=="function"){const a=this._addonOptions.dataItemColumnValueExtractor(e,t,i,s);if(a)return a instanceof HTMLElement?Js(a.innerHTML):a}let o="";if(t)if(t.editorClass){const a=document.createElement("p"),l=new t.editorClass({container:a,column:t,event:r,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Uh,commitChanges:Uh});l.loadValue(e),o=l.serializeValue(),l.destroy(),a.remove()}else o=e[t.field||""];return o}setDataItemValueForColumn(e,t,i){if(!(t!=null&&t.denyPaste)){if(this._addonOptions.dataItemColumnValueSetter){const s=this._addonOptions.dataItemColumnValueSetter(e,t,i);if(s!==!0)return s}if(t.editorClass){const s=document.createElement("div"),r=new t.editorClass({container:s,column:t,event:null,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Uh,commitChanges:Uh});r.loadValue(e);const o=r.validate(void 0,i);if(!o.valid){const a=this._grid.getActiveCell();this._grid.onValidationError.notify({editor:r,cellNode:this._grid.getActiveCellNode(),validationResults:o,row:a==null?void 0:a.row,cell:a==null?void 0:a.cell,column:t,grid:this._grid})}r.applyValue(e,i),r.destroy(),s.remove()}else e[t.field]=i}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){const t=document.documentElement.scrollTop||document.body.scrollTop,i=I("textarea",{value:e,style:{position:"absolute",opacity:"0",top:`${t}px`}},this._bodyElement);return i.select(),i}decodeTabularData(e,t){var C;const i=e.getColumns(),r=t.value.split(/[\n\f\r](?=(?:[^"]*"[^"]*")*[^"]*$)/);r[r.length-1]===""&&r.pop();let o=0;const a=[];this._bodyElement.removeChild(t);for(const v of r)v.startsWith('"')&&v.endsWith('"')?a[o++]=[v.replaceAll(`
`,this._addonOptions.replaceNewlinesWith||`
`).replaceAll("\r","").replaceAll('"',this._addonOptions.removeDoubleQuotesOnPaste?"":'"')]:a[o++]=v.split("	");const l=this._grid.getActiveCell(),c=(C=this._grid.getSelectionModel())==null?void 0:C.getSelectedRanges(),h=c!=null&&c.length?c[0]:null;let d,u;if(h)d=h.fromRow,u=h.fromCell;else if(l)d=l.row,u=l.cell;else return;let p=!1,f=a.length,g=a.length?a[0].length:0;a.length===1&&a[0].length===1&&h&&(p=!0,f=h.toRow-h.fromRow+1,g=h.toCell-h.fromCell+1);const m=this._dataWrapper.getDataLength()-d;if(m<f&&typeof this._addonOptions.newRowCreator=="function"){const v=f-m,y=this._dataWrapper.getDataLength();this._addonOptions.newRowCreator(v);const S=this._dataWrapper.getDataLength();S!==y+v&&console.warn(`[Slickgrid-Universal] The "newRowCreator" did not add the correct amount of rows, it should add "${v}" rows but it added "${S-y}" rows`),this._grid.render()}if(d+f>this._dataWrapper.getDataLength()&&typeof this._addonOptions.newRowCreator=="function"){const v=d+f-this._dataWrapper.getDataLength();this._addonOptions.newRowCreator(v)}const b={isClipboardCommand:!0,clippedRange:a,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:p,activeRow:d,activeCell:u,destH:f,destW:g,maxDestY:this._dataWrapper.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{var y;b.h=0;for(let S=0;S<b.destH;S++){b.oldValues[S]=[],b.w=0,b.h++;let A=0;for(let P=0;P<b.destW;P++){const F=d+S,H=u+P,W=i[H];if(W.hidden){b.destW++,A++;continue}if(b.w++,F<b.maxDestY&&H<b.maxDestX){const J=this._dataWrapper.getDataItem(F);if(this._grid.triggerEvent(this.onBeforePasteCell,{row:F,cell:H,dt:J,column:W,target:"grid"}).getReturnValue()===!1)continue;b.oldValues[S][P-A]=J[W.field],p?this.setDataItemValueForColumn(J,W,a[0][0]):this.setDataItemValueForColumn(J,W,a[S]?a[S][P-A]:""),this._grid.updateCell(F,H),this._grid.onCellChange.notify({row:F,cell:H,item:J,grid:this._grid,column:{}})}}}const v=new es(d,u,d+b.h-1,u+b.w-1);this.markCopySelection([v]),(y=this._grid.getSelectionModel())==null||y.setSelectedRanges([v]),this.onPasteCells.notify({ranges:[v]})},undo:()=>{var y;for(let S=0;S<b.destH;S++)for(let A=0;A<b.destW;A++){const P=d+S,F=u+A;if(P<b.maxDestY&&F<b.maxDestX){const H=this._dataWrapper.getDataItem(P);p?this.setDataItemValueForColumn(H,i[F],b.oldValues[0][0]):this.setDataItemValueForColumn(H,i[F],b.oldValues[S][A]),this._grid.updateCell(P,F),this._grid.onCellChange.notify({row:P,cell:F,item:H,grid:this._grid,column:{}})}}const v=new es(d,u,d+b.h-1,u+b.w-1);this.markCopySelection([v]),(y=this._grid.getSelectionModel())==null||y.setSelectedRanges([v]),this.onPasteCells.notify({ranges:[v]}),typeof this._addonOptions.onPasteCells=="function"&&this._addonOptions.onPasteCells(new Ot,{ranges:[v]})}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(b):b.execute()}handleKeyDown(e){var i,s,r;let t;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if(e.key==="Escape"&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),typeof this._addonOptions.onCopyCancelled=="function"&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),(e.key==="c"||e.key==="Insert")&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&(typeof this._onCopyInit=="function"&&this._onCopyInit.call(this),t=((i=this._grid.getSelectionModel())==null?void 0:i.getSelectedRanges())??[],t.length!==0)){this._copiedRanges=t,this.markCopySelection(t),this.onCopyCells.notify({ranges:t}),typeof this._addonOptions.onCopyCells=="function"&&this._addonOptions.onCopyCells(e,{ranges:t});const o=this._grid.getColumns();let a="";for(let l=0;l<t.length;l++){const c=t[l],h=[];for(let d=c.fromRow;d<c.toRow+1;d++){const u=[],p=this._dataWrapper.getDataItem(d);if(h.length===0&&this._addonOptions.includeHeaderWhenCopying){const f=[];for(let g=c.fromCell;g<c.toCell+1;g++)o[g]&&(o[g].name instanceof HTMLElement?Js(o[g].name.innerHTML):o[g].name).length>0&&!o[g].hidden&&f.push(this.getHeaderValueForColumn(o[g]));h.push(f.join("	"))}for(let f=c.fromCell;f<c.toCell+1;f++)o[f]&&(o[f].name instanceof HTMLElement?Js(o[f].name.innerHTML):o[f].name).length>0&&!o[f].hidden&&u.push(this.getDataItemValueForColumn(p,o[f],d,f,e));h.push(u.join("	"))}a+=h.join(`\r
`)+`\r
`}if(window.clipboardData)return window.clipboardData.setData("Text",a),!0;{const l=document.activeElement,c=this.createTextBox(a);if(c.focus(),window.setTimeout(()=>{this._bodyElement.removeChild(c),l?l.focus():console.log("No element to restore focus to after copy?")},((s=this.addonOptions)==null?void 0:s.clipboardPasteDelay)??VC),typeof this._onCopySuccess=="function"){const h=t.length===1?t[0].toRow+1-t[0].fromRow:t.length;this._onCopySuccess(h)}return!1}}if(!this._addonOptions.readOnlyMode&&(e.key==="v"&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||e.key==="Insert"&&e.shiftKey&&!e.ctrlKey)){const o=this.createTextBox("");return window.setTimeout(()=>this.decodeTabularData(this._grid,o),((r=this.addonOptions)==null?void 0:r.clipboardPasteDelay)??VC),!1}}}markCopySelection(e){var s;this.clearCopySelection();const t=this._grid.getColumns(),i={};for(const r of e)for(let o=r.fromRow;o<=r.toRow;o++){i[o]={};for(let a=r.fromCell;a<=r.toCell&&a<t.length;a++)i[o][t[a].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,i),window.clearTimeout(this._clearCopyTI),this._clearCopyTI=window.setTimeout(()=>this.clearCopySelection(),((s=this.addonOptions)==null?void 0:s.clearCopySelectionDelay)||cz)}}class lp{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new as,this._eventHandler=new gt}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){var e;return this._gridUid||(((e=this.grid)==null?void 0:e.getUID())??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){var e,t,i,s,r;(e=this._eventHandler)==null||e.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),(t=this._commandTitleElm)==null||t.remove(),(i=this._optionTitleElm)==null||i.remove(),this.disposeAllMenus(),tt(this._menuElm),(s=this.menuElement)==null||s.remove(),(r=this._menuElm)==null||r.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(e=>e.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(e=>e.remove())}setOptions(e){this._addonOptions={...this._addonOptions,...e}}addSubMenuTitleWhenExists(e,t){if(e!=="divider"&&(e!=null&&e.subMenuTitle)){const i=document.createElement("div");i.className="slick-menu-title",i.textContent=e.subMenuTitle;const s=e.subMenuTitleCssClass;s&&i.classList.add(...ht(s)),t.appendChild(i)}}populateCommandOrOptionItems(e,t,i,s,r,o,a){if(r&&s&&t)for(const l of s)this.populateSingleCommandOrOptionItem(e,t,i,l,r,o,a)}populateCommandOrOptionTitle(e,t,i,s){var r;if(t){const o=s>0,a=((r=this._menuElm)==null?void 0:r.querySelector(`.slick-${e}-header`))??I("div",{className:`slick-${e}-header`}),l=`${e}Title`;o||(t!=null&&t[l]?(tt(a),this[`_${e}TitleElm`]=I("span",{className:"slick-menu-title",textContent:t[l]}),a.appendChild(this[`_${e}TitleElm`]),a.classList.add("with-title")):a.classList.add("no-title"),i.appendChild(a))}}populateSingleCommandOrOptionItem(e,t,i,s,r,o,a){var c;let l=null;if(r&&s&&t){const h=(r==null?void 0:r.level)||0,d=this._camelPluginName==="headerButtons"?"":"-item",u=`${this._menuCssPrefix}${d}`;let p=!0,f=!0;if(typeof s=="object"&&(p=this.extensionUtility.runOverrideFunctionWhenExists(s.itemVisibilityOverride,r),f=this.extensionUtility.runOverrideFunctionWhenExists(s.itemUsabilityOverride,r)),!p)return null;if(typeof s=="object"&&s.itemUsabilityOverride&&(s.disabled=!f),l=I("li",{className:u,role:"menuitem"}),typeof s=="object"&&Le(s[e])&&(l.dataset[e]=s==null?void 0:s[e]),i&&i.appendChild(l),typeof s=="object"&&s.divider||s==="divider")return l.classList.add(`${u}-divider`),l;if(s.disabled&&l.classList.add(`${u}-disabled`),(s.hidden||s.showOnHover)&&l.classList.add(`${u}-hidden`),s.cssClass&&l.classList.add(...ht(s.cssClass)),s.tooltip&&(l.title=s.tooltip),this._camelPluginName!=="headerButtons"){const m=I("div",{className:`${this._menuCssPrefix}-icon`});l.appendChild(m),s.iconCssClass?m.classList.add(...ht(s.iconCssClass)):!s.commandItems&&!s.optionItems&&(m.textContent="◦");const _=I("span",{className:`${this._menuCssPrefix}-content`,textContent:typeof s=="object"&&s.title||""},l);s.textCssClass&&_.classList.add(...ht(s.textCssClass))}const g=h>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(l,"click",m=>o.call(this,m,e,s,h,r==null?void 0:r.column),void 0,g),((c=this._addonOptions)==null?void 0:c.subMenuOpenByEvent)==="mouseover"&&typeof a=="function"&&this._bindEventService.bind(l,"mouseover",m=>a.call(this,m,e,s,h,r==null?void 0:r.column),void 0,g),s.commandItems||s.optionItems){const m=document.createElement("span");m.className="sub-item-chevron",this._addonOptions.subItemChevronClass?m.classList.add(...ht(this._addonOptions.subItemChevronClass)):m.textContent="⮞",l.classList.add("slick-submenu-item"),l.appendChild(m)}}return l}}class UA extends lp{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(e){var i,s,r,o,a;(i=this.menuElement)==null||i.remove(),this._menuElm=void 0;const t=this.grid.getCellFromEvent(e);if(t){this._currentCell=t.cell??0,this._currentRow=t.row??0;const l=((s=this._addonOptions)==null?void 0:s.commandItems)||[],c=((r=this._addonOptions)==null?void 0:r.optionItems)||[],h={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,h),typeof e.stopPropagation=="function"&&(this.pubSubService.publish(`on${Zd(this._camelPluginName)}BeforeMenuShow`,h),typeof((o=this.addonOptions)==null?void 0:o.onBeforeMenuShow)=="function"&&this.addonOptions.onBeforeMenuShow(e,h)===!1)||(this._menuElm=this.createMenu(l,c),this._menuElm&&(this._menuElm.style.top=`${(e.pageY||0)+5}px`,this._menuElm.style.left=`${e.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${Zd(this._camelPluginName)}AfterMenuShow`,h),typeof((a=this.addonOptions)==null?void 0:a.onAfterMenuShow)=="function"&&this.addonOptions.onAfterMenuShow(e,h)===!1))return}return this._menuElm}createMenu(e,t,i=0,s){var _,b,C,v,y;const r=this.grid.getColumns()[this._currentCell],o=this.grid.getDataItem(this._currentRow),a=(s==null?void 0:s.command)||(s==null?void 0:s.option);let l=i===1&&a?String(a).replace(/\s/g,""):"";l&&(this._subMenuParentId=l),i>1&&(l=this._subMenuParentId);let c=!0,h=!0;if(this._camelPluginName==="contextMenu"){if(c=this.checkIsColumnAllowed(((_=this._addonOptions)==null?void 0:_.optionShownOverColumnIds)??[],r.id),h=this.checkIsColumnAllowed(((b=this._addonOptions)==null?void 0:b.commandShownOverColumnIds)??[],r.id),!r||(!h||!e.length)&&(!c||!t.length)){this.hideMenu();return}}else if(!r||!r.cellMenu||!e.length&&!t.length)return;const d=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,u=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(u){if(u.dataset.subMenuParent===l)return u;this.disposeSubMenus()}const p=document.createElement("div");p.className=d,i>0&&(p.classList.add("slick-submenu"),(C=this.gridOptions)!=null&&C.darkMode&&p.classList.add("slick-dark-mode"),l&&(p.dataset.subMenuParent=l));const f=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${this.addonOptions.maxHeight??0}px`,g=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${this.addonOptions.maxWidth??0}px`;f&&(p.style.maxHeight=f),g&&(p.style.maxWidth=g),(v=this.addonOptions)!=null&&v.width&&(p.style.width=Sr((y=this.addonOptions)==null?void 0:y.width));const m=I("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"×",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&c&&t.length>0){const S=I("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},p);this.populateCommandOrOptionTitle("option",this.addonOptions,S,i),!this.addonOptions.hideCloseButton&&i<1&&this.populateCommandOrOptionCloseBtn("option",m,S),s&&i>0&&this.addSubMenuTitleWhenExists(s,S),this.populateCommandOrOptionItems("option",this.addonOptions,S,t,{cell:this._currentCell,row:this._currentRow,column:r,dataContext:o,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&h&&e.length>0){const S=I("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},p);this.populateCommandOrOptionTitle("command",this.addonOptions,S,i),!this.addonOptions.hideCloseButton&&i<1&&(!c||t.length===0||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",m,S),s&&i>0&&this.addSubMenuTitleWhenExists(s,S),this.populateCommandOrOptionItems("command",this.addonOptions,S,e,{cell:this._currentCell,row:this._currentRow,column:r,dataContext:o,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return i++,p}closeMenu(e,t){var i;if(this.menuElement){if(typeof((i=this.addonOptions)==null?void 0:i.onBeforeMenuClose)=="function"&&this.addonOptions.onBeforeMenuClose(e,t)===!1)return;this.hideMenu()}}hideMenu(){var e;(e=this.menuElement)==null||e.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(e,t){return(e==null?void 0:e.length)>0?e.findIndex(i=>i===t)>=0:!0}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this.menuElement!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(e,t,i,s=0){(i==null?void 0:i[t])!==void 0&&i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems||i.optionItems?(this.repositionSubMenu(i,t,s,e),this._lastMenuTypeClicked=t):s===0&&this.disposeSubMenus())}handleMenuItemCommandClick(e,t,i,s=0){var r;if((i==null?void 0:i[t])!==void 0&&i!=="divider"&&!i.disabled&&!i.divider&&this._currentCell!==void 0&&this._currentRow!==void 0){if(t==="option"&&!this.grid.getEditorLock().commitCurrentEdit())return;const o=this._currentCell,a=this._currentRow,l=this.grid.getColumns()[this._currentCell],c=this.grid.getDataItem(this._currentRow),h=i[t]!==void 0?i[t]:"";if(h!==void 0&&!i[`${t}Items`]){const d={cell:this._currentCell,row:this._currentRow,grid:this.grid,[t]:h,item:i,column:l,dataContext:c},u=t==="command"?"onCommand":"onOptionSelected",p=`${this._camelPluginName}:${u}`;this.pubSubService.publish(p,d),typeof((r=this._addonOptions)==null?void 0:r[u])=="function"&&this._addonOptions[u](e,d),typeof i.action=="function"&&i.action.call(this,e,d),e.defaultPrevented||this.closeMenu(e,{cell:o,row:a,grid:this.grid})}else(i.commandItems||i.optionItems)&&this.repositionSubMenu(i,t,s,e);this._lastMenuTypeClicked=t}}populateCommandOrOptionCloseBtn(e,t,i){this._bindEventService.bind(t,"click",r=>this.handleCloseButtonClicked(r),void 0,"parent-menu");const s=i.querySelector(`.slick-${e}-header`)??I("div",{className:`slick-${e}-header`});s==null||s.appendChild(t),i.appendChild(s),s.classList.add("with-close")}repositionSubMenu(e,t,i,s){(s.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==t)&&this.disposeSubMenus();const r=this.createMenu((e==null?void 0:e.commandItems)||[],(e==null?void 0:e.optionItems)||[],i+1,e);r&&(r.style.display="block",document.body.appendChild(r),this.repositionMenu(s,r))}repositionMenu(e,t){var r;const i=t==null?void 0:t.classList.contains("slick-submenu"),s=i?e.target.closest(`.${this._menuCssPrefix}-item`):e.target.closest(".slick-cell");if(t&&s){t.style.top="0px",t.style.left="0px";const o=((r=e==null?void 0:e.touches)==null?void 0:r[0])??e,a=Gt(s);let l=s&&this._camelPluginName==="cellMenu"?a.left:o.pageX,c=s&&this._camelPluginName==="cellMenu"?a.top:o.pageY;i&&this._camelPluginName==="contextMenu"&&(l=a.left,c=a.top);const h=s.offsetWidth||0,d=(t==null?void 0:t.offsetHeight)||0,u=(t==null?void 0:t.offsetWidth)||this._addonOptions.width||0,p=this.gridOptions.rowHeight||0,f=Number(this._addonOptions.autoAdjustDropOffset||0),g=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:m,top:_}=P_(s),b=m+f-p,C=_-f+p;(b<d&&C>b?"top":"bottom")==="top"||this._addonOptions.dropDirection==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),i?c-=d-f-s.clientHeight:c-=d-f):(t.classList.remove("dropup"),t.classList.add("dropdown"),c=c+f,this._camelPluginName==="cellMenu"&&(i?c+=f:c+=p+f))}if(this._addonOptions.autoAlignSide||this._addonOptions.dropSide==="left"){const m=this.grid.getGridPosition();let _=l+Number(u);i&&(_+=s.clientWidth);const b=document.documentElement.clientWidth;(_>=m.width||_>=b?"left":"right")==="left"||!i&&this._addonOptions.dropSide==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),this._camelPluginName==="cellMenu"&&!i?l-=Number(u)-h-g:l-=Number(u)-g):(t.classList.remove("dropleft"),t.classList.add("dropright"),i?l+=g+s.offsetWidth:l+=g)}t.style.top=`${c}px`,t.style.left=`${l}px`}}}class dz extends UA{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.pluginName="CellMenu",this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(i.gridOptions.cellMenu)}init(e){this._addonOptions={...this._defaults,...e},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){var i;const e=(i=this.sharedService)==null?void 0:i.gridOptions,t=this.sharedService.allColumns;e!=null&&e.enableTranslate&&Array.isArray(t)&&t.forEach(s=>{if(s!=null&&s.cellMenu&&(Array.isArray(s.cellMenu.commandItems)||Array.isArray(s.cellMenu.optionItems))){const r=s.cellMenu.commandItems||[],o=s.cellMenu.optionItems||[];s.cellMenu.commandTitleKey&&(s.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(s.cellMenu.commandTitleKey,"TEXT_COMMANDS")||s.cellMenu.commandTitle),s.cellMenu.optionTitleKey&&(s.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(s.cellMenu.optionTitleKey,"TEXT_COMMANDS")||s.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(r,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(o,"optionItems")}})}handleCellClick(e,t){var s;this.disposeAllMenus();const i=this.grid.getCellFromEvent(e);if(i){const r=this.grid.getDataItem(i.row),o=this.grid.getColumns()[i.cell];o!=null&&o.cellMenu&&!((s=this.gridOptions.cellMenu)!=null&&s.activateCellOnMenuClick)&&e.preventDefault(),this._addonOptions={...this._addonOptions,...o.cellMenu};const a=t||{};if(a.column=o,a.dataContext=r,a.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,a))return;this._menuElm=this.createParentMenu(e),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block",this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode")),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach(t=>{var i,s;(i=t==null?void 0:t.cellMenu)!=null&&i.commandItems&&this.extensionUtility.sortItems(t.cellMenu.commandItems||[],"positionOrder"),(s=t==null?void 0:t.cellMenu)!=null&&s.optionItems&&this.extensionUtility.sortItems(t.cellMenu.optionItems||[],"positionOrder")})}}class uz{constructor(e,t){this.grid=e,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._options=Qd(this._defaults,t)}get addonOptions(){return this._options}get addonElement(){return this._elem}destroy(){this.hide()}init(){}hide(){var e;(e=this._elem)==null||e.remove(),this._elem=null}show(e){var s,r;this._elem||(this._elem=I("div",{className:this._options.selectionCssClass}),Object.keys(this._options.selectionCss).forEach(o=>{this._elem.style[o]=this._options.selectionCss[o]}),this._elem.style.position="absolute",(s=this.grid.getActiveCanvasNode())==null||s.appendChild(this._elem));const t=this.grid.getCellNodeBox(e.fromRow,e.fromCell),i=this.grid.getCellNodeBox(e.toRow,e.toCell);return t&&i&&((r=this._options)!=null&&r.offset)&&(this._elem.style.top=`${t.top+this._options.offset.top}px`,this._elem.style.left=`${t.left+this._options.offset.left}px`,this._elem.style.height=`${i.bottom-t.top+this._options.offset.height}px`,this._elem.style.width=`${i.right-t.left+this._options.offset.width}px`),this._elem}}class Yg{constructor(e){this.pluginName="CellRangeSelector",this._currentlySelectedRange=null,this._canvas=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.onBeforeCellRangeSelected=new K("onBeforeCellRangeSelected"),this.onCellRangeSelecting=new K("onCellRangeSelecting"),this.onCellRangeSelected=new K("onCellRangeSelected"),this._eventHandler=new gt,this._options=Qd(this._defaults,e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridUid(){var e;return this._gridUid||(((e=this._grid)==null?void 0:e.getUID())??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._options.cellDecorator||new uz(e,this._options),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID();const t=e.getPubSubService();t&&k.addSlickEventPubSubWhenDefined(t,this),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){var e,t;(e=this._eventHandler)==null||e.unsubscribeAll(),tt(this._activeCanvas),tt(this._canvas),(t=this._decorator)==null||t.destroy(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,t){var f;const i=((f=e==null?void 0:e.touches)==null?void 0:f[0])??e,s=this._activeViewport.scrollLeft,r=this._activeViewport.scrollTop,o=s+this._viewportWidth,a=r+this._viewportHeight,l=Gt(this._activeViewport),c=l.left,h=l.top,d=c+this._viewportWidth,u=h+this._viewportHeight,p={e,dd:t,viewport:{left:s,top:r,right:o,bottom:a,offset:{left:c,top:h,right:d,bottom:u}},offset:{x:0,y:0},isOutsideViewport:!1};return i.pageX<c?p.offset.x=i.pageX-c:i.pageX>d&&(p.offset.x=i.pageX-d),i.pageY<h?p.offset.y=h-i.pageY:i.pageY>u&&(p.offset.y=u-i.pageY),p.isOutsideViewport=!!p.offset.x||!!p.offset.y,p}stopIntervalTimer(){this._autoScrollTimerId&&(window.clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,t){if(!this._dragging&&!this._gridOptions.enableRowMoveManager)return;this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation();const i=e.getNativeEvent();if(this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(i,t),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(i,t)}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,t=0;this._autoScrollTimerId=window.setInterval(()=>{let i=!1,s=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,i=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(t+=this.addonOptions.minIntervalToShowNextCell,s=t>=this._yDelayForNextCell):t=0,(i||s)&&(i&&(e=0),s&&(t=0),this.handleDragToNewPosition(i,s))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,t){let i=this._draggingMouseOffset.e.pageX,s=this._draggingMouseOffset.e.pageY;const r=this._draggingMouseOffset.offset.x,o=this._draggingMouseOffset.offset.y,a=this._draggingMouseOffset.viewport.offset;e&&r&&(r>0?i=a.right+this._moveDistanceForOneCell.x:i=a.left-this._moveDistanceForOneCell.x),t&&o&&(o>0?s=a.top-this._moveDistanceForOneCell.y:s=a.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:i,pageY:s},this._draggingMouseOffset.dd)}handleDragTo(e,t){var r;const i=((r=e==null?void 0:e.touches)==null?void 0:r[0])??e,s=this._grid.getCellFromPoint(i.pageX-Gt(this._activeCanvas).left+this._columnOffset,i.pageY-Gt(this._activeCanvas).top+this._rowOffset);if(s!==void 0){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&s.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&s.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&s.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&s.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const o=this._grid.getCellNodeBox(s.row,s.cell);if(o){const a=this._draggingMouseOffset.viewport;(o.left<a.left||o.right>a.right||o.top<a.top||o.bottom>a.bottom)&&this._grid.scrollCellIntoView(s.row,s.cell)}}if(!this._grid.canCellBeSelected(s.row,s.cell))return;if(t!=null&&t.range){t.range.end=s;const o=new es(t.range.start.row??0,t.range.start.cell??0,s.row,s.cell);this._decorator.show(o),this.onCellRangeSelecting.notify({range:o})}}}handleDragEnd(e,t){this._decorator.hide(),this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new es(t.range.start.row??0,t.range.start.cell??0,t.range.end.row,t.range.end.cell)}))}handleDragInit(e){var r,o;this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);const t=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-t.width,this._viewportHeight=this._activeViewport.offsetHeight-t.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const a=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=((r=document.querySelector(a))==null?void 0:r.clientHeight)??0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=((o=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`))==null?void 0:o.clientWidth)??0);const i=this._grid.getCellFromEvent(e),s=this._grid.getActiveCell();(!this._grid.getEditorLock().isActive()||!(s&&i&&s.row===i.row&&s.cell===i.cell))&&(e.stopImmediatePropagation(),e.preventDefault())}handleDragStart(e,t){const i=this._grid.getCellFromEvent(e);if(i&&this.onBeforeCellRangeSelected.notify(i).getReturnValue()!==!1&&this._grid.canCellBeSelected(i.row,i.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();const s=Gt(this._canvas);let r=t.startX-s.left;this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(r+=this._scrollLeft);let o=t.startY-s.top;this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(o+=this._scrollTop);const a=this._grid.getCellFromPoint(r,o);return t.range={start:a,end:{}},this._currentlySelectedRange=t.range,this._decorator.show(new es(a.row,a.cell))}handleScroll(e,t){this._scrollTop=t.scrollTop,this._scrollLeft=t.scrollLeft}}class pz{constructor(e){this.pluginName="CellSelectionModel",this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new K("onSelectedRangesChanged"),this._eventHandler=new gt,this._selector=e===void 0||e.cellRangeSelector===void 0?new Yg({selectionCss:{border:"2px solid black"}}):e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,(this._addonOptions===void 0||this._addonOptions.cellRangeSelector===void 0)&&(this._selector=new Yg({selectionCss:{border:`2px solid ${this._grid.getOptions().darkMode?"white":"black"}`}})),e.hasDataView()&&(this._dataView=e.getData()),this._addonOptions={...this._defaults,...this._addonOptions};const t=e.getPubSubService();t&&this.onSelectedRangesChanged.setPubSubService(t),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){var e,t;this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),(e=this._grid)==null||e.unregisterPlugin(this._selector),(t=this._selector)==null||t.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,t){let i=e.length!==t.length;if(!i){for(let s=0;s<e.length;s++)if(e[s].fromCell!==t[s].fromCell||e[s].fromRow!==t[s].fromRow||e[s].toCell!==t[s].toCell||e[s].toRow!==t[s].toRow){i=!0;break}}return!i}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){const t=[];for(let i=0;i<e.length;i++){const s=e[i];this._grid.canCellBeSelected(s.fromRow,s.fromCell)&&this._grid.canCellBeSelected(s.toRow,s.toCell)&&t.push(s)}return t}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(e,t="SlickCellSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;const i=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),i){const s=new Ot(new CustomEvent("click",{detail:{caller:t}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,s)}}handleActiveCellChange(e,t){var r,o;this._prevSelectedRow=void 0;const i=Le(t.cell),s=Le(t.row);(r=this._addonOptions)!=null&&r.selectActiveCell&&s&&i?this.setSelectedRanges([new es(t.row,t.cell)]):(!((o=this._addonOptions)!=null&&o.selectActiveCell)||!s&&!i)&&this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){const t=this._grid.getCellFromEvent(e),i=this._grid.getActiveCell();if(this._grid.getEditorLock().isActive()&&i&&t&&i.row===t.row&&i.cell===t.cell)return e.stopPropagation(),!1}handleCellRangeSelected(e,t){this._grid.setActiveCell(t.range.fromRow,t.range.fromCell,!1,!1,!0),this.setSelectedRanges([t.range])}isKeyAllowed(e,t){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End",...t?[]:["a","A"]].some(i=>i===e)}handleKeyDown(e){var a,l;let t,i;const s=this._grid.getColumns().length,r=this._grid.getActiveCell();let o=0;if(this._dataView&&"getPagingInfo"in this._dataView?o=((a=this._dataView)==null?void 0:a.getPagingInfo().pageSize)||this._dataView.getLength():o=this._grid.getDataLength(),r&&(e.shiftKey||e.ctrlKey)&&!e.altKey&&this.isKeyAllowed(e.key,e.shiftKey)&&(t=this.getSelectedRanges().slice(),t.length||t.push(new es(r.row,r.cell)),i=t.pop(),typeof(i==null?void 0:i.contains)=="function")){i.contains(r.row,r.cell)||(i=new es(r.row,r.cell));let c=i.toRow-i.fromRow,h=i.toCell-i.fromCell,d,u=0;e.ctrlKey&&((l=e.key)==null?void 0:l.toLowerCase())==="a"&&(this._grid.setActiveCell(0,0,!1,!1,!0),r.row=0,r.cell=0,d=s-1,u=o-1);const p=r.row===i.fromRow?1:-1,f=r.cell===i.fromCell?1:-1,g=e.key.startsWith("Arrow");g&&!e.ctrlKey?(e.key==="ArrowLeft"?h-=f:e.key==="ArrowRight"?h+=f:e.key==="ArrowUp"?c-=p:e.key==="ArrowDown"&&(c+=p),u=r.row+p*c):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this._grid.getViewportRowCount()),this._prevSelectedRow===void 0&&(this._prevSelectedRow=r.row),!e.ctrlKey&&e.shiftKey&&e.key==="Home"||e.ctrlKey&&e.shiftKey&&e.key==="ArrowLeft"?(d=0,u=r.row):!e.ctrlKey&&e.shiftKey&&e.key==="End"||e.ctrlKey&&e.shiftKey&&e.key==="ArrowRight"?(d=s-1,u=r.row):e.ctrlKey&&e.shiftKey&&e.key==="ArrowUp"?u=0:e.ctrlKey&&e.shiftKey&&e.key==="ArrowDown"?u=o-1:e.ctrlKey&&e.shiftKey&&e.key==="Home"?(d=0,u=0):e.ctrlKey&&e.shiftKey&&e.key==="End"?(d=s-1,u=o-1):e.key==="PageUp"?(this._prevSelectedRow>=0&&(u=this._prevSelectedRow-this._cachedPageRowCount),u<0&&(u=0)):e.key==="PageDown"&&(this._prevSelectedRow<=o-1&&(u=this._prevSelectedRow+this._cachedPageRowCount),u>o-1&&(u=o-1)),this._prevSelectedRow=u),d??(d=r.cell+f*h);const m=new es(r.row,r.cell,u,d);if(this.removeInvalidRanges([m]).length){t.push(m);const _=p>0?m.toRow:m.fromRow,b=f>0?m.toCell:m.fromCell;g?(this._grid.scrollRowIntoView(_),this._grid.scrollCellIntoView(_,b,!1)):(this._grid.scrollRowIntoView(u),this._grid.scrollCellIntoView(u,b,!1))}else t.push(i);this.setSelectedRanges(t),e.preventDefault(),e.stopPropagation(),this._prevKeyDown=e.key}}}class cp{constructor(e){this.pluginName="RowSelectionModel",this._inHandler=!1,this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.onSelectedRangesChanged=new K("onSelectedRangesChanged"),this._eventHandler=new gt,this._options={...this._defaults,...e}}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return(e=this._grid)==null?void 0:e.getOptions()}init(e){this._grid=e,this._options={...this._defaults,...this._options},this._selector=this.addonOptions.cellRangeSelector;const t=e.getPubSubService();t&&this.onSelectedRangesChanged.setPubSubService(t),!this._selector&&this._options.dragToSelect&&(this._selector=new Yg({selectionCss:{border:"none"},autoScroll:this._options.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){var e,t;this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),(e=this._selector)==null||e.destroy(),(t=this._selector)==null||t.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e,t="SlickRowSelectionModel.setSelectedRanges"){if((!this._ranges||this._ranges.length===0)&&(!e||e.length===0))return;this._ranges=e;const i=new Ot(new CustomEvent("click",{detail:{caller:t}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,i)}getRowsRange(e,t){let i;const s=[];for(i=e;i<=t;i++)s.push(i);for(i=t;i<e;i++)s.push(i);return s}handleBeforeCellRangeSelected(e,t){let i=!1;if(this.gridOptions.enableRowMoveManager&&(i=this.isHandlerColumn(t.cell)??!1),this._grid.getEditorLock().isActive()||i)return e.stopPropagation(),!1;this._grid.setActiveCell(t.row,t.cell)}handleCellRangeSelected(e,t){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new es(t.range.fromRow,0,t.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,t){this._options.selectActiveRow&&t.row!==null&&this.setSelectedRanges([new es(t.row,0,t.row,this._grid.getColumns().length-1)])}handleClick(e){const t=this._grid.getCellFromEvent(e);if(!t||!this._grid.canCellBeActive(t.row,t.cell)||!this.gridOptions.multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;let i=this.rangesToRows(this._ranges);const s=i.indexOf(t.row);if(s===-1&&(e.ctrlKey||e.metaKey))i.push(t.row),this._grid.setActiveCell(t.row,t.cell);else if(s!==-1&&(e.ctrlKey||e.metaKey))i=i.filter(o=>o!==t.row),this._grid.setActiveCell(t.row,t.cell);else if(i.length&&e.shiftKey){const o=i.pop(),a=Math.min(t.row,o),l=Math.max(t.row,o);i=[];for(let c=a;c<=l;c++)c!==o&&i.push(c);i.push(o),this._grid.setActiveCell(t.row,t.cell)}const r=this.rowsToRanges(i);return this.setSelectedRanges(r),e.stopImmediatePropagation(),!0}handleKeyDown(e){const t=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.key==="ArrowUp"||e.key==="ArrowDown")){let i=this.getSelectedRows();i.sort((a,l)=>a-l),i.length||(i=[t.row]);let s,r=i[0],o=i[i.length-1];if(e.key==="ArrowDown"?s=t.row<o||r===o?++o:++r:s=t.row<o?--o:--r,s>=0&&s<this._grid.getDataLength()){this._grid.scrollRowIntoView(s);const a=this.rowsToRanges(this.getRowsRange(r,o));this.setSelectedRanges(a)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){const i=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(i)}rangesToRows(e){const t=[];for(let i=0;i<e.length;i++)for(let s=e[i].fromRow;s<=e[i].toRow;s++)t.push(s);return t}rowsToRanges(e){const t=[],i=this._grid.getColumns().length-1;return e.forEach(s=>t.push(new es(s,0,s,i))),t}}const zC="mdi-icon-check",WC="mdi-icon-uncheck";class UC{constructor(e,t){this.pubSubService=e,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,name:"",toolTip:"Select/Deselect All",width:30,reorderable:!1,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new as,this._eventHandler=new gt,this._addonOptions={...this._defaults,...t}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._isUsingDataView=!Array.isArray(e.getData()),this._isUsingDataView&&(this._dataView=e.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&(this._eventHandler.subscribe(e.onAfterSetColumns,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this))),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new cp(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&window.setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),typeof this._addonOptions.selectableOverride=="function"&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,t){var i;if(this._addonOptions={...this._defaults,...t.checkboxSelector},Array.isArray(e)&&t){const s=this.getColumnDefinition();if(!e.some(r=>r.id===s.id)){const r=((i=t==null?void 0:t.checkboxSelector)==null?void 0:i.columnIndexPosition)??0;r>0?e.splice(r,0,s):e.unshift(s),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){var t;if(this._addonOptions={...this._addonOptions,...e},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?(this.hideSelectAllFromColumnHeaderTitleRow(),this._addonOptions.name&&this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name,"")):(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const i=(t=this.headerRowNode)==null?void 0:t.querySelector("#filter-checkbox-selectall-container");if(i){i.style.display="flex",i.ariaChecked=String(this._isSelectAllChecked);const s=i.querySelector('input[type="checkbox"]');s&&(s.ariaChecked=String(this._isSelectAllChecked),s.checked=this._isSelectAllChecked)}}}deSelectRows(e){const t=[];for(const i of e)this._selectedRowsLookup[i]&&(t[t.length]=i);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(i=>t.indexOf(i)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){var s;const t=[];for(const r of e)this._selectedRowsLookup[r]&&(t[t.length]=r);const i=(s=this._grid.getSelectedRows())==null?void 0:s.concat(t);this._grid.setSelectedRows(i)}createCheckboxElement(e,t=!1){var o;const i=(o=this.gridOptions)!=null&&o.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment,s=I("label",{className:"checkbox-selector-label",htmlFor:e}),r=I("div",{className:"icon-checkbox-container"});return r.appendChild(I("input",{id:e,type:"checkbox",checked:t,ariaChecked:String(t)})),r.appendChild(I("div",{className:`mdi ${t?zC:WC}`})),s.appendChild(r),i.appendChild(s),i}getColumnDefinition(){var t;const e=String(((t=this._addonOptions)==null?void 0:t.columnId)??this._defaults.columnId);return{id:e,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?this._addonOptions.name||"":this.createCheckboxElement(`header-selector${this._selectAll_UID}`),toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:e,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,reorderable:this._addonOptions.reorderable,sortable:!1,width:this._addonOptions.width||30,maxWidth:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name||"","")}hideSelectAllFromColumnHeaderFilterRow(){var t;const e=(t=this.headerRowNode)==null?void 0:t.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,t){const i=this._grid.getDataItem(t);if(!this.checkSelectableOverride(t,i,this._grid))return;const s=this._grid.getSelectedRows();typeof this._addonOptions.onRowToggleStart=="function"&&this._addonOptions.onRowToggleStart(e,{row:t,previousSelectedRows:s});const r=this._selectedRowsLookup[t]?this._grid.getSelectedRows().filter(o=>o!==t):this._grid.getSelectedRows().concat(t);this._grid.setSelectedRows(r,"click.toggle"),this._grid.setActiveCell(t,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:t,previousSelectedRows:s})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{if(i.column.field===(this._addonOptions.field||"_checkbox_selector")){tt(i.node);const s=`header-filter-selector${this._selectAll_UID}`,r=I("label",{id:"filter-checkbox-selectall-container",htmlFor:s}),o=I("div",{className:"icon-checkbox-container"});o.appendChild(I("input",{id:s,type:"checkbox",ariaChecked:"false"})),o.appendChild(I("div",{className:"mdi mdi-icon-uncheck"})),r.appendChild(o),i.node.appendChild(r),this._headerRowNode=i.node,this._headerRowNode.classList.add("checkbox-header"),this._bindEventService.bind(r,"click",a=>this.handleHeaderClick(a,i))}})}checkboxSelectionFormatter(e,t,i,s,r,o){if(r&&this.checkSelectableOverride(e,r,o)){const a=this.createUID()+e;return this.createCheckboxElement(`selector${a}`,!!this._selectedRowsLookup[e])}return null}checkSelectableOverride(e,t,i){return typeof this._selectableOverride=="function"?this._selectableOverride(e,t,i):!0}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(this._checkboxColumnCellIndex===null){this._checkboxColumnCellIndex=0;const e=this._grid.getColumns();for(let t=0;t<e.length;t++)e[t].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=t)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){var s,r;const e=this._dataView.getAllSelectedFilteredIds(),t=this._dataView.getFilteredItems();let i=0;if(typeof this._selectableOverride=="function"&&e.length>0)for(let o=0;o<this._dataView.getItemCount();o++){const a=this._dataView.getItemByIdx(o),l=this._dataView.getIdPropertyName(),c=a[l];t.findIndex(d=>d[l]===c)>=0&&!this.checkSelectableOverride(o,a,this._grid)&&i++}if(this._isSelectAllChecked=e.length+i>=t.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const o=(s=this.headerRowNode)==null?void 0:s.querySelector(`#header-filter-selector${this._selectAll_UID}`),a=(r=this.headerRowNode)==null?void 0:r.querySelector(".icon-checkbox-container .mdi");o&&(o.ariaChecked=String(this._isSelectAllChecked),o.checked=this._isSelectAllChecked),a&&(a.className=`mdi ${this._isSelectAllChecked?zC:WC}`)}}handleClick(e,t){if(this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}this.toggleRowSelectionWithEvent(e,t.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,t){if(t.column.id===this._addonOptions.columnId&&e.target.type==="checkbox"){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}let i=e.target.checked;const s=i?"click.selectAll":"click.unselectAll",r=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:r,caller:s});let o=[];if(i){const a=[];for(let l=0;l<this._grid.getDataLength();l++){const c=this._grid.getDataItem(l);!c.__group&&!c.__groupTotals&&this.checkSelectableOverride(l,c,this._grid)&&a.push(l)}o=a,i=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const a=[],l=this._dataView.getFilteredItems();for(let c=0;c<l.length;c++){const h=l[c];this.checkSelectableOverride(c,h,this._grid)&&a.push(h[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(a,{isRowBeingAdded:i})}this._grid.setSelectedRows(o,s),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:o,previousSelectedRows:r,caller:s}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,t){e.key===" "&&this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(e,t.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){var l;const e=this._grid.getSelectedRows(),t={};let i=0,s=0,r=0,o=0;if(typeof this._selectableOverride=="function")for(r=0;r<this._grid.getDataLength();r++){const c=this._grid.getDataItem(r);this.checkSelectableOverride(s,c,this._grid)||o++}const a=[];for(s=0;s<e.length;s++){i=e[s];const c=this._grid.getDataItem(i);this.checkSelectableOverride(s,c,this._grid)?(t[i]=!0,t[i]!==this._selectedRowsLookup[i]&&(this._grid.invalidateRow(i),delete this._selectedRowsLookup[i])):a.push(i)}if(typeof this._selectedRowsLookup=="object"&&Object.keys(this._selectedRowsLookup).forEach(c=>{c!==void 0&&this._grid.invalidateRow(+c)}),this._selectedRowsLookup=t,this._grid.render(),this._isSelectAllChecked=((e==null?void 0:e.length)??0)+o>=this._grid.getDataLength(),(!this._isUsingDataView||!this._addonOptions.applySelectOnAllPages)&&(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow)){const c=(l=this.headerRowNode)==null?void 0:l.querySelector(`#header-filter-selector${this._selectAll_UID}`);c&&(c.ariaChecked=String(this._isSelectAllChecked),c.checked=this._isSelectAllChecked)}if(a.length>0){for(const c of a){const h=e.indexOf(c);e.splice(h,1)}this._grid.setSelectedRows(e,"click.toggle")}}renderSelectAllCheckbox(e){const t=this._grid.updateColumnHeader(this._addonOptions.columnId||"",this.createCheckboxElement(`header-selector${this._selectAll_UID}`,!!e),this._addonOptions.toolTip);t==null||t.classList.add("header-checkbox-selectall")}}class GA extends lp{constructor(e,t,i,s,r){var o;super(e,i,s),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=s,this.sortService=r,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:150,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:a=>Xa(a.columnPickerLabel||a.name||"","innerHTML")},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=this.sharedService.allColumns??[],this._gridUid=((o=this.grid)==null?void 0:o.getUID())??"",this.onAfterMenuShow=new K("onAfterMenuShow"),this.onBeforeMenuShow=new K("onBeforeMenuShow"),this.onMenuClose=new K("onMenuClose"),this.onCommand=new K("onCommand"),this.onColumnsChanged=new K("onColumnsChanged"),this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,uu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,e=>this.hideMenu(e)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(e,t)=>{if(t&&t.optionsBefore&&t.optionsAfter){const i=t.optionsBefore.frozenColumn>=0&&t.optionsAfter.frozenColumn===-1,s=t.optionsBefore.frozenColumn===-1&&t.optionsAfter.frozenColumn>=0;(i||s)&&this.recreateGridMenu()}})}init(){this._gridUid=this.grid.getUID()??"",k.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,t=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...t,...this.addGridMenuCustomCommands(t)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){var e,t;this._bindEventService.unbindAll(),(e=this._menuElm)==null||e.remove(),this._menuElm=null,(t=this._gridMenuButtonElm)==null||t.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(qA.call(this,this._menuElm),this._listElm=I("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",XA.bind(this),void 0,"parent-menu"))}createGridMenu(){var r,o;const e=this._gridUid?`.${this._gridUid}`:"",t=((r=this._addonOptions)==null?void 0:r.menuWidth)||this._defaults.menuWidth,i=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",s=this.grid.getContainerNode();if(this._headerElm=s.querySelector(`.slick-header-${i}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${t}px)`,(this._addonOptions.resizeOnShowHeaderRow??this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const c=s.querySelector(`${e} .slick-headerrow`);c&&(c.style.width=`calc(100% - ${t}px)`)}if(this._addonOptions.showButton??this._defaults.showButton){this._gridMenuButtonElm=I("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),(o=this._addonOptions)!=null&&o.iconCssClass&&this._gridMenuButtonElm.classList.add(...ht(this._addonOptions.iconCssClass));const c=this._addonOptions.iconButtonContainer==="preheader"?"firstChild":"lastChild";this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement[c]),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))}this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(e,t=0,i){const s=i==null?void 0:i.command;let r=t===1&&s?s.replace(/\s/g,""):"";r&&(this._subMenuParentId=r),t>1&&(r=this._subMenuParentId);const o=`${this.menuCssClass} slick-menu-level-${t} ${this._gridUid}`,a=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${t}${this.gridUidSelector}`);if(a){if(a.dataset.subMenuParent===r)return a;this.disposeSubMenus()}const l=I("div",{role:"menu",className:o,ariaLabel:t>1?"SubMenu":"Grid Menu"});t>0&&(l.classList.add("slick-submenu"),r&&(l.dataset.subMenuParent=r));const c={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:t};return this._commandMenuElm=this.recreateCommandList(e,l,c,i),t++,l}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){var i,s,r;const t={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",t),!(typeof((i=this._addonOptions)==null?void 0:i.onMenuClose)=="function"&&this._addonOptions.onMenuClose(e,t)===!1||this.onMenuClose.notify(t,null,this).getReturnValue()===!1)){if(this._isMenuOpen=!1,typeof((s=this.grid)==null?void 0:s.autosizeColumns)=="function"){const o=this.grid.getUID()||"";this._areVisibleColumnDifferent&&o&&document.querySelector(`.${o}`)!==null&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),(r=this._menuElm)==null||r.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,t,i,s){var l,c;const r=((l=e==null?void 0:e.touches)==null?void 0:l[0])??e,o=t.classList.contains("slick-submenu"),a=o?e.target.closest(".slick-menu-item"):r.target;if(a){const h=i||this._gridMenuButtonElm,d=Gt(i),u=Gt(a),p=s??this._addonOptions,f=getComputedStyle(h),g=parseInt((f==null?void 0:f.width)??((c=this._defaults)==null?void 0:c.menuWidth),10),m=(t==null?void 0:t.offsetWidth)??0,_=(p==null?void 0:p.contentMinWidth)??this._defaults.contentMinWidth??0,b=(_>m?_:m)||0,C=d.top,v=d.right;let y,S;if(o?(S=u.top,y=u.left):(S=C+h.offsetHeight,y=(p==null?void 0:p.dropSide)==="right"?v-g:v-b),o){const W=(t==null?void 0:t.clientHeight)||0,{bottom:J,top:Y}=P_(a);(J<W&&Y>J?"top":"bottom")==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),S-=W-a.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}const A=this.grid.getGridPosition();let P=y+Number(m);o&&(P+=a.clientWidth);const F=document.documentElement.clientWidth;(P>=A.width||P>=F?"left":"right")==="left"||!o&&(p==null?void 0:p.dropSide)==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),o&&(y-=Number(m))):(t.classList.remove("dropleft"),t.classList.add("dropright"),o&&(y+=a.offsetWidth)),t.style.top=`${S}px`,t.style.left=`${y}px`,_>0&&(t.style.minWidth=`${_}px`),t.style.opacity="1",t.style.display="block"}}openGridMenu(){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(e,"target",{writable:!0,configurable:!0,value:I("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(e)}showGridMenu(e,t){var s,r,o;const i=((s=e==null?void 0:e.touches)==null?void 0:s[0])??e;if(e.preventDefault(),tt(this._menuElm),(r=this._menuElm)==null||r.remove(),this._addonOptions){const a={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},l={...this._addonOptions,...t};if(l&&!this.extensionUtility.runOverrideFunctionWhenExists(l.menuUsabilityOverride,a)||typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",a),typeof(l==null?void 0:l.onBeforeMenuShow)=="function"&&l.onBeforeMenuShow(e,a)===!1||this.onBeforeMenuShow.notify(a,null,this).getReturnValue()===!1))return;this._menuElm=this.createCommandMenu(((o=this._addonOptions)==null?void 0:o.commandItems)??[]),this.createColumnPickerContainer(),uu.call(this),this._columnCheckboxes=[],QA.call(this,l),document.body.appendChild(this._menuElm),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm.style.opacity="0";const c=((l==null?void 0:l.marginBottom)!==void 0?l.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=Sr(l==null?void 0:l.minHeight,""),(l==null?void 0:l.height)!==void 0?this._menuElm.style.height=Sr(l.height,""):this._menuElm.style.maxHeight=Sr(l==null?void 0:l.maxHeight,`${window.innerHeight-i.clientY-c}px`);let h=e.target.nodeName==="BUTTON"?e.target:e.target.querySelector("button");h||(h=e.target.parentElement),this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm),this.repositionMenu(e,this._menuElm,h,l),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",a),typeof(l==null?void 0:l.onAfterMenuShow)=="function"&&l.onAfterMenuShow(e,a),this.onAfterMenuShow.notify(a,null,this)}}translateGridMenu(){var e;if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const t=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...t,...this.addGridMenuCustomCommands(t)],this.extensionUtility.translateMenuItemsFromTitleKey(((e=this._addonOptions)==null?void 0:e.commandItems)||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){var a,l;const t=this.gridOptions.backendServiceApi||null,i=[],s=this.gridOptions,r=Ko(s),o=(a=this._addonOptions)==null?void 0:a.commandLabels;if(this._addonOptions&&this.gridOptions){if(!this._addonOptions.hideClearFrozenColumnsCommand){const h="clear-pinning";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"mdi mdi-pin-off-outline",titleKey:`${r}${(o==null?void 0:o.clearFrozenColumnsCommandKey)??"CLEAR_PINNING"}`,disabled:!1,command:h,positionOrder:52})}if(this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(!this._addonOptions.hideClearAllFiltersCommand){const h="clear-filter";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"mdi mdi-filter-remove-outline",titleKey:`${r}${(o==null?void 0:o.clearAllFiltersCommandKey)??"CLEAR_ALL_FILTERS"}`,disabled:!1,command:h,positionOrder:50})}if(!this._addonOptions.hideToggleFilterCommand){const h="toggle-filter";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"mdi mdi-flip-vertical",titleKey:`${r}${(o==null?void 0:o.toggleFilterCommandKey)??"TOGGLE_FILTER_ROW"}`,disabled:!1,command:h,positionOrder:53})}if(t&&!this._addonOptions.hideRefreshDatasetCommand){const h="refresh-dataset";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"mdi mdi-sync",titleKey:`${r}${(o==null?void 0:o.refreshDatasetCommandKey)??"REFRESH_DATASET"}`,disabled:!1,command:h,positionOrder:58})}}if(!this._addonOptions.hideToggleDarkModeCommand){const h="toggle-dark-mode";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconToggleDarkModeCommand||"mdi mdi-brightness-4",titleKey:`${r}${(o==null?void 0:o.toggleDarkModeCommandKey)??"TOGGLE_DARK_MODE"}`,disabled:!1,command:h,positionOrder:54})}if(this.gridOptions.showPreHeaderPanel&&!this._addonOptions.hideTogglePreHeaderCommand){const h="toggle-preheader";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"mdi mdi-flip-vertical",titleKey:`${r}${(o==null?void 0:o.togglePreHeaderCommandKey)??"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:h,positionOrder:53})}if(this.gridOptions.enableSorting&&!this._addonOptions.hideClearAllSortingCommand){const h="clear-sorting";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"mdi mdi-sort-variant-off",titleKey:`${r}${(o==null?void 0:o.clearAllSortingCommandKey)??"CLEAR_ALL_SORTING"}`,disabled:!1,command:h,positionOrder:51})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportCsvCommand){const h="export-csv";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"mdi mdi-download",titleKey:`${r}${(o==null?void 0:o.exportCsvCommandKey)??"EXPORT_TO_CSV"}`,disabled:!1,command:h,positionOrder:55})}if(this.gridOptions.enableExcelExport&&!this._addonOptions.hideExportExcelCommand){const h="export-excel";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${r}${(o==null?void 0:o.exportExcelCommandKey)??"EXPORT_TO_EXCEL"}`,disabled:!1,command:h,positionOrder:56})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportTextDelimitedCommand){const h="export-text-delimited";e.some(d=>d!=="divider"&&d.hasOwnProperty("command")&&d.command===h)||i.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${r}${(o==null?void 0:o.exportTextDelimitedCommandKey)??"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:h,positionOrder:57})}const c=((l=this._addonOptions)==null?void 0:l.commandItems)||[];(Array.isArray(i)&&i.length>0||Array.isArray(c)&&c.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"))}return i}executeGridMenuInternalCustomCommands(e,t){var s,r,o;const i=((s=this.sharedService)==null?void 0:s.externalRegisteredResources)||[];if(t!=null&&t.command)switch(t.command){case"clear-pinning":const a=[...this.sharedService.visibleColumns],l={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(l),this.sharedService.gridOptions.frozenColumn=l.frozenColumn,this.sharedService.gridOptions.frozenRow=l.frozenRow,this.sharedService.gridOptions.frozenBottom=l.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=l.enableMouseWheelScrollHandler,Array.isArray(a)&&this.grid.setColumns(a),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const h=i.find(m=>m.className==="TextExportService");h!=null&&h.exportToFile?h.exportToFile({delimiter:kr.comma,format:mn.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":const d=i.find(m=>m.className==="ExcelExportService");d!=null&&d.exportToExcel?d.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const u=i.find(m=>m.className==="TextExportService");u!=null&&u.exportToFile?u.exportToFile({delimiter:kr.tab,format:mn.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-dark-mode":const p=this.sharedService.gridOptions.darkMode;this.grid.setOptions({darkMode:!p}),this.sharedService.gridOptions.darkMode=!p;break;case"toggle-filter":let f=((r=this.gridOptions)==null?void 0:r.showHeaderRow)??!1;f=!f,this.grid.setHeaderRowVisibility(f),f===!0&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":const g=((o=this.gridOptions)==null?void 0:o.showPreHeaderPanel)??!1;this.grid.setPreHeaderPanelVisibility(!g);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset();break}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"mdi mdi-menu",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._isMenuOpen&&this.menuElement!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.hideMenu(e)}}handleMenuItemCommandClick(e,t,i,s=0){var r,o;if(i!=="divider"&&!i.disabled&&!i.divider)if((i.command||"")&&!i.commandItems){const l={grid:this.grid,command:i.command,item:i,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,l),this.pubSubService.publish("onGridMenuCommand",l),typeof((r=this._addonOptions)==null?void 0:r.onCommand)=="function"&&this._addonOptions.onCommand(e,l),this.onCommand.notify(l,null,this),typeof i.action=="function"&&i.action.call(this,e,l),!((o=this._addonOptions)!=null&&o.leaveOpen)&&!e.defaultPrevented&&this.hideMenu(e),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,s)}handleMenuItemMouseOver(e,t,i,s=0){i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems?this.repositionSubMenu(e,i,s):s===0&&this.disposeSubMenus())}recreateCommandList(e,t,i,s){const r=i.level||0;if(e.length>0){const o=I("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},t);if(r===0){this.populateCommandOrOptionTitle("command",this.addonOptions,o,r);const a=t.querySelector(".slick-command-header")??I("div",{className:"slick-command-header"});a.classList.add("with-close"),YA.call(this,a),o.appendChild(a)}return s&&r>0&&this.addSubMenuTitleWhenExists(s,o),this.populateCommandOrOptionItems("command",this._addonOptions,o,e,i,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),o}return null}repositionSubMenu(e,t,i){const s=(t==null?void 0:t.commandItems)||[],r=this.createCommandMenu(s,i+1,t);r.style.display="block",document.body.appendChild(r),this.repositionMenu(e,r)}}const jA="mdi-icon-picker-check",KA="mdi-icon-picker-uncheck";function YA(n){const t=I("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"×",dataset:{dismiss:this instanceof Z_?"slick-column-picker":"slick-grid-menu"}});n.appendChild(t)}function qA(n){var t,i;const e=this;(t=e.addonOptions)!=null&&t.columnTitle&&(e._columnTitleElm=I("div",{className:"slick-menu-title",textContent:((i=e.addonOptions)==null?void 0:i.columnTitle)??e._defaults.columnTitle},n))}function XA(n){var o,a;const e=this,t=e instanceof Z_?"columnPicker":"gridMenu",i=(o=n.target)==null?void 0:o.closest(".icon-checkbox-container"),s=i==null?void 0:i.querySelector(".mdi"),r=!!n.target.checked;if(n.target.ariaChecked=String(r),GC(s,r),n.target.dataset.option==="autoresize"){const l=e.getVisibleColumns();e.grid.setOptions({forceFitColumns:r}),e.grid.setColumns(l);return}if(n.target.dataset.option==="syncresize"){e.grid.setOptions({syncColumnCellResize:r});return}if(n.target.type==="checkbox"){e._areVisibleColumnDifferent=!0;const l=n.target.dataset.columnid||"",c=[];if(e._columnCheckboxes.forEach((u,p)=>{u.checked&&c.push(e.columns[p])}),!c.length){n.target.checked=!0,GC(s,!0);return}if(e.grid.setColumns(c),(!e.sharedService.visibleColumns||Array.isArray(c)&&c.length!==e.sharedService.visibleColumns.length)&&(e.sharedService.visibleColumns=c),e.gridOptions.enableRowSelection&&r){const u=e.grid.getSelectedRows();e.grid.setSelectedRows(u)}const h=e.gridOptions.frozenColumn??-1;h>=0&&e.extensionUtility.readjustFrozenColumnIndexWhenNeeded(h,e.columns,c);const d={columnId:l,showing:r,allColumns:e.columns,visibleColumns:c,columns:c,grid:e.grid};e.pubSubService.publish(`on${Zd(t)}ColumnsChanged`,d),typeof((a=e.addonOptions)==null?void 0:a.onColumnsChanged)=="function"&&e.addonOptions.onColumnsChanged(n,d),e.onColumnsChanged.notify(d,null,e)}}function GC(n,e=!1){n&&(n.className=`mdi ${e?jA:KA}`)}function bf(n,e,t,i=!1){const s=I("label",{className:"checkbox-picker-label",htmlFor:e}),r=I("div",{className:"icon-checkbox-container"}),o=I("input",{id:e,type:"checkbox",dataset:t}),a=I("div",{className:`mdi ${i?jA:KA}`}),l=I("span",{className:"checkbox-label"});return r.appendChild(o),r.appendChild(a),s.appendChild(r),s.appendChild(l),n.appendChild(s),i&&(o.ariaChecked="true",o.checked=!0),{inputElm:o,labelElm:s,labelSpanElm:l}}function QA(n){const e=this,t=e instanceof GA,i=t?"gridmenu-":"";for(const s of e.columns){const r=s.id,o=document.createElement("li");(s.excludeFromColumnPicker&&!t||s.excludeFromGridMenu&&t)&&(o.className="hidden");const a=`${e._gridUid}-${i}colpicker-${r}`,l=e.grid.getColumnIndex(r)>=0,{inputElm:c,labelElm:h,labelSpanElm:d}=bf(o,a,{columnid:`${r}`},l);e._columnCheckboxes.push(c);const p=(typeof(n==null?void 0:n.headerColumnValueExtractor)=="function"?n.headerColumnValueExtractor:e._defaults.headerColumnValueExtractor)(s,e.gridOptions);this.grid.applyHtmlCode(d,p),o.appendChild(h),e._listElm.appendChild(o)}if((!n.hideForceFitButton||!n.hideSyncResizeButton)&&e._listElm.appendChild(document.createElement("hr")),!(n!=null&&n.hideForceFitButton)){const s=document.createElement("li"),r=`${e._gridUid}-${i}colpicker-forcefit`,{labelSpanElm:o}=bf(s,r,{option:"autoresize"},e.gridOptions.forceFitColumns);o.textContent=(n==null?void 0:n.forceFitTitle)??"",e._listElm.appendChild(s)}if(!(n!=null&&n.hideSyncResizeButton)){const s=document.createElement("li"),r=`${e._gridUid}-${i}colpicker-syncresize`,{labelSpanElm:o}=bf(s,r,{option:"syncresize"},e.gridOptions.forceFitColumns);o.textContent=(n==null?void 0:n.syncResizeTitle)??"",e._listElm.appendChild(s)}}function uu(){const n=this,e=n.grid.getColumns().slice(0),t=new Array(n.columns.length);for(let i=0;i<t.length;i++)n.grid.getColumnIndex(n.columns[i].id)===void 0?t[i]=n.columns[i]:t[i]=e.shift();n._columns=t}class Z_{constructor(e,t,i){var s,r;this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:150,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:o=>Xa(o.columnPickerLabel||o.name||"","innerHTML")},this._bindEventService=new as,this.onColumnsChanged=new K("onColumnsChanged"),this._eventHandler=new gt,this._columns=this.sharedService.allColumns??[],this._gridUid=((r=(s=this.grid)==null?void 0:s.getUID)==null?void 0:r.call(s))??"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.sharedService.gridOptions??{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){this._gridUid=this.grid.getUID()??"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.onColumnsChanged.setPubSubService(this.pubSubService),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onPreHeaderContextMenu,e=>{["slick-column-name","slick-header-column"].some(t=>{var i;return(i=e.target)==null?void 0:i.classList.contains(t)})&&this.handleHeaderContextMenu(e)}),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,uu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.disposeMenu.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){var e,t;this._bindEventService.unbindAll("parent-menu"),(e=this._listElm)==null||e.remove(),(t=this._menuElm)==null||t.remove(),this._menuElm=null}createPickerMenu(){const e=I("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return uu.call(this),qA.call(this,e),YA.call(this,e),this._listElm=I("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(e,"click",XA.bind(this),void 0,"parent-menu"),document.body.appendChild(e),e}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(e){var t;(this._menuElm!==e.target&&!((t=this._menuElm)!=null&&t.contains(e.target))||e.target.className==="close"&&e.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(e){e.preventDefault(),tt(this._menuElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),QA.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(e)}repositionMenu(e){var i;const t=((i=e==null?void 0:e.touches)==null?void 0:i[0])??e;if(this._menuElm){const s=this.grid.getGridPosition(),r=this._menuElm.clientWidth||0;let o=t.pageX||0;s!=null&&s.width&&o+r>=s.width&&(o=o-r),this._menuElm.style.top=`${t.pageY-10}px`,this._menuElm.style.left=`${o}px`,this._menuElm.style.minHeight=Sr(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=Sr(this.addonOptions.maxHeight,`${window.innerHeight-t.clientY}px`),this._menuElm.style.display="block",this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm)}}translateTitleLabels(e){e&&(e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const Ed=(n,e,t,i,s,r)=>{const o=i.params||{};if(!o.formatters||!Array.isArray(o.formatters))throw new Error(`[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.
    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }`);const a=o.formatters;let l=t;return a.forEach((c,h)=>{if(typeof c!="function")throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${h}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);l=c.call(void 0,n,e,l,i,s,r)}),l};function jC(n,e){if(Array.isArray(n)){for(const t of n)if(t.editor)if(t.formatter&&t.formatter!==Ed&&t.formatter!==e){const i=t.formatter;t.formatter=Ed,t.params={...t.params,formatters:[i,e]}}else t.formatter&&t.formatter===Ed&&t.params?t.params.formatters.findIndex(i=>i===e)===-1&&(t.params.formatters=[...t.params.formatters,e]):t.formatter=e}}function jr(n,e,t,i){let s,r,o="",a="";switch(t){case"currency":s=se.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,r=se.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":s=se.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,r=se.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":s=se.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,r=se.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL;break}const l=e&&typeof e.getOptions=="function"?e.getOptions():{},c=xn("minDecimal",n,l,s),h=xn("maxDecimal",n,l,r),d=xn("decimalSeparator",n,l,se.DEFAULT_NUMBER_DECIMAL_SEPARATOR),u=xn("thousandSeparator",n,l,se.DEFAULT_NUMBER_THOUSAND_SEPARATOR),p=xn("displayNegativeNumberWithParentheses",n,l,se.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),f=xn("currencyPrefix",n,l,""),g=xn("currencySuffix",n,l,"");return i==="cell"&&(o=xn("numberPrefix",n,l,""),a=xn("numberSuffix",n,l,"")),{minDecimal:c,maxDecimal:h,decimalSeparator:d,thousandSeparator:u,wrapNegativeNumber:p,currencyPrefix:f,currencySuffix:g,numberPrefix:o,numberSuffix:a}}function xn(n,e,t,i){var r;const s=e&&e.params;return s&&s.hasOwnProperty(n)?s[n]:(r=t==null?void 0:t.formatterOptions)!=null&&r.hasOwnProperty(n)?t.formatterOptions[n]:i}function vt(n,e){const t=ys(n,{withZeroPadding:!0});return(i,s,r,o,a,l)=>{var m,_;const c=l&&typeof l.getOptions=="function"?l.getOptions():{},h=((m=c==null?void 0:c.formatterOptions)==null?void 0:m.dateSeparator)??e,d=(o==null?void 0:o.type)??N.date,u=ys(d,{withDefaultIso8601:!0}),p=((_=o==null?void 0:o.params)==null?void 0:_.parseDateAsUtc)??!1,f=ln(r,u);let g=r;if(f){let b=f;p&&(b=cB(f)),g=Wi(b,t,"en-US")}if(g&&h!==e){const b=new RegExp(e,"ig");g=g.replace(b,h)}return g}}function fz(n,e,t,i,s,r){let o=!1;t!=null&&t.hasOwnProperty("exportWithFormatter")?o=!!t.exportWithFormatter:r!=null&&r.hasOwnProperty("exportWithFormatter")&&(o=!!r.exportWithFormatter);let a;i&&t.exportCustomFormatter?a=t.exportCustomFormatter:o&&t.formatter&&(a=t.formatter);const l=hp(a,n,e,t,i,s);return r!=null&&r.sanitizeDataExport&&typeof l=="string"?Js(l):l}function hp(n,e,t,i,s,r){let o="",l=i.field||i.id||"";if(typeof i.field=="string"&&i.field.indexOf(".")>0){const h=i.field.split(".");l=h.length>0?h[0]:i.field}const c=s!=null&&s.hasOwnProperty(l)?s[l]:null;if(typeof n=="function"){const h=n(e,t,c,i,s,r),d=Nc(h)?h:h.html||h.text;o=Xa(d)}else o=s!=null&&s.hasOwnProperty(l)?c:"";return o==null&&(o=""),typeof o=="object"&&!(o instanceof Date)&&Object.entries(o).length===0&&(o=""),o}class gz extends UA{constructor(e,t,i,s){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.treeDataService=s,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(i.gridOptions.contextMenu)}init(e){this._addonOptions={...this._defaults,...e};const t=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...t,...this.addMenuCustomCommands(t)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){var i;const e=((i=this.sharedService)==null?void 0:i.gridOptions)??{},t=this.sharedService.gridOptions.contextMenu;if(t&&(e!=null&&e.enableTranslate)){const s=t.commandItems||[],r=t.optionItems||[];t.commandTitleKey&&(t.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.commandTitleKey,"TEXT_COMMANDS")||t.commandTitle),t.optionTitleKey&&(t.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.optionTitleKey,"TEXT_COMMANDS")||t.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(s,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(r,"optionItems")}}handleOnContextMenu(e,t){this.disposeAllMenus();const i=this.grid.getCellFromEvent(e);if(i){const s=this.grid.getDataItem(i.row),r=this.grid.getColumns()[i.cell],o=t||{};if(o.cell=i.cell,o.row=i.row,o.column=r,o.dataContext=s,o.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,o))return;this._menuElm=this.createParentMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){var a;const t=[],i=this.sharedService&&this.sharedService.gridOptions||{},s=i==null?void 0:i.contextMenu,r=(a=this.sharedService)==null?void 0:a.dataView,o=Ko(i);if(s&&!s.hideCopyCellValueCommand){const l="copy";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconCopyCellValueCommand||"mdi mdi-content-copy",titleKey:`${o}COPY`,disabled:!1,command:l,positionOrder:50,action:(c,h)=>{this.copyToClipboard(h)},itemUsabilityOverride:c=>{const h=c==null?void 0:c.column,d=c==null?void 0:c.dataContext;if(typeof h.queryFieldNameGetterFn=="function"){const u=Xd(h,d,"");if(u!==""&&u!==void 0)return!0}else if(h&&d.hasOwnProperty(h.field))return d[h.field]!==""&&d[h.field]!==null&&d[h.field]!==void 0;return!1}})}if(i!=null&&i.enableTextExport&&s&&!s.hideExportCsvCommand){const l="export-csv";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconExportCsvCommand||"mdi mdi-download",titleKey:`${o}EXPORT_TO_CSV`,disabled:!1,command:l,positionOrder:51,action:()=>{var d;const h=(((d=this.sharedService)==null?void 0:d.externalRegisteredResources)||[]).find(u=>u.className==="TextExportService");if(h!=null&&h.exportToFile)h.exportToFile({delimiter:kr.comma,format:mn.csv});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(i&&i.enableExcelExport&&s&&!s.hideExportExcelCommand){const l="export-excel";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${o}EXPORT_TO_EXCEL`,disabled:!1,command:l,positionOrder:52,action:()=>{var d;const h=(((d=this.sharedService)==null?void 0:d.externalRegisteredResources)||[]).find(u=>u.className==="ExcelExportService");if(h!=null&&h.exportToExcel)h.exportToExcel();else throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };")}})}if(i!=null&&i.enableTextExport&&s&&!s.hideExportTextDelimitedCommand){const l="export-text-delimited";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${o}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:l,positionOrder:53,action:()=>{var d;const h=(((d=this.sharedService)==null?void 0:d.externalRegisteredResources)||[]).find(u=>u.className==="TextExportService");if(h!=null&&h.exportToFile)h.exportToFile({delimiter:kr.tab,format:mn.txt});else throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };")}})}if(i&&(i.enableGrouping||i.enableDraggableGrouping||i.enableTreeData)){if(s&&!s.hideCopyCellValueCommand&&t.push({divider:!0,command:"",positionOrder:54}),i&&!i.enableTreeData&&s&&!s.hideClearAllGrouping){const l="clear-grouping";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconClearGroupingCommand||"mdi mdi-close",titleKey:`${o}CLEAR_ALL_GROUPING`,disabled:!1,command:l,positionOrder:55,action:()=>{r.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const c=r&&r.getGrouping&&r.getGrouping();return Array.isArray(c)&&c.length>0}})}if(i&&s&&!s.hideCollapseAllGroups){const l="collapse-all-groups";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconCollapseAllGroupsCommand||"mdi mdi-arrow-collapse",titleKey:`${o}COLLAPSE_ALL_GROUPS`,disabled:!1,command:l,positionOrder:56,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):r.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;const c=r&&r.getGrouping&&r.getGrouping();return Array.isArray(c)&&c.length>0}})}if(i&&s&&!s.hideExpandAllGroups){const l="expand-all-groups";e.some(c=>c!=="divider"&&c.hasOwnProperty("command")&&c.command===l)||t.push({iconCssClass:s.iconExpandAllGroupsCommand||"mdi mdi-arrow-expand",titleKey:`${o}EXPAND_ALL_GROUPS`,disabled:!1,command:l,positionOrder:57,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):r.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;const c=r&&r.getGrouping&&r.getGrouping();return Array.isArray(c)&&c.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(t),t}copyToClipboard(e){var t,i;try{if(e&&e.grid&&e.command){const s=((t=this.sharedService)==null?void 0:t.gridOptions)??{},r=(e==null?void 0:e.cell)??0,o=(e==null?void 0:e.row)??0,a=e==null?void 0:e.column,l=e==null?void 0:e.dataContext,c=(i=this.sharedService)==null?void 0:i.slickGrid,h=s&&(s.excelExportOptions||s.textExportOptions);let d=fz(o,r,a,l,c,h);typeof a.queryFieldNameGetterFn=="function"&&(d=Xd(a,l,""));let u=d;typeof d=="string"&&(u=d.replace(/^([·|⮞|⮟]\s*)|([·|⮞|⮟])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const p=document.createElement("textarea");p&&document.body&&(p.style.position="absolute",p.style.opacity="0",p.value=u,document.body.appendChild(p),p.select(),document.execCommand("copy",!1,u)&&p.remove())}}catch{}}sortMenuItems(){var t,i;const e=(i=(t=this.sharedService)==null?void 0:t.gridOptions)==null?void 0:i.contextMenu;e&&(this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"))}}class mz{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._gridColumns=[],this._gridUid="",this._isInitialized=!1,this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this._bindingEventService=new as,this.onGroupChanged=new K("onGroupChanged"),this._eventHandler=new gt}get addonOptions(){return this._addonOptions}get dataView(){var e;return((e=this.grid)==null?void 0:e.getData())??{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){return this._grid??this.sharedService.slickGrid??{}}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){var e;return this._gridUid||(((e=this.grid)==null?void 0:e.getUID())??"")}get gridContainer(){return this.grid.getContainerNode()}set isInitialized(e){this._isInitialized=e}init(e,t){var i,s;if(this._addonOptions={...this._defaults,...t},this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropzoneElm=e.getTopHeaderPanel()||e.getPreHeaderPanel(),!this._dropzoneElm)throw new Error("[Slickgrid-Universal] Draggable Grouping requires the pre-header to be created and shown for the plugin to work correctly (use `createPreHeaderPanel` and `showPreHeaderPanel`).");if(this._dropzoneElm.classList.add("slick-dropzone"),this.onGroupChanged.setPubSubService(this.pubSubService),!this._addonOptions.hideToggleAllButton){this._groupToggler=I("div",{className:"slick-group-toggle-all",title:this._addonOptions.toggleAllPlaceholderText??"",style:{display:"none"}});const r=I("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=this._addonOptions.toggleAllPlaceholderText??"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(I("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(r,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(r,!1,!1)))}this._dropzonePlaceholderElm=I("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&((i=this._addonOptions)!=null&&i.dropPlaceHolderTextKey)&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=((s=this._addonOptions)==null?void 0:s.dropPlaceHolderText)??this._defaults.dropPlaceHolderText??"",this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,(r,o)=>{var l;const a=o.node;if(!rC((l=o.column)==null?void 0:l.grouping)&&a&&(a.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const c=I("span",{className:"slick-column-groupable"},a);this._addonOptions.groupIconCssClass&&c.classList.add(...ht(this._addonOptions.groupIconCssClass))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(const r of this._gridColumns){const o=r.field;e.updateColumnHeader(o)}}return this}dispose(){var e,t;this.destroySortableInstances(),(e=this._droppableInstance)!=null&&e.el&&((t=this._droppableInstance)==null||t.destroy()),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),tt(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel,.${this.gridUid} .slick-topheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const e=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const t of Array.from(e)){const i=this._dropzoneElm.querySelector(".slick-groupby-remove");i==null||i.remove(),t==null||t.remove()}this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){var e,t,i,s;(e=this._sortableLeftInstance)!=null&&e.el&&((t=this._sortableLeftInstance)==null||t.destroy()),(i=this._sortableRightInstance)!=null&&i.el&&((s=this._sortableRightInstance)==null||s.destroy())}setAddonOptions(e){this._addonOptions={...this._addonOptions,...e}}setColumns(e){this._gridColumns=e}setDroppedGroups(e){this._dropzonePlaceholderElm.style.display="none";const t=Array.isArray(e)?e:[e];for(const i of t){const s=this.grid.getHeaderColumn(i);this.handleGroupByDrop(this._dropzoneElm,s)}}setupColumnReorder(e,t,i,s,r,o,a,l,c){this.destroySortableInstances();const h=e.getTopHeaderPanel()||e.getPreHeaderPanel(),d=h.querySelector(".slick-draggable-dropzone-placeholder"),u=h.querySelector(".slick-group-toggle-all"),p={animation:50,ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:f=>{f.item.classList.add("slick-header-column-active"),d&&(d.style.display="inline-block"),h.querySelectorAll(".slick-dropped-grouping").forEach(m=>m.style.display="none"),u&&(u.style.display="none")},onEnd:f=>{var C,v,y;f.item.classList.remove("slick-header-column-active"),h==null||h.classList.remove("slick-dropzone-hover"),(C=d==null?void 0:d.parentElement)==null||C.classList.remove("slick-dropzone-placeholder-hover");const g=h.querySelectorAll(".slick-dropped-grouping");if(g.forEach(S=>S.style.display="flex"),g.length&&(d&&(d.style.display="none"),u&&(u.style.display="inline-flex")),!e.getEditorLock().commitCurrentEdit())return;const m=((v=this.sortableLeftInstance)==null?void 0:v.toArray())??[];if(t.length>1){const S=((y=this._sortableRightInstance)==null?void 0:y.toArray())??[];for(const A of S)m.push(A)}const _=[],b=e.getColumns();for(const S of m)_.push(b[a.call(e,S)]);s.call(e,_),c.call(e,e.onColumnsReordered,{grid:e,impactedColumns:_}),f.stopPropagation(),r.call(e)}};return this._sortableLeftInstance=ve.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-left`),p),this._sortableRightInstance=ve.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-right`),p),this._addonOptions.initialGroupBy&&!this._isInitialized&&this.setDroppedGroups(this._addonOptions.initialGroupBy),this._isInitialized=!0,{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,t,i,s){this._bindingEventService.bind(t,"click",()=>{const r=this._bindingEventService.boundedEvents.filter(o=>o.element===t);for(const o of r)this._bindingEventService.unbind(o.element,"click",o.listener);this.removeGroupBy(e,i,s)})}addGroupSortClickHandler(e,t){const{grouping:i,type:s}=e;this._bindingEventService.bind(t,"click",()=>{if(this.toggleGroupAll(e,!1),i){const r=i.sortAsc?ct.desc:ct.asc;i.comparer=(o,a)=>fc(s||"text",o.value,a.value,r,e,this.gridOptions),this.getGroupBySortIcon(t,!i.sortAsc),this.updateGroupBy("sort-group"),i.sortAsc=!i.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(e,t=!0){t?this._addonOptions.sortAscIconCssClass?(e.classList.remove(...ht(this._addonOptions.sortDescIconCssClass)),e.classList.add(...ht(this._addonOptions.sortAscIconCssClass))):(e.classList.add("slick-groupby-sort-asc-icon"),e.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(e.classList.remove(...ht(this._addonOptions.sortAscIconCssClass)),e.classList.add(...ht(this._addonOptions.sortDescIconCssClass))):this._addonOptions.sortDescIconCssClass||(e.classList.add("slick-groupby-sort-desc-icon"),e.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(e,t){var r,o,a;const i=(r=t.getAttribute("data-id"))==null?void 0:r.replace(this._gridUid,"");let s=!0;for(const l of this.columnsGroupBy)l.id===i&&(s=!1);if(s){for(const l of this._gridColumns)if(l.id===i&&l.grouping&&!rC(l.grouping)){const c=t.querySelector(".slick-column-name"),h=I("div",{id:`${this._gridUid}_${l.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${l.id}`}});I("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:c?c.textContent:t.textContent},h);const d=I("div",{className:"slick-groupby-remove"});this._addonOptions.deleteIconCssClass&&d.classList.add(...ht(this._addonOptions.deleteIconCssClass)),this._addonOptions.deleteIconCssClass||d.classList.add("slick-groupby-remove-icon");let u;((o=this._addonOptions)==null?void 0:o.hideGroupSortIcons)!==!0&&l.sortable&&(((a=l.grouping)==null?void 0:a.sortAsc)===void 0&&(l.grouping.sortAsc=!0),u=I("div",{className:"slick-groupby-sort"},h),this.getGroupBySortIcon(u,l.grouping.sortAsc)),h.appendChild(d),h.appendChild(document.createElement("div")),e.appendChild(h),this._groupToggler&&this.columnsGroupBy.length===0&&this.toggleGroupAll(l),this.addColumnGroupBy(l),this.addGroupByRemoveClickHandler(l.id,d,t,h),u&&this.addGroupSortClickHandler(l,u)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-flex")}}toggleGroupAll({grouping:e},t){var s;const i=(s=this._groupToggler)==null?void 0:s.querySelector(".slick-group-toggle-all-icon");t===!0||e!=null&&e.collapsed?(i==null||i.classList.add("collapsed"),i==null||i.classList.remove("expanded")):(i==null||i.classList.add("expanded"),i==null||i.classList.remove("collapsed"))}removeFromArray(e,t){if(Array.isArray(e)){const i=e.findIndex(s=>s.id===t.id);i>=0&&e.splice(i,1)}return e}removeGroupBy(e,t,i){i.remove();const s=[];this._gridColumns.forEach(r=>s[r.id]=r),this.removeFromArray(this.columnsGroupBy,s[e]),this.columnsGroupBy.length===0&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const e=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");e&&this._dropzoneElm&&(this._bindingEventService.bind(e,"dragover",t=>t.preventDefault()),this._bindingEventService.bind(e,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(e,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){const e=this._dropzoneElm;this._droppableInstance=ve.create(e,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:t=>{var s,r;const i=t.item;(s=i.getAttribute("id"))!=null&&s.replace(this._gridUid,"")&&this.handleGroupByDrop(e,ve.utils.clone(t.item)),(r=i.parentNode)==null||r.removeChild(i)},onUpdate:()=>{var s;const t=((s=this._droppableInstance)==null?void 0:s.toArray())??[],i=[];for(const r of t)for(const o of this.columnsGroupBy)if(o.id===r){i.push(o);break}this.columnsGroupBy=i,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",t=>{const i=t.target.classList.contains("slick-group-toggle-all-icon")?t.target:t.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(i,i==null?void 0:i.classList.contains("expanded"))})}toggleGroupToggler(e,t=!0,i=!0){e&&(t===!0?(e.classList.add("collapsed"),e.classList.remove("expanded"),i&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),i&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(this.columnsGroupBy.length===0){this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",this.triggerOnGroupChangedEvent({caller:e,groupColumns:[]});return}const t=[];this.columnsGroupBy.forEach(i=>t.push(i.grouping)),this.dataView.setGrouping(t),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:e,groupColumns:t})}triggerOnGroupChangedEvent(e){this._addonOptions&&typeof this._addonOptions.onGroupChanged=="function"&&this._addonOptions.onGroupChanged(new Ot,e),this.onGroupChanged.notify(e)}}class _z extends lp{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new as,this._eventHandler=new gt,this.init(i.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(e=>e.remove())}handleHeaderCellRendered(e,t){var s;const i=t.column;if((s=i.header)!=null&&s.buttons&&Array.isArray(i.header.buttons)){let r=i.header.buttons.length;for(;r--;){const o=i.header.buttons[r],a=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,o,t,this.handleButtonClick.bind(this));a&&o.handler&&!o.disabled&&this._bindEventService.bind(a,"click",l=>o.handler.call(this,l)),a&&(this._buttonElms.push(a),t.node.appendChild(a))}}}handleBeforeHeaderCellDestroy(e,t){var s,r,o;if((s=t.column.header)!=null&&s.buttons&&((r=this._addonOptions)!=null&&r.buttonCssClass)){const a=(((o=this._addonOptions)==null?void 0:o.buttonCssClass)||"").replace(/(\s+)/g,".");a&&t.node.querySelectorAll(`.${a}`).forEach(l=>l.remove())}}handleButtonClick(e,t,i,s,r){var o;if(i.command&&!i.disabled){const a=i.command||"",l={grid:this.grid,column:r,button:i};a&&(l.command=a),typeof i.action=="function"&&!i.disabled&&i.action.call(this,e,l),a!==null&&!i.disabled&&((o=this._addonOptions)!=null&&o.onCommand)&&(this.pubSubService.publish("onHeaderButtonCommand",l),this._addonOptions.onCommand(e,l),r!=null&&r.id&&this.grid.updateColumnHeader(r.id))}e.preventDefault(),e.stopPropagation()}}class vz extends lp{constructor(e,t,i,s,r){super(e,i,s),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=s,this.sortService=r,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(s.gridOptions.headerMenu)}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(t,i)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(i.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){var e;super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),(e=this._menuElm)==null||e.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){var t,i;if((i=(t=this.sharedService)==null?void 0:t.slickGrid)!=null&&i.getColumnIndex){const s=this.sharedService.slickGrid.getColumnIndex(e.id),r=this.sharedService.slickGrid.getColumns(),o=this.sharedService.gridOptions.frozenColumn??-1;o>=0&&o>=s&&(this.sharedService.gridOptions.frozenColumn=o-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const a=iA(r,s);this.sharedService.visibleColumns=a,this.sharedService.slickGrid.setColumns(a),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:a,hiddenColumn:e})}}hideMenu(){var e;this.disposeSubMenus(),(e=this._menuElm)==null||e.remove(),this._menuElm=void 0}repositionSubMenu(e,t,i,s){const r=this.createCommandMenu(t.commandItems||[],s,i+1,t);document.body.appendChild(r),this.repositionMenu(e,r)}repositionMenu(e,t){var p,f;const i=e.target,s=t.classList.contains("slick-submenu"),r=s?e.target.closest(".slick-menu-item"):i,o=this.sharedService.gridContainerElement.classList.contains("slickgrid-container")?this.sharedService.gridContainerElement:this.sharedService.gridContainerElement.querySelector(".slickgrid-container")??this.sharedService.gridContainerElement,a=xH(o,i),l=this.grid.getGridPosition(),c=t.offsetWidth,h=Gt(r);let d=s?h.left:(a==null?void 0:a.left)??0,u=s?h.top:((a==null?void 0:a.top)??0)+(((p=this.addonOptions)==null?void 0:p.menuOffsetTop)??0)+i.clientHeight;if(s){const g=(t==null?void 0:t.clientHeight)||0,{bottom:m,top:_}=P_(r);(m<g&&_>m?"top":"bottom")==="top"?(t.classList.remove("dropdown"),t.classList.add("dropup"),u-=g-r.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}if(s&&r){const g=d+Number(c)+r.clientWidth,m=document.documentElement.clientWidth;(g>=l.width||g>=m?"left":"right")==="left"?(t.classList.remove("dropright"),t.classList.add("dropleft"),d-=c):(t.classList.remove("dropleft"),t.classList.add("dropright"),d+=r.offsetWidth)}else d=(a==null?void 0:a.left)??0,this.addonOptions.autoAlign&&(l!=null&&l.width)&&d+(t.clientWidth??0)>=l.width&&(d=d+i.clientWidth-t.clientWidth+(((f=this.addonOptions)==null?void 0:f.autoAlignOffset)||0));t.style.top=`${u}px`,t.style.left=`${d}px`}translateHeaderMenu(){var e;(e=this.sharedService.gridOptions)!=null&&e.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,t){var r;const s=(r=t.column.header)==null?void 0:r.menu;if(s&&t.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,t))return;const o=I("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},t.node);this.addonOptions.buttonCssClass&&o.classList.add(...ht(this.addonOptions.buttonCssClass)),this.addonOptions.tooltip&&(o.title=this.addonOptions.tooltip),this._bindEventService.bind(o,"click",a=>{this.disposeAllMenus(),this.createParentMenu(a,t.column,s)})}}handleBeforeHeaderCellDestroy(e,t){var s;(s=t.column.header)!=null&&s.menu&&t.node.querySelectorAll(".slick-header-menu-button").forEach(r=>r.remove())}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._menuElm!==e.target&&!t&&!e.defaultPrevented||e.target.className==="close"&&i)&&this.hideMenu()}}handleMenuItemCommandClick(e,t,i,s=0,r){var o;if(i!=="divider"&&!i.disabled&&!i.divider)if((i.command||"")&&!i.commandItems){const l={grid:this.grid,command:i.command,column:r,item:i};this.executeHeaderMenuInternalCommands(e,l),this.pubSubService.publish("onHeaderMenuCommand",l),typeof((o=this.addonOptions)==null?void 0:o.onCommand)=="function"&&this.addonOptions.onCommand(e,l),typeof i.action=="function"&&i.action.call(this,e,l),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,s,r)}handleMenuItemMouseOver(e,t,i,s=0,r){i!=="divider"&&!i.disabled&&!i.divider&&(i.commandItems?this.repositionSubMenu(e,i,s,r):s===0&&this.disposeSubMenus())}addHeaderMenuCustomCommands(e){const t=this.sharedService.gridOptions,i=t.headerMenu||{},s=Ko(t);return Array.isArray(e)&&t.enableHeaderMenu&&e.forEach(r=>{var o,a,l;if(r&&!r.excludeFromHeaderMenu){r.header?r.header.menu||(r.header.menu={commandItems:[]}):r.header={menu:{commandItems:[]}};const c=((a=(o=r==null?void 0:r.header)==null?void 0:o.menu)==null?void 0:a.commandItems)??[];let h=!1;if(i&&!i.hideFreezeColumnsCommand&&(h=!0,c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="freeze-columns")||c.push({iconCssClass:i.iconFreezeColumns||"mdi mdi-pin-outline",titleKey:`${s}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:45})),i&&!i.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(h=!0,c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="column-resize-by-content")||c.push({iconCssClass:i.iconColumnResizeByContentCommand||"mdi mdi-arrow-expand-horizontal",titleKey:`${s}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:47})),h&&!c.some(d=>d!=="divider"&&d.positionOrder===48)&&c.push({divider:!0,command:"",positionOrder:48}),t.enableSorting&&r.sortable&&i&&!i.hideSortCommands&&(c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="sort-asc")||c.push({iconCssClass:i.iconSortAscCommand||"mdi mdi-sort-ascending",titleKey:`${s}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="sort-desc")||c.push({iconCssClass:i.iconSortDescCommand||"mdi mdi-sort-descending",titleKey:`${s}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),c.some(d=>d!=="divider"&&d.positionOrder===52)||c.push({divider:!0,command:"",positionOrder:52}),!i.hideClearSortCommand&&!c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="clear-sort")&&c.push({iconCssClass:i.iconClearSortCommand||"mdi mdi-sort-variant-off",titleKey:`${s}REMOVE_SORT`,command:"clear-sort",positionOrder:58})),(l=r.filter)!=null&&l.filterShortcuts&&!c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="filter-shortcuts-root-menu")){const d=[];r.filter.filterShortcuts.forEach(p=>{const f=p.title?Jd(p.title):(p.titleKey||"").toLowerCase().replaceAll("_","-");d.push({...p,command:f,action:(g,m)=>{const _=this.filterService.getFiltersMetadata().find(b=>b.columnDef.id===m.column.id);_==null||_.setValues(p.searchTerms,p.operator,!0)}})});const u=i.filterShortcutsPositionOrder??55;c.push({iconCssClass:i.iconFilterShortcutSubMenu||"mdi mdi-filter-outline",titleKey:`${s}FILTER_SHORTCUTS`,command:"filter-shortcuts-root-menu",positionOrder:u,commandItems:d}),h&&!c.some(p=>p!=="divider"&&p.positionOrder===u+1)&&c.push({divider:!0,command:"",positionOrder:u+1})}t.enableFiltering&&r.filterable&&i&&!i.hideFilterCommand&&!i.hideClearFilterCommand&&!c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="clear-filter")&&c.push({iconCssClass:i.iconClearFilterCommand||"mdi mdi-filter-remove-outline",titleKey:`${s}REMOVE_FILTER`,command:"clear-filter",positionOrder:57}),i&&!i.hideColumnHideCommand&&!c.some(d=>d!=="divider"&&(d==null?void 0:d.command)==="hide-column")&&c.push({iconCssClass:i.iconColumnHideCommand||"mdi mdi-close",titleKey:`${s}HIDE_COLUMN`,command:"hide-column",positionOrder:59}),this.extensionUtility.translateMenuItemsFromTitleKey(c),this.extensionUtility.sortItems(c,"positionOrder")}}),i}clearColumnFilter(e,t){t!=null&&t.column&&this.filterService.clearFilterByColumnId(e,t.column.id)}clearColumnSort(e,t){t!=null&&t.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,t.column.id)}executeHeaderMenuInternalCommands(e,t){var i;if(t!=null&&t.command)switch(t.command){case"hide-column":this.hideColumn(t.column),(i=this.sharedService.gridOptions)!=null&&i.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,t);break;case"clear-sort":this.clearColumnSort(e,t);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:t.column.id});break;case"freeze-columns":const s=[...this.sharedService.visibleColumns],o={frozenColumn:s.findIndex(h=>h.id===t.column.id),enableMouseWheelScrollHandler:!0},a=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(o,!1,!0),this.sharedService.gridOptions.frozenColumn=o.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=o.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=t.column.id,this.sharedService.hasColumnsReordered||Array.isArray(s)&&Array.isArray(this.sharedService.allColumns)&&s.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(s):this.sharedService.slickGrid.setColumns(a),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":const c=t.command==="sort-asc";this.sortColumn(e,t,c);break}}createParentMenu(e,t,i){var r,o,a,l,c;const s={grid:this.grid,column:t,menu:i};typeof e.stopPropagation=="function"&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",s),typeof((r=this.addonOptions)==null?void 0:r.onBeforeMenuShow)=="function"&&((o=this.addonOptions)==null?void 0:o.onBeforeMenuShow(e,s))===!1)||(this._menuElm=this.createCommandMenu(i.commandItems,t),(a=this.grid.getContainerNode())==null||a.appendChild(this._menuElm),this.repositionMenu(e,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",s),!(typeof((l=this.addonOptions)==null?void 0:l.onAfterMenuShow)=="function"&&((c=this.addonOptions)==null?void 0:c.onAfterMenuShow(e,s))===!1)&&(e.preventDefault(),e.stopPropagation()))}createCommandMenu(e,t,i=0,s){var u;const r=s==null?void 0:s.command;let o=i===1&&r?r.replace(/\s/g,""):"";o&&(this._subMenuParentId=o),i>1&&(o=this._subMenuParentId);const a=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,l=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(l){if(l.dataset.subMenuParent===o)return l;this.disposeSubMenus()}const c=I("div",{ariaExpanded:"true",ariaLabel:i>1?"SubMenu":"Header Menu",role:"menu",className:a,style:{minWidth:`${this.addonOptions.minWidth}px`}});i>0&&(c.classList.add("slick-submenu"),o&&(c.dataset.subMenuParent=o),(u=this.gridOptions)!=null&&u.darkMode&&c.classList.add("slick-dark-mode"));const h=I("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},c),d={grid:this.grid,column:t,level:i,menu:{commandItems:e}};return s&&i>0&&this.addSubMenuTitleWhenExists(s,h),this.populateCommandOrOptionItems("command",this.addonOptions,h,e,d,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),i++,c}resetHeaderMenuTranslations(e){e.forEach(t=>{var i,s;if((s=(i=t==null?void 0:t.header)==null?void 0:i.menu)!=null&&s.commandItems&&!t.excludeFromHeaderMenu){const r=t.header.menu.commandItems||[];this.extensionUtility.translateMenuItemsFromTitleKey(r)}})}sortColumn(e,t,i=!0){if(t!=null&&t.column){const s=t.column,r=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(s.id+""):[];let o=pt.local;r.push({columnId:s.id,sortCol:s,sortAsc:i}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:r,grid:this.sharedService.slickGrid}),o=pt.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,r),o=pt.local):t.grid.onSort.notify(r);const a=r.map(l=>{var c;return{columnId:((c=l==null?void 0:l.sortCol)==null?void 0:c.id)??"",sortAsc:(l==null?void 0:l.sortAsc)??!0}});if(this.sharedService.slickGrid.setSortColumns(a),o){const l=[];a.forEach(c=>{l.push({columnId:`${c.columnId}`,direction:c.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(o,l)}}}}const Gh="slick-rbe-editmode",bz="slick-rbe-unsaved-cell",KC="slick-rbe-unsaved-highlight",wf="action-btns--delete",Cf="action-btns--edit",yf="action-btns--update",Sf="action-btns--cancel";class YC{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.pluginName="RowBasedEdit",this._defaults={actionsColumnLabel:"Actions",allowMultipleRows:!1,columnId:"_slick_rowbasededit_action",columnIndexPosition:-1,reorderable:!1},this._editedRows=new Map,this._currentLang="en",this._translations={},this.onBeforeEditCellHandler=(s,r)=>{var o;return this._editedRows.has((o=r.item)==null?void 0:o[this.gridOptions.datasetIdPropertyName??"id"])},this._eventHandler=new gt,this._addonOptions=i}get addonOptions(){return this._addonOptions}get gridOptions(){return this._grid.getOptions()||{}}get eventHandler(){return this._eventHandler}init(e,t){var r,o;this._grid=e,this._gridService=t,this._addonOptions={...this._defaults,...this.addonOptions};const i=this._grid.getData();if(this._eventHandler.subscribe(this._grid.onBeforeEditCell,this.onBeforeEditCellHandler),this.checkOptionsRequirements(this.gridOptions),this.gridOptions.autoEdit||(this._grid.setOptions({autoEdit:!0}),console.warn('[Slickgrid-Universal] The Row Based Edit Plugin works best with the gridOption "autoEdit" enabled, the option has now been set automatically for you.')),this._existingEditCommandHandler=this.gridOptions.editCommandHandler,this._grid.setOptions({editCommandHandler:this.rowBasedEditCommandHandler.bind(this)}),this.gridOptions.enableExcelCopyBuffer===!0){const a=(r=this.gridOptions.excelCopyBufferOptions)==null?void 0:r.onBeforePasteCell;this._grid.setOptions({excelCopyBufferOptions:{...this.gridOptions.excelCopyBufferOptions,onBeforePasteCell:(l,c)=>{let h=!0;if(a&&(h=a(l,c),h===!1))return!1;const d=i.getItem(c.row),u=this.gridOptions.datasetIdPropertyName??"id";return!!(this._editedRows.has(d[u])&&h===!0)}}})}const s=i.getItemMetadata;i.getItemMetadata=this.updateItemMetadata((o=s==null?void 0:s.bind)==null?void 0:o.call(s,i)),this._eventHandler.subscribe(this._grid.onSetOptions,this.optionsUpdatedHandler.bind(this)),this._eventHandler.subscribe(i.onRowsOrCountChanged,this.handleAllRowRerender.bind(this)),this.translate()}destroy(){this.dispose()}dispose(){var e,t;(e=this._eventHandler)==null||e.unsubscribeAll(),(t=this.pubSubService)==null||t.unsubscribeAll()}create(e,t){var i;if(this._addonOptions={...this._defaults,...t.rowBasedEditOptions},Array.isArray(e)&&t){const s=this.getColumnDefinition();if(!e.some(r=>r.id===s.id)){const r=((i=t==null?void 0:t.rowBasedEditOptions)==null?void 0:i.columnIndexPosition)??-1;r===-1?e.push(s):r>0&&r<e.length?e.splice(r,0,s):e.unshift(s),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){var t,i,s,r;return{id:String(((t=this._addonOptions)==null?void 0:t.columnId)??this._defaults.columnId),name:(i=this._addonOptions)==null?void 0:i.actionsColumnLabel,field:"action",minWidth:70,width:75,maxWidth:75,excludeFromExport:!0,reorderable:(s=this._addonOptions)==null?void 0:s.reorderable,formatter:this.actionColumnFormatter.bind(this),onCellClick:this.onCellClickHandler.bind(this),...((r=this._addonOptions)==null?void 0:r.actionColumnConfig)??{}}}rowBasedEditCommandHandler(e,t,i){var d;this._existingEditCommandHandler&&this._existingEditCommandHandler(e,t,i);const s=Array.isArray(i.prevSerializedValue)?i.prevSerializedValue:[i.prevSerializedValue],r=Array.isArray(i.serializedValue)?i.serializedValue:[i.serializedValue],o=(d=this._gridService)==null?void 0:d.getAllColumnDefinitions().filter(u=>u.editor!==void 0),a=[],l=this.gridOptions.datasetIdPropertyName??"id";s.forEach((u,p)=>{const f=s[p],g=r[p];if(f!==g||g===""){const m=Array.isArray(i.prevSerializedValue)?o==null?void 0:o[p]:t;if(!m)return;this._grid.invalidate(),i.execute(),this.renderUnsavedCellStyling(e[l],m),a.push(m)}});const c=this._editedRows.get(e[l]),h=[...(c==null?void 0:c.editCommands)||[]];a.length>0&&h.push(i),this._editedRows.set(e[l],{columns:[...(c==null?void 0:c.columns)||[],...a],editCommands:h,cssStyleKeys:(c==null?void 0:c.cssStyleKeys)||[]})}translate(e=!1){var t;return this._currentLang=((t=this.extensionUtility.translaterService)==null?void 0:t.getCurrentLanguage())??"en",(!this._translations[this._currentLang]||e)&&(this._translations[this._currentLang]={btnUpdateTitle:this.getTitleOrDefault("updateButtonTitle","Update the row"),btnEditTitle:this.getTitleOrDefault("editButtonTitle","Edit the Row"),btnDeleteTitle:this.getTitleOrDefault("deleteButtonTitle","Delete the Row"),btnCancelTitle:this.getTitleOrDefault("cancelButtonTitle","Cancel changes of the Row")}),this._translations[this._currentLang]}checkOptionsRequirements(e){if(!(e!=null&&e.enableCellNavigation))throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption cell navigation (enableCellNavigation = true)");if(!(e!=null&&e.editable))throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption editable (editable = true)")}undoRowEdit(e){const t=this.gridOptions.datasetIdPropertyName??"id",i=this._editedRows.get(e[t]),s=this._grid.getData().getRowByItem(e);if(s!==void 0&&(i!=null&&i.editCommands)&&i.editCommands.length||nu.cancelCurrentEdit()){for(;i.editCommands.length>0;){const r=i.editCommands.pop();r&&r.undo()}i.columns.forEach(r=>{this.removeUnsavedStylingFromCell(r,s)}),i.columns=[],this._grid.invalidate()}}renderUnsavedCellStyling(e,t){var i,s;if(t){const r=(i=this._grid.getData())==null?void 0:i.getRowById(e);if(r!==void 0&&r>=0){const o={[r]:{[t.id]:bz}},a=`${KC}_${[t.id]}${r}`;this._grid.setCellCssStyles(a,o),(s=this._editedRows.get(e))==null||s.cssStyleKeys.push(a)}}}handleAllRowRerender(e,t){this._editedRows.forEach((i,s)=>{i.cssStyleKeys.forEach(r=>{this._grid.removeCellCssStyles(r)}),i.cssStyleKeys=[],i.columns.forEach(r=>{this.renderUnsavedCellStyling(s,r)})})}removeUnsavedStylingFromCell(e,t){const i=`${KC}_${[e.id]}${t}`;this._grid.removeCellCssStyles(i)}removeUnsavedStylingFromRow(e){this._grid.getColumns().forEach(t=>{this.removeUnsavedStylingFromCell(t,e)})}optionsUpdatedHandler(e,t){this._addonOptions={...this._defaults,...t.optionsAfter.rowBasedEditOptions}}async onCellClickHandler(e,t){var a,l,c,h,d,u,p,f,g,m,_,b,C,v,y;const i=t.dataContext,s=e.target,r=this.gridOptions.datasetIdPropertyName??"id",o=this._editedRows.get(i[r]);if((s.classList.contains(wf)||(a=s.parentElement)!=null&&a.classList.contains(wf))&&this._gridService){if((c=(l=this._addonOptions)==null?void 0:l.actionButtons)!=null&&c.deleteButtonPrompt&&!window.confirm(this._addonOptions.actionButtons.deleteButtonPrompt))return;this.toggleEditmode(i,!1),this._gridService.deleteItem(i)}else if(s.classList.contains(Cf)||(h=s.parentElement)!=null&&h.classList.contains(Cf)){if(!((d=this._addonOptions)!=null&&d.allowMultipleRows)&&this._editedRows.size>0)return;typeof((u=this._addonOptions)==null?void 0:u.onBeforeEditMode)=="function"&&this._addonOptions.onBeforeEditMode(t),this.toggleEditmode(i,!0)}else if(s.classList.contains(yf)||(p=s.parentElement)!=null&&p.classList.contains(yf)){if((g=(f=this._addonOptions)==null?void 0:f.actionButtons)!=null&&g.updateButtonPrompt&&((o==null?void 0:o.editCommands.length)||0)>0&&!window.confirm(this._addonOptions.actionButtons.updateButtonPrompt)||(this._grid.getCellEditor()&&((m=this._grid.getActiveCell())==null?void 0:m.row)===t.row&&((_=this._grid.getEditController())==null||_.commitCurrentEdit()),(b=this._addonOptions)!=null&&b.onBeforeRowUpdated&&await this._addonOptions.onBeforeRowUpdated(t)!==!0))return;this.removeUnsavedStylingFromRow(t.row),this.toggleEditmode(i,!1)}else if(s.classList.contains(Sf)||(C=s.parentElement)!=null&&C.classList.contains(Sf)){if((y=(v=this._addonOptions)==null?void 0:v.actionButtons)!=null&&y.cancelButtonPrompt&&((o==null?void 0:o.editCommands.length)||0)>0&&!window.confirm(this._addonOptions.actionButtons.cancelButtonPrompt))return;this.undoRowEdit(i),this.toggleEditmode(i,!1)}}actionColumnFormatter(e,t,i,s,r){var h,d,u,p,f,g,m,_,b,C,v,y,S,A,P,F;const o=this.gridOptions,a=this._editedRows.has(r==null?void 0:r[o.datasetIdPropertyName??"id"]),l=this._translations[this._currentLang]??this.translate(),c=document.createDocumentFragment();return c.appendChild(I("span",{className:`${((d=(h=o.rowBasedEditOptions)==null?void 0:h.actionButtons)==null?void 0:d.editButtonClassName)||"button-style padding-1px mr-2"} action-btns `+Cf,title:l.btnEditTitle,style:{display:a?"none":""}})).appendChild(I("span",{className:((p=(u=o.rowBasedEditOptions)==null?void 0:u.actionButtons)==null?void 0:p.iconEditButtonClassName)||"mdi mdi-table-edit text-color-primary"})),c.appendChild(I("span",{className:`${((g=(f=o.rowBasedEditOptions)==null?void 0:f.actionButtons)==null?void 0:g.deleteButtonClassName)||"button-style padding-1px"} action-btns `+wf,title:l.btnDeleteTitle,style:{display:a?"none":""}})).appendChild(I("span",{className:((_=(m=o.rowBasedEditOptions)==null?void 0:m.actionButtons)==null?void 0:_.iconDeleteButtonClassName)||"mdi mdi-close text-color-danger"})),c.appendChild(I("span",{className:`${((C=(b=o.rowBasedEditOptions)==null?void 0:b.actionButtons)==null?void 0:C.updateButtonClassName)||"button-style padding-1px mr-2"} action-btns `+yf,title:l.btnUpdateTitle,style:{display:a?"":"none"}})).appendChild(I("span",{className:((y=(v=o.rowBasedEditOptions)==null?void 0:v.actionButtons)==null?void 0:y.iconUpdateButtonClassName)||"mdi mdi-check-bold text-color-success"})),c.appendChild(I("span",{className:`${((A=(S=o.rowBasedEditOptions)==null?void 0:S.actionButtons)==null?void 0:A.cancelButtonClassName)||"button-style padding-1px"} action-btns `+Sf,title:l.btnCancelTitle,style:{display:a?"":"none"}})).appendChild(I("span",{className:((F=(P=o.rowBasedEditOptions)==null?void 0:P.actionButtons)==null?void 0:F.iconCancelButtonClassName)||"mdi mdi-cancel text-color-danger"})),c}toggleEditmode(e,t){const i=this.gridOptions.datasetIdPropertyName??"id";t?this._editedRows.set(e[i],{columns:[],editCommands:[],cssStyleKeys:[]}):this._editedRows.delete(e[i]),this._grid.invalidate()}updateItemMetadata(e){return t=>{const i=this._grid.getData().getItem(t);let s={cssClasses:""};if(typeof e=="function"){const r=e(t);r&&(s=r)}if(s&&i){const r=this.gridOptions.datasetIdPropertyName??"id";this._editedRows.has(i[r])&&!s.cssClasses.includes(Gh)?s.cssClasses=(s.cssClasses||"")+" "+Gh:!this._editedRows.has(i[r])&&s.cssClasses.includes(Gh)&&(s.cssClasses=s.cssClasses.replace(Gh,""))}return s}}getTitleOrDefault(e,t){var s,r,o;const i=(s=this.gridOptions.rowBasedEditOptions)==null?void 0:s.actionButtons;return(i==null?void 0:i[e+"Key"])&&((o=(r=this.extensionUtility.translaterService)==null?void 0:r.translate)==null?void 0:o.call(r,(i==null?void 0:i[e+"Key"])||""))||(i==null?void 0:i[e])||t}}class qC{constructor(e){this.pubSubService=e,this.pluginName="RowMoveManager",this._dragging=!1,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,reorderable:!1,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new K("onBeforeMoveRows"),this.onMoveRows=new K("onMoveRows"),this._eventHandler=new gt}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}init(e,t){var i;this._addonOptions={...this._defaults,...t},this._grid=e,this._canvas=this._grid.getCanvasNode(),k.addSlickEventPubSubWhenDefined(this.pubSubService,this),typeof((i=this._addonOptions)==null?void 0:i.usabilityOverride)=="function"&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){var e;(e=this._eventHandler)==null||e.unsubscribeAll()}create(e,t){var i;if(this._addonOptions={...this._defaults,...t.rowMoveManager},Array.isArray(e)&&t){const s=this.getColumnDefinition();if(!e.some(r=>r.id===s.id)){const r=Array.isArray(e)&&e.find(l=>(l==null?void 0:l.behavior)==="selectAndMove"),o=r||s,a=((i=t==null?void 0:t.rowMoveManager)==null?void 0:i.columnIndexPosition)??0;a>0?e.splice(a,0,o):e.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){var t;const e=String(((t=this._addonOptions)==null?void 0:t.columnId)??this._defaults.columnId);return{id:e,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:e,reorderable:this._addonOptions.reorderable,resizable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions={...this._addonOptions,...e}}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,t){var i,s,r;if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),(i=t.guide)==null||i.remove(),(s=t.selectionProxy)==null||s.remove(),(r=t.clonedSlickRow)==null||r.remove(),t.canMove)){const o={grid:this._grid,rows:t.selectedRows,insertBefore:t.insertBefore};typeof this._addonOptions.onMoveRows=="function"&&this._addonOptions.onMoveRows(e instanceof Ot?e.getNativeEvent():e,o),this.onMoveRows.notify(o)}}handleDrag(e,t){var i,s,r;if(this._dragging){e.stopImmediatePropagation();const o=e.getNativeEvent(),l=(((i=o==null?void 0:o.touches)==null?void 0:i[0])??o).pageY-Gt(this._canvas).top;t.selectionProxy.style.top=`${l-5}px`,t.selectionProxy.style.display="block",t.clonedSlickRow&&(t.clonedSlickRow.style.top=`${l-6}px`,t.clonedSlickRow.style.display="block");const c=Math.max(0,Math.min(Math.round(l/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(c!==t.insertBefore){const h={grid:this._grid,rows:t.selectedRows,insertBefore:c};if(((r=(s=this._addonOptions)==null?void 0:s.onBeforeMoveRows)==null?void 0:r.call(s,o,h))===!1||this.onBeforeMoveRows.notify(h).getReturnValue()===!1?t.canMove=!1:t.canMove=!0,this._usabilityOverride&&t.canMove){const d=this._grid.getDataItem(c);t.canMove=this.checkUsabilityOverride(c,d,this._grid)}t.canMove?t.guide.style.top=`${c*(this.gridOptions.rowHeight||0)}px`:t.guide.style.top="-1000px",t.insertBefore=c}}}handleDragStart(e,t){var o,a,l,c,h;const i=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},s=i.row,r=this._grid.getDataItem(s);if(this.checkUsabilityOverride(s,r,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[i.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const p=(o=this._grid.getCellNode(i.row,i.cell))==null?void 0:o.closest(".slick-row");p&&(t.clonedSlickRow=p.cloneNode(!0),t.clonedSlickRow.classList.add("slick-reorder-shadow-row"),t.clonedSlickRow.style.display="none",t.clonedSlickRow.style.marginLeft=Sr((a=this._addonOptions)==null?void 0:a.rowMoveShadowMarginLeft,"0px"),t.clonedSlickRow.style.marginTop=Sr((l=this._addonOptions)==null?void 0:l.rowMoveShadowMarginTop,"0px"),t.clonedSlickRow.style.opacity=`${((c=this._addonOptions)==null?void 0:c.rowMoveShadowOpacity)??.95}`,t.clonedSlickRow.style.transform=`scale(${((h=this.addonOptions)==null?void 0:h.rowMoveShadowScale)??.75})`,this._canvas.appendChild(t.clonedSlickRow))}let d=this._addonOptions.singleRowMove?[i.row]:this._grid.getSelectedRows();(d.length===0||!d.some(p=>p===i.row))&&(d=[i.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(d));const u=this.gridOptions.rowHeight;t.selectedRows=d,t.selectionProxy=I("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:`${u*d.length}px`}},this._canvas),t.guide=I("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),t.insertBefore=-1}}checkUsabilityOverride(e,t,i){return typeof this._usabilityOverride=="function"?this._usabilityOverride(e,t,i):!0}moveIconFormatter(e,t,i,s,r,o){return this.checkUsabilityOverride(e,r,o)?{addClasses:"cell-reorder dnd",html:I("div",{className:this._addonOptions.cssClass||""})}:""}}class wz{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(e,t,i,s,r,o,a,l){this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=s,this.sortService=r,this.treeDataService=o,this.translaterService=a,this.lazyGridService=l,this._extensionCreatedList={},this._extensionList={},this._requireInitExternalExtensions=[]}dispose(){if(this.sharedService.visibleColumns=[],typeof this._extensionList=="object"){const e=Object.keys(this._extensionList);e.forEach(t=>{var i;if(this._extensionList.hasOwnProperty(t)){const s=this._extensionList[t];typeof((i=s==null?void 0:s.instance)==null?void 0:i.dispose)=="function"&&s.instance.dispose()}}),e.forEach(t=>{delete this._extensionList[t]})}this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList={}}addExtensionToList(e,t){this._extensionList[e]=t}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){var t;if((t=this._extensionCreatedList)!=null&&t.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){var t;return(t=this._extensionList)==null?void 0:t[e]}getExtensionInstanceByName(e){var t;return(t=this.getExtensionByName(e))==null?void 0:t.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){var e,t,i,s,r,o,a,l,c,h,d,u,p;if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableRowBasedEdit){this._rowBasedEdit=this._rowBasedEdit||new YC(this.extensionUtility,this.pubSubService,this.gridOptions.rowBasedEditOptions);const f=(e=this.lazyGridService)==null?void 0:e.call(this);if(!f)throw new Error("[Slickgrid-Universal] the RowBasedEdit Plugin requires a GridService to be configured and available");this._rowBasedEdit.init(this.sharedService.slickGrid,f),(t=this.gridOptions.rowBasedEditOptions)!=null&&t.onExtensionRegistered&&this.gridOptions.rowBasedEditOptions.onExtensionRegistered(this._rowBasedEdit),this._extensionList[Ae.rowBasedEdit]={name:Ae.rowBasedEdit,instance:this._rowBasedEdit}}if(this.gridOptions.enableAutoTooltip){const f=new az((i=this.gridOptions)==null?void 0:i.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(f),this._extensionList[Ae.autoTooltip]={name:Ae.autoTooltip,instance:f}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new lz,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),(s=this.gridOptions.excelCopyBufferOptions)!=null&&s.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[Ae.cellExternalCopyManager]={name:Ae.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new dz(this.extensionUtility,this.pubSubService,this.sharedService),(r=this.gridOptions.cellMenu)!=null&&r.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[Ae.cellMenu]={name:Ae.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const f=this.gridOptions.rowSelectionOptions??{};this.gridOptions.enableRowMoveManager&&((o=this.gridOptions.rowMoveManager)==null?void 0:o.dragToSelect)!==!1&&(f.dragToSelect=!0),this._rowSelectionModel=new cp(f),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[Ae.rowSelection]={name:Ae.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new UC(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const f=this.getCreatedExtensionByName(Ae.checkboxSelector),g=f==null?void 0:f.instance;g&&((a=this.gridOptions.checkboxSelector)!=null&&a.onExtensionRegistered&&this.gridOptions.checkboxSelector.onExtensionRegistered(g),this._extensionList[Ae.checkboxSelector]={name:Ae.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new Z_(this.extensionUtility,this.pubSubService,this.sharedService),(l=this.gridOptions.columnPicker)!=null&&l.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[Ae.columnPicker]={name:Ae.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new gz(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),(c=this.gridOptions.contextMenu)!=null&&c.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[Ae.contextMenu]={name:Ae.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),(h=this.gridOptions.draggableGrouping)!=null&&h.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[Ae.contextMenu]={name:Ae.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[Ae.draggableGrouping]={name:Ae.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new GA(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),(d=this.gridOptions.gridMenu)!=null&&d.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[Ae.gridMenu]={name:Ae.gridMenu,instance:this._gridMenuControl}),this.gridOptions.enableHeaderButton){const f=new _z(this.extensionUtility,this.pubSubService,this.sharedService);(u=this.gridOptions.headerButton)!=null&&u.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(f),this._extensionList[Ae.headerButton]={name:Ae.headerButton,instance:f}}if(this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new vz(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),(p=this.gridOptions.headerMenu)!=null&&p.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[Ae.headerMenu]={name:Ae.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager){this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new qC(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager);const f=this.getCreatedExtensionByName(Ae.rowMoveManager);(f==null?void 0:f.instance)&&(this._extensionList[Ae.rowMoveManager]={name:Ae.rowMoveManager,instance:this._rowMoveManagerPlugin})}this._requireInitExternalExtensions.length&&this._requireInitExternalExtensions.forEach(f=>{f.instance.init(this.sharedService.slickGrid,void 0)})}}createExtensionsBeforeGridCreation(e,t){var s,r,o;const i=[];t.enableCheckboxSelector&&(this.getCreatedExtensionByName(Ae.checkboxSelector)||(this._checkboxSelectColumn=new UC(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),i.push({name:Ae.checkboxSelector,instance:this._checkboxSelectColumn,columnIndexPosition:((s=t==null?void 0:t.checkboxSelector)==null?void 0:s.columnIndexPosition)??i.length}))),t.enableRowMoveManager&&(this.getCreatedExtensionByName(Ae.rowMoveManager)||(this._rowMoveManagerPlugin=new qC(this.pubSubService),i.push({name:Ae.rowMoveManager,instance:this._rowMoveManagerPlugin,columnIndexPosition:((r=t==null?void 0:t.rowMoveManager)==null?void 0:r.columnIndexPosition)??i.length}))),t.enableRowBasedEdit&&(this.getCreatedExtensionByName(Ae.rowBasedEdit)||(this._rowBasedEdit=new YC(this.extensionUtility,this.pubSubService),i.push({name:Ae.rowBasedEdit,instance:this._rowBasedEdit,columnIndexPosition:((o=t==null?void 0:t.rowMoveManager)==null?void 0:o.columnIndexPosition)??i.length}))),t.preRegisterExternalExtensions&&t.preRegisterExternalExtensions(this.pubSubService).forEach(l=>{i.push(l),this._requireInitExternalExtensions.push(l),this._extensionList[l.name]||this.addExtensionToList(l.name,l)}),this.createExtensionByTheirColumnIndex(i,e,t),t.enableDraggableGrouping&&(this.getCreatedExtensionByName(Ae.draggableGrouping)||(this._draggleGroupingPlugin=new mz(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(t.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[Ae.draggableGrouping]={name:Ae.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){var t,i;if(typeof((i=(t=this.sharedService)==null?void 0:t.slickGrid)==null?void 0:i.getColumns)=="function"){const s=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),s),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,t){return Array.isArray(e)?e.filter((i,s)=>t!==s):e}translateAllExtensions(e){this.translateCellMenu(),this.translateContextMenu(),this.translateHeaderMenu(),this.translateRowEditPlugin(),this.translateColumnHeaders(e)}translateCellMenu(){var e;(e=this._cellMenuPlugin)==null||e.translateCellMenu()}translateColumnPicker(){var e;(e=this._columnPickerControl)==null||e.translateColumnPicker()}translateContextMenu(){var e;(e=this._contextMenuPlugin)==null||e.translateContextMenu()}translateGridMenu(){var e;(e=this._gridMenuControl)==null||e.translateGridMenu()}translateHeaderMenu(){var e;(e=this._headerMenuPlugin)==null||e.translateHeaderMenu()}translateRowEditPlugin(){var e;(e=this._rowBasedEdit)==null||e.translate()}translateColumnHeaders(e,t){var s;if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&((s=this.translaterService)!=null&&s.use)&&this.translaterService.getCurrentLanguage()!==e&&this.translaterService.use(e);let i=t;i||(i=this.sharedService.columnDefinitions),this.translateItems(i,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup"),this.renderColumnHeaders(i,Array.isArray(t))}renderColumnHeaders(e,t=!1){var s;let i=e;i||(i=this.sharedService.columnDefinitions),Array.isArray(i)&&((s=this.sharedService.slickGrid)!=null&&s.setColumns)&&((i.length>this.sharedService.allColumns.length||t)&&(this.sharedService.allColumns=i),this.sharedService.slickGrid.setColumns(i)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns,this._columnPickerControl.translateColumnPicker()),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=this.sharedService.allColumns??[],this._gridMenuControl.recreateGridMenu(),this._gridMenuControl.translateGridMenu())}createExtensionByTheirColumnIndex(e,t,i){e.sort((s,r)=>((s==null?void 0:s.columnIndexPosition)??0)-((r==null?void 0:r.columnIndexPosition)??0)),e.forEach(s=>{const r=s.instance.create(t,i);r&&(this._extensionCreatedList[s.name]={name:s.name,instance:r})})}translateItems(e,t,i){var s,r;if((s=this.gridOptions)!=null&&s.enableTranslate&&!((r=this.translaterService)!=null&&r.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.extensionUtility.translateItems(e,t,i)}}function XC(n,e,t){if(t&&(n!=null&&n.hasOwnProperty(t)||e!=null&&e.hasOwnProperty(t)))return n[t]===e||n===e[t]||n[t]===e[t];if(typeof n=="object"&&typeof e=="object"&&Object.keys(n).length!==Object.keys(e).length)return!1;for(const i in n)if(n.hasOwnProperty(i)&&n[i]!==e[i])return!1;return!0}function Cz(n){switch(n&&n.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}const Er=(n,e,t)=>{switch(n.toUpperCase()){case"<":case"LT":return e<t;case"<=":case"LE":return e<=t;case">":case"GT":return e>t;case">=":case"GE":return e>=t;case"!=":case"<>":case"NE":return e!==t;case"=":case"==":case"EQ":return e===t;case"IN":return t&&Array.isArray(t)?t.includes(e):!1;case"NIN":case"NOT_IN":return t&&Array.isArray(t)?!t.includes(e):!1;case"IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?t.some(i=>e.split(/[,]+/).map(s=>s.trim()).includes(i)):!1;case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return t&&Array.isArray(t)&&typeof e=="string"?!t.some(i=>e.split(/[,]+/).map(s=>s.trim()).includes(i)):!1;case"IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?t.some(i=>e.includes(i)):!1;case"NOT_IN_COLLECTION":return e&&t&&Array.isArray(e)&&Array.isArray(t)?!t.some(i=>e.includes(i)):!1}return!0},ZA=(n,e)=>{let[t,i]=e;if(t===void 0&&!n.operator)return!0;n.cellValue=n.cellValue===void 0||n.cellValue===null?"":n.cellValue.toString();const s=n!=null&&n.ignoreAccentOnStringFilterAndSort?pc(n.cellValue,!0):n.cellValue.toLowerCase();if(typeof t=="string"&&(t=n!=null&&n.ignoreAccentOnStringFilterAndSort?pc(t,!0):t.toLowerCase()),typeof i=="string"&&(i=n!=null&&n.ignoreAccentOnStringFilterAndSort?pc(i,!0):i.toLowerCase()),n.operator===de.startsWithEndsWith&&t!==void 0&&i!==void 0)return Sz(s,[t,i]);if(t!==void 0&&i!==void 0){let o=(n==null?void 0:n.operator)??n.defaultFilterRangeOperator;o!==de.rangeInclusive&&o!==de.rangeExclusive&&(o=n.defaultFilterRangeOperator);const a=o===de.rangeInclusive,l=Ef(a?">=":">",s,t,n.searchInputLastChar),c=Ef(a?"<=":"<",s,i,n.searchInputLastChar);return l&&c}return Ef(n.operator,s,t,n.searchInputLastChar)};function yz(n){let t=Array.isArray(n)&&n||[""];const i=[];let s,r;if(t.length===1&&typeof t[0]=="string"){const o=t[0];o.indexOf("..")>0?t=o.split(".."):o.indexOf("*")>0&&o.indexOf("*")<o.length-1&&(t=o.split("*"))}if(t.length===2)s=`${t[0]}`,r=`${t[1]}`;else{const o=Array.isArray(n)&&n.length>0?n[0]:"";s=o==null?"":`${o}`}return s!==void 0&&r!==void 0?i.push(s,r):s!==void 0&&i.push(s),i}function Ef(n,e,t,i){return n==="*"||n===de.endsWith||n==="*z"?e.endsWith(t):n===""&&i==="*"||n===de.startsWith||n==="a*"?e.startsWith(t):n===""||n===de.contains?e.indexOf(t)>-1:n==="<>"||n===de.notContains?e.indexOf(t)===-1:Er(n||"==",e,t)}function Sz(n,[e,t]){return n.startsWith(e)&&n.endsWith(t)}const Ez=(n,e)=>{if(e===void 0&&!n.operator)return!0;switch((n.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!XC(n.cellValue,e,n.dataKey);case"=":case"==":case"EQ":default:return XC(n.cellValue,e,n.dataKey)}};function Tz(n){return(Array.isArray(n)&&n.length>0?n[0]:"")||""}const JA=(n,e)=>{const t=parseFloat(n.cellValue),[i,s]=e;if(i===void 0&&!n.operator)return!0;if(i!==void 0&&s!==void 0){let r=(n==null?void 0:n.operator)??n.defaultFilterRangeOperator;r!==de.rangeInclusive&&r!==de.rangeExclusive&&(r=n.defaultFilterRangeOperator);const o=r===de.rangeInclusive,a=Er(o?">=":">",t,+i),l=Er(o?"<=":"<",t,+s);return a&&l}return Er(n.operator||"==",t,+i)};function Az(n){const t=Array.isArray(n)&&n||[0],i=[];let s,r;if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){const o=t.length===2?t:t[0].split("..");s=parseFloat(Array.isArray(o)?o[0]:""),r=parseFloat(Array.isArray(o)?o[1]:"")}else s=parseFloat(t[0]);return gi(s,!0)&&gi(r,!0)?i.push(s,r):gi(s,!0)&&i.push(s),i}const eI=(n,e)=>Fg(n.cellValue)===Fg(e);function Iz(n){const e=Array.isArray(n)&&n[0]||!1;return Fg(e)}const tI=n=>{const e=n.operator;let t;return Array.isArray(n.cellValue)&&(e==="IN_COLLECTION"||e==="NOT_IN_COLLECTION")?t=n.cellValue.length?n.cellValue.map(i=>`${i}`):[]:t=n.cellValue===void 0||n.cellValue===null?"":`${n.cellValue}`,Er(e||"IN",t,n.searchTerms||[])};function Rz(n,e){const t=n&&(n.filterSearchType||n.fieldType)||N.dateIso,i=ys(t),[s,r]=e,o=ln(n.cellValue,i,!0);if(!s&&!r||!o)return!1;const a=i==="ISO8601"||i.toLowerCase().includes("h")?o.valueOf():hC(new Date(o)).valueOf();if(s&&r){let c=(n==null?void 0:n.operator)??n.defaultFilterRangeOperator;c!==de.rangeInclusive&&c!==de.rangeExclusive&&(c=n.defaultFilterRangeOperator);const h=c===de.rangeInclusive,d=Er(h?">=":">",a,s.valueOf()),u=Er(h?"<=":"<",a,r.valueOf());return d&&u}const l=i==="ISO8601"||i.toLowerCase().includes("h")?s.valueOf():hC(new Date(s)).valueOf();return Er(n.operator||"==",a,l)}function Oz(n,e){const t=Array.isArray(n)&&n||[],i=e||N.dateIso,s=ys(i),r=[];if(t.length===2||typeof t[0]=="string"&&t[0].indexOf("..")>0){const o=t.length===2?t:t[0].split(".."),a=Array.isArray(o)&&o[0]||"",l=Array.isArray(o)&&o[1]||"",c=ln(a,s,!0),h=ln(l,s,!0);if(!c||!h)return[];r.push(c,h)}else{const o=ln(t[0],s,!0);if(!o)return[];r.push(o)}return r}const xz=(n,e)=>{if(Cz(n.operator))return tI(n);switch(iI(n.filterSearchType||n.fieldType)){case"boolean":return eI(n,e);case"date":return Rz(n,e||[]);case"number":return JA(n,e||[]);case"object":return Ez(n,e);case"string":default:return ZA(n,e||[])}};function jh(n,e){const t=iI(e);let i;switch(t){case"boolean":i=Iz(n);break;case"date":i=Oz(n,e);break;case"number":i=Az(n);break;case"object":i=Tz(n);break;case"string":i=yz(n);break}return i}function iI(n){if(Lo(n))return"date";switch(n){case N.boolean:return"boolean";case N.integer:case N.float:case N.number:return"number";case N.object:return"object";case N.string:case N.text:case N.password:case N.readonly:default:return"string"}}const QC={executeFilterConditionTest:xz,booleanFilter:eI,collectionSearchFilter:tI,numberFilter:JA,stringFilter:ZA};class Pz{constructor(e,t,i,s){var r;this.config=e,this.translaterService=t,this.collectionService=i,this.rxjs=s,this._options=((r=this.config)==null?void 0:r.options)??{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let t;return e!=null&&e.model&&(t=typeof e.model=="function"?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!t&&this._options.defaultFilter&&(t=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),t}}class kz{constructor(e,t,i,s,r){this.filterFactory=e,this.pubSubService=t,this.sharedService=i,this.backendUtilities=s,this.rxjs=r,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new K,this._eventHandler=new gt,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get _columnDefinitions(){var e;return((e=this._grid)==null?void 0:e.getColumns())??[]}get _dataView(){var e;return((e=this._grid)==null?void 0:e.getData())??{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){var e;this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&((e=this.rxjs)!=null&&e.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)typeof(e==null?void 0:e.destroy)=="function"&&e.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{i.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(i,this._isFilterFirstRender),this._firstColumnIdRendered===""&&(this._firstColumnIdRendered=i.column.id)}),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,async(t,i)=>{const s=(i==null?void 0:i.clearFilterTriggered)??!1;s||await this.emitFilterChanged(pt.local,!0),this._gridOptions.enableTreeData===!0&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),s||await this.emitFilterChanged(pt.local),i.columnId!==null&&this._dataView.refresh(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)}),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(t,i)=>{this.addFilterTemplateToHeaderRow(i)}),this.subscribeToOnHeaderRowCellRendered(e)}async clearFilterByColumnId(e,t){await this.pubSubService.publish("onBeforeFilterClear",{columnId:t},0);const i=this._gridOptions.backendServiceApi??!1,s=i?pt.remote:pt.local,r=Object.keys(this._columnFilters);let o;Array.isArray(r)&&(o=r.find(l=>l===`${t}`));const a=this._filtersMetadata.find(l=>l.columnDef.id===t);return a!=null&&a.clear&&a.clear(!0),i&&o!==void 0&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters}),await this.emitFilterChanged(s),!0}async clearFilters(e=!0){var i,s;e&&await this.pubSubService.publish("onBeforeFilterClear",!0,0),this._filtersMetadata.forEach(r=>{r!=null&&r.clear&&r.clear(!1)}),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach(r=>{var o;(o=r.filter)!=null&&o.searchTerms&&delete r.filter.searchTerms}),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());const t=this._gridOptions.backendServiceApi;if(t&&e){const r={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:this._grid,columnFilters:this._columnFilters},a=t.service.processOnFilterChanged(void 0,r),l=((i=this._gridOptions.pagination)==null?void 0:i.totalItems)??0;(s=this.backendUtilities)==null||s.executeBackendCallback(t,a,r,new Date,l,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:c=>this._previousFilters=this.extractBasicFilterDetails(c.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);e&&this.pubSubService.publish("onFilterCleared",!0)}customLocalFilter(e,t){var a;const i=t==null?void 0:t.grid,s=(t==null?void 0:t.columnFilters)??{},r=this._gridOptions.enableTreeData??!1,o=this._gridOptions.treeDataOptions;if(r&&o){const l=o.collapsedPropName??se.treeDataProperties.COLLAPSED_PROP,c=o.parentPropName??se.treeDataProperties.PARENT_PROP,h=(o==null?void 0:o.childrenPropName)??se.treeDataProperties.CHILDREN_PROP,d=this._gridOptions.datasetIdPropertyName??"id",u=o.autoRecalcTotalsOnFilterChange??!1;let p=!1;if(e[c]!==null){let f=this._dataView.getItemById(e[c]);for(;f;){if(f[l])if(u)p=!0;else return!1;f=this._dataView.getItemById(f[c])}}if(this._tmpPreFilteredData instanceof Set){const f=this._tmpPreFilteredData.has(e[d]);if(u){const g=qd(this.sharedService.hierarchicalDataset,m=>m[d]===e[d],h);if(g&&(g.__filteredOut=!f),p)return!1}return f}}else if(typeof s=="object")for(const l of Object.keys(s)){const c=s[l],h=(a=c.columnDef)==null?void 0:a.filter;if(typeof(h==null?void 0:h.filterPredicate)=="function"){if(!h.filterPredicate(e,c))return!1}else{const d=this.preProcessFilterConditionOnDataContext(e,c,i);if(typeof d=="boolean")return d;let u=c==null?void 0:c.parsedSearchTerms;if(u===void 0&&(u=jh(c.searchTerms,c.columnDef.type||N.string),u!==void 0&&(c.parsedSearchTerms=u)),!QC.executeFilterConditionTest(d,u))return!1}}return!0}parseFormInputFilterConditions(e,t){var p;const i=Qt(!0,[],e)||[];let s=Array.isArray(i)&&i.length===1?i[0]:"";const r=t.columnDef,o=((p=r.filter)==null?void 0:p.type)??r.type??N.string;let a=null;o!==N.object&&(s=s==null?"":`${s}`,a=(r.autoParseInputFilterOperator??this._gridOptions.autoParseInputFilterOperator)!==!1?s.match(/^((.*[^\\*\r\n])[*]{1}(.*[^*\r\n]))|^([<>!=*]{0,2})(.*[^<>!=*])([*]?)$/)||[]:[s,"","","","",s,""]);const l=(a==null?void 0:a[2])||"",c=(a==null?void 0:a[3])||"";let h=(a==null?void 0:a[4])||t.operator,d=(a==null?void 0:a[1])||(a==null?void 0:a[5])||"";const u=(a==null?void 0:a[6])||(h==="*z"?"*":"");return typeof s=="string"&&(s=s.replace("'","''"),l&&c?(d=s,h=de.startsWithEndsWith):h==="*"||h==="*z"?h=de.endsWith:(h==="a*"||u==="*")&&(h=de.startsWith)),Array.isArray(a)&&a.length>=1&&Array.isArray(i)&&i.length===1&&(i[0]=d.length>0&&d.substring(0,1)===" "?d.substring(1):d),{dataKey:r.dataKey,fieldType:o,searchTerms:i||[],operator:h,searchInputLastChar:u,filterSearchType:r.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,t,i){var u,p,f,g;const s=t.columnDef,r=t.columnId;let o=i.getColumnIndex(r);if(!s&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(o=this.sharedService.allColumns.findIndex(m=>m.field===r)),!s)return!0;if(this._gridOptions.enableRowDetailView){const m=((u=this._gridOptions.rowDetailView)==null?void 0:u.keyPrefix)||"__";e[`${m}isPadding`]&&e[`${m}parent`]&&(e=e[`${m}parent`])}let a=((p=s.filter)==null?void 0:p.queryField)||s.queryFieldFilter||s.queryField||s.field||"";typeof s.queryFieldNameGetterFn=="function"&&(a=s.queryFieldNameGetterFn(e));const l=((f=s.filter)==null?void 0:f.type)??s.type??N.string;let c=e[a];(a==null?void 0:a.indexOf("."))>=0&&(c=Dr(e,a));const h=t.operator,d=t.searchTerms||[];if(!d||Array.isArray(d)&&(d.length===0||d.length===1&&h===d[0]))return!0;if(d&&Array.isArray(d)&&l!==N.object)for(let m=0,_=d.length;m<_;m++)d[m]=(d[m]===void 0||d[m]===null?"":d[m])+"";if(((g=s==null?void 0:s.params)==null?void 0:g.useFormatterOuputToFilter)===!0){const m=this._gridOptions.datasetIdPropertyName||"id",_=this._dataView&&typeof this._dataView.getIdxById=="function"?this._dataView.getIdxById(e[m]):0,b=s&&typeof s.formatter=="function"?s.formatter(_||0,o,c,s,e,this._grid):"";c=Js(b)}return typeof c=="number"&&(c=c.toString()),{dataKey:s.dataKey,fieldType:l,searchTerms:d,cellValue:c,operator:h,searchInputLastChar:t.searchInputLastChar,filterSearchType:s.filterSearchType,ignoreAccentOnStringFilterAndSort:this._gridOptions.ignoreAccentOnStringFilterAndSort??!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,t){var m,_,b,C,v,y;const i=this._gridOptions.treeDataOptions,s=(i==null?void 0:i.collapsedPropName)??se.treeDataProperties.COLLAPSED_PROP,r=(i==null?void 0:i.parentPropName)??se.treeDataProperties.PARENT_PROP,o=(i==null?void 0:i.hasChildrenPropName)??se.treeDataProperties.HAS_CHILDREN_PROP,a=this._gridOptions.datasetIdPropertyName??"id",l=(_=(m=this._gridOptions.presets)==null?void 0:m.treeData)==null?void 0:_.toggledItems,c=((b=this._gridOptions.treeDataOptions)==null?void 0:b.initiallyCollapsed)??!1,h=(C=this._gridOptions.treeDataOptions)==null?void 0:C.columnId,d=(v=this._gridOptions.treeDataOptions)==null?void 0:v.excludeChildrenWhenFilteringTree,u=!d&&((y=this._gridOptions.treeDataOptions)==null?void 0:y.autoApproveParentItemWhenTreeColumnIsValid)===!0,p={},f=new Set,g=new Map;return Array.isArray(e)&&(e.forEach(S=>{p[S[a]]=S,delete p[S[a]].__used}),typeof t=="object"&&Object.keys(t).forEach(S=>{var Y;const A=t[S],P=A!=null&&A.searchTerms?Qt(!0,[],A.searchTerms):[],F=this.parseFormInputFilterConditions(P,A),H=A.columnDef,W=((Y=H==null?void 0:H.filter)==null?void 0:Y.type)??(H==null?void 0:H.type)??N.string,J=jh(F.searchTerms,W);J!==void 0&&(A.parsedSearchTerms=J)}),e.forEach(S=>{const A=S[o];let P=!0;for(const F of Object.keys(t)){const H=t[F],W=this.preProcessFilterConditionOnDataContext(S,H,this._grid);if(W){const J=H==null?void 0:H.parsedSearchTerms,Y=typeof W=="boolean"?W:QC.executeFilterConditionTest(W,J);if(Y&&u&&A&&H.columnId===h){g.set(S[a],!0);break}if(Y||!d&&g.get(S[r])===!0){if(A&&H.columnId===h&&g.set(S[a],!0),Y||!d&&H.columnId===h)continue}else A&&g.get(S[r])!==!0&&H.columnId!==h&&g.set(S[a],!1)}P=!1}if(P){f.add(S[a]);let F=p[S[r]]??!1;const H=!c;for(!this._isTreePresetExecuted&&Array.isArray(l)&&l.some(W=>W.itemId===F.id&&W.isCollapsed===H)&&(F[s]=H);F;)F.__used??f.add(F[a]),p[F[a]].__used=!0,F=p[F[r]]??!1}})),this._isTreePresetExecuted=!0,f}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){var t;const e=[];if(this._columnFilters)for(const i of Object.keys(this._columnFilters)){const s=this._columnFilters[i],r={columnId:i||""},o=this.sharedService.allColumns.find(l=>l.id===r.columnId),a=((t=o==null?void 0:o.filter)==null?void 0:t.emptySearchTermReturnAllValues)??!0;s!=null&&s.searchTerms&&(r.searchTerms=s.searchTerms),s.operator&&(r.operator=s.operator),s.targetSelector&&(r.targetSelector=s.targetSelector),Array.isArray(r.searchTerms)&&r.searchTerms.length>0&&(!a||r.searchTerms[0]!=="")&&e.push(r)}return e}emitFilterChanged(e,t=!1){const i=t?"onBeforeFilterChange":"onFilterChanged";if(e===pt.remote&&this._gridOptions.backendServiceApi){let s=[];const r=this._gridOptions.backendServiceApi.service;return r!=null&&r.getCurrentFilters&&(s=r.getCurrentFilters()),this.pubSubService.publish(i,s)}else if(e===pt.local)return this.pubSubService.publish(i,this.getCurrentLocalFilters())}async onBackendFilterChange(e,t){var o,a;const i=t==null?void 0:t.shouldTriggerQuery;if(i&&await this.emitFilterChanged(pt.remote,!0),!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const s=this._gridOptions.backendServiceApi;if(!s||!s.process||!s.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const r=new Date;if(s.preProcess&&s.preProcess(),i){const l=await s.service.processOnFilterChanged(e,t),c=((o=this._gridOptions.pagination)==null?void 0:o.totalItems)??0;(a=this.backendUtilities)==null||a.executeBackendCallback(s,l,t,r,c,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:h=>this._previousFilters=this.extractBasicFilterDetails(h.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}}populateColumnFilterSearchTermPresets(e){return Array.isArray(e)&&(this._columnDefinitions.forEach(t=>{var s;(s=t.filter)!=null&&s.searchTerms&&delete t.filter.searchTerms;const i=e.find(r=>r.columnId===t.id);i&&Array.isArray(i==null?void 0:i.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){var i;const t=e??((i=this._dataView)==null?void 0:i.getItems())??[];this._dataView&&this._gridOptions.enableTreeData&&t.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(t,this._columnFilters),this._dataView.refresh()):t.length===0&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&queueMicrotask(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(e=!0,t=!0){const s=!this._gridOptions.enableFiltering;s!==e&&(t&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:s},!1,!0),this._grid.setHeaderRowVisibility(s),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(e=!0){const t=this._gridOptions.enableFiltering;this.disableFilterFunctionality(t,e)}toggleHeaderFilterRow(){let e=this._gridOptions.showHeaderRow??!1;e=!e,this._grid.setHeaderRowVisibility(e),e===!0&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}async updateFilters(e,t=!0,i=!0,s=!1){var r;if(!this._filtersMetadata||this._filtersMetadata.length===0||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach(l=>{const c=this._filtersMetadata.find(h=>l.columnId===h.columnDef.id);if(l&&c){const h=l.operator||c.defaultOperator;this.updateColumnFilters(l.searchTerms,c.columnDef,h),c.setValues(l.searchTerms||[],h),(s||this._gridOptions.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:c.columnDef,operator:h,searchTerms:l.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});const o=this._gridOptions.backendServiceApi,a=o?pt.remote:pt.local;if(t&&await this.emitFilterChanged(a,!0),this._dataView.refresh(),o){const l=o==null?void 0:o.service;l!=null&&l.updateFilters&&(l.updateFilters(e,!0),i&&((r=this.backendUtilities)==null||r.refreshBackendDataset(this._gridOptions)))}t&&await this.emitFilterChanged(a)}return!0}async updateSingleFilter(e,t=!0,i=!0){var r,o;const s=this.sharedService.allColumns.find(a=>a.id===e.columnId);if(s&&e.columnId){this._columnFilters={};const a=((r=s.filter)==null?void 0:r.emptySearchTermReturnAllValues)??!0;Array.isArray(e.searchTerms)&&(e.searchTerms.length>1||e.searchTerms.length===1&&(!a||e.searchTerms[0]!==""))&&(this._columnFilters[e.columnId]={columnId:e.columnId,operator:e.operator,searchTerms:e.searchTerms,columnDef:s,type:s.type??N.string});const l=this._gridOptions.backendServiceApi,c=l?pt.remote:pt.local;if(t&&await this.emitFilterChanged(c,!0),l){const h=l==null?void 0:l.service;h!=null&&h.updateFilters&&(h.updateFilters(this._columnFilters,!0),i&&((o=this.backendUtilities)==null||o.refreshBackendDataset(this._gridOptions)))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();t&&await this.emitFilterChanged(c)}return!0}drawFilterTemplate(e,t){let i;if(typeof t=="string"){if(i=document.querySelector(t),i===null)return null}else i=t;const s=typeof e=="string"?this.sharedService.allColumns.find(o=>o.id===e):e;if(((s==null?void 0:s.id)??"")!=="selector"&&(s!=null&&s.filterable)){let o,a;const l=this.filterFactory.createFilter(s.filter);a=s&&s.filter&&s.filter.operator||l&&l.operator,this._columnFilters[s.id]?(o=this._columnFilters[s.id].searchTerms||void 0,a=this._columnFilters[s.id].operator||void 0):s.filter&&(o=s.filter.searchTerms||void 0,this.updateColumnFilters(o,s,a));const c={grid:this._grid,operator:a,searchTerms:o,columnDef:s,filterContainerElm:i,callback:this.callbackSearchEvent.bind(this)};return l&&(l.init(c),o&&l.setValues&&l.setValues(o,a)),l}return null}addFilterTemplateToHeaderRow(e,t=!0){const i=e.column;if(((i==null?void 0:i.id)??"")!=="selector"&&(i!=null&&i.filterable)&&!(i!=null&&i.hidden)){let r,o;const a=this.filterFactory.createFilter(i.filter);o=i&&i.filter&&i.filter.operator||a&&a.operator,this._columnFilters[i.id]?(r=this._columnFilters[i.id].searchTerms||void 0,o=this._columnFilters[i.id].operator||void 0):i.filter&&(r=i.filter.searchTerms||void 0,this.updateColumnFilters(r,i,o));const l={grid:this._grid,operator:o,searchTerms:r,columnDef:i,filterContainerElm:e.node,callback:this.callbackSearchEvent.bind(this)};if(a&&l.filterContainerElm){a.init(l,t);const c=this._filtersMetadata.findIndex(h=>a.columnDef.id===h.columnDef.id);c===-1?this._filtersMetadata.push(a):this._filtersMetadata[c]=a,r&&a.setValues&&a.setValues(r,o)}}}callbackSearchEvent(e,t){var i,s;if(t){const r=e!=null&&e.target?e.target.value:void 0,o=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:r?[r]:void 0,a=t.columnDef||null,l=(a==null?void 0:a.id)??"",c=((i=a==null?void 0:a.filter)==null?void 0:i.type)??(a==null?void 0:a.type)??N.string,h=t.operator||void 0,d=o&&Array.isArray(o),u=d&&o&&o.length,p={...this._columnFilters},f=((s=a.filter)==null?void 0:s.emptySearchTermReturnAllValues)??!0;let g;if(a&&l)if(!d||u===0||u===1&&Array.isArray(o)&&f&&o[0]==="")delete this._columnFilters[l];else{const b=`${l}`,C={columnId:b,columnDef:a,parsedSearchTerms:[],type:c,targetSelector:this.getSelectorStringFromElement(e==null?void 0:e.target)},v=this.parseFormInputFilterConditions(o,C);C.operator=h||v.operator||Xw(c),g=jh(v.searchTerms,c),g!==void 0&&(C.parsedSearchTerms=g),C.searchTerms=v.searchTerms||[],this._columnFilters[b]=C}const m=e&&typeof e.isPropagationStopped!="function"?Qt({},new Ot,e):e,_=e==null?void 0:e.key;if(this._onSearchChange&&(t.forceOnSearchChangeEvent||_==="Enter"||!_n(p,this._columnFilters))){const b={clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:l,columnDef:a,columnFilters:this._columnFilters,operator:h||Xw(c),searchTerms:o,parsedSearchTerms:g,grid:this._grid,target:e==null?void 0:e.target};this.pubSubService.publish("onBeforeSearchChange",b)===!1?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(b,m)}}}disableAllFilteringCommands(e=!0){var s;const t=this._grid.getColumns();t.forEach(r=>{var o,a;(o=r==null?void 0:r.header)!=null&&o.menu&&((a=r.header.menu.commandItems)==null||a.forEach(l=>{l&&typeof l!="string"&&l.command==="clear-filter"&&(l.hidden=e)}))});const i=(s=this._gridOptions.gridMenu)==null?void 0:s.commandItems;return i&&i.forEach(r=>{if(r&&typeof r!="string"){const o=r.command;(o==="clear-filter"||o==="toggle-filter")&&(r.hidden=e)}}),t}extractBasicFilterDetails(e){const t=[];if(e&&typeof e=="object")for(const i of Object.keys(e)){const{operator:s,searchTerms:r}=e[`${i}`];t.push({columnId:i,operator:s,searchTerms:r})}return t}getSelectorStringFromElement(e){return e!=null&&e.localName?e!=null&&e.className?`${e.localName}.${Array.from(e.classList).join(".")}`:e.localName:""}removeAllColumnFiltersProperties(){typeof this._columnFilters=="object"&&Object.keys(this._columnFilters).forEach(e=>{e&&this._columnFilters[e]&&delete this._columnFilters[e]})}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,(t,i)=>{var r;const s=this._filtersMetadata.find(o=>o.columnDef.id===i.column.id);(r=s==null?void 0:s.destroy)==null||r.call(s)})}updateColumnFilters(e,t,i){var o;const s=((o=t.filter)==null?void 0:o.type)??t.type??N.string,r=jh(e,s);e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i,parsedSearchTerms:r,type:s})}}const Kh={skipError:!1,triggerEvent:!0},Il={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},Tf={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},ZC={applySetColumns:!0,autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1},Dz={autoResizeColumns:!0,triggerEvent:!0};class JC{constructor(e,t,i,s,r,o,a){this.gridStateService=e,this.filterService=t,this.pubSubService=i,this.paginationService=s,this.sharedService=r,this.sortService=o,this.treeDataService=a}get _dataView(){var e;return(e=this._grid)==null?void 0:e.getData()}get _gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}dispose(){var e;(e=this._rowSelectionPlugin)==null||e.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearPinning(e=!0){const t=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),e&&Array.isArray(t)&&this.sharedService.slickGrid.setColumns(t)}setPinning(e,t=!0,i=!1,s=!0){MH(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,i,s),this.sharedService.gridOptions={...this.sharedService.gridOptions,...e}),t&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!e||!e.grid||!e.grid.getColumns||!e.grid.getDataItem)throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error(`[Slickgrid-Universal] We could not find SlickGrid Grid object or it's "getDataItem" method`);return this._grid.getDataItem(e)}getDataItemByRowIndex(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||typeof this._grid.getDataItem!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const t=[];return Array.isArray(e)&&e.forEach(i=>{t.push(this._grid.getDataItem(i))}),t}getSelectedRows(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||typeof this._grid.getSelectedRows!="function")throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,t){if(this._grid){t={...ZC,...t};const i=this._grid.getColumns(),s=i.findIndex(r=>r.id===e);if(s>=0){const r=iA(i,s);t!=null&&t.applySetColumns&&(this.sharedService.visibleColumns=r,this._grid.setColumns(r));const o=this.sharedService.allColumns.findIndex(a=>a.id===e);return o&&(t!=null&&t.hideFromColumnPicker&&(this.sharedService.allColumns[o].excludeFromColumnPicker=!0),t!=null&&t.hideFromGridMenu&&(this.sharedService.allColumns[o].excludeFromGridMenu=!0)),this.executeVisibilityCommands(t,["onHeaderMenuHideColumns"],r),s}}return-1}hideColumnByIds(e,t){if(Array.isArray(e)){const i=this._grid.getColumns().filter(s=>!e.includes(s.id));t={...ZC,...t};for(const s of e)this.hideColumnById(s,{...t,triggerEvent:!1,applySetColumns:!1,autoResizeColumns:!1});this.sharedService.visibleColumns=i,this._grid.setColumns(i),this.executeVisibilityCommands(t,["onHeaderMenuHideColumns","onHideColumns"],i)}}showColumnByIds(e,t){if(this._grid){t={...Dz,...t};const i=this.sharedService.allColumns.filter(s=>e.includes(s.id));this._grid.setColumns(i),this.sharedService.visibleColumns=i,this.executeVisibilityCommands(t,["onShowColumns"],this.sharedService.visibleColumns)}}executeVisibilityCommands(e,t,i){e!=null&&e.autoResizeColumns&&this._grid.autosizeColumns(),e!=null&&e.triggerEvent&&t.forEach(s=>this.pubSubService.publish(s,{columns:i}))}highlightRow(e,t){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new cp(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),t||(t=this._gridOptions.rowHighlightDuration),Array.isArray(e)?e.forEach(i=>this._grid.highlightRow(i)):this._grid.highlightRow(e,t)}setSelectedRow(e){var t;(t=this._grid)!=null&&t.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){var t;(t=this._grid)!=null&&t.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){var e;typeof((e=this._grid)==null?void 0:e.invalidate)=="function"&&this._grid.invalidate()}resetGrid(e){var t,i,s;if(this.clearPinning(!1),this._grid){const r=this.sharedService.allColumns||[];Array.isArray(r)&&r.length>0&&(this._grid.setColumns(r),(t=this._gridOptions)!=null&&t.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}typeof((i=this.filterService)==null?void 0:i.clearFilters)=="function"&&this.filterService.clearFilters(),typeof((s=this.sortService)==null?void 0:s.clearSorting)=="function"&&this.sortService.clearSorting()}addItem(e,t){var c,h,d,u;const i={...Il,...t};if(!(i!=null&&i.skipError)&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const s=this._gridOptions.datasetIdPropertyName||"id";if(!(i!=null&&i.skipError)&&(!e||!e.hasOwnProperty(s)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${s}" property`);if((c=this._gridOptions)!=null&&c.enableTreeData&&(t==null?void 0:t.position)==="top")throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const r=i==null?void 0:i.position;r==="bottom"||(h=this._gridOptions)!=null&&h.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let o=0;const a=(e==null?void 0:e[s])??"";return(d=this._gridOptions)!=null&&d.enableTreeData?(this.invalidateHierarchicalDataset(),o=this._dataView.getRowById(a),i.scrollRowIntoView&&this._grid.scrollRowIntoView(o??0,!1)):i.resortGrid?(this._dataView.reSort(),o=this._dataView.getRowById(a)):(o=r==="bottom"?this._dataView.getRowById(a):0,i.scrollRowIntoView&&this._grid.scrollRowIntoView(o??0)),i.highlightRow&&o!==void 0&&this.highlightRow(o),o!==void 0&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(o),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e),!((u=this._gridOptions)!=null&&u.backendServiceApi)&&this._gridOptions.enablePagination&&(r==="bottom"?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),o}addItems(e,t){var a,l,c,h;const i={...Il,...t},s=this._gridOptions.datasetIdPropertyName||"id",r=i==null?void 0:i.position,o=[];if(Array.isArray(e))this._dataView.beginUpdate(!0),r==="bottom"||(a=this._gridOptions)!=null&&a.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate();else return[this.addItem(e,i)||0];if((l=this._gridOptions)!=null&&l.enableTreeData){this.invalidateHierarchicalDataset();const d=((c=e[0])==null?void 0:c[s])??"",u=this._dataView.getRowById(d);i.scrollRowIntoView&&this._grid.scrollRowIntoView(u??0,!1)}else i.resortGrid&&this._dataView.reSort();return r&&i.scrollRowIntoView&&!((h=this._gridOptions)!=null&&h.enableTreeData)&&(r==="bottom"?this._grid.navigateBottom():this._grid.navigateTop()),e.forEach(d=>o.push(this._dataView.getRowById(d[s]))),i.highlightRow&&this.highlightRow(o),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(o),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e),o}deleteItem(e,t){t={...Kh,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!(t!=null&&t.skipError)&&(!e||!e.hasOwnProperty(i)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${i}" property`);return this.deleteItemById(e[i],t)}deleteItems(e,t){t={...Kh,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,t),[e[i]];this._dataView.beginUpdate(!0);const s=[];return e.forEach(r=>{(r==null?void 0:r[i])!==void 0&&s.push(r[i])}),this._dataView.deleteItems(s),this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),s}deleteItemById(e,t){if(t={...Kh,...t},!(t!=null&&t.skipError)&&e==null)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,t){if(t={...Kh,...t},Array.isArray(e)){this._dataView.beginUpdate(!0);for(let i=0;i<e.length;i++)e[i]!==null&&this.deleteItemById(e[i],{triggerEvent:!1});return this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,t){t={...Tf,...t};const i=this._gridOptions.datasetIdPropertyName||"id",s=!e||!e.hasOwnProperty(i)?void 0:e[i];if(!(t!=null&&t.skipError)&&s===void 0)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${i}" property`);return this.updateItemById(s,e,t)}updateItems(e,t){var o;t={...Tf,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,t)];this._dataView.beginUpdate(!0);const s=[],r=[];return e.forEach(a=>{const l=!a||!a.hasOwnProperty(i)?void 0:a[i];if(r.push(l),this._dataView.getIdxById(l)!==void 0){const c=this._dataView.getRowById(l);c!==void 0&&(s.push(c),this._grid.updateRow(c))}}),this._dataView.updateItems(r,e),this._dataView.endUpdate(),(o=this._gridOptions)!=null&&o.enableTreeData&&this.invalidateHierarchicalDataset(),t.highlightRow&&this.highlightRow(s),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(s),t.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),s}updateItemById(e,t,i){var r;if(i={...Tf,...i},!(i!=null&&i.skipError)&&e===void 0)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const s=this._dataView.getRowById(e);if(!(i!=null&&i.skipError)&&!t&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${e}`);return this._dataView.getIdxById(e)!==void 0&&(this._dataView.updateItem(e,t),s!==void 0&&this._grid.updateRow(s),(r=this._gridOptions)!=null&&r.enableTreeData&&this.invalidateHierarchicalDataset(),i.scrollRowIntoView&&s!==void 0&&this._grid.scrollRowIntoView(s),i.highlightRow&&s!==void 0&&this.highlightRow(s),s!==void 0&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(s),i.triggerEvent&&this.pubSubService.publish("onItemUpdated",t)),s}upsertItem(e,t){t={...Il,...t};const i=this._gridOptions.datasetIdPropertyName||"id",s=!e||!e.hasOwnProperty(i)?void 0:e[i];if(!(t!=null&&t.skipError)&&s===void 0)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${i}" property`);return this.upsertItemById(s,e,t)}upsertItems(e,t){if(t={...Il,...t},!Array.isArray(e))return[this.upsertItem(e,t)];this._dataView.beginUpdate(!0);const i=[];e.forEach(r=>{i.push(this.upsertItem(r,{...t,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))}),this._dataView.endUpdate();const s=i.map(r=>r.added!==void 0?r.added:r.updated);if(t.highlightRow&&this.highlightRow(s),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(s),t.triggerEvent){this.pubSubService.publish("onItemUpserted",e);const r=i.filter(a=>a.added!==void 0);Array.isArray(r)&&r.length>0&&this.pubSubService.publish("onItemAdded",r);const o=i.filter(a=>a.updated!==void 0);Array.isArray(o)&&o.length>0&&this.pubSubService.publish("onItemUpdated",o)}return i}upsertItemById(e,t,i){let s=!1;if(i={...Il,...i},!(i!=null&&i.skipError)&&e===void 0&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');let r,o;return this._dataView.getRowById(e)===void 0?(r=this.addItem(t,i),s=!0):(o=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),s=!1),i.triggerEvent&&(this.pubSubService.publish("onItemUpserted",t),s?this.pubSubService.publish("onItemAdded",t):this.pubSubService.publish("onItemUpdated",t)),{added:r,updated:o}}invalidateHierarchicalDataset(e){var t;if((t=this._gridOptions)!=null&&t.enableTreeData&&this.treeDataService){const i=e??this._dataView.getItems(),s=this.sortService.getCurrentColumnSorts(),r=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(i||[],this.sharedService.allColumns,this._gridOptions,s);this.sharedService.hierarchicalDataset=r.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(r.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!!(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&!!e}}class Lz{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new gt}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){const t=e==null?void 0:e.getData();this._eventHandler.subscribe(e.onBeforeEditCell,(i,s)=>{if(!i||!s||!e||s.cell===void 0||!e.getColumns||!e.getDataItem)return;const r=e.getColumns()[s.cell];if(typeof r.onBeforeEditCell=="function"){const o={row:s.row,cell:s.cell,dataView:t,grid:e,columnDef:r,dataContext:e.getDataItem(s.row)};r.onBeforeEditCell(i instanceof Ot?i.getNativeEvent():i,o)}})}bindOnCellChange(e){const t=e==null?void 0:e.getData();this._eventHandler.subscribe(e.onCellChange,(i,s)=>{if(!i||!s||!e||s.cell===void 0||!e.getColumns||!e.getDataItem)return;const r=e.getColumns()[s.cell];if(typeof r.onCellChange=="function"){const o={row:s.row,cell:s.cell,dataView:t,grid:e,columnDef:r,dataContext:e.getDataItem(s.row)};r.onCellChange(i instanceof Ot?i.getNativeEvent():i,o)}})}bindOnClick(e){const t=e==null?void 0:e.getData();this._eventHandler.subscribe(e.onClick,(i,s)=>{if(!i||!s||!e||s.cell===void 0||!e.getColumns||!e.getDataItem)return;const r=e.getColumns()[s.cell];if(typeof r.onCellClick=="function"){const o={row:s.row,cell:s.cell,dataView:t,grid:e,columnDef:r,dataContext:e.getDataItem(s.row)};r.onCellClick(i instanceof Ot?i.getNativeEvent():i,o)}})}}class ey{constructor(e,t,i,s,r,o){this.extensionService=e,this.filterService=t,this.pubSubService=i,this.sharedService=s,this.sortService=r,this.treeDataService=o,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0,this._eventHandler=new gt}get _dataView(){var e;return((e=this._grid)==null?void 0:e.getData())??{}}get _gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e,t=!0,i=!1){var s,r,o,a,l,c;if(Array.isArray(e)&&e.length>0){const h=this.getAssociatedGridColumns(this._grid,e);if(h&&Array.isArray(h)&&h.length>0){if(Array.isArray(this.sharedService.allColumns)){const d=[];if(this._gridOptions.enableCheckboxSelector){const u=((r=(s=this._gridOptions)==null?void 0:s.checkboxSelector)==null?void 0:r.columnIndexPosition)??0;d.push({columnId:"_checkbox_selector",columnIndexPosition:u})}if(this._gridOptions.enableRowDetailView){const u=((a=(o=this._gridOptions)==null?void 0:o.rowDetailView)==null?void 0:a.columnIndexPosition)??0;d.push({columnId:"_detail_selector",columnIndexPosition:u})}if(this._gridOptions.enableRowMoveManager){const u=((c=(l=this._gridOptions)==null?void 0:l.rowMoveManager)==null?void 0:c.columnIndexPosition)??0;d.push({columnId:"_move",columnIndexPosition:u})}this.addColumnDynamicWhenFeatureEnabled(d,this.sharedService.allColumns,h)}h.forEach(d=>d.originalWidth=d.width||d.originalWidth),this._grid.setColumns(h),this.sharedService.visibleColumns=h,t?this._grid.autosizeColumns():(i||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){var o;const{frozenColumn:e,frozenRow:t,frozenBottom:i}=this.sharedService.gridOptions,s={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:t,frozenBottom:i}},r=this.getCurrentPagination();if(r&&(s.pagination=r),this.hasRowSelectionEnabled()){const a=this.getCurrentRowSelections();a&&(s.rowSelection=a)}if((o=this._gridOptions)!=null&&o.enableTreeData){const a=this.getCurrentTreeDataToggleState();a&&(s.treeData=a)}return s}getColumns(){return this._columns}getAssociatedCurrentColumns(e){const t=[];return e&&Array.isArray(e)&&e.forEach(i=>{i!=null&&i.id&&t.push({columnId:i.id,cssClass:i.cssClass||"",headerCssClass:i.headerCssClass||"",width:i.width||0})}),t}getAssociatedGridColumns(e,t){const i=[],s=this.sharedService.allColumns||e.getColumns();return t&&Array.isArray(t)&&t.forEach(r=>{const o=s.find(a=>a.id===r.columnId);o!=null&&o.id&&i.push({...o,cssClass:r.cssClass||o.cssClass,headerCssClass:r.headerCssClass||o.headerCssClass,width:r.width})}),this._columns=i,i}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){var e,t;if((e=this._gridOptions)!=null&&e.backendServiceApi){const i=this._gridOptions.backendServiceApi.service;if(i!=null&&i.getCurrentFilters)return i.getCurrentFilters()}else if((t=this.filterService)!=null&&t.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){var e;if((e=this._gridOptions)!=null&&e.enablePagination)if(this._gridOptions.backendServiceApi){const t=this._gridOptions.backendServiceApi.service;if(t!=null&&t.getCurrentPagination)return t.getCurrentPagination()}else return this.sharedService.currentPagination;return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){var e,t;if((e=this._gridOptions)!=null&&e.backendServiceApi){const i=this._gridOptions.backendServiceApi.service;if(i!=null&&i.getCurrentSorters)return i.getCurrentSorters()}else if((t=this.sortService)!=null&&t.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){var e;return(e=this._gridOptions)!=null&&e.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){var t;let e=!1;if((t=this._gridOptions)!=null&&t.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const i=this._gridOptions.dataView.syncGridSelection;typeof i=="boolean"?e=this._gridOptions.dataView.syncGridSelection:typeof i=="object"&&(e=i.preserveHidden||i.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(e){const t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:Ai.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(e=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){var e,t;if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){const i=(t=(e=this.extensionService)==null?void 0:e.getExtensionByName)==null?void 0:t.call(e,Ae.rowSelection);i!=null&&i.instance&&this._grid.setSelectedRows([])}}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Ai.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:Ai.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",t=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Ai.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:Ai.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(Ae.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(Ae.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(t,i)=>{const s=(this._selectedRowIndexes||[]).slice(),r=(this.selectedRowDataContextIds||[]).slice();if(this.selectedRowDataContextIds=i.filteredIds,this._selectedRowIndexes=i.rows,!_n(this.selectedRowDataContextIds,r)||!_n(this._selectedRowIndexes,s)){const o={gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:i.selectedRowIds,filteredDataContextIds:i.filteredIds};this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:Ai.rowSelection},gridState:this.getCurrentGridState()})}}),this._subscriptions.push(this.pubSubService.subscribe(["onHeaderMenuHideColumns","onHideColumns","onShowColumns"],t=>{const i=this.getAssociatedCurrentColumns(t.columns);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:Ai.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Ai.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",t=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:Ai.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(e,t,i){e.sort((s,r)=>s.columnIndexPosition-r.columnIndexPosition),e.forEach(s=>{const r=t.findIndex(a=>a.id===s.columnId),o=i.findIndex(a=>a.id===s.columnId);if(r>=0&&o===-1){const a=t[r];r===0?i.unshift(a):i.splice(r,0,a)}})}bindExtensionAddonEventToGridStateChange(e,t){var r,o,a;const i=(o=(r=this.extensionService)==null?void 0:r.getExtensionByName)==null?void 0:o.call(r,e),s=(a=i==null?void 0:i.instance)==null?void 0:a[t];s&&typeof s.subscribe=="function"&&this._eventHandler.subscribe(s,(l,c)=>{const h=c==null?void 0:c.columns,d=this.getAssociatedCurrentColumns(h);this.pubSubService.publish("onGridStateChanged",{change:{newValues:d,type:Ai.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(e,t){const i=t==null?void 0:t[e];i&&typeof i.subscribe=="function"&&this._eventHandler.subscribe(i,()=>{const s=t.getColumns(),r=this.getAssociatedCurrentColumns(s);this.pubSubService.publish("onGridStateChanged",{change:{newValues:r,type:Ai.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(e){const t=e.onSetOptions;this._eventHandler.subscribe(t,(i,s)=>{const{frozenBottom:r,frozenColumn:o,frozenRow:a}=s.optionsBefore,{frozenBottom:l,frozenColumn:c,frozenRow:h}=s.optionsAfter;if(r!==l||o!==c||a!==h){const d={frozenBottom:l,frozenColumn:c,frozenRow:h},u=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:d,type:Ai.pinning},gridState:u})}})}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!!(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&!!e}}class ty{constructor(e){this.extensionUtility=e,this._subscriptions=[],this._eventHandler=new gt}get _dataView(){var e;return((e=this._grid)==null?void 0:e.getData())??{}}get eventHandler(){return this._eventHandler}get _gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get _columnDefinitions(){var e;return((e=this._grid)==null?void 0:e.getColumns())??[]}init(e){this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel&&(this._gridOptions.enableTranslate&&this.translateHeaderGrouping(),this._eventHandler.subscribe(e.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._eventHandler.subscribe(e.onSetOptions,(t,i)=>{var s,r;((s=i==null?void 0:i.optionsBefore)==null?void 0:s.frozenColumn)!==((r=i==null?void 0:i.optionsAfter)==null?void 0:r.frozenColumn)&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75))}dispose(){this._eventHandler.unsubscribeAll()}delayRenderPreHeaderRowGroupingTitles(e=0){window.setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),e)}renderPreHeaderRowGroupingTitles(){var t;const e=this._columnDefinitions.length;if(((t=this._gridOptions)==null?void 0:t.frozenColumn)!==void 0&&this._gridOptions.frozenColumn>=0){const i=this._gridOptions.frozenColumn;this.renderHeaderGroups(this._grid.getPreHeaderPanelLeft(),0,i+1),this.renderHeaderGroups(this._grid.getPreHeaderPanelRight(),i+1,e)}else this.renderHeaderGroups(this._grid.getPreHeaderPanel(),0,e)}renderHeaderGroups(e,t,i){var d,u,p;tt(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,(d=e.parentElement)==null||d.classList.add("slick-header");const s=this._grid.getHeaderColumnWidthDiff();let r,o=null,a="",l=0;const c=((u=this._gridOptions)==null?void 0:u.frozenHeaderWidthCalcDifferential)??0,h=((p=this._gridOptions)==null?void 0:p.frozenColumn)!==void 0&&this._gridOptions.frozenColumn>=0;for(let f=t;f<i;f++)r=this._columnDefinitions[f],r&&(a===r.columnGroup&&f>0?(l+=r.width||0,o!=null&&o.style&&(o.style.width=`${l-s-c}px`)):(l=r.width||0,o=I("div",{className:`slick-state-default slick-header-column ${h?"frozen":""}`,dataset:{group:r.columnGroup},style:{width:`${l-s}px`}}),I("span",{className:"slick-column-name",textContent:r.columnGroup||""},o),e.appendChild(o)),a=r.columnGroup||"")}translateHeaderGrouping(){const e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}}class Nz{constructor(e,t,i,s){this.pubSubService=e,this.sharedService=t,this.backendUtilities=i,this.rxjs=s,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1,this._eventHandler=new gt}get dataView(){var e;return((e=this.grid)==null?void 0:e.getData())??{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(e){this.rxjs=e}init(e,t,i){var r,o;if(this._availablePageSizes=t.pageSizes||[],this.grid=e,this._backendServiceApi=i,this._paginationOptions=t,this._isLocalGrid=!i,this._pageNumber=t.pageNumber||1,this._isCursorBased=((r=i==null?void 0:i.options)==null?void 0:r.useCursor)??!1,i&&(!i.service||!i.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(a,l)=>{this._totalItems!==l.totalRows&&(this.updateTotalItems(l.totalRows),this._previousPagination={pageNumber:l.pageNum,pageSize:l.pageSize,pageSizes:this.availablePageSizes,totalItems:l.totalRows})}),queueMicrotask(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe(["onFilterChanged","onFilterCleared"],()=>this.resetPagination())),(o=i==null?void 0:i.options)!=null&&o.infiniteScroll&&this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",a=>this.processOnItemAddedOrRemoved(a,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",a=>this.processOnItemAddedOrRemoved(a,!1)))),this.refreshPagination(!1,!1,!0);const s=this.getFullPagination();this._previousPagination={pageNumber:s.pageNumber,pageSize:s.pageSize,pageSizes:s.pageSizes,totalItems:this.totalItems},this._initialized=!0,I_(t,"totalItems",a=>this._totalItems=a)}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,t,i=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToFirstPage(e,t=!0){return this._pageNumber=1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e,t=!0){return this._pageNumber=this._pageCount||1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToNextPage(e,t=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,t,i=!0){if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);const s=this._pageNumber;return e<1?this._pageNumber=1:e>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=e,this._pageNumber!==s?i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e,t=!0){return this._pageNumber>1?(this._pageNumber--,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(e=!1,t=!0,i=!1){var o,a,l;const s={...this.getFullPagination()};if(this._paginationOptions){const c=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=c.pageSize:this._itemsPerPage=+((l=(a=(o=this._backendServiceApi)==null?void 0:o.options)==null?void 0:a.paginationOptions)!=null&&l.first?this._backendServiceApi.options.paginationOptions.first:c.pageSize)),(e||this._totalItems!==c.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&c.pageNumber&&c.pageNumber>1&&(this._pageNumber=c.pageNumber||1),this._pageNumber===1&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=c.pageSizes||[],!this._totalItems&&c.totalItems&&(this._totalItems=c.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),t&&!_n(s,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),i&&!_n(s,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const r=this.getFullPagination();this._previousPagination={pageNumber:r.pageNumber,pageSize:r.pageSize,pageSizes:r.pageSizes,totalItems:this.totalItems}}resetPagination(e=!0,t=!0){var i,s;this._isLocalGrid&&this.dataView&&((s=(i=this.sharedService)==null?void 0:i.gridOptions)!=null&&s.enablePagination)&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,e),t&&this.grid.scrollTo(0)}togglePaginationVisibility(e){var t;if(this.grid&&((t=this.sharedService)!=null&&t.gridOptions)){const i=e!==void 0?e:!this.sharedService.gridOptions.enablePagination;if(i&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){const s=e?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:s,pageNum:0})}this.sharedService.gridOptions.enablePagination=i,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:i})}}processOnPageChanged(e,t,i){return console.assert(!this.isCursorBased||i,"Configured for cursor based pagination - cursorArgs expected"),this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())===!1?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((s,r)=>{var o,a,l;if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),s(this.getFullPagination());else{const c=+this._itemsPerPage,h=new Date;if((o=this._backendServiceApi)!=null&&o.preProcess&&this._backendServiceApi.preProcess(),(a=this._backendServiceApi)!=null&&a.process){const d=this.isCursorBased&&i?this._backendServiceApi.service.processOnPaginationChanged(t,i):this._backendServiceApi.service.processOnPaginationChanged(t,{newPage:e,pageSize:c}),u=this._backendServiceApi.process(d);u instanceof Promise?u.then(p=>{var g;(g=this.backendUtilities)==null||g.executeBackendProcessesCallback(h,p,this._backendServiceApi,this._totalItems);const f=this.getFullPagination();this._previousPagination={pageNumber:f.pageNumber,pageSize:f.pageSize,pageSizes:f.pageSizes,totalItems:this.totalItems},s(this.getFullPagination())}).catch(p=>{var f,g,m;this.resetToPreviousPagination(),(f=this.backendUtilities)==null||f.onBackendError(p,this._backendServiceApi),(!((g=this._backendServiceApi)!=null&&g.onError)||!((m=this.backendUtilities)!=null&&m.onBackendError))&&r(u)}):(l=this.rxjs)!=null&&l.isObservable(u)&&this._subscriptions.push(u.subscribe(p=>{var g;const f=this.getFullPagination();this._previousPagination={pageNumber:f.pageNumber,pageSize:f.pageSize,pageSizes:f.pageSizes,totalItems:this.totalItems},s((g=this.backendUtilities)==null?void 0:g.executeBackendProcessesCallback(h,p,this._backendServiceApi,this._totalItems))},p=>{var f,g,m;this.resetToPreviousPagination(),(f=this.backendUtilities)==null||f.onBackendError(p,this._backendServiceApi),(!((g=this._backendServiceApi)!=null&&g.onError)||!((m=this.backendUtilities)!=null&&m.onBackendError))&&r(u)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){((this._pageNumber-1)*this._itemsPerPage>this._totalItems||this._totalItems>0&&this._pageNumber===0)&&(this._pageNumber=1),this._totalItems===0?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),this._dataTo>this._totalItems?this._dataTo=this._totalItems:this._totalItems<this._itemsPerPage&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){var i,s,r,o,a,l,c,h,d;const e=((i=this._previousPagination)==null?void 0:i.pageNumber)!==this.getFullPagination().pageNumber,t=((s=this._previousPagination)==null?void 0:s.pageSize)!==this.getFullPagination().pageSize;t&&this.changeItemPerPage(((r=this._previousPagination)==null?void 0:r.pageSize)??0,null,!1),e&&this.goToPageNumber(((o=this._previousPagination)==null?void 0:o.pageNumber)??0,null,!1),(e||t)&&(this.refreshPagination(),(d=(l=(a=this._backendServiceApi)==null?void 0:a.service)==null?void 0:l.updatePagination)==null||d.call(l,((c=this._previousPagination)==null?void 0:c.pageNumber)??0,((h=this._previousPagination)==null?void 0:h.pageSize)??0))}setCursorBased(e){this._isCursorBased=e,e&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:e})}setCursorPageInfo(e){this._cursorPageInfo=e}updateTotalItems(e,t=!1){this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,t))}processOnItemAddedOrRemoved(e,t=!0){if(e!==null){const i=this._dataTo,s=Array.isArray(e)?e.length:1,r=t?+s:-s;this._totalItems+=r,this.recalculateFromToIndexes(),this._dataTo=i+r,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}const Mz=20,Fz=25,$z=35,Hz=180,Bz=300,Vz=200;class zz{get autoHeightRecalcRow(){return this._autoHeightRecalcRow||100}get isAutoHeightEnabled(){var e;return!!(this.gridOptions.enableAutoResize&&((e=this.gridOptions.autoResize)!=null&&e.autoHeight))}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get dataView(){var e;return(e=this._grid)==null?void 0:e.getData()}get gridUid(){var e;return((e=this._grid)==null?void 0:e.getUID())??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){var e;return((e=this.gridOptions)==null?void 0:e.resizeByContentOptions)??{}}constructor(e){this.pubSubService=e,this._allHeaderHeight=0,this._autoHeightRecalcRow=0,this._intervalRetryDelay=Vz,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new gt,this._bindingEventService=new as}dispose(){var e,t;(e=this._eventHandler)==null||e.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),window.clearInterval(this._intervalId),window.clearTimeout(this._timer),((t=this.gridOptions.autoResize)==null?void 0:t.resizeDetection)==="container"&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(e,t){var s,r,o,a,l,c;if(!e||!this.gridOptions||!t)throw new Error(`
      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.
      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.`);this._grid=e,this._gridContainerElm=t;const i=(s=this.gridOptions)!=null&&s.gridHeight||(r=this.gridOptions)!=null&&r.gridWidth?{height:(o=this.gridOptions)==null?void 0:o.gridHeight,width:(a=this.gridOptions)==null?void 0:a.gridWidth}:void 0;this._autoResizeOptions=((l=this.gridOptions)==null?void 0:l.autoResize)??{container:"grid1",bottomPadding:0},i!=null&&i.width&&(t!=null&&t.style)&&(t.style.width=typeof i.width=="string"?i.width:`${i.width}px`),this._gridDomElm=e.getContainerNode(),typeof this._autoResizeOptions.container=="string"?this._pageContainerElm=typeof this._autoResizeOptions.container=="string"?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container:this._pageContainerElm=this._autoResizeOptions.container,i&&(this._fixedHeight=i.height,this._fixedWidth=i.width),this.gridOptions.enableAutoResize&&(this._autoHeightRecalcRow=((c=this.gridOptions.autoResize)==null?void 0:c.autoHeightRecalcRow)??100,this.bindAutoResizeDataGrid()),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),this._eventHandler.subscribe(this._grid.onAutosizeColumns,()=>{this.cacheHeaderHeightTotal()}),this.gridOptions.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",h=>{this.handleSingleColumnResizeByContent(h.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(h,d)=>{this.handleSingleColumnResizeByContent(d.triggeredByColumn)}))}bindAutoResizeDataGrid(e){var t;if(((t=this.gridOptions.autoResize)==null?void 0:t.resizeDetection)==="container"){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error(`
          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"
          You can fix this by setting your gridOption.autoResize.container`);this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(this._gridDomElm===void 0)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(i=>console.log("Error:",i)),this.resizeGrid(10,e),this._bindingEventService.bind(window,"resize",()=>{this.handleResizeGrid(e)})}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}cacheHeaderHeightTotal(){const e=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-topheader-panel`),t=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-pane-header`),i=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-headerrow`);this._allHeaderHeight=((e==null?void 0:e.offsetHeight)||0)+((t==null?void 0:t.offsetHeight)||0)+((i==null?void 0:i.offsetHeight)||0)}calculateGridNewDimensions(e){var g,m;const t=(e==null?void 0:e.autoResize)??{},i=Gt(this._gridDomElm);if(!window||!this._gridDomElm)return null;let s=(t==null?void 0:t.bottomPadding)!==void 0?t.bottomPadding:Mz;if(s&&e.enablePagination&&(s+=$z),s&&e.showCustomFooter){const _=((m=(g=this.gridOptions)==null?void 0:g.customFooterOptions)==null?void 0:m.footerHeight)??Fz;s+=parseInt(`${_}`,10)}let r=0,o=0;t.calculateAvailableSizeBy==="container"?r=Mg(this._pageContainerElm,"height")||0:(r=window.innerHeight||0,o=i.top);const a=r-o-s,l=Mg(this._pageContainerElm,"width")||window.innerWidth||0,c=t==null?void 0:t.maxHeight,h=(t==null?void 0:t.minHeight)??Hz,d=t==null?void 0:t.maxWidth,u=(t==null?void 0:t.minWidth)??Bz;let p=a,f=t!=null&&t.rightPadding?l-t.rightPadding:l;if(e.enableAutoResize&&this.isAutoHeightEnabled){const _=this.dataView.getLength();if(_<this.autoHeightRecalcRow){this._allHeaderHeight||this.cacheHeaderHeightTotal();const b=_*e.rowHeight,C=this._allHeaderHeight+b;C<p&&(p=C)}}return p<h&&(p=h),c&&p>c&&(p=c),f<u&&(f=u),d&&f>d&&(f=d),{height:this._fixedHeight||p,width:this._fixedWidth||f}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,t){return new Promise(i=>{e=e||0,e>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>i(this.resizeGridCallback(t)),e)):i(this.resizeGridCallback(t))})}resizeGridCallback(e){var i,s;const t=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",t),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!((i=this._lastDimensions)!=null&&i.width)||(t==null?void 0:t.width)!==((s=this._lastDimensions)==null?void 0:s.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions=t,t}resizeGridWithDimensions(e){var i,s,r,o;const t=this.calculateGridNewDimensions(this.gridOptions);if((e||t)&&this._gridDomElm){const a=e!=null&&e.height?e.height:t==null?void 0:t.height,l=e!=null&&e.width?e.width:t==null?void 0:t.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${a}px`),this._gridDomElm.style.width=`${l}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${l}px`),(i=this._grid)!=null&&i.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),this._grid&&((s=this.gridOptions)!=null&&s.enableAutoSizeColumns)?this.gridUid&&document.querySelector(this.gridUidSelector)&&(!this._lastDimensions||this._lastDimensions.height!==a||this._lastDimensions.width!==l)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!((r=this._lastDimensions)!=null&&r.width)||l!==((o=this._lastDimensions)==null?void 0:o.width))&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:a||0,width:l||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(e=!0){this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(e=!1){var c,h;const t=this._grid.getColumns(),i=this.dataView.getItems(),s={};let r=!1,o=0;const a=((c=this._gridContainerElm)==null?void 0:c.offsetWidth)??0;if(!Array.isArray(i)||i.length===0||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<a){this._grid.autosizeColumns();return}if(this._hasResizedByContentAtLeastOnce&&((h=this.gridOptions)!=null&&h.resizeByContentOnlyOnFirstLoad)&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),this._totalColumnsWidthByContent===0||e){for(const u of t)s[u.id]=u.originalWidth??u.minWidth??0;o=this.calculateCellWidthByReadingDataset(t,s,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let d=0;for(const u of t){const p=u.resizeAlwaysRecalculateWidth??this.resizeByContentOptions.alwaysRecalculateColumnWidth??!1;u.originalWidth&&!p?u.width=u.originalWidth:s[u.id]!==void 0&&(u.rerenderOnResize&&(r=!0),this.applyNewCalculatedColumnWidthByReference(u,s[u.id])),d+=u.width||0,this._totalColumnsWidthByContent=d}}this._grid.setColumns(t),this._hasResizedByContentAtLeastOnce=!0;const l={};for(const d of t)l[d.id]=d.width;this._totalColumnsWidthByContent>a?this._grid.reRenderColumns(r):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:o,calculateColumnWidths:l})}calculateCellWidthByReadingDataset(e,t,i=1e3,s){const r=Array.isArray(e)?e:[e],o=this.dataView.getItems();let a=0;for(const[l,c]of o.entries()){if(l>i)break;Array.isArray(r)&&typeof t=="object"&&r.forEach((h,d)=>{const u=this.calculateCellWidthByContent(c,h,l,s??d,t[h.id]);u!==void 0&&(t[h.id]=u)}),a=l+1}return a}calculateCellWidthByContent(e,t,i,s,r){const o=this.resizeByContentOptions.cellCharWidthInPx??7;if(!t.originalWidth){const a=(t==null?void 0:t.resizeCharWidthInPx)??o,l=hp(t==null?void 0:t.formatter,i,s,t,e,this._grid),c=Nc(l)?Js(l):"",h=Math.ceil(c.length*a),d=t.resizeMaxWidthThreshold;t&&(r===void 0||h>r)&&(r=d!==void 0&&h>d?d:t.maxWidth!==void 0&&h>t.maxWidth?t.maxWidth:h)}return r}applyNewCalculatedColumnWidthByReference(e,t){var l;const i=this.resizeByContentOptions.cellPaddingWidthInPx??6,s=this.resizeByContentOptions.formatterPaddingWidthInPx??6,r=((l=e==null?void 0:e.filter)==null?void 0:l.type)??(e==null?void 0:e.type)??N.string;let o=t;const a=(e==null?void 0:e.resizeCalcWidthRatio)??this.resizeByContentOptions.defaultRatioForStringType??.9;o*=r==="string"?a:1,o+=i,e.resizeExtraWidthPadding&&(o+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(o+=s),e.maxWidth!==void 0&&o>e.maxWidth&&(o=e.maxWidth),e.resizeMaxWidthThreshold!==void 0&&o>e.resizeMaxWidthThreshold&&(o=e.resizeMaxWidthThreshold),o=Math.ceil(o),(e.originalWidth===void 0||e.resizeAlwaysRecalculateWidth===!0||this.resizeByContentOptions.alwaysRecalculateColumnWidth===!0)&&(e.width=this.readjustNewColumnWidthWhenOverLimit(e,o))}handleSingleColumnResizeByContent(e){const t=this._grid.getColumns(),i=t.findIndex(s=>s.id===e);if(i>=0){const s=t[i],r={[e]:s.originalWidth??s.minWidth??0};s.originalWidth=void 0,this.calculateCellWidthByReadingDataset(s,r,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,i),this.applyNewCalculatedColumnWidthByReference(s,r[e]),this._grid.reRenderColumns((s==null?void 0:s.rerenderOnResize)??!1)}}readjustNewColumnWidthWhenOverLimit(e,t){var o,a;const i=this.gridOptions.frozenColumn??-1,s=this._grid.getColumns().findIndex(l=>l.id===e.id)??0;let r=t;if(i>=0&&s<=i){const l=Array.from(this._grid.getViewports());if(l){const c=((o=l.find(f=>f.classList.contains("slick-viewport-left")))==null?void 0:o.clientWidth)??0,h=((a=l.find(f=>f.classList.contains("slick-viewport-right")))==null?void 0:a.clientWidth)??0,d=c+h,u=c-(e.width??0);if(u+t>d){const f=this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment??50;r=c-u+h-f}}}return Math.ceil(r)}checkIsGridShown(){var e;return!!(((e=document.querySelector(`${this.gridUidSelector}`))==null?void 0:e.offsetParent)??!1)}resizeGridWhenStylingIsBrokenUntilCorrected(){var a,l;const e=((a=this.gridOptions)==null?void 0:a.autoFixResizeTimeout)??18e3,t=((l=this.gridOptions)==null?void 0:l.autoFixResizeRequiredGoodCount)??5,i=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),s=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let r=0,o=0;if(i&&s&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const c=this.dataView.getItemCount(),h=this._grid.getColumns()||[];this._intervalId=window.setInterval(async()=>{var C,v,y;const u=Gt(i);let p=u.top;(C=this.gridOptions)!=null&&C.enableFiltering&&this.gridOptions.headerRowHeight&&(p+=this.gridOptions.headerRowHeight),(v=this.gridOptions)!=null&&v.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(p+=this.gridOptions.preHeaderPanelHeight),p+=44;const g=Gt(s).top,m=Gt(this._gridContainerElm);let _=(u==null?void 0:u.top)===0||p-g>2||m.left===0&&m.top===0;const b=((y=this._grid.getRenderedRange())==null?void 0:y.rightPx)??0;!_&&c>0&&b===0&&h.length>1&&(_=!0),this._isStopResizeIntervalRequested&&(_=!1,r=e),this.checkIsGridShown()&&(_||m.left===0||m.top===0)&&(await this.resizeGrid(),o<5&&this._grid.updateColumns(),this.checkIsGridShown()&&(_=!1)),this.checkIsGridShown()&&o++,this.checkIsGridShown()&&!_&&(o>=t||r++>=e)&&window.clearInterval(this._intervalId)},this.intervalRetryDelay)}}}class Wz{constructor(){this.currentPagination=null,this.isItemsDateParsed=!1,this.frozenVisibleColumnId="",this.hasColumnsReordered=!1,this.hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){var e;return((e=this.slickGrid)==null?void 0:e.getColumns())??[]}get gridOptions(){var e;return this._gridOptions||((e=this.slickGrid)==null?void 0:e.getOptions())||{}}set gridOptions(e){this._gridOptions=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}}class Uz{constructor(e,t,i,s,r){this.collectionService=e,this.sharedService=t,this.pubSubService=i,this.backendUtilities=s,this.rxjs=r,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new gt,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get _columnDefinitions(){var e;return((e=this._grid)==null?void 0:e.getColumns())??[]}dispose(){var e,t;(e=this._eventHandler)!=null&&e.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&((t=this.rxjs)!=null&&t.isObservable(this.httpCancelRequests$))&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){this._isBackendGrid=!0,this._grid=e,this._dataView=e==null?void 0:e.getData(),this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e==null?void 0:e.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this)),this._gridOptions.preParseDateColumns&&(this._eventHandler.subscribe(e.onCellChange,(t,i)=>this.preParseSingleDateItem(i.item)),this.pubSubService.subscribe(["onItemAdded","onItemUpdated"],t=>this.preParseSingleDateItem(t)))}preParseSingleDateItem(e){this._gridOptions.preParseDateColumns&&(Array.isArray(e)?e:[e]).forEach(i=>this.collectionService.parseSingleDateItem(i,this._grid,this._gridOptions.preParseDateColumns))}preParseAllDateItems(){var e;if(this._gridOptions.preParseDateColumns){const t=((e=this._dataView)==null?void 0:e.getItems())||[];this.collectionService.preParseByMutationDateItems(t,this._grid,this._gridOptions.preParseDateColumns),this.sharedService.isItemsDateParsed=!0}}handleLocalOnSort(e,t){var s;const i=t.multiColumnSort?t.sortCols:new Array({columnId:((s=t.sortCol)==null?void 0:s.id)??"",sortAsc:t.sortAsc,sortCol:t.sortCol});this._currentLocalSorters=[],Array.isArray(i)&&i.forEach(r=>{r.sortCol&&this._currentLocalSorters.push({columnId:r.sortCol.id,direction:r.sortAsc?Ys.ASC:Ys.DESC})}),this.onLocalSortChanged(this._grid,i),this.emitSortChanged(pt.local)}clearSortByColumnId(e,t){const i=this.getCurrentColumnSorts(),s=this.getCurrentColumnSorts(`${t}`);if(Array.isArray(i)&&Array.isArray(s)&&i.length!==s.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:s,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,s,!0,!0);else{const a=this._gridOptions.multiColumnSort||!1?s:s[0];this._grid.onSort.notify(a)}const r=s.map(o=>{var a;return{columnId:((a=o==null?void 0:o.sortCol)==null?void 0:a.id)??"",sortAsc:o==null?void 0:o.sortAsc,sortCol:o==null?void 0:o.sortCol}});this._grid.setSortColumns(r)}Array.isArray(s)&&s.length===0&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(e=!0){var t;if(this._grid&&this._gridOptions&&this._dataView){if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const i=(t=this._gridOptions.backendServiceApi)==null?void 0:t.service;i!=null&&i.clearSorters&&i.clearSorters()}}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(e=!0,t=!0){const s=!this._gridOptions.enableSorting;this._gridOptions.enableSorting=s;let r;e?(t&&this.clearSorting(),this._eventHandler.unsubscribeAll(),r=this.disableAllSortingCommands(!0)):(r=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(o,a)=>this.handleLocalOnSort(o,a))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(r)}toggleSortFunctionality(e=!0){const t=this._gridOptions.enableSorting;this.disableSortFunctionality(t,e)}emitSortChanged(e,t){if(e===pt.remote&&this._gridOptions.backendServiceApi){let i=[];const s=this._gridOptions.backendServiceApi.service;s!=null&&s.getCurrentSorters&&(i=s.getCurrentSorters()),this.pubSubService.publish("onSortChanged",i)}else e===pt.local&&(t&&(this._currentLocalSorters=t),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){const t=this._grid.getSortColumns();if(Array.isArray(t))return t.reduce((s,r)=>(r&&(!e||r.columnId!==e)&&s.push({columnId:r.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(r.columnId||"")],sortAsc:r.sortAsc}),s),[])}return[]}loadGridSorters(e){this._currentLocalSorters=[];const t=[];return Array.isArray(e)&&((this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach(s=>{const r=this._columnDefinitions.find(o=>o.id===s.columnId);if(r){if(!r.sortable){let o="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(o+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(o)}t.push({columnId:r.id,sortAsc:s.direction.toUpperCase()===Ys.ASC,sortCol:r}),this._currentLocalSorters.push({columnId:String(r.id),direction:s.direction.toUpperCase()})}}),this.onLocalSortChanged(this._grid,t),this._grid.setSortColumns(t.map(s=>({columnId:s.columnId,sortAsc:s.sortAsc})))),t}processTreeDataInitialSort(){var e,t;if(this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions){const i=this._gridOptions.treeDataOptions;if(this._columnDefinitions.find(r=>r.id===i.columnId)){let r=Ys.ASC,o={columnId:i.columnId};if((e=i==null?void 0:i.initialSort)!=null&&e.columnId){const a=i.initialSort.columnId,l=this._columnDefinitions.find(c=>c.id===a);r=(i.initialSort.direction||Ys.ASC).toUpperCase(),o={columnId:a,sortCol:l,sortAsc:r===Ys.ASC}}o!=null&&o.columnId&&((t=this.sharedService)!=null&&t.hierarchicalDataset)&&this.updateSorting([{columnId:o.columnId||"",direction:r}])}}}onBackendSortChanged(e,t){var l,c,h;if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const i=((l=t.grid)==null?void 0:l.getOptions())??{},s=i.backendServiceApi;if(!s||!s.process||!s.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const r=new Date;s.preProcess&&s.preProcess();const o=s.service.processOnSortChanged(e,t),a=((c=i==null?void 0:i.pagination)==null?void 0:c.totalItems)||0;(h=this.backendUtilities)==null||h.executeBackendCallback(s,o,t,r,a,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{var u,p,f;this._grid.setSortColumns(t.previousSortColumns||[]);const d=(u=t.previousSortColumns)==null?void 0:u.map(g=>({columnId:g.columnId,sortAsc:g.sortAsc,sortCol:this._columnDefinitions.find(m=>m.id===g.columnId)}));(f=(p=s==null?void 0:s.service)==null?void 0:p.updateSorters)==null||f.call(p,d||[])},httpCancelRequestSubject:this.httpCancelRequests$})}async onLocalSortChanged(e,t,i=!1,s=!1){const r=this._gridOptions.datasetIdPropertyName||"id",o=this._gridOptions.enableTreeData||!1,a=e.getData();if(await this.pubSubService.publish("onBeforeSortChange",{sortColumns:t},0),e&&a){if(this._gridOptions.preParseDateColumns&&!this.sharedService.isItemsDateParsed&&t.some(l=>{var c;return Lo((c=l.sortCol)==null?void 0:c.type)})&&this.preParseAllDateItems(),i&&!o&&a.reSort(),o&&this._dataView&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){const l=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,t);this._dataView.setItems(l.flat,r),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else a.sort(this.sortComparers.bind(this,t));e.invalidate(),s&&this.emitSortChanged(pt.local,t.map(l=>{var c;return{columnId:((c=l.sortCol)==null?void 0:c.id)??"id",direction:l.sortAsc?Ys.ASC:Ys.DESC}}))}}sortHierarchicalDataset(e,t,i=!1){this.sortTreeData(e,t);const s=this._gridOptions.datasetIdPropertyName||"id",r=this._gridOptions.treeDataOptions||{columnId:""},o={...r,identifierPropName:r.identifierPropName??s,shouldAddTreeLevelNumber:!0},a=TH(e,o);if(i){this._currentLocalSorters=[],t.forEach(c=>{this._currentLocalSorters.push({columnId:c.columnId,direction:c.sortAsc?"ASC":"DESC"})});const l=this._gridOptions.backendServiceApi?pt.remote:pt.local;this.emitSortChanged(l)}return{hierarchical:e,flat:a}}sortLocalGridByDefaultSortFieldId(){const e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",t={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:t.id,sortAsc:!0,sortCol:t,clearSortTriggered:!0}),!1,!0)}sortComparers(e,t,i){if(Array.isArray(e))for(const s of e){const r=this.sortComparer(s,t,i);if(r!==void 0)return r}return ct.neutral}sortComparer(e,t,i,s){if(e!=null&&e.sortCol){const r=e.sortCol,o=r.type||N.string,a=e.sortAsc?ct.asc:ct.desc;let l=s||r.queryFieldSorter||r.queryField||r.field;this._gridOptions.preParseDateColumns&&Lo(o)&&(e!=null&&e.columnId)&&(l=typeof this._gridOptions.preParseDateColumns=="string"?`${this._gridOptions.preParseDateColumns}${e.columnId}`:`${e.columnId}`);let c=l;typeof r.queryFieldNameGetterFn=="function"&&(l=r.queryFieldNameGetterFn(t),c=r.queryFieldNameGetterFn(i));let h=t[l],d=i[c];if((l==null?void 0:l.indexOf("."))>=0&&(h=Dr(t,l)),(c==null?void 0:c.indexOf("."))>=0&&(d=Dr(i,c)),r.sortComparer){const u=r.sortComparer(h,d,a,r,this._gridOptions);if(u!==ct.neutral)return u}else{const u=fc(o,h,d,a,r,this._gridOptions);if(u!==ct.neutral)return u}}}sortTreeData(e,t){Array.isArray(t)&&t.forEach(i=>{this.sortTreeChildren(e,i,0)})}sortTreeChildren(e,t,i){var r;const s=((r=this._gridOptions.treeDataOptions)==null?void 0:r.childrenPropName)??"children";e.sort((o,a)=>this.sortComparer(t,o,a)??ct.neutral),e.forEach(o=>{o&&o.hasOwnProperty(s)&&Array.isArray(o[s])&&(i++,this.sortTreeChildren(o[s],t,i),i--)})}updateSorting(e,t=!0,i=!0){var s;if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){const r=this._gridOptions.backendServiceApi;if(r){const o=r==null?void 0:r.service;o!=null&&o.updateSorters&&(o.updateSorters(void 0,e),i&&((s=this.backendUtilities)==null||s.refreshBackendDataset(this._gridOptions)))}else this.loadGridSorters(e);if(t){const o=r?pt.remote:pt.local;this.emitSortChanged(o)}}}disableAllSortingCommands(e=!0){var s;const t=this._grid.getColumns();t.forEach(r=>{var o,a;r.sortable!==void 0&&(r.sortable=!e),(o=r==null?void 0:r.header)!=null&&o.menu&&((a=r.header.menu.commandItems)==null||a.forEach(l=>{if(l&&typeof l!="string"){const c=l.command;(c==="sort-asc"||c==="sort-desc"||c==="clear-sort")&&(l.hidden=e)}}))});const i=(s=this._gridOptions.gridMenu)==null?void 0:s.commandItems;return i&&i.forEach(r=>{r&&typeof r!="string"&&r.command==="clear-sorting"&&(r.hidden=e)}),t}}class iy{constructor(e,t,i){this.pubSubService=e,this.sharedService=t,this.sortService=i,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new gt,window.setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){var e;return(e=this.dataView)==null?void 0:e.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){var e;return(e=this._grid)==null?void 0:e.getData()}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){var t,i,s,r,o,a,l,c;if(this._grid=e,this._isTreeDataEnabled=((t=this.gridOptions)==null?void 0:t.enableTreeData)??!1,this._isLastFullToggleCollapsed=((i=this.treeDataOptions)==null?void 0:i.initiallyCollapsed)??!1,this._currentToggledItems=((r=(s=this.gridOptions.presets)==null?void 0:s.treeData)==null?void 0:r.toggledItems)??[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if((o=this.gridOptions)!=null&&o.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!((a=this.gridOptions)!=null&&a.enableFiltering))throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if((l=this.gridOptions)!=null&&l.backendServiceApi||(c=this.gridOptions)!=null&&c.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{var h;typeof this._treeDataRecalcHandler=="function"&&this._isOneCpuCyclePassed&&(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>{var d;return(d=this._treeDataRecalcHandler)==null?void 0:d.call(this)},((h=this.treeDataOptions)==null?void 0:h.autoRecalcTotalsDebounce)??0))})}applyToggledItemStateChanges(e,t,i=!0,s=!1){if(Array.isArray(e)){const r=zt(this.treeDataOptions,"collapsedPropName"),o=zt(this.treeDataOptions,"hasChildrenPropName");this.dataView.beginUpdate(!0);const l=(t??this._lastToggleStateChange.previousFullToggleType)==="full-collapse";t&&(this._lastToggleStateChange.previousFullToggleType=t),i&&(this.dataView.getItems()||[]).forEach(c=>{c[o]&&(c[r]=l)}),this.dynamicallyToggleItemState(e,s)}}dynamicallyToggleItemState(e,t=!0){Array.isArray(e)&&(this.dataView.beginUpdate(!0),e.forEach(i=>{const s=this.dataView.getItemById(i.itemId);if(this.updateToggledItem(s,i.isCollapsed,!0),t){const r=this._currentToggledItems.findIndex(o=>o.itemId===i.itemId);r>=0?this._currentToggledItems[r].isCollapsed=i.isCollapsed:this._currentToggledItems.push({itemId:i.itemId,isCollapsed:i.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:i.itemId,toggledItems:this._currentToggledItems,type:i.isCollapsed?pr.toggleCollapse:pr.toggleExpand})}}),this.dataView.endUpdate(),this.dataView.refresh())}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,t){var o;const i=t==null?void 0:t.treeDataOptions,s=(i==null?void 0:i.initialSort)??{columnId:(i==null?void 0:i.columnId)??"",direction:"ASC"},r=e.find(a=>a.id===s.columnId);return{columnId:s.columnId,sortAsc:((o=s==null?void 0:s.direction)==null?void 0:o.toUpperCase())!=="DESC",sortCol:r}}getItemCount(e){if(e!==void 0){const t=zt(this.treeDataOptions,"levelPropName");return this.dataView.getItems().filter(i=>i[t]===e).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}clearSorting(){const e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,t,i,s){var l;const r=this.convertFlatParentChildToTreeDataset(e,i),o=Array.isArray(s)&&s.length?s[0]:this.getInitialSort(t,i),a=this.sortService.sortHierarchicalDataset(r,[o],!0);return(l=this._grid)==null||l.setSortColumns([o]),a}convertFlatParentChildToTreeDataset(e,t){const i=(t==null?void 0:t.datasetIdPropertyName)??"id",s=(t==null?void 0:t.treeDataOptions)??{columnId:"id"},r={...s,identifierPropName:s.identifierPropName??i,initiallyCollapsed:this._isLastFullToggleCollapsed};return AH(e,r)}enableAutoRecalcTotalsFeature(e=!0){e&&this._isTreeDataEnabled?this._treeDataRecalcHandler=this.recalculateTreeTotals.bind(this,this.gridOptions):this._treeDataRecalcHandler=null}recalculateTreeTotals(e){const t=e.treeDataOptions,i=(t==null?void 0:t.childrenPropName)??se.treeDataProperties.CHILDREN_PROP,s=(t==null?void 0:t.levelPropName)??se.treeDataProperties.TREE_LEVEL_PROP;t!=null&&t.aggregators&&(t.aggregators.forEach(r=>{rp(this.sharedService.hierarchicalDataset||[],{childrenPropName:i,levelPropName:s,aggregator:r})}),this._grid.invalidate())}sortHierarchicalDataset(e,t){const i=t??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),s=Array.isArray(i)?i:[i];return this.sortService.sortHierarchicalDataset(e,s)}async toggleTreeDataCollapse(e,t=!0){var s;if((s=this.gridOptions)!=null&&s.enableTreeData){const r=zt(this.treeDataOptions,"hasChildrenPropName");t&&await this.pubSubService.publish("onTreeFullToggleStart",{collapsing:e}),this.dataView.beginUpdate(!0);const o=this.dataView.getItems()||[];o.forEach(a=>{a[r]&&this.updateToggledItem(a,e,!1)}),this.sharedService.hierarchicalDataset=this.convertFlatParentChildToTreeDataset(o,this.gridOptions),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=e}const i=e?pr.fullCollapse:pr.fullExpand;this._lastToggleStateChange={type:i,previousFullToggleType:i,toggledItems:null},t&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)}handleOnCellClick(e,t){if(e&&t){const i=e.target||{},s=this.gridOptions.datasetIdPropertyName??"id",r=zt(this.treeDataOptions,"collapsedPropName"),o=zt(this.treeDataOptions,"childrenPropName");if(typeof(i==null?void 0:i.className)=="string"&&(i.className.indexOf("toggle")>=0||!1)){const l=this.dataView.getItem(t.row);if(l){l[r]=!l[r];const c=l[r],h=l[s],d=this._currentToggledItems.findIndex(f=>f.itemId===h);d>=0?this._currentToggledItems[d].isCollapsed=c:this._currentToggledItems.push({itemId:h,isCollapsed:c}),this.dataView.updateItem(h,l);const u=f=>f[s]===h,p=qd(this.sharedService.hierarchicalDataset||[],u,o);p&&(p[r]=c),this._grid.invalidate(),this._lastToggleStateChange={type:c?pr.toggleCollapse:pr.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:h})}e.stopImmediatePropagation()}}}updateToggledItem(e,t,i){var a;const s=((a=this.gridOptions)==null?void 0:a.datasetIdPropertyName)??"id",r=zt(this.treeDataOptions,"childrenPropName"),o=zt(this.treeDataOptions,"collapsedPropName");if(e&&(e[o]=t,this.dataView.updateItem(e[s],e),i)){const l=h=>h[s]===e[s],c=qd(this.sharedService.hierarchicalDataset||[],l,r);c&&(c[o]=t)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(e){var t,i;return e!=null&&e.enableTreeData&&((t=e==null?void 0:e.treeDataOptions)!=null&&t.autoRecalcTotalsOnFilterChange)&&((i=e==null?void 0:e.treeDataOptions)!=null&&i.aggregators)?this.recalculateTreeTotals.bind(this,e):null}}class pu{constructor(e){this.translaterService=e,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new as}get columnFilter(){var e;return((e=this.columnDef)==null?void 0:e.filter)??{}}get defaultOperator(){return de.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){var e;return((e=this.columnFilter)==null?void 0:e.operator)??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}init(e){var s,r,o;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.inputFilterType==="compound"&&(this.operator=e.operator||""),this.searchTerms=(e==null?void 0:e.searchTerms)??[],this._cellContainerElm=e.filterContainerElm;const t=(s=this.gridOptions)==null?void 0:s.backendServiceApi;this._debounceTypingDelay=(t?(t==null?void 0:t.filterTypingDebounce)??((r=this.gridOptions)==null?void 0:r.defaultBackendServiceFilterTypingDebounce):(o=this.gridOptions)==null?void 0:o.filterTypingDebounce)??0;const i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(i),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),this.inputFilterType==="compound"&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this._filterInputElm&&(this._shouldTriggerQuery=e,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.updateFilterStyle(!1),this.inputFilterType==="compound"&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.onTriggerEvent(void 0,!0))}destroy(){var e,t,i,s;this._bindEventService.unbindAll(),(t=(e=this._selectOperatorElm)==null?void 0:e.remove)==null||t.call(e),(s=(i=this._filterInputElm)==null?void 0:i.remove)==null||s.call(i)}getValues(){return this._filterInputElm.value}setValues(e,t,i=!1){const s=Array.isArray(e)?e:[e];let r="";for(const o of s)this.inputFilterType==="single"?r=t?this.addOptionalOperatorIntoSearchString(o,t):o:r=`${o}`,this._filterInputElm.value=`${r??""}`,this._currentValue=this._filterInputElm.value;if(this.updateFilterStyle(this.getValues()!==""),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){const o=Lc(this.operator);this._selectOperatorElm.value=o}i&&this.onTriggerEvent(void 0,!1)}addOptionalOperatorIntoSearchString(e,t){let i="",s="",r=e==null?"":`${e}`;if(t&&r){switch(t){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":i=t;break;case"EndsWith":case"*z":i="*";break;case"StartsWith":case"a*":s="*";break}r=`${i}${r}${s}`}return r}getCompoundOperatorOptionValues(){var s;const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:N.string;let t,i="text";if((s=this.columnFilter)!=null&&s.compoundOperatorList)t=this.columnFilter.compoundOperatorList;else switch(e){case N.string:case N.text:case N.readonly:case N.password:i="text",t=gB(this.gridOptions,this.translaterService);break;default:i="numeric",t=H_(this.gridOptions,this.translaterService);break}return B_(this.gridOptions,t,i),t}createDomFilterElement(e){var r,o,a,l;const t=((r=this.columnDef)==null?void 0:r.id)??"";tt(this._cellContainerElm);let i=((o=this.gridOptions)==null?void 0:o.defaultFilterPlaceholder)??"";(a=this.columnFilter)!=null&&a.placeholder&&(i=this.columnFilter.placeholder);const s=`${e??""}`;if(this._filterInputElm=I("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:i,ariaLabel:((l=this.columnFilter)==null?void 0:l.ariaLabel)??`${eu(t+"")} Search Filter`,className:`form-control filter-${t}`,value:s,dataset:{columnid:`${t}`}}),this.updateFilterStyle(!!e),e!==void 0&&(this._currentValue=s),this.inputFilterType==="single")this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter","slick-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=$_(this.getCompoundOperatorOptionValues(),this.grid),this._filterContainerElm=I("div",{className:`form-group search-filter slick-filter filter-${t}`});const c=I("div",{className:"input-group"},this._filterContainerElm);I("div",{className:"input-group-addon input-group-prepend operator"},c).appendChild(this._selectOperatorElm),c.appendChild(this._filterInputElm),c.appendChild(I("span")),this.operator&&(this._selectOperatorElm.value=Lc(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(e,t=!1){var i,s;if(t)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:t,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else{const r=(e==null?void 0:e.type)||"",o=((i=this._selectOperatorElm)==null?void 0:i.value)??this.operator;let a=this._filterInputElm.value;const l=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;typeof a=="string"&&l&&(a=a.trim()),((s=e==null?void 0:e.target)==null?void 0:s.tagName.toLowerCase())!=="select"&&(this._currentValue=a),this.updateFilterStyle(a!=="");const c={columnDef:this.columnDef,operator:o,searchTerms:a?[a]:null,shouldTriggerQuery:this._shouldTriggerQuery},h=r==="keyup"&&(e==null?void 0:e.key)!=="Enter"?this._debounceTypingDelay:0,d=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,u=d&&Le(this._currentValue)||this._currentValue===""&&Le(this._lastSearchValue);(this.inputFilterType==="single"||!d||u)&&(h>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.callback(e,c),h)):this.callback(e,c)),this._lastSearchValue=a}this._shouldTriggerQuery=!0}updateFilterStyle(e){var t,i;e?((t=this._filterContainerElm)==null||t.classList.add("filled"),this._filterInputElm.classList.add("filled")):((i=this._filterContainerElm)==null||i.classList.remove("filled"),this._filterInputElm.classList.remove("filled"))}}class sy extends pu{constructor(e){super(e),this.translaterService=e,this.inputType="text",this.inputFilterType="compound"}}class Gz extends pu{constructor(e){super(e),this.translaterService=e,this.inputType="number",this.inputFilterType="compound"}}const Af="#86bff8",Yh=0,jz=20;class J_{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=Af,this.sliderType="double",this.searchTerms=[],this._bindEventService=new as}get columnFilter(){var e;return((e=this.columnDef)==null?void 0:e.filter)??{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return this.sliderType==="compound"?de.empty:this.sliderType==="single"?de.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||de.rangeInclusive}get filterOptions(){var e,t;return{...(e=this.gridOptions.defaultFilterOptions)==null?void 0:e.slider,...(t=this.columnFilter)==null?void 0:t.filterOptions}}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}get sliderOptions(){return this._sliderOptions}get operator(){return this._operator||(this.columnFilter.operator??this.defaultOperator)}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=(e==null?void 0:e.searchTerms)??[],this._argFilterContainerElm=e.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||Af,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(e=!0){var t,i,s,r,o,a,l;if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];const c=+(((t=this.filterOptions)==null?void 0:t.sliderStartValue)??se.SLIDER_DEFAULT_MIN_VALUE),h=+(((i=this.filterOptions)==null?void 0:i.sliderEndValue)??se.SLIDER_DEFAULT_MAX_VALUE);this.sliderType==="double"?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${c}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${h}`),this._currentValues=[c,h],(s=this._sliderLeftInputElm)==null||s.dispatchEvent(new Event("change")),(r=this._sliderRightInputElm)==null||r.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${c}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=c,(o=this._sliderRightInputElm)==null||o.dispatchEvent(new Event("change"))),(((a=this.filterOptions)==null?void 0:a.hideSliderNumber)??((l=this.filterOptions)==null?void 0:l.hideSliderNumbers))||(this.sliderType==="double"?this.renderSliderValues(c,h):this.renderSliderValues(void 0,c)),this.updateFilterStyle(!1),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e,searchTerms:[]})}}destroy(){var e,t,i;this._bindEventService.unbindAll(),(e=this._sliderTrackElm)==null||e.remove(),(t=this._sliderLeftInputElm)==null||t.remove(),(i=this._sliderRightInputElm)==null||i.remove()}renderSliderValues(e,t,i=!0){var o,a;const s=(e==null?void 0:e.toString())||"",r=(t==null?void 0:t.toString())||"";(o=this._leftSliderNumberElm)!=null&&o.textContent&&(this._leftSliderNumberElm.textContent=s),(a=this._rightSliderNumberElm)!=null&&a.textContent&&(this._rightSliderNumberElm.textContent=r),this._sliderRangeContainElm.title=this.sliderType==="double"?`${s} - ${r}`:`${r}`,i&&this.grid.onHeaderRowMouseLeave.notify({column:this.columnDef,grid:this.grid})}getValues(){return this.sliderType==="double"?this._currentValues:this._currentValue}setValues(e,t,i=!1){var o;if(e){let a=[];const l=Array.isArray(e)?e==null?void 0:e[0]:e;if(Array.isArray(e)&&e.length===2?a=e:typeof l=="string"&&l.indexOf("..")>0?(a=l.split(".."),this._currentValue=+((a==null?void 0:a[0])??0)):(Le(l)||l==="")&&(this._currentValue=l===null?void 0:+l,a=[l]),this.sliderType!=="double"&&this._sliderRightInputElm)this._sliderRightInputElm.value=typeof e=="string"?e:`${l}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(a)&&a.length===2&&!((o=this.filterOptions)!=null&&o.hideSliderNumbers)){const[c,h]=a;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(c??se.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(h??se.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...a)}}else this._currentValue=void 0,this._currentValues=void 0;const s=this.getValues(),r=s===void 0?[]:Array.isArray(s)?s:[s];if(this.updateFilterStyle(r.length>0),t!==void 0&&(this.operator=t),this.operator&&this._selectOperatorElm){const a=Lc(this.operator);this._selectOperatorElm.value=a}i&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:r,shouldTriggerQuery:!0})}createDomFilterElement(e){var d,u,p,f,g;const t=((d=this.columnDef)==null?void 0:d.id)??"",i=+(this.columnFilter.minValue??se.SLIDER_DEFAULT_MIN_VALUE),s=+(this.columnFilter.maxValue??se.SLIDER_DEFAULT_MAX_VALUE),r=+(this.columnFilter.valueStep??se.SLIDER_DEFAULT_STEP);tt(this._argFilterContainerElm);const o=+((Array.isArray(e)&&(e==null?void 0:e[0]))??((u=this.filterOptions)==null?void 0:u.sliderStartValue)??i),a=+((Array.isArray(e)&&(e==null?void 0:e[1]))??((p=this.filterOptions)==null?void 0:p.sliderEndValue)??s);if(this._sliderRangeContainElm=I("div",{className:`filter-input filter-${t} slider-input-container slider-values`,title:this.sliderType==="double"?`${o} - ${a}`:`${o}`}),this._sliderTrackElm=I("div",{className:"slider-track"}),this.sliderType==="compound"){const m=I("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=$_(this.getOperatorOptionValues(),this.grid),m.appendChild(this._selectOperatorElm)}this.sliderType==="double"&&(this._sliderLeftInputElm=I("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${eu(t+"")} Search Filter`,defaultValue:`${o}`,value:`${o}`,min:`${i}`,max:`${s}`,step:`${r}`}));const l=this.sliderType==="double"?a:o;this._sliderRightInputElm=I("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${eu(t+"")} Search Filter`,defaultValue:`${l}`,value:`${l}`,min:`${i}`,max:`${s}`,step:`${r}`});const c=((f=this.filterOptions)==null?void 0:f.hideSliderNumber)??((g=this.filterOptions)==null?void 0:g.hideSliderNumbers),h=c?"":"input-group";if(this._divContainerFilterElm=I("div",{className:`${h} search-filter slick-filter slider-container slider-values filter-${t}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),this.sliderType==="double"&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),c)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let m;this.sliderType==="compound"&&this._selectOperatorElm?(m=I("span",{className:"input-group-addon input-group-prepend operator"}),m.appendChild(this._selectOperatorElm)):this.sliderType==="double"&&(m=I("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=I("span",{className:`input-group-text lowest-range-${t}`,textContent:`${o}`}),m.appendChild(this._leftSliderNumberElm));const _=I("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=I("span",{className:`input-group-text highest-range-${t}`,textContent:`${l}`},_),m&&this._divContainerFilterElm.appendChild(m),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(_)}return this._sliderOptions={minValue:i,maxValue:s,step:r},this._currentValues=[o,a],Array.isArray(e)&&e.length>0&&e[0]!==""&&(this.updateFilterStyle(!0),this._currentValue=o),(this.filterOptions.sliderStartValue!==void 0||this.columnFilter.minValue!==void 0)&&(this._currentValue=o),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),this.sliderType==="compound"&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):this.sliderType==="double"&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){let e;return this.columnFilter.compoundOperatorList?e=this.columnFilter.compoundOperatorList:e=H_(this.gridOptions,this.translaterService),B_(this.gridOptions,e,"numeric"),e}onValueChanged(e){var r,o,a,l,c;const t=parseInt(((r=this._sliderRightInputElm)==null?void 0:r.value)??"",10);let i,s;if(this.sliderType==="compound"||this.sliderType==="single")((a=(o=e==null?void 0:e.target)==null?void 0:o.tagName)==null?void 0:a.toLowerCase())!=="select"&&(this._currentValue=+t),i=this._currentValue,s=[i||"0"];else if(this.sliderType==="double"){const d=[parseInt(((l=this._sliderLeftInputElm)==null?void 0:l.value)??"",10),t];i=d.join(".."),s=d}if(this._clearFilterTriggered)this.updateFilterStyle(!1),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const h=((c=this._selectOperatorElm)==null?void 0:c.value)??this.operator;this.updateFilterStyle(i!=="");const d=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,u=d&&Le(this._currentValue)||!Le(this._currentValue)&&Le(this._lastSearchValue);(this.sliderType!=="compound"||!d||u)&&this.callback(e,{columnDef:this.columnDef,operator:h||"",searchTerms:s,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new Ot(e)),this._lastSearchValue=i}changeBothSliderFocuses(e){var i,s;const t=e?"add":"remove";(i=this._sliderLeftInputElm)==null||i.classList[t]("focus"),(s=this._sliderRightInputElm)==null||s.classList[t]("focus")}slideLeftInputChanged(e){var s,r,o,a;const t=parseInt(((s=this._sliderLeftInputElm)==null?void 0:s.value)??"",10),i=parseInt(((r=this._sliderRightInputElm)==null?void 0:r.value)??"",10);this._sliderLeftInputElm&&i-t<=(((o=this.filterOptions)==null?void 0:o.stopGapBetweenSliderHandles)??Yh)&&(this._sliderLeftInputElm.value=String(t-(((a=this.filterOptions)==null?void 0:a.stopGapBetweenSliderHandles)??Yh))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-jz?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(e,"left",t,i)}slideRightInputChanged(e){var s,r,o,a;const t=parseInt(((s=this._sliderLeftInputElm)==null?void 0:s.value)??"",10),i=parseInt(((r=this._sliderRightInputElm)==null?void 0:r.value)??"",10);this.sliderType==="double"&&this._sliderRightInputElm&&i-t<=(((o=this.filterOptions)==null?void 0:o.stopGapBetweenSliderHandles)??Yh)&&(this._sliderRightInputElm.value=String(t+(((a=this.filterOptions)==null?void 0:a.stopGapBetweenSliderHandles)??Yh))),this.sliderLeftOrRightChanged(e,"right",t,i)}sliderLeftOrRightChanged(e,t,i,s){var a,l,c,h,d,u;let r=!0;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title=this.sliderType==="double"?`${i} - ${s}`:`${s}`,this.sliderType==="double"&&this._sliderLeftInputElm&&this._sliderRightInputElm&&(t==="left"&&i>s?(this._sliderLeftInputElm.value=`${s}`,r=!1):t==="right"&&i>s&&(this._sliderRightInputElm.value=`${i}`,r=!1)),(((a=this.filterOptions)==null?void 0:a.hideSliderNumber)??((l=this.filterOptions)==null?void 0:l.hideSliderNumbers))||((c=this._leftSliderNumberElm)!=null&&c.textContent&&(this._leftSliderNumberElm.textContent=((h=this._sliderLeftInputElm)==null?void 0:h.value)??""),(d=this._rightSliderNumberElm)!=null&&d.textContent&&(this._rightSliderNumberElm.textContent=((u=this._sliderRightInputElm)==null?void 0:u.value)??"")),r&&this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new Ot(e))}sliderTrackClicked(e){e.preventDefault();const t=e.offsetX,i=this._sliderTrackElm.offsetWidth,s=(t+0)*100/i;this._sliderRightInputElm&&this.sliderType!=="double"?(this._sliderRightInputElm.value=`${s}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(s<=50?(this._sliderLeftInputElm.value=`${s}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${s}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){var e,t,i,s;if((e=this.filterOptions)!=null&&e.enableSliderTrackColoring&&this._sliderRightInputElm){let r=0;this._sliderLeftInputElm&&(r=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/(((t=this.sliderOptions)==null?void 0:t.maxValue)??0-+this._sliderLeftInputElm.min)*100);const o=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/(((i=this.sliderOptions)==null?void 0:i.maxValue)??0-+this._sliderRightInputElm.min)*100,a="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,((s=this.filterOptions)==null?void 0:s.sliderTrackFilledColor)||this._sliderTrackFilledColor||Af).replace(/%p1/g,`${r}%`).replace(/%p2/g,`${o}%`);this._sliderTrackElm.style.background=a,this._sliderOptions.sliderTrackBackground=a}}updateFilterStyle(e){var t,i;e?(this._divContainerFilterElm.classList.add("filled"),(t=this._filterElm)==null||t.classList.add("filled")):(this._divContainerFilterElm.classList.remove("filled"),(i=this._filterElm)==null||i.classList.remove("filled"))}}class Kz extends J_{constructor(e){super(e),this.translaterService=e,this.sliderType="compound"}}class Yz extends WA{constructor(e){super(e),this.translaterService=e,this.inputFilterType="range"}}var qz=Object.defineProperty,Xz=(n,e,t)=>e in n?qz(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pe=(n,e,t)=>Xz(n,typeof e!="symbol"?e+"":e,t),Qz=class{constructor(n){pe(this,"_distinctEvent"),pe(this,"_boundedEvents",[]),this._distinctEvent=(n==null?void 0:n.distinctEvent)??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(n,e,t,i,s=""){let r=Array.isArray(e)?e:[e];if(typeof(n==null?void 0:n.forEach)=="function")n.forEach(o=>{for(let a of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(o,a))&&(o.addEventListener(a,t,i),this._boundedEvents.push({element:o,eventName:a,listener:t,groupName:s}))});else for(let o of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(n,o))&&(n.addEventListener(o,t,i),this._boundedEvents.push({element:n,eventName:o,listener:t,groupName:s}))}hasBinding(n,e){return this._boundedEvents.some(t=>t.element===n&&(!e||t.eventName===e))}unbind(n,e,t){var i;if(n){let s=Array.isArray(n)?n:[n],r=Array.isArray(e)?e||"":[e||""];for(let o of s){t||(t=this._boundedEvents.find(a=>{if(a.element===o&&(!e||a.eventName===e))return a.listener}));for(let a of r)(i=o==null?void 0:o.removeEventListener)==null||i.call(o,a,t)}}}unbindAll(n){if(n){let e=Array.isArray(n)?n:[n];for(let t=this._boundedEvents.length-1;t>=0;--t){let i=this._boundedEvents[t];if(e.some(s=>s===i.groupName)){let{element:s,eventName:r,listener:o}=i;this.unbind(s,r,o),this._boundedEvents.splice(t,1)}}}else for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:t,eventName:i,listener:s}=e;this.unbind(t,i,s)}}},sI=typeof window<"u"&&window.multipleSelect!==void 0?window.multipleSelect:{locales:{}},Zz={formatSelectAll(){return"[Select all]"},formatAllSelected(){return"All selected"},formatCountSelected(n,e){return`${n} of ${e} selected`},formatNoMatchesFound(){return"No matches found"},formatOkButton(){return"OK"}};sI.locales["en-US"]=Zz;var nI=sI.locales,Jz=50,eW=4,rI={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(n){let{text:e,label:t,search:i}=n;return(t||e||"").includes(i)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,navigationHighlight:!0,infiniteScroll:!1,virtualScroll:!0,cssStyler:()=>null,textTemplate:n=>n.innerHTML.trim(),labelTemplate:n=>n.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onFilterClear:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1},tW=["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"];Object.assign(rI,nI["en-US"]);var iW={BLOCK_ROWS:Jz,CLUSTER_BLOCKS:eW,DEFAULTS:rI,METHODS:tW},ks=iW;function sW(n,e,t=!1){let i=Object.keys(n),s=Object.keys(e);if(t&&i.length!==s.length)return!1;for(let r of i)if(s.includes(r)&&n[r]!==e[r])return!1;return!0}function qg(n){let e=()=>{let s={};for(let r in n)Object.prototype.hasOwnProperty.call(n,r)&&(s[r]=qg(n[r]));return s},t=()=>n.map(s=>qg(s)),i=Object.prototype.toString.call(n).slice(8,-1).toLowerCase();return i==="object"?e():i==="array"?t():n}function If(n){return n!=null&&n!==""}function nW(n,e){return typeof n=="object"?Object.fromEntries(e?Object.entries(n).filter(([t,i])=>!If(i)&&!e.includes(t)||If(i)):Object.entries(n).filter(([t,i])=>If(i))):n}function rW(n){let e=0;return n.forEach((t,i)=>{t.type==="optgroup"?(t._key=`group_${i}`,t.visible=typeof t.visible>"u"?!0:t.visible,t.children.forEach((s,r)=>{s&&(s.visible=typeof(s==null?void 0:s.visible)>"u"?!0:s.visible,s.divider||(s._key=`option_${i}_${r}`,e+=1))})):(t.visible=typeof t.visible>"u"?!0:t.visible,t.divider||(t._key=`option_${i}`,e+=1))}),e}function qh(n,e,t){if(Array.isArray(n))for(let i of n){if(i[e]===t||i[e]===`${+i[e]}`&&+i[e]===t)return i;if(i.type==="optgroup"){for(let s of i.children)if(s&&(s[e]===t||s[e]===`${+s[e]}`&&+s[e]===t))return s}}}function oW(n){return n.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,"")}function Rf(n){return Object.keys(n).forEach(e=>n[e]===void 0?delete n[e]:""),n}function ra(n,e){if(typeof n!="string")return n;if(typeof e=="function")return e(n);if(typeof n.normalize=="function")return n.normalize("NFD").replace(/[\u0300-\u036F]/g,"");throw new Error("[Multiple-Select-Vanilla] `normalize()` function is not defined, you can optionally provide a custom parser via the `diacriticParser` option.")}function Of(n){let e=0,t=0,i=0,s=0,r=window.innerHeight??0,o=window.innerWidth??0,a=cW(),l=a.top,c=a.left,h=Qg(n);if(h){let d=h.top??0,u=h.left??0;t=d-l,e=r-(d-l),i=u-c,s=o-(u-c)}return{top:t,bottom:e,left:i,right:s}}function xf(n=""){return n.split(" ").filter(e=>e)}function di(n,e,t){let i=document.createElement(n);return e&&Object.keys(e).forEach(s=>{let r=e[s];typeof r=="object"?Object.assign(i[s],r):i[s]=e[s]}),t!=null&&t.appendChild&&t.appendChild(i),i}function oI(n,e,t){var r;let i=(r=n.props)!=null&&r.innerHTML?lW(n.props,"innerHTML"):n.props,s=di(n.tagName,nW(i,["className","title","style"]),e);if(n.props.innerHTML&&(s.innerHTML=n.props.innerHTML),n.attrs)for(let o of Object.keys(n.attrs))s.setAttribute(o,n.attrs[o]);if(n.children)for(let o of n.children)oI(o,s);return e==null||e.appendChild(s),s}function Xg(n){return n.hasOwnProperty("tagName")?oI(n):document.createElement("li")}function Td(n){for(;n!=null&&n.firstChild;)n.lastChild&&n.removeChild(n.lastChild);return n}function Qg(n){var o;if(!n)return;let e=(o=n==null?void 0:n.getBoundingClientRect)==null?void 0:o.call(n),t=0,i=0,s=0,r=0;return(e==null?void 0:e.top)!==void 0&&e.left!==void 0&&(t=e.top+window.pageYOffset,i=e.left+window.pageXOffset,r=e.right,s=e.bottom),{top:t,left:i,bottom:s,right:r}}function Xh(n,e,t){if(!n)return 0;let i=Number.parseFloat(n.style[t]);if(!i||Number.isNaN(i)){switch(e){case"outer":i=n[t==="width"?"offsetWidth":"offsetHeight"];break;case"scroll":i=n[t==="width"?"scrollWidth":"scrollHeight"];break;case"inner":default:i=n[t==="width"?"clientWidth":"clientHeight"];break}i=n.getBoundingClientRect()[t]}if(!i||Number.isNaN(i)){let s=n.style.display,r=n.style.position;n.style.display="block",n.style.position="absolute";let o=window.getComputedStyle(n)[t];i=Number.parseFloat(o),Number.isNaN(i)&&(i=0),n.style.display=s,n.style.position=r}return i||0}function ny(n,e){let t=null,i=n==null?void 0:n.parentElement;for(;i;){let[s,r,o,a]=e.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(o&&a)for(let l of a.replace(o,"").split(" "))i.classList.contains(l)&&(r?(i==null?void 0:i.tagName.toLowerCase())===r&&(t=i):t=i);i=i.parentElement}return t}function aW(n,e){var t;(t=n.parentNode)==null||t.insertBefore(e,n.nextSibling)}function lW(n,e){let{[e]:t,...i}=n;return i}function ry(n,e){n!=null&&n.style&&(n.style.display=n.style.display==="none"&&e!==!1||e===!0?"block":"none")}function cW(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}var hW=class{constructor(n){var t;pe(this,"clusterRows"),pe(this,"cache"),pe(this,"scrollEl"),pe(this,"blockHeight"),pe(this,"clusterHeight"),pe(this,"contentEl"),pe(this,"parentEl"),pe(this,"itemHeight"),pe(this,"lastCluster"),pe(this,"scrollTop"),pe(this,"dataStart"),pe(this,"dataEnd"),pe(this,"rows"),pe(this,"destroy"),pe(this,"callback"),pe(this,"sanitizer"),this.rows=n.rows,this.scrollEl=n.scrollEl,this.contentEl=n.contentEl,this.parentEl=(t=n.contentEl)==null?void 0:t.parentElement,this.callback=n.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let e=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",e,!1),this.destroy=()=>{this.scrollEl.removeEventListener("scroll",e,!1),Td(this.contentEl)}}reset(n){this.lastCluster=0,this.cache={},Td(this.contentEl),this.initDOM(n)}initDOM(n){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let r=Xg(n[0]);this.contentEl.appendChild(r),this.contentEl.appendChild(r),this.contentEl.appendChild(r),this.cache.data=[n[0]],this.getRowsHeight()}let e=this.initData(n,this.getNum()),t=this.checkChanges("data",e.rows),i=this.checkChanges("top",e.topOffset),s=this.checkChanges("bottom",e.bottomOffset);Td(this.contentEl),t&&i?(e.topOffset&&this.contentEl.appendChild(this.getExtra("top",e.topOffset)),e.rows.forEach(r=>this.contentEl.appendChild(Xg(r))),e.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",e.bottomOffset))):s&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${e.bottomOffset}px`)}getRowsHeight(){var n;if(typeof this.itemHeight>"u"){let e=((n=this.parentEl)==null?void 0:n.style.display)||"";this.parentEl&&(e===""||e==="none")&&(this.parentEl.style.display="block");let t=this.contentEl.children,i=t[Math.floor(t.length/2)];this.itemHeight=i.offsetHeight,this.parentEl&&(this.parentEl.style.display=e)}this.blockHeight=this.itemHeight*ks.BLOCK_ROWS,this.clusterRows=ks.BLOCK_ROWS*ks.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*ks.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let n=(this.clusterHeight||0)-(this.blockHeight||0);return n&&Math.floor(this.scrollTop/n)||0}initData(n,e){if(n.length<ks.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:n};let t=Math.max((this.clusterRows-ks.BLOCK_ROWS)*e,0),i=t+this.clusterRows,s=Math.max(t*this.itemHeight,0),r=Math.max((n.length-i)*this.itemHeight,0),o=[],a=t;s<1&&a++;for(let l=t;l<i;l++)n[l]&&o.push(n[l]);return this.dataStart=t,this.dataEnd=i,{topOffset:s,bottomOffset:r,rowsAbove:a,rows:o}}checkChanges(n,e){let t=e!==this.cache[n];return this.cache[n]=e,t}getExtra(n,e){let t=document.createElement("li");return t.className=`virtual-scroll-${n}`,e&&(t.style.height=`${e}px`),t}},Rl=".ms-select-all, ul li[data-key]",dW=".ms-select-all.highlighted, ul li[data-key].highlighted",uW=class{constructor(n,e){this.elm=n,pe(this,"_bindEventService"),pe(this,"isAllSelected",!1),pe(this,"isPartiallyAllSelected",!1),pe(this,"fromHtml",!1),pe(this,"choiceElm"),pe(this,"selectClearElm"),pe(this,"closeElm"),pe(this,"clearSearchIconElm"),pe(this,"filterText",""),pe(this,"updateData",[]),pe(this,"data",[]),pe(this,"dataTotal"),pe(this,"dropElm"),pe(this,"okButtonElm"),pe(this,"filterParentElm"),pe(this,"lastFocusedItemKey",""),pe(this,"lastMouseOverPosition",""),pe(this,"ulElm"),pe(this,"parentElm"),pe(this,"labelElm"),pe(this,"selectAllParentElm"),pe(this,"selectAllElm"),pe(this,"searchInputElm"),pe(this,"selectGroupElms"),pe(this,"selectItemElms"),pe(this,"noResultsElm"),pe(this,"options"),pe(this,"selectAllName",""),pe(this,"selectGroupName",""),pe(this,"selectItemName",""),pe(this,"scrolledByMouse",!1),pe(this,"openDelayTimer"),pe(this,"updateDataStart"),pe(this,"updateDataEnd"),pe(this,"virtualScroll"),pe(this,"_currentHighlightIndex",-1),pe(this,"_currentSelectedElm"),pe(this,"isMoveUpRecalcRequired",!1),pe(this,"locales",{}),this.options=Object.assign({},ks.DEFAULTS,this.elm.dataset,e),this._bindEventService=new Qz({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(n=!0){var e,t,i,s,r;this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:n}),n&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),(e=this.virtualScroll)==null||e.destroy(),(t=this.dropElm)==null||t.remove(),this.dropElm=void 0,(i=this.parentElm.parentNode)==null||i.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:n}),n&&((r=(s=this.options).onAfterHardDestroy)==null||r.call(s),Object.keys(this.options).forEach(o=>delete this[o])))}initLocale(){if(this.options.locale){if(typeof this.options.locale=="object"){Object.assign(this.options,this.options.locale);return}let n=window.multipleSelect.locales,e=this.options.locale.split(/-|_/);if(e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),n[this.options.locale])Object.assign(this.options,n[this.options.locale]);else if(n[e.join("-")])Object.assign(this.options,n[e.join("-")]);else if(n[e[0]])Object.assign(this.options,n[e[0]]);else throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`)}}initContainer(){var i;let n=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),(i=this.labelElm)!=null&&i.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=di("div",{className:xf(`ms-parent ${this.elm.className||""} ${this.options.classes}`).join(" "),dataset:{test:"sel"}}),this.options.darkMode&&this.parentElm.classList.add("ms-dark-mode");let e=this.elm.getAttribute("title")||"";e&&(this.parentElm.title=e),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.choiceElm=di("button",{className:"ms-choice",type:"button"},this.parentElm),this.options.labelId&&(this.choiceElm.id=this.options.labelId,this.choiceElm.setAttribute("aria-labelledby",this.options.labelId)),this.choiceElm.appendChild(di("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&(this.selectClearElm=di("div",{className:"ms-icon ms-icon-close"}),this.selectClearElm.style.display="none",this.choiceElm.appendChild(this.selectClearElm)),this.choiceElm.appendChild(di("div",{className:"ms-icon ms-icon-caret"})),this.dropElm=di("div",{className:`ms-drop ${this.options.position}`,ariaExpanded:"false"},this.parentElm),this.options.darkMode&&this.dropElm.classList.add("ms-dark-mode"),n&&(this.dropElm.dataset.name=n);let t=this.elm.getAttribute("data-test")||this.options.dataTest;t&&(this.parentElm.dataset.test=t,this.dropElm.dataset.test=t),this.closeElm=this.choiceElm.querySelector(".ms-icon-close"),this.options.dropWidth&&(this.dropElm.style.width=typeof this.options.dropWidth=="string"?this.options.dropWidth:`${this.options.dropWidth}px`),aW(this.elm,this.parentElm),this.elm.disabled&&(this.choiceElm.classList.add("disabled"),this.choiceElm.disabled=!0),this.selectAllName=`selectAll${n}`,this.selectGroupName=`selectGroup${n}`,this.selectItemName=`selectItem${n}`,this.options.keepOpen||(this._bindEventService.unbindAll("body-click"),this._bindEventService.bind(document.body,"click",s=>{this.getEventTarget(s)===this.choiceElm||ny(this.getEventTarget(s),".ms-choice")===this.choiceElm||(this.getEventTarget(s)===this.dropElm||ny(this.getEventTarget(s),".ms-drop")!==this.dropElm&&this.getEventTarget(s)!==this.elm)&&this.options.isOpen&&this.close("body.click")},void 0,"body-click"))}initData(){let n=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(e=>typeof e=="string"||typeof e=="number"?{text:e,value:e}:e);else if(typeof this.options.data=="object"){for(let[e,t]of Object.entries(this.options.data))n.push({value:e,text:`${t}`});this.data=n}}else this.elm.childNodes.forEach(e=>{let t=this.initRow(e);t&&n.push(t)}),this.options.data=n,this.data=n,this.fromHtml=!0;this.dataTotal=rW(this.data||[])}initRow(n,e){var i,s;let t={};return((i=n.tagName)==null?void 0:i.toLowerCase())==="option"?(t.type="option",t.text=this.options.textTemplate(n),t.value=n.value,t.visible=!0,t.selected=!!n.selected,t.disabled=e||n.disabled,t.classes=n.getAttribute("class")||"",t.title=n.getAttribute("title")||"",n.dataset.value&&(t._value=n.dataset.value),Object.keys(n.dataset).length&&(t._data=n.dataset,t._data.divider&&(t.divider=t._data.divider)),t):((s=n.tagName)==null?void 0:s.toLowerCase())==="optgroup"?(t.type="optgroup",t.label=this.options.labelTemplate(n),t.visible=!0,t.selected=!!n.selected,t.disabled=n.disabled,t.children=[],Object.keys(n.dataset).length&&(t._data=n.dataset),n.childNodes.forEach(r=>{t.children.push(this.initRow(r,t.disabled))}),t):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close("hover.mouseout")))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let n=0;for(let e of this.data||[])e.type==="optgroup"?n+=e.children.length:n+=1;this.options.filter=n>this.options.filterByDataLength}initList(){var n,e;if(this.options.filter&&(this.filterParentElm=di("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(di("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"🔎︎"})),this.options.showSearchClear&&this.filterParentElm.appendChild(di("span",{className:"ms-icon ms-icon-close"}))),this.options.selectAll&&!this.options.single){let t=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=di("div",{className:"ms-select-all",dataset:{key:"select_all"}});let i=document.createElement("label"),s=`ms-icon ${this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck"}`,r=di("div",{className:"icon-checkbox-container"},i);di("input",{type:"checkbox",ariaChecked:String(this.isAllSelected),checked:this.isAllSelected,dataset:{name:`selectAll${t}`}},r),di("div",{className:s},r),i.appendChild(di("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(i),(n=this.dropElm)==null||n.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.ulElm.role="combobox",this.ulElm.ariaExpanded="false",this.ulElm.ariaMultiSelectable=String(!this.options.single),(e=this.dropElm)==null||e.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=di("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){var t;let n=0,e=this.getListRows();if(this.options.selectAll&&!this.options.single&&(n=-1),e.length>ks.BLOCK_ROWS*ks.CLUSTER_BLOCKS){let i=this.dropElm&&((t=this.dropElm)==null?void 0:t.style.display)!=="none";!i&&this.dropElm&&(this.dropElm.style.left="-10000",this.dropElm.style.display="block",this.dropElm.ariaExpanded="true");let s=()=>{if(this.virtualScroll){this._currentHighlightIndex=0,this.updateDataStart=this.virtualScroll.dataStart+n,this.updateDataEnd=this.virtualScroll.dataEnd+n,this.updateDataStart<0&&(this.updateDataStart=0,this._currentHighlightIndex=0);let r=this.getDataLength();this.updateDataEnd>r&&(this.updateDataEnd=r),this.ulElm&&(this.isMoveUpRecalcRequired?this.recalculateArrowMove("up"):this.virtualScroll.dataStart>this.updateDataStart&&this.recalculateArrowMove("down"))}};this.ulElm&&(this.virtualScroll?this.virtualScroll.reset(e):this.virtualScroll=new hW({rows:e,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{s(),this.events()}})),s(),!i&&this.dropElm&&(this.dropElm.style.left="0",this.dropElm.style.display="none",this.dropElm.ariaExpanded="false")}else this.ulElm&&(Td(this.ulElm),e.forEach(i=>this.ulElm.appendChild(Xg(i)))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length;return this.events(),e}getEventTarget(n){return n.composedPath?n.composedPath()[0]:n.target}getListRows(){var e;let n=[];return this.updateData=[],(e=this.data)==null||e.forEach(t=>n.push(...this.initListItem(t))),this.options.infiniteScroll&&n.push({tagName:"li",props:{className:"ms-infinite-option",role:"option"}}),n.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound()}}),n}initListItem(n,e=0){let t=(n==null?void 0:n.title)||"",i=this.options.multiple?"multiple":"",s=this.options.single?"radio":"checkbox",r=!!(n!=null&&n.selected),o=this.options.single&&!this.options.singleRadio,a="";if(!(n!=null&&n.visible))return[];if(this.updateData.push(n),o&&(a="hide-radio "),n.selected&&(a+="selected "),n.type==="optgroup"){let g=[],m;if(this.options.hideOptgroupCheckboxes||this.options.single)m={tagName:"span",props:{dataset:{name:this.selectGroupName,key:n._key}}};else{let v={tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:n._key},checked:r,disabled:n.disabled}};o?m=v:m={tagName:"div",props:{className:`icon-checkbox-container${s==="radio"?" radio":""}`},children:[v,{tagName:"div",props:{className:`ms-icon ${r?s==="radio"?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck"}`}}]}}!a.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(a+="hide-radio ");let _={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(_.props,n.label);let b={tagName:"li",props:{className:xf(`group${this.options.single||n.disabled?" disabled":""} ${a}`).join(" "),role:"option",ariaSelected:String(r),dataset:{key:n._key}},children:[{tagName:"label",props:{className:xf(`optgroup${this.options.single||n.disabled?" disabled":""}`).join(" ")},children:[m,_]}]},C=this.options.cssStyler(n);return C&&(b.props.style=C),g.push(b),n.children.forEach(v=>g.push(...this.initListItem(v,1))),g}if(a+=n.classes||"",e&&this.options.single&&(a+=`option-level-${e} `),n.divider)return[{tagName:"li",props:{className:"option-divider"}}];let l=i||a?(i+a).trim():"";n.disabled&&(l+=" disabled");let c=`${n.disabled?"disabled":""}`,h={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(h.props,n.text);let d={tagName:"input",props:{type:s,value:encodeURI(n.value),dataset:{key:n._key,name:this.selectItemName},checked:r,disabled:!!n.disabled}};n.selected&&(d.attrs={checked:"checked"});let u={tagName:"div",props:{className:`icon-checkbox-container${s==="radio"?" radio":""}`},children:[d,{tagName:"div",props:{className:`ms-icon ${d.props.checked?s==="radio"?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck"}`}}]},p={tagName:"li",props:{role:"option",title:t,ariaSelected:String(r),dataset:{key:n._key}},children:[{tagName:"label",props:{className:c},children:[o?d:u,h]}]};l&&(p.props.className=l);let f=this.options.cssStyler(n);return f&&(p.props.style=f),[p]}initSelected(n=!1){var t,i;let e=0;for(let s of this.data||[])if(s.type==="optgroup"){let r=s.children.filter(o=>(o==null?void 0:o.selected)&&!o.disabled&&o.visible).length;s.children.length&&(s.selected=!this.options.single&&r&&r===s.children.filter(o=>o&&!o.disabled&&o.visible&&!o.divider).length),e+=r}else e+=s.selected&&!s.disabled&&s.visible?1:0;this.isAllSelected=((t=this.data)==null?void 0:t.filter(s=>s.selected&&!s.disabled&&s.visible).length)===((i=this.data)==null?void 0:i.filter(s=>!s.disabled&&s.visible&&!s.divider).length),this.isPartiallyAllSelected=!this.isAllSelected&&e>0,n||(this.isAllSelected?this.options.onCheckAll():e===0&&this.options.onUncheckAll())}initView(){let n;window.getComputedStyle?(n=window.getComputedStyle(this.elm).width,n==="auto"&&(n=Xh(this.dropElm,"outer","width")+20)):n=Xh(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||n}px`,this.elm.classList.add("ms-offscreen")}events(){var e,t,i,s,r,o,a;this._bindEventService.unbindAll(["ok-button","search-input","select-all-checkbox","input-checkbox-list","group-checkbox-list","hover-highlight","arrow-highlight","option-list-scroll"]),this.clearSearchIconElm=(e=this.filterParentElm)==null?void 0:e.querySelector(".ms-icon-close"),this.searchInputElm=(t=this.dropElm)==null?void 0:t.querySelector(".ms-search input"),this.selectAllElm=(i=this.dropElm)==null?void 0:i.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=(s=this.dropElm)==null?void 0:s.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=(r=this.dropElm)==null?void 0:r.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.noResultsElm=(o=this.dropElm)==null?void 0:o.querySelector(".ms-no-results");let n=l=>{l.preventDefault(),!this.getEventTarget(l).classList.contains("ms-icon-close")&&(this.options.isOpen?this.close("toggle.close"):this.open())};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",l=>{this.getEventTarget(l).nodeName.toLowerCase()==="label"&&(n(l),(!this.options.filter||!this.options.isOpen)&&this.focus(),l.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",n),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",l=>{l.code==="Escape"&&this.handleEscapeKey()}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",l=>{l.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.clearSearchIconElm&&this._bindEventService.bind(this.clearSearchIconElm,"click",l=>{l.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this._currentHighlightIndex=-1,this.moveHighlightDown(),this.filter(),this.options.onFilterClear()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",l=>{l.code==="Tab"&&l.shiftKey&&this.close("key.shift+tab")},void 0,"search-input"),this._bindEventService.bind(this.searchInputElm,"keyup",l=>{var c,h,d;if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(l.code)&&((c=this.searchInputElm)!=null&&c.value)){if(this.options.single){let u=[];(h=this.selectItemElms)==null||h.forEach(p=>{var f;((f=p.closest("li"))==null?void 0:f.style.display)!=="none"&&u.push(p)}),u.length&&u[0].hasAttribute("data-name")&&this.setSelects([u[0].value])}else(d=this.selectAllElm)==null||d.click();this.close(`key.${l.code.toLowerCase()}`),this.focus();return}this.filter()},void 0,"search-input")),this.selectAllElm&&this._bindEventService.bind(this.selectAllElm,"click",l=>{var c;return this._checkAll((c=l.currentTarget)==null?void 0:c.checked)},void 0,"select-all-checkbox"),this.okButtonElm&&this._bindEventService.bind(this.okButtonElm,"click",l=>{n(l),l.stopPropagation()},void 0,"ok-button"),this.selectGroupElms&&this._bindEventService.bind(this.selectGroupElms,"click",l=>{let c=l.currentTarget,h=c.checked,d=qh(this.data,"_key",c.dataset.key);this._checkGroup(d,h),this.options.onOptgroupClick(Rf({label:d.label,selected:d.selected,data:d._data,children:d.children.map(u=>{if(u)return Rf({text:u.text,value:u.value,selected:u.selected,disabled:u.disabled,data:u._data})})}))},void 0,"group-checkbox-list"),this.selectItemElms&&this._bindEventService.bind(this.selectItemElms,"click",l=>{let c=l.currentTarget,h=c.checked,d=qh(this.data,"_key",c.dataset.key),u=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close("selection")};if(this.options.onBeforeClick(d)===!1){u();return}this._check(d,h),this.options.onClick(Rf({text:d.text,value:d.value,selected:d.selected,data:d._data})),u()},void 0,"input-checkbox-list"),this.lastFocusedItemKey&&this.dropElm&&((a=this.dropElm.querySelector(`li[data-key=${this.lastFocusedItemKey}]`))==null||a.focus()),this.options.navigationHighlight&&this.dropElm&&(this._bindEventService.bind(this.dropElm,"mouseover",l=>{var h,d;let c=this.getEventTarget(l).closest(".ms-select-all")||this.getEventTarget(l).closest("li");if((h=this.dropElm)!=null&&h.contains(c)&&this.lastMouseOverPosition!==`${l.clientX}:${l.clientY}`){let u=((d=this.dropElm)==null?void 0:d.querySelectorAll(Rl))||[],p=Array.from(u).findIndex(f=>f.dataset.key===c.dataset.key);this._currentHighlightIndex!==p&&!c.classList.contains("disabled")&&(this._currentSelectedElm=c,this._currentHighlightIndex=p,this.changeCurrentOptionHighlight(c))}this.lastMouseOverPosition=`${l.clientX}:${l.clientY}`},void 0,"hover-highlight"),this._bindEventService.bind(this.dropElm,"keydown",l=>{var c,h,d,u;switch(l.key){case"ArrowUp":l.preventDefault(),this.moveHighlightUp();break;case"ArrowDown":l.preventDefault(),this.moveHighlightDown();break;case"Escape":this.handleEscapeKey();break;case"Enter":case" ":{if(document.activeElement!==this.okButtonElm){let p=this.getEventTarget(l).closest(".ms-select-all")||this.getEventTarget(l).closest("li");if(l.key===" "&&this.options.filter||this.options.filterAcceptOnEnter&&!p)return;l.preventDefault(),(h=(c=this._currentSelectedElm)==null?void 0:c.querySelector("input"))==null||h.click(),this.options.single&&(this.choiceElm.focus(),this.lastFocusedItemKey=((d=this.choiceElm)==null?void 0:d.dataset.key)||"")}break}case"Tab":{l.preventDefault(),l.shiftKey?document.activeElement===this.okButtonElm?(this.focusSelectAllOrList(),this.highlightCurrentOption()):(this.close("key.shift+tab"),this.choiceElm.focus()):(this.changeCurrentOptionHighlight(),(u=this.okButtonElm)==null||u.focus());break}}},void 0,"arrow-highlight")),this.ulElm&&this.options.infiniteScroll&&this._bindEventService.bind(this.ulElm,"scroll",this.infiniteScrollHandler.bind(this),void 0,"option-list-scroll")}handleEscapeKey(){this.options.keepOpen||(this.close("key.escape"),this.choiceElm.focus())}infiniteScrollHandler(n,e,t){let i=!1;n&&this.getEventTarget(n)&&this.ulElm&&this.scrolledByMouse?this.getEventTarget(n).scrollTop+this.getEventTarget(n).clientHeight===this.ulElm.scrollHeight&&(i=!0):e!==void 0&&e+1===t&&(i=!0),i&&this.ulElm&&(this.virtualScroll?this.initListItems():this.ulElm.scrollTop=0,this._currentHighlightIndex=0,this.highlightCurrentOption())}open(n=0){return new Promise(e=>{n!==null&&n>=0?(window.clearTimeout(this.openDelayTimer),this.openDelayTimer=window.setTimeout(()=>{this.openDrop(),e()},n)):(this.openDrop(),e())})}openDrop(){var i,s,r,o,a;if(!this.dropElm||(i=this.choiceElm)!=null&&i.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),(r=(s=this.choiceElm)==null?void 0:s.querySelector("div.ms-icon-caret"))==null||r.classList.add("open"),this.dropElm.style.display="block",this.dropElm.ariaExpanded="true",(o=this.selectAllElm)!=null&&o.parentElement&&(this.selectAllElm.parentElement.style.display="inline-flex"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||((a=this.selectAllElm)!=null&&a.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let l=Qg(this.dropElm),c;this.options.container instanceof Node?c=this.options.container:typeof this.options.container=="string"&&(c=this.options.container==="body"?document.body:document.querySelector(this.options.container)),c.appendChild(this.dropElm),this.dropElm.style.top=`${(l==null?void 0:l.top)??0}px`,this.dropElm.style.left=`${(l==null?void 0:l.left)??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Xh(this.parentElm,"outer","width")}px`}let n=this.options.minHeight,e=this.options.maxHeight;this.options.maxHeightUnit==="row"&&(e=Xh(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight),this.ulElm??(this.ulElm=this.dropElm.querySelector("ul")),this.ulElm&&(n&&(this.ulElm.style.minHeight=`${n}px`),this.ulElm.style.maxHeight=`${e}px`),this.dropElm.querySelectorAll(".multiple").forEach(l=>{l.style.width=`${this.options.multipleWidth}px`}),this.getDataLength()&&this.options.filter?(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)):this.focusSelectAllOrList(),this._currentHighlightIndex<0?this.moveHighlightDown():this.highlightCurrentOption(),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let t=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:l,top:c}=Of(this.dropElm),h=this.dropElm.getBoundingClientRect().height;t=l<h&&c>l?"top":"bottom"}this.adjustDropHeight(t)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}focusSelectAllOrList(){this.selectAllElm?this.selectAllElm.focus():this.ulElm&&(this.ulElm.tabIndex=0,this.ulElm.focus())}highlightCurrentOption(){var e;let n=((e=this.dropElm)==null?void 0:e.querySelectorAll(Rl))||[];if(this._currentHighlightIndex<=n.length){let t=n[this._currentHighlightIndex];t&&(this.lastFocusedItemKey=t.dataset.key||"",this._currentSelectedElm=t,this.scrolledByMouse=!1,t.scrollIntoView({block:"nearest"}),this.changeCurrentOptionHighlight(t),window.setTimeout(()=>this.scrolledByMouse=!0,10))}}changeCurrentOptionHighlight(n){var e;n==null||n.classList.add("highlighted"),(((e=this.dropElm)==null?void 0:e.querySelectorAll(dW))||[]).forEach(t=>{t!==n&&t.classList.remove("highlighted")})}moveHighlightDown(){var t,i;let n=((t=this.dropElm)==null?void 0:t.querySelectorAll(Rl))||[],e=n.length;this._currentHighlightIndex<e-1?(this._currentHighlightIndex++,(i=n[this._currentHighlightIndex])!=null&&i.classList.contains("disabled")&&this.moveHighlightDown()):this.options.infiniteScroll&&this.infiniteScrollHandler(null,this._currentHighlightIndex,e),this.highlightCurrentOption()}moveHighlightUp(){var t,i;let n=((t=this.dropElm)==null?void 0:t.querySelectorAll(Rl))||[],e=this.options.single?0:1;if(this.virtualScroll&&this._currentHighlightIndex<=e&&this.updateDataStart>0&&this.ulElm){let s=n[this._currentHighlightIndex+(this.options.single?0:1)],r=s==null?void 0:s.dataset.key;this.lastFocusedItemKey=r,this.ulElm.scrollTop=this.ulElm.scrollTop-(s==null?void 0:s.getBoundingClientRect().height)||10,this.isMoveUpRecalcRequired=!0;return}this._currentHighlightIndex>0&&(this._currentHighlightIndex--,(i=n[this._currentHighlightIndex])!=null&&i.classList.contains("disabled")&&this.moveHighlightUp()),this.highlightCurrentOption()}recalculateArrowMove(n){var i;let e=((i=this.dropElm)==null?void 0:i.querySelectorAll(Rl))||[],t=Array.from(e).findIndex(s=>s.dataset.key===this.lastFocusedItemKey);this._currentHighlightIndex=t-1,n==="down"?this.moveHighlightDown():n==="up"&&(this.moveHighlightUp(),this.isMoveUpRecalcRequired=!1)}close(n){var e,t;this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),(t=(e=this.choiceElm)==null?void 0:e.querySelector("div.ms-icon-caret"))==null||t.classList.remove("open"),this.dropElm&&(this.dropElm.style.display="none",this.dropElm.ariaExpanded="false",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto")),this.options.onClose(n)}applyAsTextOrHtmlWhenEnabled(n,e){n||(n={}),this.isRenderAsHtml?n.innerHTML=typeof this.options.sanitizer=="function"?this.options.sanitizer(e):e:n.textContent=e}update(n=!1){var l;let e=this.getSelects(),t=this.getSelects("text");this.options.displayValues&&(t=e);let i=(l=this.choiceElm)==null?void 0:l.querySelector("span"),s=e.length,r=null,o=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let c=e.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?oW(c):c}return t.join(this.options.displayDelimiter)};if(i){if(s===0){let c=this.options.placeholder||"";i.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(i,c)}else s<this.options.minimumCountSelected?r=o():this.formatAllSelected()&&s===this.dataTotal?r=this.formatAllSelected():this.options.ellipsis&&s>this.options.minimumCountSelected?r=`${t.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(s,this.dataTotal)&&s>this.options.minimumCountSelected?r=this.formatCountSelected(s,this.dataTotal):r=o();if(r!==null&&(i==null||i.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(i,r)),this.options.showClear&&this.selectClearElm){let c=r?"block":"none";this.selectClearElm.style.display=c}if(this.options.displayTitle){let c=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text";i.title=this.getSelects(c).join(this.options.displayDelimiter)}}let a=this.getSelects();this.options.single?this.elm.value=a.length?a[0]:"":Array.from(this.elm.options).forEach(c=>{c.selected=a.some(h=>h===c.value)}),n||this.elm.dispatchEvent(new Event("change"))}updateSelected(n){var t,i,s;for(let r=this.updateDataStart;r<this.updateDataEnd;r++){let o=this.updateData[r],a=(t=this.dropElm)==null?void 0:t.querySelector(`input[data-key=${o._key}]`);if(a){a.checked=o.selected;let l=a.closest("li"),c=l==null?void 0:l.querySelector(".icon-checkbox-container div");l&&(o.selected&&!l.classList.contains("selected")?(l.classList.add("selected"),l.ariaSelected="true",c&&(c.className=`ms-icon ms-icon-${a.type==="radio"?"radio":"check"}`)):o.selected||(l.classList.remove("selected"),l.ariaSelected="false",c&&(c.className="ms-icon ms-icon-uncheck")))}}let e=((i=this.data)==null?void 0:i.filter(r=>r.visible).length)===0;if(this.selectAllElm){this.selectAllElm.ariaChecked=String(this.isAllSelected);let r=(s=this.dropElm)==null?void 0:s.querySelector(".ms-select-all .icon-checkbox-container div");if(r){let o="";this.isAllSelected?o="ms-icon-check":this.isPartiallyAllSelected?o="ms-icon-minus":o="ms-icon-uncheck",r.className=`ms-icon ${o}`}this.selectAllElm.checked=this.isAllSelected,ry(this.selectAllElm.closest("li"),!e)}ry(this.noResultsElm,e),this.virtualScroll&&(this.virtualScroll.rows=n??this.getListRows())}getData(){return this.options.data}getDataLength(){var n;return((n=this.data)==null?void 0:n.length)??0}getOptions(n=!0){let e=Object.assign({},this.options);return delete e.data,n?qg(e):this.options}refreshOptions(n){sW(this.options,n,!0)||(this.options=Object.assign(this.options,n),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(n="value"){let e=[];for(let t of this.data||[])if(t.type==="optgroup"){let i=t.children.filter(s=>s==null?void 0:s.selected);if(!i.length)continue;if(n==="value"||this.options.single)e.push(...i.map(s=>n==="value"&&s._value||s[n]));else{let s=[];s.push("["),s.push(t.label),s.push(`: ${i.map(r=>r[n]).join(", ")}`),s.push("]"),e.push(s.join(""))}}else t.selected&&e.push(n==="value"&&t._value||t[n]);return e}setSelects(n,e="value",t=!1){let i=!1,s=r=>{var o;for(let a of r){let l=!1;if(e==="text"){let c=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(c,a.text),l=n.includes(((o=c.textContent)==null?void 0:o.trim())??"")}else l=n.includes(a._value||a.value),!l&&a.value===`${+a.value}`&&(l=n.includes(+a.value));a.selected!==l&&(i=!0),a.selected=l}};for(let r of this.data||[])r.type==="optgroup"?s(r.children):s([r]);i&&(this.initSelected(t),this.updateSelected(),this.update(t))}enable(){this.choiceElm&&(this.choiceElm.classList.remove("disabled"),this.choiceElm.disabled=!1)}disable(){var n;this.choiceElm&&((n=this.choiceElm)==null||n.classList.add("disabled"),this.choiceElm.disabled=!0)}check(n){let e=qh(this.data,"value",n);e&&this._check(e,!0)}uncheck(n){let e=qh(this.data,"value",n);e&&this._check(e,!1)}_check(n,e){this.options.single&&this._checkAll(!1,!0),n.selected=e,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(n,e){for(let t of this.data||[])t.type==="optgroup"?this._checkGroup(t,n,!0):!t.disabled&&!t.divider&&(e||t.visible)&&(t.selected=n);e||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(n,e,t){n.selected=e,n.children.forEach(i=>{i&&!i.disabled&&!i.divider&&(t||i.visible)&&(i.selected=e)}),t||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let n of this.data||[])if(n.type==="optgroup")for(let e of n.children)e&&(e.divider||(e.selected=!e.selected));else n&&!n.divider&&(n.selected=!n.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){var n;(n=this.choiceElm)==null||n.focus(),this.options.onFocus()}blur(){var n;(n=this.choiceElm)==null||n.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(n){var s;let e=((s=this.searchInputElm)==null?void 0:s.value.trim())??"",t=e.toLowerCase();if(this.filterText===t)return;this.filterText=t;for(let r of this.data||[])if(r.type==="optgroup")if(this.options.filterGroup){let o=`${(r==null?void 0:r.label)??""}`;if(r!=null){let a=this.options.customFilter({label:ra(o.toString().toLowerCase(),this.options.diacriticParser),search:ra(t,this.options.diacriticParser),originalLabel:o,originalSearch:e,row:r});r.visible=a;for(let l of r.children)l&&(l.visible=a)}}else{for(let o of r.children)if(o!=null){let a=`${(o==null?void 0:o.text)??""}`;o.visible=this.options.customFilter({text:ra(a.toString().toLowerCase(),this.options.diacriticParser),search:ra(t,this.options.diacriticParser),originalText:a,originalSearch:e,row:o,parent:r})}r.visible=r.children.filter(o=>o==null?void 0:o.visible).length>0}else{let o=`${(r==null?void 0:r.text)??""}`;r.visible=this.options.customFilter({text:ra(o.toString().toLowerCase(),this.options.diacriticParser),search:ra(t,this.options.diacriticParser),originalText:o,originalSearch:e,row:r})}let i=this.initListItems();this.initSelected(n),this.updateSelected(i),n||this.options.onFilter(e)}adjustDropHeight(n){var c,h,d,u;let e=n!=="top",t=((c=this.filterParentElm)==null?void 0:c.getBoundingClientRect().height)??0,i=((h=this.okButtonElm)==null?void 0:h.getBoundingClientRect().height)??0,s=this.options.single?0:((d=this.selectAllParentElm)==null?void 0:d.getBoundingClientRect().height)??0,r=t+i+s+5,{bottom:o,top:a}=Of(this.parentElm),l=this.options.maxHeight;if(e?l=o-r-this.options.adjustedHeightPadding:l=a-r-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&l<this.options.maxHeight){let p=(u=this.dropElm)==null?void 0:u.querySelector("ul");return p&&(p.style.maxHeight=`${l}px`),!0}return!1}adjustDropPosition(n){let e="bottom";if(this.dropElm&&this.parentElm){let{bottom:t,top:i}=Of(this.dropElm),{top:s,left:r}=Qg(this.parentElm),o=this.dropElm.getBoundingClientRect().height,a=this.dropElm.getBoundingClientRect().width,l=document.body.offsetWidth||window.innerWidth,c=this.parentElm.getBoundingClientRect().width;if(t>o)e="bottom";else if(o>t&&i>t){if(this.options.container){let h=s-o;h<0&&(h=0),(h>0||n)&&(e="top",this.dropElm.style.top=`${h<0?0:h}px`)}else e="top",this.dropElm.classList.add(e);this.dropElm.classList.remove("bottom")}l-a<r&&(this.dropElm.style.left=`${r-(a-c)}px`)}return e}adjustDropWidthByText(){if(this.dropElm){let n=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(n=this.options.dropWidth||this.options.width||0);let e=this.dropElm.querySelector(".ms-select-all span"),t=this.dropElm.querySelector("ul"),i=26,s=(e==null?void 0:e.clientWidth)??0+i,r=t.scrollHeight>t.clientHeight?this.getScrollbarWidth():0,o=0;this.dropElm.querySelectorAll("li label").forEach(a=>{a.scrollWidth>o&&(o=a.scrollWidth)}),o+=i+r,o<s&&(o=s),this.options.maxWidth&&o>this.options.maxWidth&&(o=this.options.maxWidth),this.options.minWidth&&o<this.options.minWidth&&(o=this.options.minWidth),(n==="100%"||+n<o)&&(this.dropElm.style.width=`${o}px`,this.dropElm.style.maxWidth=`${o}px`)}}getScrollbarWidth(){var s;let n=document.createElement("div");n.style.visibility="hidden",n.style.width="100px",document.body.appendChild(n);let e=n.offsetWidth;n.style.overflow="scroll";let t=document.createElement("div");t.style.width="100%",n.appendChild(t);let i=t.offsetWidth;return(s=n.parentNode)==null||s.removeChild(n),e-i}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(n,e){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${n}`).replace("%",`${e}`):this.options.formatCountSelected(n,e)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},lh=(n,e)=>typeof n=="string"?Pf(document.querySelectorAll(n),e):n instanceof Node?Pf([n],e):Pf(n,e);function Pf(n,e){let t=Array.from(n),i=[];for(let s=0;s<t.length;s++){let r=t[s];try{r._multipleSelect!==void 0&&(r._multipleSelect.destroy(),delete r._multipleSelect),r._multipleSelect=new uW(r,e||{}),r._multipleSelect.init();let o=r._multipleSelect.getOptions(!1);o.onHardDestroy=()=>delete r._multipleSelect,o.onAfterHardDestroyed=()=>i[s]=null,i.push(r._multipleSelect)}catch(o){console.error(o)}}return i.length===1?i[0]:i}lh.defaults=ks.DEFAULTS;lh.locales={...nI};lh.methods=ks.METHODS;typeof window<"u"&&(window.multipleSelect=lh);class aI{constructor(e,t,i,s=!0){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._isMultipleSelect=!0,this._collectionLength=0,this._collectionObservers=[],this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=s}get collectionOptions(){var e,t;return((t=(e=this.columnDef)==null?void 0:e.filter)==null?void 0:t.collectionOptions)??{}}get columnFilter(){var e;return((e=this.columnDef)==null?void 0:e.filter)??{}}get customStructure(){var e,t;return(t=(e=this.columnDef)==null?void 0:e.filter)==null?void 0:t.customStructure}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}get defaultOperator(){return this.isMultipleSelect?de.in:de.equal}get filterOptions(){var e,t;return{...(e=this.gridOptions.defaultFilterOptions)==null?void 0:e.select,...(t=this.columnFilter)==null?void 0:t.filterOptions}}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){var e;return((e=this.columnFilter)==null?void 0:e.operator)??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var s,r,o,a,l,c,h,d,u,p,f;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error(`[Slickgrid-Universal] You need to pass a "collection" (or "collectionAsync") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }`);if(this.enableTranslateLabel=((s=this.columnFilter)==null?void 0:s.enableTranslateLabel)??!1,this.labelName=((r=this.customStructure)==null?void 0:r.label)??"label",this.labelPrefixName=((o=this.customStructure)==null?void 0:o.labelPrefix)??"labelPrefix",this.labelSuffixName=((a=this.customStructure)==null?void 0:a.labelSuffix)??"labelSuffix",this.optionLabel=((l=this.customStructure)==null?void 0:l.optionLabel)??"value",this.valueName=((c=this.customStructure)==null?void 0:c.value)??"value",this.enableTranslateLabel&&(!this.translaterService||typeof this.translaterService.translate!="function"))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=((h=this.gridOptions)==null?void 0:h.locales)??se.locales,this.initMultipleSelectTemplate();let t=((d=this.gridOptions)==null?void 0:d.defaultFilterPlaceholder)||"";(u=this.columnFilter)!=null&&u.placeholder&&(t=this.columnFilter.placeholder),this.defaultOptions.placeholder=t||"",this._isMultipleSelect&&((p=this.columnDef)!=null&&p.filter)&&(this.columnDef.filter.emptySearchTermReturnAllValues=((f=this.columnDef.filter)==null?void 0:f.emptySearchTermReturnAllValues)??!1);const i=this.columnFilter.collection||[];return new Promise(async(g,m)=>{try{let _;this.columnFilter.collectionAsync&&!this.columnFilter.collection?(_=fA(this.columnFilter.collectionAsync,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),g(_)):(_=i,this.renderDomElement(i),g(i)),(this.columnFilter.collectionAsync||this.columnFilter.enableCollectionWatch)&&(await(_??this.columnFilter.collectionAsync),this.watchCollectionChanges())}catch(_){m(_)}})}clear(e=!0){this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),this.updateFilterStyle(!1),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){var e,t;typeof((e=this._msInstance)==null?void 0:e.destroy)=="function"&&this._msInstance.destroy(),(t=this.filterElm)==null||t.remove(),x_(this.subscriptions)}getValues(){var e;return((e=this._msInstance)==null?void 0:e.getSelects())??[]}setValues(e,t,i=!1){e!==void 0&&this._msInstance&&(e=Array.isArray(e)?e.every(s=>k_(s))?e.map(String):e:[e],this._msInstance.setSelects(e)),this.updateFilterStyle(this.getValues().length>0),this.operator=t||this.defaultOperator,i&&this.onTriggerEvent()}filterCollection(e){var i,s;let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const r=this.columnFilter.collectionFilterBy,o=((i=this.columnFilter.collectionOptions)==null?void 0:i.filterResultAfterEachPass)||null;t=((s=this.collectionService)==null?void 0:s.filterCollection(t,r,o))||[]}return t}sortCollection(e){var i;let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const s=this.columnFilter.collectionSortBy;t=((i=this.collectionService)==null?void 0:i.sortCollection(this.columnDef,t,s,this.enableTranslateLabel))||[]}return t}watchCollectionChanges(){var e;(e=this.columnFilter)!=null&&e.collection&&(this._collectionObservers.push(Yd(this.columnFilter.collection,this.watchCallback.bind(this))),I_(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(e){this.renderDomElement(e||[]),this.columnFilter.collection&&this._collectionObservers.push(Yd(this.columnFilter.collection,this.watchCallback.bind(this)))}watchCallback(e){this.renderDomElement(this.columnFilter.collection||e||[])}renderDomElement(e){var r,o,a,l;if(!Array.isArray(e)&&((r=this.collectionOptions)!=null&&r.collectionInsideObjectProperty)){const c=this.collectionOptions.collectionInsideObjectProperty;e=Dr(e,c||"")}if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let t=[];if(e.length>0&&(t=[...e]),(o=this.collectionOptions)!=null&&o.addBlankEntry&&Array.isArray(t)&&t.length>0&&t[0][this.valueName]!==""&&t.unshift(this.createBlankEntry()),(a=this.collectionOptions)!=null&&a.addCustomFirstEntry&&Array.isArray(t)&&t.length>0&&t[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&t.unshift(this.collectionOptions.addCustomFirstEntry),(l=this.collectionOptions)!=null&&l.addCustomLastEntry&&Array.isArray(t)&&t.length>0){const c=t.length-1;t[c][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&t.push(this.collectionOptions.addCustomLastEntry)}let i=t;i=this.filterCollection(i),i=this.sortCollection(i);const s=rz("filter",i,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=s.hasFoundSearchTerm,this.createFilterElement(s.selectElement,s.dataCollection),this._collectionLength=i.length}createBlankEntry(){const e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createFilterElement(e,t){var s;const i=((s=this.columnDef)==null?void 0:s.id)??"";this.elementName=`filter-${i}`,this.defaultOptions.name=this.elementName,tt(this.filterContainerElm),this.filterElm=e,this.filterElm.dataset.columnId=`${i}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(e),this.filterElmOptions={...this.defaultOptions,...this.filterOptions,data:t},this._msInstance=lh(e,this.filterElmOptions)}initMultipleSelectTemplate(){var s,r,o,a,l,c,h,d,u,p,f,g,m;const e=((s=this.gridOptions)==null?void 0:s.enableTranslate)??!1,i={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${((r=this.columnDef)==null?void 0:r.id)??""}`,container:"body",darkMode:!!this.gridOptions.darkMode,filter:!1,maxHeight:275,single:!0,singleRadio:!0,showSearchClear:!0,renderOptionLabelAsHtml:((o=this.columnFilter)==null?void 0:o.enableRenderHtml)??!1,sanitizer:_=>this.grid.sanitizeHtmlString(_),onClose:()=>this.onTriggerEvent(),onClear:()=>this.clear()};if(this._isMultipleSelect){i.single=!1,i.singleRadio=!1,i.showOkButton=!0,i.displayTitle=!0;const _=Ko(this.gridOptions);i.countSelectedText=e&&((a=this.translaterService)!=null&&a.translate)?this.translaterService.translate(`${_}X_OF_Y_SELECTED`):(l=this._locales)==null?void 0:l.TEXT_X_OF_Y_SELECTED,i.allSelectedText=e&&((c=this.translaterService)!=null&&c.translate)?this.translaterService.translate(`${_}ALL_SELECTED`):(h=this._locales)==null?void 0:h.TEXT_ALL_SELECTED,i.noMatchesFoundText=e&&((d=this.translaterService)!=null&&d.translate)?this.translaterService.translate(`${_}NO_MATCHES_FOUND`):(u=this._locales)==null?void 0:u.TEXT_NO_MATCHES_FOUND,i.okButtonText=e&&((p=this.translaterService)!=null&&p.translate)?this.translaterService.translate(`${_}OK`):(f=this._locales)==null?void 0:f.TEXT_OK,i.selectAllText=e&&((g=this.translaterService)!=null&&g.translate)?this.translaterService.translate(`${_}SELECT_ALL`):(m=this._locales)==null?void 0:m.TEXT_SELECT_ALL}this.defaultOptions=i}onTriggerEvent(){if(this._msInstance){const e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||e.length===1&&e[0]!==""),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){var t,i,s,r,o,a;e?(this.isFilled=!0,(t=this.filterElm)==null||t.classList.add("filled"),(s=(i=this._msInstance)==null?void 0:i.getParentElement())==null||s.classList.add("filled")):(this.isFilled=!1,(r=this.filterElm)==null||r.classList.remove("filled"),(a=(o=this._msInstance)==null?void 0:o.getParentElement())==null||a.classList.remove("filled"))}}class pW extends aI{constructor(e,t,i){super(e,t,i,!0),this.translaterService=e,this.collectionService=t,this.rxjs=i}}class fW extends aI{constructor(e,t,i){super(e,t,i,!1),this.translaterService=e,this.collectionService=t,this.rxjs=i}}class gW extends J_{constructor(e){super(e),this.translaterService=e,this.sliderType="single"}}class mW extends J_{constructor(e){super(e),this.translaterService=e,this.sliderType="double"}}const lI={autocompleter:KB,compoundDate:iz,compoundInput:sy,compoundInputNumber:Gz,compoundInputText:sy,compoundSlider:Kz,dateRange:Yz,input:pu,inputText:pu,multipleSelect:pW,singleSelect:fW,slider:gW,sliderRange:mW},_W={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:5*60*5,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,autoHeight:!0,autoHeightRecalcRow:100,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:250,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:oy},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:lI.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"🔎︎",defaultFilterRangeOperator:de.rangeInclusive,defaultColumnSortFieldId:"id",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:mn.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"⮞",groupExpandedSymbol:"⮟",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:kr.comma,exportWithFormatter:!1,filename:"export",format:mn.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},eventNamingStyle:ps.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideToggleDarkModeCommand:!0,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-pin-off-outline",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:oy},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFilterShortcutSubMenu:"mdi mdi-filter-outline",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,saveDetailViewOnScroll:!1},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"͏͏͏͏͏͏͏͏͏·"}};function oy(n,e){let t=(n==null?void 0:n.columnPickerLabel)??(n==null?void 0:n.name)??"";(t instanceof HTMLElement||t instanceof DocumentFragment)&&(t=t.textContent||"");const i=(n==null?void 0:n.columnGroup)||"",s=(e==null?void 0:e.columnGroupSeparator)??" - ";return i?i+s+t:t}const vW=(n,e,t,i,s)=>{var c;const r=i&&i.params||{},o=r.propertyNames,a=(r==null?void 0:r.includeTitle)??!0;let l=r.dataContextProperty;if(l||(l=((c=i==null?void 0:i.field)==null?void 0:c.split(".")[0])||""),!o||!Array.isArray(o)||!l)throw new Error(`Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.
      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: ['firtName'] }}.
      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.`);if(s[l]&&Array.isArray(s[l])&&Array.isArray(s[l])&&s[l].length>0){const h=[];s[l].forEach(p=>{const f=[];o.forEach(g=>{f.push(p[g])}),h.push(f.join(" "))});const d=h.join(", "),u=I("span",{textContent:d});return a&&(u.title=d),u}return t},fu=(n,e,t)=>{if(Array.isArray(t)&&t.length>0){const i=t.join(", ");return I("span",{title:i,textContent:i})}return t},bW=(n,e,t)=>{let i=!1;const s=gi(t);return s&&(t=+t),(t===!0||s&&+t>0||typeof t=="string"&&t.length>0&&t.toLowerCase()!=="false"&&t!=="0")&&(i=!0),i?I("i",{className:"mdi mdi-18px mdi-check checkmark-icon",ariaHidden:"true"}):""},wW=(n,e,t,i,s,r)=>{if(!t||!i||!i.editor||!i.editor.collection||!i.editor.collection.length)return t;const{editor:o,editor:{collection:a}}=i,l=o.customStructure?o.customStructure.label:"label",c=o.customStructure?o.customStructure.value:"value";return Array.isArray(t)?a.every(h=>typeof h=="string")?fu(n,e,t.map(h=>uc(a,d=>d===h))):fu(n,e,t.map(h=>uc(a,d=>d[c]===h)[l])):uc(a,h=>h[c]===t)[l]||""},CW=(n,e,t,i,s,r)=>{if(!t||!i||!i.params||!i.params.collection||!i.params.collection.length)return t;const{params:o,params:{collection:a}}=i,l=o.customStructure?o.customStructure.label:"label",c=o.customStructure?o.customStructure.value:"value";return Array.isArray(t)?fu(n,e,t.map(h=>uc(a,d=>d[c]===h)[l])):uc(a,h=>h[c]===t)[l]||""},ay=(n,e,t,i,s)=>{var a;if(!i)return"";const r=i.params||{},o=(r==null?void 0:r.complexField)??(r==null?void 0:r.complexFieldLabel)??i.field;if(!o)throw new Error(`For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.
      There are 3 ways to provide it:
      1- via the generic "params" with a "complexField" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]
      2- via the generic "params" with a "complexField" and a "labelKey" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]
      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] `);if(i.labelKey&&s.hasOwnProperty(o))return(a=s[o])==null?void 0:a[i.labelKey];if(typeof o=="string"&&o.indexOf(".")>0){let l=o.split(".").reduce((c,h)=>c!=null&&c.hasOwnProperty(h)?c[h]:"",s);return(l==null||typeof l=="object"&&Object.entries(l).length===0&&!(l instanceof Date))&&(l=""),l}return t},yW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,numberPrefix:l,numberSuffix:c,decimalSeparator:h,thousandSeparator:d,wrapNegativeNumber:u}=jr(i,r,"decimal","cell");return gi(t)?Gr(t,o,a,u,l,c,h,d):t},SW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"currency","cell");return gi(t)?Gr(t,o,a,h,"$","",l,c):t},EW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"currency","cell");if(gi(t)){const d=t>=0?"green":"red",u=Gr(t,o,a,h,"$","",l,c),p=I("span",{ariaHidden:"true",textContent:u});return p.style.color=d,p}return t},TW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"currency","cell");if(gi(t)){const d=t>=0?"green":"red",u=Gr(t,o,a,h,"$","",l,c),p=I("span",{ariaHidden:"true",textContent:u});return p.style.color=d,p.style.fontWeight="bold",p}return t},AW=(n,e,t,i,s,r)=>{const{currencyPrefix:o,currencySuffix:a,minDecimal:l,maxDecimal:c,numberPrefix:h,numberSuffix:d,decimalSeparator:u,thousandSeparator:p,wrapNegativeNumber:f}=jr(i,r,"decimal","cell");if(gi(t)){const g=Gr(t,l,c,f,o,a,u,p);return`${h}${g}${d}`}return t},IW=(n,e,t,i,s,r)=>{const o=i&&i.params||{};let a=o.hyperlinkText?o.hyperlinkText:t;a=r.sanitizeHtmlString(a);let l=o.hyperlinkUrl?o.hyperlinkUrl:t;l=r.sanitizeHtmlString(l);const c=l.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#])?/i);if(c&&Array.isArray(c)&&c.length>0){const h=c[0];return I("a",{href:h,textContent:a})}return t},RW=(n,e,t,i)=>{const r=((i==null?void 0:i.params)||{}).cssClass;if(!r)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "mdi mdi-check" }}');let o=!1;const a=!isNaN(t);return(t===!0||a&&parseFloat(t)>0||!a&&typeof t=="string"&&t.toLowerCase()!=="false"&&t!=="0")&&(o=!0),o?I("i",{className:r,ariaHidden:"true"}):""},OW=(n,e,t,i)=>{const s=(i==null?void 0:i.params)??{},r=s.iconCssClass||s.icon||s.formatterIcon;if(!r)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "mdi mdi-magnify" }}`');const o=s.title||null;return I("i",{className:r,ariaHidden:"true",title:o})},xW=(n,e,t,i,s,r)=>{const a=(i.params||{}).mask;if(!a)throw new Error(`You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: '000-000' }}`);if(t){let l=0;const c=t.toString(),h=r.getOptions()||{},d=h!=null&&h.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return d.textContent=a.replace(/[09A]/gi,()=>c[l++]||""),d}return t},PW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"percent","cell");if(gi(t)){const d=t*100;return Gr(d,o,a,h,"","%",l,c)}return t},kW=(n,e,t)=>{if(!gi(t))return"";let i="",s=parseFloat(t);return s>100&&(s=100),s<30?i="red":s<70?i="silver":i="green",I("span",{className:"percent-complete-bar",title:`${s}%`,style:{background:i,width:`${s}%`}})},DW=(n,e,t)=>{if(!gi(t))return"";let i="",s=parseFloat(t);return s>100&&(s=100),s<30?i="red":s<70?i="silver":i="green",I("div",{className:"percent-complete-bar-with-text",title:`${s}%`,textContent:`${s}%`,style:{background:i,width:`${s}%`}})},LW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"percent","cell");if(gi(t)){const d=t<50?"red":"green",u=Gr(t,o,a,h,"","%",l,c),p=t>100?"100%":u;return I("span",{textContent:p,style:{color:d}})}return t},NW=(n,e,t,i,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:c,wrapNegativeNumber:h}=jr(i,r,"percent","cell");return gi(t)?Gr(t,o,a,h,"","%",l,c):t},MW=(n,e,t)=>{if(!gi(t))return"";let i="",s=parseFloat(t);s>100&&(s=100),s<30?i="danger":s<70?i="warning":i="success";const r=I("div",{className:"progress"});return r.appendChild(I("div",{className:`progress-bar progress-bar-${i} bg-${i}`,role:"progressbar",ariaValueNow:String(s),ariaValueMin:"0",ariaValueMax:"100",textContent:`${s}%`,style:{minWidth:"2em",width:`${s}%`}})),r},FW=(n,e,t,i,s,r)=>{const a=((r==null?void 0:r.getOptions())??{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t):""},$W=(n,e,t,i,s,r)=>{var A,P;const o=r.getOptions(),a=o==null?void 0:o.treeDataOptions,l=(a==null?void 0:a.collapsedPropName)??se.treeDataProperties.COLLAPSED_PROP,c=(a==null?void 0:a.hasChildrenPropName)??se.treeDataProperties.HAS_CHILDREN_PROP,h=(a==null?void 0:a.levelPropName)??se.treeDataProperties.TREE_LEVEL_PROP,d=(a==null?void 0:a.exportIndentMarginLeft)??5,u=(a==null?void 0:a.exportIndentationLeadingChar)??".",p=(a==null?void 0:a.exportIndentationLeadingSpaceCount)??3,f=((A=o==null?void 0:o.excelExportOptions)==null?void 0:A.groupCollapsedSymbol)??"⮞",g=((P=o==null?void 0:o.excelExportOptions)==null?void 0:P.groupExpandedSymbol)??"⮟";let m=t;if(m=Xd(i,s,t),m==null||s===void 0)return"";if(!s.hasOwnProperty(h))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const _=(s==null?void 0:s[h])??0;let b="",C=0;s[c]?(b=s!=null&&s[l]?f:g,C=_===0?0:d*_):C=d*(_===0?0:_+1);const v=sC(C);return a!=null&&a.titleFormatter&&(m=hp(a.titleFormatter,n,e,i,s,r)),m=`${_===0&&b?"":_===0?`${u}${sC(p)}`:u}${v}${b} ${m}`,Js(m)},HW=(n,e,t,i,s,r)=>{const o=r.getOptions(),a=o==null?void 0:o.treeDataOptions,l=(a==null?void 0:a.indentMarginLeft)??15,c=(a==null?void 0:a.collapsedPropName)??se.treeDataProperties.COLLAPSED_PROP,h=(a==null?void 0:a.hasChildrenPropName)??se.treeDataProperties.HAS_CHILDREN_PROP,d=(a==null?void 0:a.levelPropName)??se.treeDataProperties.TREE_LEVEL_PROP;let u=t;if(u=Xd(i,s,t),u==null||s===void 0)return"";if(!s.hasOwnProperty(d))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const p=(s==null?void 0:s[d])??0,f=document.createElement("span");f.style.display="inline-block",f.style.width=`${l*p}px`;const g=`slick-tree-level-${p}`;let m="";s[h]&&(m=s!=null&&s[c]?"collapsed":"expanded"),a!=null&&a.titleFormatter&&(u=hp(a.titleFormatter,n,e,i,s,r));const _=`slick-group-toggle ${m}`.trim(),b=I("div",{className:_,ariaExpanded:String(m==="expanded")}),C=I("span",{className:"slick-tree-title"});r.applyHtmlCode(C,u),C.setAttribute("level",p);const v=o!=null&&o.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return v.appendChild(f),v.appendChild(b),v.appendChild(C),{addClasses:g,html:v}},BW=(n,e,t,i,s,r)=>{var d;const o=r.getOptions(),a=((d=o==null?void 0:o.treeDataOptions)==null?void 0:d.hasChildrenPropName)??se.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:l,treeTotalsFormatter:c,params:h}=i;if(!l&&!c)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(s[a]&&(s!=null&&s.__treeTotals)&&(l||c))return(c??l)(s==null?void 0:s.__treeTotals,i,r);if(h.formatters){let u=t;for(const p of h.formatters)!s[a]&&!(s!=null&&s.__treeTotals)&&typeof p=="function"&&(u=p(n,e,u,i,s,r)||t);return u}return t},VW=(n,e,t,i,s,r)=>{const a=((r==null?void 0:r.getOptions())??{}).translater||i&&i.params&&i.params.translater;if(!a||typeof a.translate!="function")throw new Error(`"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).
    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }`);return t!=null&&typeof t!="string"&&(t=t+""),t?a.translate(t.toUpperCase()):""},O5={arrayObjectToCsv:vW,arrayToCsv:fu,checkmarkMaterial:bW,complex:ay,complexObject:ay,collection:CW,collectionEditor:wW,currency:AW,dateIso:vt(N.dateIso,"-"),dateTimeIso:vt(N.dateTimeIso,"-"),dateTimeShortIso:vt(N.dateTimeShortIso,"-"),dateTimeIsoAmPm:vt(N.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:vt(N.dateTimeIsoAM_PM,"-"),dateEuro:vt(N.dateEuro,"/"),dateEuroShort:vt(N.dateEuroShort,"/"),dateTimeEuro:vt(N.dateTimeEuro,"/"),dateTimeEuroShort:vt(N.dateTimeEuroShort,"/"),dateTimeShortEuro:vt(N.dateTimeShortEuro,"/"),dateTimeEuroAmPm:vt(N.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:vt(N.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:vt(N.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:vt(N.dateTimeEuroShortAM_PM,"/"),dateUs:vt(N.dateUs,"/"),dateTimeUs:vt(N.dateTimeUs,"/"),dateTimeShortUs:vt(N.dateTimeShortUs,"/"),dateTimeUsAmPm:vt(N.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:vt(N.dateTimeUsAM_PM,"/"),dateTimeUsShort:vt(N.dateTimeUsShort,"/"),dateTimeUsShortAmPm:vt(N.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:vt(N.dateTimeUsShortAM_PM,"/"),dateUsShort:vt(N.dateUsShort,"/"),dateUtc:vt(N.dateUtc,"-"),decimal:yW,dollar:SW,dollarColored:EW,dollarColoredBold:TW,hyperlink:IW,icon:OW,iconBoolean:RW,mask:xW,multiple:Ed,percent:PW,percentComplete:LW,percentCompleteBar:kW,percentCompleteBarWithText:DW,percentSymbol:NW,progressBar:MW,translate:FW,translateBoolean:VW,tree:HW,treeParseTotals:BW,treeExport:$W};let zW=class{constructor(){this.options=_W}};var Zg=function(n,e){return Zg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])},Zg(n,e)};function P5(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Zg(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function ri(n,e,t,i,s,r){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&n?i.static?n:n.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d,u=!1,p=t.length-1;p>=0;p--){var f={};for(var g in i)f[g]=g==="access"?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(_){if(u)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(_||null))};var m=(0,t[p])(a==="accessor"?{get:h.get,set:h.set}:h[l],f);if(a==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(d=o(m.get))&&(h.get=d),(d=o(m.set))&&(h.set=d),(d=o(m.init))&&s.unshift(d)}else(d=o(m))&&(a==="field"?s.unshift(d):h[l]=d)}c&&Object.defineProperty(c,i.name,h),u=!0}function Ze(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}function k5(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(h){try{c(i.next(h))}catch(d){o(d)}}function l(h){try{c(i.throw(h))}catch(d){o(d)}}function c(h){h.done?r(h.value):s(h.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function D5(n,e){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,s,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(t=0)),t;)try{if(i=1,s&&(r=c[0]&2?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[c[0]&2,r.value]),c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,s=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(r=t.trys,!(r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(n,t)}catch(h){c=[6,h],s=0}finally{i=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ly(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function L5(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),s,r=[],o;try{for(;(e===void 0||e-- >0)&&!(s=i.next()).done;)r.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return r}function N5(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}function Jg(n){return this instanceof Jg?(this.v=n,this):new Jg(n)}function M5(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(f){return Promise.resolve(f).then(p,d)}}function a(p,f){i[p]&&(s[p]=function(g){return new Promise(function(m,_){r.push([p,g,m,_])>1||l(p,g)})},f&&(s[p]=f(s[p])))}function l(p,f){try{c(i[p](f))}catch(g){u(r[0][3],g)}}function c(p){p.value instanceof Jg?Promise.resolve(p.value.v).then(h,d):u(r[0][2],p)}function h(p){l("next",p)}function d(p){l("throw",p)}function u(p,f){p(f),r.shift(),r.length&&l(r[0][0],r[0][1])}}function F5(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ly=="function"?ly(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}class WW{get eventHandler(){return this._eventHandler}get gridUid(){var e;return((e=this.grid)==null?void 0:e.getUID())??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){var e;return((e=this.grid)==null?void 0:e.getOptions())??{}}get locales(){var e;return((e=this.gridOptions)==null?void 0:e.locales)??se.locales}set metrics(e){this.renderMetrics(e)}get leftFooterText(){var e;return((e=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`))==null?void 0:e.textContent)??""}set leftFooterText(e){this.renderLeftFooterText(e)}get rightFooterText(){var e;return((e=document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`))==null?void 0:e.textContent)??""}set rightFooterText(e){this.renderRightFooterText(e)}constructor(e,t,i,s){var r,o,a,l,c;if(this.grid=e,this.customFooterOptions=t,this.pubSubService=i,this.translaterService=s,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new pA,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new gt,this._enableTranslate=((r=this.gridOptions)==null?void 0:r.enableTranslate)??!1,this._isLeftFooterOriginallyEmpty=!((o=this.gridOptions.customFooterOptions)!=null&&o.leftFooterText),this._isRightFooterOriginallyEmpty=!((a=this.gridOptions.customFooterOptions)!=null&&a.rightFooterText),this.registerOnSelectedRowsChangedWhenEnabled(t),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&((l=this.pubSubService)!=null&&l.subscribe)){const h=((c=this.translaterService)==null?void 0:c.eventName)??"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(h,()=>this.translateCustomFooterTexts()))}}dispose(){var e;this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),(e=this._footerElement)==null||e.remove()}renderFooter(e){this.translateCustomFooterTexts(),this.createFooterContainer(e)}renderMetrics(e){var i;const t=e!=null&&e.endTime?Wi(e.endTime,this.customFooterOptions.dateFormat,"en-US"):"";this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",t),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",e.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",e.totalItemCount),(i=this.customFooterOptions.metricTexts)!=null&&i.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(e){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",e)}renderRightFooterText(e){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",e)}translateCustomFooterTexts(){var e,t,i,s,r;if(this.gridOptions.enableTranslate&&((e=this.translaterService)!=null&&e.translate)){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const o of Object.keys(this.customFooterOptions.metricTexts))if(o.lastIndexOf("Key")>0){const a=o.substring(0,o.lastIndexOf("Key"));this.customFooterOptions.metricTexts[a]=this.translaterService.translate(this.customFooterOptions.metricTexts[o]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||((t=this.locales)==null?void 0:t.TEXT_LAST_UPDATE)||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||((i=this.locales)==null?void 0:i.TEXT_ITEMS)||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||((s=this.locales)==null?void 0:s.TEXT_ITEMS_SELECTED)||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||((r=this.locales)==null?void 0:r.TEXT_OF)||"TEXT_OF")}createFooterContainer(e){const t=I("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}}),i=I("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`});this.grid.applyHtmlCode(i,this.customFooterOptions.leftFooterText),t.appendChild(i),t.appendChild(this.createFooterRightContainer()),this._footerElement=t,e!=null&&e.appendChild&&this._footerElement&&e.appendChild(this._footerElement)}createFooterRightContainer(){var t,i,s,r;const e=I("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(!this._isRightFooterOriginallyEmpty)this.grid.applyHtmlCode(e,this.customFooterOptions.rightFooterText);else if(!this.customFooterOptions.hideMetrics){e.classList.add("metrics");const o=I("span",{className:"timestamp"},e);if(!this.customFooterOptions.hideLastUpdateTimestamp){const a=this.createFooterLastUpdate();a&&o.appendChild(a)}e.appendChild(I("span",{className:"item-count",textContent:`${((t=this.metrics)==null?void 0:t.itemCount)??"0"}`})),this.customFooterOptions.hideTotalItemCount||(e.appendChild(document.createTextNode(`\r
`)),e.appendChild(I("span",{className:"text-of",textContent:` ${((i=this.customFooterOptions.metricTexts)==null?void 0:i.of)??"of"} `})),e.appendChild(document.createTextNode(`\r
`)),e.appendChild(I("span",{className:"total-count",textContent:`${((s=this.metrics)==null?void 0:s.totalItemCount)??"0"}`}))),e.appendChild(document.createTextNode(`\r
`)),e.appendChild(I("span",{className:"text-items",textContent:` ${((r=this.customFooterOptions.metricTexts)==null?void 0:r.items)??"items"} `}))}return e}createFooterLastUpdate(){var s,r,o,a;const e=((r=(s=this.customFooterOptions)==null?void 0:s.metricTexts)==null?void 0:r.lastUpdate)??"Last Update",t=(o=this.metrics)!=null&&o.endTime?Wi((a=this.metrics)==null?void 0:a.endTime,this.customFooterOptions.dateFormat,"en-US"):"",i=I("span");return i.appendChild(I("span",{className:"text-last-update",textContent:e})),i.appendChild(document.createTextNode(`\r
`)),i.appendChild(I("span",{className:"last-update-timestamp",textContent:t})),i.appendChild(I("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),i}registerOnSelectedRowsChangedWhenEnabled(e){var i,s;if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&e&&!e.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;const r=((i=e.metricTexts)==null?void 0:i.itemsSelected)??((s=this.locales)==null?void 0:s.TEXT_ITEMS_SELECTED)??"TEXT_ITEMS_SELECTED";e.leftFooterText=`0 ${r}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,(o,a)=>{var c,h;this._selectedRowCount=a.rows.length;const l=((c=e.metricTexts)==null?void 0:c.itemsSelected)??((h=this.locales)==null?void 0:h.TEXT_ITEMS_SELECTED)??"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${l}`})}}}class cy{constructor(){this._isPreviouslyShown=!1,this._warningLeftElement=null,this._warningRightElement=null}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}init(e,t){this._grid=e,this._translaterService=t.get("TranslaterService")}dispose(){var e,t;(e=this._warningLeftElement)==null||e.remove(),(t=this._warningRightElement)==null||t.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(e=!0,t){var _,b,C,v;if(!this._grid||!this.gridOptions||this._isPreviouslyShown===e)return!1;this._isPreviouslyShown=e;const i=this._grid.getUID(),r={message:"No data to display.",...this.gridOptions.emptyDataWarning,...t},o=(r==null?void 0:r.className)??"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${i} .${o}`);const a=document.querySelector(`.${i} .grid-canvas.grid-canvas-left`),l=document.querySelector(`.${i} .grid-canvas.grid-canvas-right`),c=r.leftViewportMarginLeft??0,h=r.rightViewportMarginLeft??0,d=r.frozenLeftViewportMarginLeft??0,u=r.frozenRightViewportMarginLeft??0,p=((_=this.gridOptions)==null?void 0:_.frozenColumn)!==void 0&&this.gridOptions.frozenColumn>=0,f=typeof c=="string"?c:`${c}px`,g=typeof h=="string"?h:`${h}px`;if(this.gridOptions.autoHeight){const y=document.querySelector(`.${i} .slick-pane.slick-pane-top.slick-pane-left`);if(y&&y.style&&a&&a.style){const S=parseInt(y.style.height,10)||0,A=((b=this.gridOptions)==null?void 0:b.rowHeight)??0,P=this.gridOptions.enableFiltering?((C=this.gridOptions)==null?void 0:C.headerRowHeight)??0:0,F=this.gridOptions.createPreHeaderPanel?((v=this.gridOptions)==null?void 0:v.preHeaderPanelHeight)??0:0;if(e){let H=S!==null&&S<100?S:100;H+=P+F,y.style.minHeight=`${H}px`,a.style.minHeight=`${A}px`}}}let m=r.message;if(this.gridOptions.enableTranslate&&this._translaterService&&(r!=null&&r.messageKey)&&(m=this._translaterService.translate(r.messageKey)),!this._warningLeftElement&&a&&l&&(this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(...ht(o)),this._warningLeftElement.classList.add("left"),this._grid.applyHtmlCode(this._warningLeftElement,m),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),l.appendChild(this._warningRightElement),a.appendChild(this._warningLeftElement)),this._warningLeftElement){let y=e?"flex":"none";p&&e&&(y=r.hideFrozenLeftWarning?"none":"flex"),this._warningLeftElement.style.display=y;const S=typeof d=="string"?d:`${d}px`;this._warningLeftElement.style.marginLeft=p?S:f}if(this._warningRightElement){let y=e?"flex":"none";p&&e&&(y=r.hideFrozenRightWarning?"none":"flex"),this._warningRightElement.style.display=y;const S=typeof u=="string"?u:`${u}px`;this._warningRightElement.style.marginLeft=p?S:g}return e}}class UW{constructor(){this._enableTranslate=!1,this._subscriptions=[],this.currentPagination={},this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new pA,this._bindingEventService=new as}get availablePageSizes(){return this._paginationService.availablePageSizes||[]}get dataFrom(){return this._paginationService.dataFrom}get dataTo(){return this._paginationService.dataTo}get itemsPerPage(){return this._paginationService.itemsPerPage}set itemsPerPage(e){this._paginationService.changeItemPerPage(e)}get pageCount(){return this._paginationService.pageCount}get pageNumber(){return this._paginationService.pageNumber}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())??{}}get gridUid(){var e;return((e=this._grid)==null?void 0:e.getUID())||""}get locales(){var e;return((e=this.gridOptions)==null?void 0:e.locales)??se.locales}get totalItems(){return this._paginationService.totalItems}get isLeftPaginationDisabled(){return this.pageNumber===1||this.totalItems===0}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||this.totalItems===0}init(e,t,i,s){var r,o,a;if(this._grid=e,this._pubSubService=i,this._translaterService=s,this._paginationService=t,this.currentPagination=t.getFullPagination(),this._bindingHelper.querySelectorPrefix=this.gridUid?`.${this.gridUid} `:"",this._enableTranslate=((r=this.gridOptions)==null?void 0:r.enableTranslate)??!1,this._enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&((o=this._pubSubService)!=null&&o.subscribe)){const l=((a=this._translaterService)==null?void 0:a.eventName)??"onLanguageChange";this._subscriptions.push(this._pubSubService.subscribe(l,()=>this.translatePaginationTexts()))}this._subscriptions.push(this._pubSubService.subscribe("onPaginationRefreshed",l=>{var c;Object.keys(l).forEach(h=>this.currentPagination[h]=l[h]),this.updatePageButtonsUsability(),(c=this._spanInfoFromToElm)!=null&&c.style&&(this._spanInfoFromToElm.style.display=this.currentPagination.totalItems===0?"none":"")}),this._pubSubService.subscribe("onPaginationSetCursorBased",()=>{this.disposeDom(),this.renderPagination(this._gridContainerElm)}))}dispose(){this._pubSubService.unsubscribeAll(this._subscriptions),this.disposeDom()}disposeDom(){this._bindingEventService.unbindAll(),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(e){this._gridContainerElm=e;const t=this.createPaginationContainer(),i=I("div",{className:"slick-pagination-nav"}),s=I("nav",{ariaLabel:"Page navigation"}),r=I("ul",{className:"pagination"});this._seekFirstElm=I("li",{className:"page-item seek-first"},r),this._seekFirstElm.appendChild(I("a",{className:"page-link icon-seek-first",ariaLabel:"First Page",role:"button"})),this._seekPrevElm=I("li",{className:"page-item seek-prev"},r),this._seekPrevElm.appendChild(I("a",{className:"page-link icon-seek-prev",ariaLabel:"Previous Page",role:"button"})),s.appendChild(r);const o=this.createPageNumberSection(),a=I("nav",{ariaLabel:"Page navigation"}),l=I("ul",{className:"pagination"});this._seekNextElm=I("li",{className:"page-item seek-next"},l),this._seekNextElm.appendChild(I("a",{className:"page-link icon-seek-next",ariaLabel:"Next Page",role:"button"})),this._seekEndElm=I("li",{className:"page-item seek-end"},l),this._seekEndElm.appendChild(I("a",{className:"page-link icon-seek-end",ariaLabel:"Last Page",role:"button"})),a.appendChild(l),t.appendChild(i),i.appendChild(s),i.appendChild(o),i.appendChild(a);const c=this.createPaginationSettingsSection();t.appendChild(i),t.appendChild(c),this._paginationElement.appendChild(t),e!=null&&e.appendChild&&this._paginationElement&&e.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){if(this._itemPerPageElm&&Array.isArray(this.availablePageSizes))for(const e of this.availablePageSizes)this._itemPerPageElm.appendChild(I("option",{value:`${e}`,text:`${e}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this._paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingEventService.bind(this._seekFirstElm,"click",this.changeToFirstPage.bind(this)),this._bindingEventService.bind(this._seekEndElm,"click",this.changeToLastPage.bind(this)),this._bindingEventService.bind(this._seekNextElm,"click",this.changeToNextPage.bind(this)),this._bindingEventService.bind(this._seekPrevElm,"click",this.changeToPreviousPage.bind(this)),this._bindingEventService.bind(this._itemPerPageElm,"change",this.updateItemsPerPage.bind(this))}changeToFirstPage(e){this.isLeftPaginationDisabled||this._paginationService.goToFirstPage(e)}changeToLastPage(e){this.isRightPaginationDisabled||this._paginationService.goToLastPage(e)}changeToNextPage(e){this.isRightPaginationDisabled||this._paginationService.goToNextPage(e)}changeToPreviousPage(e){this.isLeftPaginationDisabled||this._paginationService.goToPreviousPage(e)}changeToCurrentPage(e){this._paginationService.goToPageNumber(+e)}updateItemsPerPage(e){var t;this.itemsPerPage=+(((t=e==null?void 0:e.target)==null?void 0:t.value)??0)}translatePaginationTexts(){var e;if(this._enableTranslate&&((e=this._translaterService)!=null&&e.translate)){const t=Ko(this.gridOptions);this.textItemsPerPage=this._translaterService.translate(`${t}ITEMS_PER_PAGE`),this.textItems=this._translaterService.translate(`${t}ITEMS`),this.textOf=this._translaterService.translate(`${t}OF`),this.textPage=this._translaterService.translate(`${t}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){const e=I("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),t=I("div",{className:"slick-pagination"});return e.appendChild(t),this._paginationElement=e,t}createPageNumberSection(){const e=I("div",{className:"slick-page-number"});return I("span",{className:"text-page",textContent:"Page"},e),e.appendChild(document.createTextNode(" ")),this._paginationService.isCursorBased?I("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},e):I("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},e),e.appendChild(document.createTextNode(" ")),I("span",{className:"text-of",textContent:"of"},e),e.appendChild(document.createTextNode(" ")),I("span",{className:"page-count",dataset:{test:"page-count"}},e),e}createPaginationSettingsSection(){const e=I("span",{className:"slick-pagination-settings"});this._itemPerPageElm=I("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},e),e.appendChild(document.createTextNode(" ")),I("span",{className:"text-item-per-page",textContent:"items per page"},e),e.appendChild(document.createTextNode(", "));const t=I("span",{className:"slick-pagination-count"},e);this._spanInfoFromToElm=I("span",{className:"page-info-from-to"},t),I("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode("-")),I("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" ")),I("span",{className:"text-of",textContent:"of"},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" "));const i=I("span",{className:"page-info-total-items"},t);return I("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},i),i.appendChild(document.createTextNode(" ")),I("span",{className:"text-items",textContent:"items"},i),i.appendChild(document.createTextNode(" ")),e}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}}class Dt{}G(Dt,"locales",{TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NO_ELEMENTS_FOUND:"Aucun élément trouvé",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"}),G(Dt,"VALIDATION_REQUIRED_FIELD","Field is required"),G(Dt,"VALIDATION_EDITOR_VALID_NUMBER","Please enter a valid number"),G(Dt,"VALIDATION_EDITOR_VALID_INTEGER","Please enter a valid integer number"),G(Dt,"VALIDATION_EDITOR_INTEGER_BETWEEN","Please enter a valid integer number between {{minValue}} and {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_INTEGER_MAX","Please enter a valid integer number that is lower than {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE","Please enter a valid integer number that is lower than or equal to {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_INTEGER_MIN","Please enter a valid integer number that is greater than {{minValue}}"),G(Dt,"VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE","Please enter a valid integer number that is greater than or equal to {{minValue}}"),G(Dt,"VALIDATION_EDITOR_NUMBER_BETWEEN","Please enter a valid number between {{minValue}} and {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_NUMBER_MAX","Please enter a valid number that is lower than {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE","Please enter a valid number that is lower than or equal to {{maxValue}}"),G(Dt,"VALIDATION_EDITOR_NUMBER_MIN","Please enter a valid number that is greater than {{minValue}}"),G(Dt,"VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE","Please enter a valid number that is greater than or equal to {{minValue}}"),G(Dt,"VALIDATION_EDITOR_DECIMAL_BETWEEN","Please enter a valid number with a maximum of {{maxDecimal}} decimals"),G(Dt,"VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN","Please make sure your text length is between {{minLength}} and {{maxLength}} characters"),G(Dt,"VALIDATION_EDITOR_TEXT_MAX_LENGTH","Please make sure your text is less than {{maxLength}} characters"),G(Dt,"VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE","Please make sure your text is less than or equal to {{maxLength}} characters"),G(Dt,"VALIDATION_EDITOR_TEXT_MIN_LENGTH","Please make sure your text is more than {{minLength}} character(s)"),G(Dt,"VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE","Please make sure your text is at least {{minLength}} character(s)");const em={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,autoHeight:!0,autoHeightRecalcRow:100,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:250,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:hy},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"},resetEditorButtonCssClass:"mdi mdi-refresh mdi-15px",resetFormButtonIconCssClass:"mdi mdi-refresh mdi-16px mdi-flip-h"},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline text-success",iconExportTextDelimitedCommand:"mdi mdi-download"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",of:"of",ofKey:"OF",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED"}},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:lI.input,defaultBackendServiceFilterTypingDebounce:500,defaultColumnSortFieldId:"id",defaultFilterPlaceholder:"🔎︎",defaultFilterRangeOperator:de.rangeInclusive,editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,enableFilterTrimWhiteSpace:!1,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:ps.kebabCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:mn.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"⮞",groupExpandedSymbol:"⮟",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:kr.comma,exportWithFormatter:!1,filename:"export",format:mn.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleDarkModeCommand:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-close",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4 mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,headerColumnValueExtractor:hy},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,saveDetailViewOnScroll:!1},headerRowHeight:35,rowHeight:35,topPanelHeight:30,preHeaderPanelWidth:"100%",translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"͏͏͏͏͏͏͏͏͏·"}};function hy(n,e){let t=(n==null?void 0:n.columnPickerLabel)??(n==null?void 0:n.name)??"";(t instanceof HTMLElement||t instanceof DocumentFragment)&&(t=t.textContent||"");const i=(n==null?void 0:n.columnGroup)||"",s=(e==null?void 0:e.columnGroupSeparator)??" - ";return i?i+s+t:t}let cI=(()=>{var s;let n=[HO()],e,t=[],i;return s=class{constructor(o=$(wg)){G(this,"au");this.au=o}async createAureliaViewModelAddToSlot(o,a,l){if(l){const c=Qe.getDefinition(o),h=a!=null&&a.addon?'addon.bind="bindableData.addon"':"",d=a!=null&&a.grid?'grid.bind="bindableData.grid"':"",u=a!=null&&a.dataView?'data-view.bind="bindableData.dataView"':"",p=a!=null&&a.parent?'parent.bind="bindableData.parent"':"";return l.innerHTML=`<${c.name} model.bind="bindableData.model" ${h} ${d} ${u} ${p}></${c.name}>`.trim(),await this.au.enhance({host:l,component:{bindableData:a},container:this.au.container.createChild().register(rc.creating(()=>{}))})}return null}},i=s,(()=>{const o=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;ri(null,e={value:i},n,{kind:"class",name:i.name,metadata:o},null,t),i=e.value,o&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),Ze(i,t)})(),i})(),GW=(()=>{var s;let n=[vm()],e,t=[],i;return s=class{constructor(o=$(Bs)){G(this,"container");this.container=o}get(o){try{return this.container.get(o)}catch{return null}}registerInstance(o,a){this.container.register(Ji.instance(o,a))}},i=s,(()=>{const o=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;ri(null,e={value:i},n,{kind:"class",name:i.name,metadata:o},null,t),i=e.value,o&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:o}),Ze(i,t)})(),i})();const Oe=n=>typeof n=="string",Ol=()=>{let n,e;const t=new Promise((i,s)=>{n=i,e=s});return t.resolve=n,t.reject=e,t},dy=n=>n==null?"":""+n,jW=(n,e,t)=>{n.forEach(i=>{e[i]&&(t[i]=e[i])})},KW=/###/g,uy=n=>n&&n.indexOf("###")>-1?n.replace(KW,"."):n,py=n=>!n||Oe(n),wc=(n,e,t)=>{const i=Oe(e)?e.split("."):e;let s=0;for(;s<i.length-1;){if(py(n))return{};const r=uy(i[s]);!n[r]&&t&&(n[r]=new t),Object.prototype.hasOwnProperty.call(n,r)?n=n[r]:n={},++s}return py(n)?{}:{obj:n,k:uy(i[s])}},fy=(n,e,t)=>{const{obj:i,k:s}=wc(n,e,Object);if(i!==void 0||e.length===1){i[s]=t;return}let r=e[e.length-1],o=e.slice(0,e.length-1),a=wc(n,o,Object);for(;a.obj===void 0&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),a=wc(n,o,Object),a&&a.obj&&typeof a.obj[`${a.k}.${r}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${r}`]=t},YW=(n,e,t,i)=>{const{obj:s,k:r}=wc(n,e,Object);s[r]=s[r]||[],s[r].push(t)},gu=(n,e)=>{const{obj:t,k:i}=wc(n,e);if(t)return t[i]},qW=(n,e,t)=>{const i=gu(n,t);return i!==void 0?i:gu(e,t)},hI=(n,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in n?Oe(n[i])||n[i]instanceof String||Oe(e[i])||e[i]instanceof String?t&&(n[i]=e[i]):hI(n[i],e[i],t):n[i]=e[i]);return n},oa=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var XW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const QW=n=>Oe(n)?n.replace(/[&<>"'\/]/g,e=>XW[e]):n;class ZW{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const JW=[" ",",","?","!",";"],eU=new ZW(20),tU=(n,e,t)=>{e=e||"",t=t||"";const i=JW.filter(o=>e.indexOf(o)<0&&t.indexOf(o)<0);if(i.length===0)return!0;const s=eU.getRegExp(`(${i.map(o=>o==="?"?"\\?":o).join("|")})`);let r=!s.test(n);if(!r){const o=n.indexOf(t);o>0&&!s.test(n.substring(0,o))&&(r=!0)}return r},tm=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const i=e.split(t);let s=n;for(let r=0;r<i.length;){if(!s||typeof s!="object")return;let o,a="";for(let l=r;l<i.length;++l)if(l!==r&&(a+=t),a+=i[l],o=s[a],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&l<i.length-1)continue;r+=l-r+1;break}s=o}return s},mu=n=>n&&n.replace("_","-"),iU={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class _u{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||iU,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,s){return s&&!this.debug?null:(Oe(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new _u(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new _u(this.logger,e)}}var en=new _u;class dp{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const s=this.observers[i].get(t)||0;this.observers[i].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(o=>{let[a,l]=o;for(let c=0;c<l;c++)a.apply(a,[e,...i])})}}class gy extends dp{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],i&&(Array.isArray(i)?a.push(...i):Oe(i)&&r?a.push(...i.split(r)):a.push(i)));const l=gu(this.data,a);return!l&&!t&&!i&&e.indexOf(".")>-1&&(e=a[0],t=a[1],i=a.slice(2).join(".")),l||!o||!Oe(i)?l:tm(this.data&&this.data[e]&&this.data[e][t],i,r)}addResource(e,t,i,s){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let a=[e,t];i&&(a=a.concat(o?i.split(o):i)),e.indexOf(".")>-1&&(a=e.split("."),s=t,t=a[1]),this.addNamespaces(t),fy(this.data,a,s),r.silent||this.emit("added",e,t,i,s)}addResources(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const r in i)(Oe(i[r])||Array.isArray(i[r]))&&this.addResource(e,t,r,i[r],{silent:!0});s.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,s,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),s=i,i=t,t=a[1]),this.addNamespaces(t);let l=gu(this.data,a)||{};o.skipCopy||(i=JSON.parse(JSON.stringify(i))),s?hI(l,i,r):l={...l,...i},fy(this.data,a,l),o.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var dI={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,i,s){return n.forEach(r=>{this.processors[r]&&(e=this.processors[r].process(e,t,i,s))}),e}};const my={};class vu extends dp{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),jW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=en.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,t);return i&&i.res!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let r=t.ns||this.options.defaultNS||[];const o=i&&e.indexOf(i)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!tU(e,i,s);if(o&&!a){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Oe(r)?[r]:r};const c=e.split(i);(i!==s||i===s&&this.options.ns.indexOf(c[0])>-1)&&(r=c.shift()),e=c.join(s)}return{key:e,namespaces:Oe(r)?[r]:r}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,r=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],t),l=a[a.length-1],c=t.lng||this.language,h=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(h){const v=t.nsSeparator||this.options.nsSeparator;return s?{res:`${l}${v}${o}`,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:`${l}${v}${o}`}return s?{res:o,usedKey:o,exactUsedKey:o,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(t)}:o}const d=this.resolve(e,t);let u=d&&d.res;const p=d&&d.usedKey||o,f=d&&d.exactUsedKey||o,g=Object.prototype.toString.apply(u),m=["[object Number]","[object Function]","[object RegExp]"],_=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,b=!this.i18nFormat||this.i18nFormat.handleAsObject,C=!Oe(u)&&typeof u!="boolean"&&typeof u!="number";if(b&&u&&C&&m.indexOf(g)<0&&!(Oe(_)&&Array.isArray(u))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const v=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,u,{...t,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(d.res=v,d.usedParams=this.getUsedParamsDetails(t),d):v}if(r){const v=Array.isArray(u),y=v?[]:{},S=v?f:p;for(const A in u)if(Object.prototype.hasOwnProperty.call(u,A)){const P=`${S}${r}${A}`;y[A]=this.translate(P,{...t,joinArrays:!1,ns:a}),y[A]===P&&(y[A]=u[A])}u=y}}else if(b&&Oe(_)&&Array.isArray(u))u=u.join(_),u&&(u=this.extendTranslation(u,e,t,i));else{let v=!1,y=!1;const S=t.count!==void 0&&!Oe(t.count),A=vu.hasDefaultValue(t),P=S?this.pluralResolver.getSuffix(c,t.count,t):"",F=t.ordinal&&S?this.pluralResolver.getSuffix(c,t.count,{ordinal:!1}):"",H=S&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),W=H&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${P}`]||t[`defaultValue${F}`]||t.defaultValue;!this.isValidLookup(u)&&A&&(v=!0,u=W),this.isValidLookup(u)||(y=!0,u=o);const Y=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&y?void 0:u,ae=A&&W!==u&&this.options.updateMissing;if(y||v||ae){if(this.logger.log(ae?"updateKey":"missingKey",c,l,o,ae?W:u),r){const re=this.resolve(o,{...t,keySeparator:!1});re&&re.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ue=[];const te=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&te&&te[0])for(let re=0;re<te.length;re++)ue.push(te[re]);else this.options.saveMissingTo==="all"?ue=this.languageUtils.toResolveHierarchy(t.lng||this.language):ue.push(t.lng||this.language);const V=(re,Z,_e)=>{const ge=A&&_e!==u?_e:Y;this.options.missingKeyHandler?this.options.missingKeyHandler(re,l,Z,ge,ae,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(re,l,Z,ge,ae,t),this.emit("missingKey",re,l,Z,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&S?ue.forEach(re=>{const Z=this.pluralResolver.getSuffixes(re,t);H&&t[`defaultValue${this.options.pluralSeparator}zero`]&&Z.indexOf(`${this.options.pluralSeparator}zero`)<0&&Z.push(`${this.options.pluralSeparator}zero`),Z.forEach(_e=>{V([re],o+_e,t[`defaultValue${_e}`]||W)})}):V(ue,o,W))}u=this.extendTranslation(u,e,t,d,i),y&&u===o&&this.options.appendNamespaceToMissingKey&&(u=`${l}:${o}`),(y||v)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?u=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${o}`:o,v?u:void 0):u=this.options.parseMissingKeyHandler(u))}return s?(d.res=u,d.usedParams=this.getUsedParamsDetails(t),d):u}extendTranslation(e,t,i,s,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const c=Oe(e)&&(i&&i.interpolation&&i.interpolation.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let h;if(c){const u=e.match(this.interpolator.nestingRegexp);h=u&&u.length}let d=i.replace&&!Oe(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),e=this.interpolator.interpolate(e,d,i.lng||this.language||s.usedLng,i),c){const u=e.match(this.interpolator.nestingRegexp),p=u&&u.length;h<p&&(i.nest=!1)}!i.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(i.lng=this.language||s.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var u=arguments.length,p=new Array(u),f=0;f<u;f++)p[f]=arguments[f];return r&&r[0]===p[0]&&!i.context?(o.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${t[0]}`),null):o.translate(...p,t)},i)),i.interpolation&&this.interpolator.reset()}const a=i.postProcess||this.options.postProcess,l=Oe(a)?[a]:a;return e!=null&&l&&l.length&&i.applyPostProcessor!==!1&&(e=dI.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,s,r,o,a;return Oe(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(i))return;const c=this.extractFromKey(l,t),h=c.key;s=h;let d=c.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const u=t.count!==void 0&&!Oe(t.count),p=u&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),f=t.context!==void 0&&(Oe(t.context)||typeof t.context=="number")&&t.context!=="",g=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(m=>{this.isValidLookup(i)||(a=m,!my[`${g[0]}-${m}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(my[`${g[0]}-${m}`]=!0,this.logger.warn(`key "${s}" for languages "${g.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach(_=>{if(this.isValidLookup(i))return;o=_;const b=[h];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(b,h,_,m,t);else{let v;u&&(v=this.pluralResolver.getSuffix(_,t.count,t));const y=`${this.options.pluralSeparator}zero`,S=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(b.push(h+v),t.ordinal&&v.indexOf(S)===0&&b.push(h+v.replace(S,this.options.pluralSeparator)),p&&b.push(h+y)),f){const A=`${h}${this.options.contextSeparator}${t.context}`;b.push(A),u&&(b.push(A+v),t.ordinal&&v.indexOf(S)===0&&b.push(A+v.replace(S,this.options.pluralSeparator)),p&&b.push(A+y))}}let C;for(;C=b.pop();)this.isValidLookup(i)||(r=C,i=this.getResource(_,m,C,t))}))})}),{res:i,usedKey:s,exactUsedKey:r,usedLng:o,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,s):this.resourceStore.getResource(e,t,i,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!Oe(e.replace);let s=i?e.replace:e;if(i&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!i){s={...s};for(const r of t)delete s[r]}return s}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}const kf=n=>n.charAt(0).toUpperCase()+n.slice(1);class _y{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=en.create("languageUtils")}getScriptPartFromCode(e){if(e=mu(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=mu(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Oe(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let i=e.split("-");return this.options.lowerCaseLng?i=i.map(s=>s.toLowerCase()):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=kf(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),t.indexOf(i[1].toLowerCase())>-1&&(i[1]=kf(i[1].toLowerCase())),t.indexOf(i[2].toLowerCase())>-1&&(i[2]=kf(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const s=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const s=this.getLanguagePartFromCode(i);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(r=>{if(r===s)return r;if(!(r.indexOf("-")<0&&s.indexOf("-")<0)&&(r.indexOf("-")>0&&s.indexOf("-")<0&&r.substring(0,r.indexOf("-"))===s||r.indexOf(s)===0&&s.length>1))return r})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),Oe(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],r=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Oe(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(e))):Oe(e)&&r(this.formatLanguageCode(e)),i.forEach(o=>{s.indexOf(o)<0&&r(this.formatLanguageCode(o))}),s}}let sU=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],nU={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const rU=["v1","v2","v3"],oU=["v4"],vy={zero:0,one:1,two:2,few:3,many:4,other:5},aU=()=>{const n={};return sU.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:nU[e.fc]}})}),n};class lU{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=en.create("pluralResolver"),(!this.options.compatibilityJSON||oU.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=aU(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const i=mu(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:i,type:s});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(i,{type:s})}catch{if(!e.match(/-|_/))return;const l=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(l,t)}return this.pluralRulesCache[r]=o,o}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=this.getRule(e,t);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort((s,r)=>vy[s]-vy[r]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):i.numbers.map(s=>this.getSuffix(e,s,t)):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,i);return s?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[i];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const r=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:r():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?r():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!rU.includes(this.options.compatibilityJSON)}}const by=function(n,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,r=qW(n,e,t);return!r&&s&&Oe(t)&&(r=tm(n,t,i),r===void 0&&(r=tm(e,t,i))),r},Df=n=>n.replace(/\$/g,"$$$$");class cU{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=en.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:s,prefix:r,prefixEscaped:o,suffix:a,suffixEscaped:l,formatSeparator:c,unescapeSuffix:h,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:_,alwaysFormat:b}=e.interpolation;this.escape=t!==void 0?t:QW,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=r?oa(r):o||"{{",this.suffix=a?oa(a):l||"}}",this.formatSeparator=c||",",this.unescapePrefix=h?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=u?oa(u):p||oa("$t("),this.nestingSuffix=f?oa(f):g||oa(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=_||1e3,this.alwaysFormat=b!==void 0?b:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>t&&t.source===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,s){let r,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=p=>{if(p.indexOf(this.formatSeparator)<0){const _=by(t,l,p,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(_,void 0,i,{...s,...t,interpolationkey:p}):_}const f=p.split(this.formatSeparator),g=f.shift().trim(),m=f.join(this.formatSeparator).trim();return this.format(by(t,l,g,this.options.keySeparator,this.options.ignoreJSONStructure),m,i,{...s,...t,interpolationkey:g})};this.resetRegExp();const h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,d=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:p=>Df(p)},{regex:this.regexp,safeValue:p=>this.escapeValue?Df(this.escape(p)):Df(p)}].forEach(p=>{for(a=0;r=p.regex.exec(e);){const f=r[1].trim();if(o=c(f),o===void 0)if(typeof h=="function"){const m=h(e,r,s);o=Oe(m)?m:""}else if(s&&Object.prototype.hasOwnProperty.call(s,f))o="";else if(d){o=r[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${e}`),o="";else!Oe(o)&&!this.useRawValueToEscape&&(o=dy(o));const g=p.safeValue(o);if(e=e.replace(r[0],g),d?(p.regex.lastIndex+=o.length,p.regex.lastIndex-=r[0].length):p.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,r,o;const a=(l,c)=>{const h=this.nestingOptionsSeparator;if(l.indexOf(h)<0)return l;const d=l.split(new RegExp(`${h}[ ]*{`));let u=`{${d[1]}`;l=d[0],u=this.interpolate(u,o);const p=u.match(/'/g),f=u.match(/"/g);(p&&p.length%2===0&&!f||f.length%2!==0)&&(u=u.replace(/'/g,'"'));try{o=JSON.parse(u),c&&(o={...c,...o})}catch(g){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,g),`${l}${h}${u}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,l};for(;s=this.nestingRegexp.exec(e);){let l=[];o={...i},o=o.replace&&!Oe(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;let c=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const h=s[1].split(this.formatSeparator).map(d=>d.trim());s[1]=h.shift(),l=h,c=!0}if(r=t(a.call(this,s[1].trim(),o),o),r&&s[0]===e&&!Oe(r))return r;Oe(r)||(r=dy(r)),r||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),r=""),c&&(r=l.reduce((h,d)=>this.format(h,d,i.lng,{...i,interpolationkey:s[1].trim()}),r.trim())),e=e.replace(s[0],r),this.regexp.lastIndex=0}return e}}const hU=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const i=n.split("(");e=i[0].toLowerCase().trim();const s=i[1].substring(0,i[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(o=>{if(o){const[a,...l]=o.split(":"),c=l.join(":").trim().replace(/^'+|'+$/g,""),h=a.trim();t[h]||(t[h]=c),c==="false"&&(t[h]=!1),c==="true"&&(t[h]=!0),isNaN(c)||(t[h]=parseInt(c,10))}})}return{formatName:e,formatOptions:t}},aa=n=>{const e={};return(t,i,s)=>{let r=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(r={...r,[s.interpolationkey]:void 0});const o=i+JSON.stringify(r);let a=e[o];return a||(a=n(mu(i),s),e[o]=a),a(t)}};class dU{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=en.create("formatter"),this.options=e,this.formats={number:aa((t,i)=>{const s=new Intl.NumberFormat(t,{...i});return r=>s.format(r)}),currency:aa((t,i)=>{const s=new Intl.NumberFormat(t,{...i,style:"currency"});return r=>s.format(r)}),datetime:aa((t,i)=>{const s=new Intl.DateTimeFormat(t,{...i});return r=>s.format(r)}),relativetime:aa((t,i)=>{const s=new Intl.RelativeTimeFormat(t,{...i});return r=>s.format(r,i.range||"day")}),list:aa((t,i)=>{const s=new Intl.ListFormat(t,{...i});return r=>s.format(r)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=aa(t)}format(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const r=t.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(a=>a.indexOf(")")>-1)){const a=r.findIndex(l=>l.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,a)].join(this.formatSeparator)}return r.reduce((a,l)=>{const{formatName:c,formatOptions:h}=hU(l);if(this.formats[c]){let d=a;try{const u=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},p=u.locale||u.lng||s.locale||s.lng||i;d=this.formats[c](a,p,{...h,...s,...u})}catch(u){this.logger.warn(u)}return d}else this.logger.warn(`there was no format function for ${c}`);return a},e)}}const uU=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class pU extends dp{constructor(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=s,this.logger=en.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,s.backend,s)}queueLoad(e,t,i,s){const r={},o={},a={},l={};return e.forEach(c=>{let h=!0;t.forEach(d=>{const u=`${c}|${d}`;!i.reload&&this.store.hasResourceBundle(c,d)?this.state[u]=2:this.state[u]<0||(this.state[u]===1?o[u]===void 0&&(o[u]=!0):(this.state[u]=1,h=!1,o[u]===void 0&&(o[u]=!0),r[u]===void 0&&(r[u]=!0),l[d]===void 0&&(l[d]=!0)))}),h||(a[c]=!0)}),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(l)}}loaded(e,t,i){const s=e.split("|"),r=s[0],o=s[1];t&&this.emit("failedLoading",r,o,t),!t&&i&&this.store.addResourceBundle(r,o,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const a={};this.queue.forEach(l=>{YW(l.loaded,[r],o),uU(l,e),t&&l.errors.push(t),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(c=>{a[c]||(a[c]={});const h=l.loaded[c];h.length&&h.forEach(d=>{a[c][d]===void 0&&(a[c][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(l=>!l.done)}read(e,t,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,o=arguments.length>5?arguments[5]:void 0;if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:s,wait:r,callback:o});return}this.readingCalls++;const a=(c,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(c&&h&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,s+1,r*2,o)},r);return}o(c,h)},l=this.backend[i].bind(this.backend);if(l.length===2){try{const c=l(e,t);c&&typeof c.then=="function"?c.then(h=>a(null,h)).catch(a):a(null,c)}catch(c){a(c)}return}return l(e,t,a)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();Oe(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Oe(t)&&(t=[t]);const r=this.queueLoad(e,t,i,s);if(!r.toLoad.length)return r.pending.length||s(),null;r.toLoad.forEach(o=>{this.loadOne(o)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),s=i[0],r=i[1];this.read(s,r,"read",void 0,void 0,(o,a)=>{o&&this.logger.warn(`${t}loading namespace ${r} for language ${s} failed`,o),!o&&a&&this.logger.log(`${t}loaded namespace ${r} for language ${s}`,a),this.loaded(e,o,a)})}saveMissing(e,t,i,s,r){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if(this.backend&&this.backend.create){const l={...o,isUpdate:r},c=this.backend.create.bind(this.backend);if(c.length<6)try{let h;c.length===5?h=c(e,t,i,s,l):h=c(e,t,i,s),h&&typeof h.then=="function"?h.then(d=>a(null,d)).catch(a):a(null,h)}catch(h){a(h)}else c(e,t,i,s,a,l)}!e||!e[0]||this.store.addResource(e[0],t,i,s)}}}const wy=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),Oe(n[1])&&(e.defaultValue=n[1]),Oe(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),Cy=n=>(Oe(n.ns)&&(n.ns=[n.ns]),Oe(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),Oe(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),Qh=()=>{},fU=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class Fc extends dp{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=Cy(e),this.services={},this.logger=en,this.modules={external:[]},fU(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(Oe(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=wy();this.options={...s,...this.options,...Cy(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const r=h=>h?typeof h=="function"?new h:h:null;if(!this.options.isClone){this.modules.logger?en.init(r(this.modules.logger),this.options):en.init(null,this.options);let h;this.modules.formatter?h=this.modules.formatter:typeof Intl<"u"&&(h=dU);const d=new _y(this.options);this.store=new gy(this.options.resources,this.options);const u=this.services;u.logger=en,u.resourceStore=this.store,u.languageUtils=d,u.pluralResolver=new lU(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),h&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(u.formatter=r(h),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new cU(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new pU(r(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),m=1;m<f;m++)g[m-1]=arguments[m];e.emit(p,...g)}),this.modules.languageDetector&&(u.languageDetector=r(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=r(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new vu(this.services,this.options),this.translator.on("*",function(p){for(var f=arguments.length,g=new Array(f>1?f-1:0),m=1;m<f;m++)g[m-1]=arguments[m];e.emit(p,...g)}),this.modules.external.forEach(p=>{p.init&&p.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Qh),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(h=>{this[h]=function(){return e.store[h](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(h=>{this[h]=function(){return e.store[h](...arguments),e}});const l=Ol(),c=()=>{const h=(d,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(u),i(d,u)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return h(null,this.t.bind(this));this.changeLanguage(this.options.lng,h)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),l}loadResources(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qh;const s=Oe(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const r=[],o=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(c=>{c!=="cimode"&&r.indexOf(c)<0&&r.push(c)})};s?o(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>o(l)),this.options.preload&&this.options.preload.forEach(a=>o(a)),this.services.backendConnector.load(r,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(a)})}else i(null)}reloadResources(e,t,i){const s=Ol();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Qh),this.services.backendConnector.reload(e,t,r=>{s.resolve(),i(r)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&dI.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const s=Ol();this.emit("languageChanging",e);const r=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},o=(l,c)=>{c?(r(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,s.resolve(function(){return i.t(...arguments)}),t&&t(l,function(){return i.t(...arguments)})},a=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=Oe(l)?l:this.services.languageUtils.getBestMatchFromCodes(l);c&&(this.language||r(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,h=>{o(h,c)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),s}getFixedT(e,t,i){var s=this;const r=function(o,a){let l;if(typeof a!="object"){for(var c=arguments.length,h=new Array(c>2?c-2:0),d=2;d<c;d++)h[d-2]=arguments[d];l=s.options.overloadTranslationOptionHandler([o,a].concat(h))}else l={...a};l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||i||r.keyPrefix);const u=s.options.keySeparator||".";let p;return l.keyPrefix&&Array.isArray(o)?p=o.map(f=>`${l.keyPrefix}${u}${f}`):p=l.keyPrefix?`${l.keyPrefix}${u}${o}`:o,s.t(p,l)};return Oe(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=i,r}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const o=(a,l)=>{const c=this.services.backendConnector.state[`${a}|${l}`];return c===-1||c===0||c===2};if(t.precheck){const a=t.precheck(this,o);if(a!==void 0)return a}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(i,e)&&(!s||o(r,e)))}loadNamespaces(e,t){const i=Ol();return this.options.ns?(Oe(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{i.resolve(),t&&t(s)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Ol();Oe(e)&&(e=[e]);const s=this.options.preload||[],r=e.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return r.length?(this.options.preload=s.concat(r),this.loadResources(o=>{i.resolve(),t&&t(o)}),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=this.services&&this.services.languageUtils||new _y(wy());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new Fc(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qh;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},r=new Fc(s);return(e.debug!==void 0||e.prefix!==void 0)&&(r.logger=r.logger.clone(e)),["store","services","language"].forEach(a=>{r[a]=this[a]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},i&&(r.store=new gy(this.store.data,s),r.services.resourceStore=r.store),r.translator=new vu(r.services,s),r.translator.on("*",function(a){for(var l=arguments.length,c=new Array(l>1?l-1:0),h=1;h<l;h++)c[h-1]=arguments[h];r.emit(a,...c)}),r.init(s,t),r.translator.options=s,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ci=Fc.createInstance();Ci.createInstance=Fc.createInstance;Ci.createInstance;Ci.dir;Ci.init;Ci.loadResources;Ci.reloadResources;Ci.use;Ci.changeLanguage;Ci.getFixedT;Ci.t;Ci.exists;Ci.setDefaultNamespace;Ci.hasLoadedNamespace;Ci.loadNamespaces;Ci.loadLanguages;const No={I18N_EA_CHANNEL:"i18n:locale:changed",I18N_SIGNAL:"aurelia-translation-signal",RT_SIGNAL:"aurelia-relativetime-signal"};var yy;(function(n){n.translationValueConverterName="t",n.dateFormatValueConverterName="df",n.numberFormatValueConverterName="nf",n.relativeTimeValueConverterName="rt"})(yy||(yy={}));function ev(n,e){const t=e.ast.expression;if(!(t instanceof Ac)){const i=new Ac(t,n,e.ast.args);e.ast.expression=i}}const gU="Interpolation",tv="IsProperty",iv=Oi.toView,Sy=TL.activating,sv="binding-behavior",nv="value-converter";class uI{bind(e,t){ev("df",t)}}uI.$au={type:sv,name:"df"};function mU(n,e,t,i,s,r){function o(m){if(m!==void 0&&typeof m!="function")throw new TypeError("Function expected");return m}for(var a=i.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c={},h,d=!1,u=t.length-1;u>=0;u--){var p={};for(var f in i)p[f]=f==="access"?{}:i[f];for(var f in i.access)p.access[f]=i.access[f];p.addInitializer=function(m){if(d)throw new TypeError("Cannot add initializers after decoration has completed");r.push(o(m||null))};var g=(0,t[u])(a==="accessor"?{get:c.get,set:c.set}:c[l],p);if(a==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(c.get=h),(h=o(g.set))&&(c.set=h),(h=o(g.init))&&s.unshift(h)}else(h=o(g))&&(a==="field"?s.unshift(h):c[l]=h)}d=!0}function Ey(n,e,t){for(var i=arguments.length>2,s=0;s<e.length;s++)t=i?e[s].call(n,t):e[s].call(n);return i?t:void 0}const pI=wi.createInterface("I18nInitOptions"),im=wi.createInterface("II18nextWrapper");class _U{constructor(){this.i18next=Ci}}class vU{constructor(e){this.value=void 0;const t=/\[([a-z\-, ]*)\]/ig;this.attributes=[];const i=t.exec(e);i&&(e=e.replace(i[0],""),this.attributes=i[1].split(",")),this.key=e}}const Lr=wi.createInterface("I18N");let bU=(()=>{var n;let e,t=[],i=[];return n=class{constructor(){this.i18next=Ey(this,t,void 0),this.initPromise=Ey(this,i),this._localeSubscribers=new Set,this._signaler=$(Oc),this.ea=$(Mr),this.i18next=$(im).i18next,this.initPromise=this._initializeI18next($(pI))}evaluate(r,o){const a=r.split(";"),l=[];for(const c of a){const h=new vU(c),d=h.key,u=this.tr(d,o);this.options.skipTranslationOnMissingKey&&u===d?console.warn(`[DEV:aurelia] Couldn't find translation for key: ${d}`):(h.value=u,l.push(h))}return l}tr(r,o){return this.i18next.t(r,o)}getLocale(){return this.i18next.language}async setLocale(r){const a={oldLocale:this.getLocale(),newLocale:r};await this.i18next.changeLanguage(r),this.ea.publish(No.I18N_EA_CHANNEL,a),this._localeSubscribers.forEach(l=>l.handleLocaleChange(a)),this._signaler.dispatchSignal(No.I18N_SIGNAL)}createNumberFormat(r,o){return Intl.NumberFormat(o||this.getLocale(),r)}nf(r,o,a){return this.createNumberFormat(o,a).format(r)}createDateTimeFormat(r,o){return Intl.DateTimeFormat(o||this.getLocale(),r)}df(r,o,a){return this.createDateTimeFormat(o,a).format(r)}uf(r,o){const a=this.nf(3333.3333333333335,void 0,o);let l=a[1];const c=a[5];l==="."&&(l="\\.");const h=r.replace(new RegExp(l,"g"),"").replace(/[^\d.,-]/g,"").replace(c,".");return Number(h)}createRelativeTimeFormat(r,o){return new Intl.RelativeTimeFormat(o||this.getLocale(),r)}rt(r,o,a){let l=r.getTime()-this.now();const c=this.options.rtEpsilon*(l>0?1:0),h=this.createRelativeTimeFormat(o,a);let d=l/31536e6;return Math.abs(d+c)>=1?h.format(Math.round(d),"year"):(d=l/2592e6,Math.abs(d+c)>=1?h.format(Math.round(d),"month"):(d=l/6048e5,Math.abs(d+c)>=1?h.format(Math.round(d),"week"):(d=l/864e5,Math.abs(d+c)>=1?h.format(Math.round(d),"day"):(d=l/36e5,Math.abs(d+c)>=1?h.format(Math.round(d),"hour"):(d=l/6e4,Math.abs(d+c)>=1?h.format(Math.round(d),"minute"):(l=Math.abs(l)<1e3?1e3:l,d=l/1e3,h.format(Math.round(d),"second")))))))}subscribeLocaleChange(r){this._localeSubscribers.add(r)}unsubscribeLocaleChange(r){this._localeSubscribers.delete(r)}now(){return new Date().getTime()}async _initializeI18next(r){const o={lng:"en",fallbackLng:["en"],debug:!1,plugins:[],rtEpsilon:.01,skipTranslationOnMissingKey:!1};this.options={...o,...r};for(const a of this.options.plugins)this.i18next.use(a);await this.i18next.init(this.options)}},(()=>{const s=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;e=[tD],mU(null,null,e,{kind:"field",name:"i18next",static:!1,private:!1,access:{has:r=>"i18next"in r,get:r=>r.i18next,set:(r,o)=>{r.i18next=o}},metadata:s},t,i),s&&Object.defineProperty(n,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:s})})(),n})(),fI=class{constructor(){this.signals=[No.I18N_SIGNAL],this.i18n=$(Lr)}toView(e,t,i){if(!e&&e!==0||typeof e=="string"&&e.trim()==="")return e;if(typeof e=="string"){const s=Number(e),r=new Date(Number.isInteger(s)?s:e);if(isNaN(r.getTime()))return e;e=r}return this.i18n.df(e,t,i)}};fI.$au={type:nv,name:"df"};class gI{bind(e,t){ev("nf",t)}}gI.$au={type:sv,name:"nf"};class mI{constructor(){this.signals=[No.I18N_SIGNAL],this.i18n=$(Lr)}toView(e,t,i){return typeof e!="number"?e:this.i18n.nf(e,t,i)}}mI.$au={type:nv,name:"nf"};class _I{bind(e,t){ev("rt",t)}}_I.$au={type:sv,name:"rt"};class vI{constructor(){this.signals=[No.I18N_SIGNAL,No.RT_SIGNAL],this.i18n=$(Lr)}toView(e,t,i){return e instanceof Date?this.i18n.rt(e,t,i):e}}vI.$au={type:nv,name:"rt"};class bI{bind(e,t){const i=t.ast.expression;if(!(i instanceof Ac)){const s=new Ac(i,"t",t.ast.args);t.ast.expression=s}}}Ym.define("t",bI);const Lf=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${CU(n,...e)}`),wU={99:"Method {{0}} not implemented",4e3:"Translation key not found",4001:"Translation parameter already existed",4002:"Expected the i18n key to be a string, but got {{0}} of type {{1}}"},CU=(n,...e)=>{var i;let t=wU[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;default:a!=null&&a.startsWith(".")?l=String(l[a.slice(1)]):l=String(l)}t=t.slice(0,o.index)+l+t.slice(r.lastIndex),o=r.exec(t)}}return t},yU=["textContent","innerHTML","prepend","append"],SU=new Map([["text","textContent"],["html","innerHTML"]]),EU={optional:!0},TU={preempt:!0};class Zn{static create({parser:e,observerLocator:t,context:i,controller:s,target:r,instruction:o,platform:a,isParameterContext:l}){const c=this._getBinding({observerLocator:t,context:i,controller:s,target:r,platform:a}),h=typeof o.from=="string"?e.parse(o.from,tv):o.from;if(l)c.useParameter(h);else{const d=h instanceof Pu?e.parse(h.value,gU):void 0;c.ast=d||h}}static _getBinding({observerLocator:e,context:t,controller:i,target:s,platform:r}){let o=i.bindings&&i.bindings.find(a=>a instanceof Zn&&a.target===s);return o||(o=new Zn(i,t,e,r,s),i.addBinding(o)),o}constructor(e,t,i,s,r){this.isBound=!1,this._contentAttributes=yU,this._task=null,this.parameter=null,this.boundFn=!1,this.strict=!0,this.l=t,this._controller=e,this.target=r,this.i18n=t.get(Lr),this._platform=s,this._targetAccessors=new Set,this.oL=i,this._taskQueue=s.domQueue}bind(e){var i;if(this.isBound)return;const t=this.ast;if(t==null)throw Lf(4e3);this._scope=e,this.i18n.subscribeLocaleChange(this),this._keyExpression=it(t,e,this,this),this._ensureKeyExpression(),(i=this.parameter)==null||i.bind(e),this.updateTranslations(),this.isBound=!0}unbind(){var e;this.isBound&&(this.i18n.unsubscribeLocaleChange(this),yn(this.ast,this._scope,this),(e=this.parameter)==null||e.unbind(),this._targetAccessors.clear(),this._task!==null&&(this._task.cancel(),this._task=null),this._scope=void 0,this.obs.clearAll(),this.isBound=!1)}handleChange(e,t){this.obs.version++,this._keyExpression=it(this.ast,this._scope,this,this),this.obs.clear(),this._ensureKeyExpression(),this.updateTranslations()}handleLocaleChange(){this.updateTranslations()}useParameter(e){if(this.parameter!=null)throw Lf(4001);this.parameter=new sm(this,e,()=>this.updateTranslations())}updateTranslations(){var o;const e=this.i18n.evaluate(this._keyExpression,(o=this.parameter)==null?void 0:o.value),t=Object.create(null),i=[],s=this._task;this._targetAccessors.clear();for(const a of e){const l=a.value,c=this._preprocessAttributes(a.attributes);for(const h of c)if(this._isContentAttribute(h))t[h]=l;else{const d=Qe.for(this.target,EU),u=d!=null&&d.viewModel?this.oL.getAccessor(d.viewModel,Rt(h)):this.oL.getAccessor(this.target,h);this._controller.state!==Sy&&(u.type&Nu.Layout)>0?i.push(new AU(u,l,this.target,h)):u.setValue(l,this.target,h),this._targetAccessors.add(u)}}let r=!1;Object.keys(t).length>0&&(r=this._controller.state!==Sy,r||this._updateContent(t)),(i.length>0||r)&&(this._task=this._taskQueue.queueTask(()=>{this._task=null;for(const a of i)a.run();r&&this._updateContent(t)},TU)),s==null||s.cancel()}_preprocessAttributes(e){e.length===0&&(e=this.target.tagName==="IMG"?["src"]:["textContent"]);for(const[t,i]of SU){const s=e.findIndex(r=>r===t);s>-1&&e.splice(s,1,i)}return e}_isContentAttribute(e){return this._contentAttributes.includes(e)}_updateContent(e){const t=Pa(this.target.childNodes),i=[],s="au-i18n";for(const o of t)Reflect.get(o,s)||i.push(o);const r=this._prepareTemplate(e,s,i);this.target.innerHTML="";for(const o of Pa(r.content.childNodes))this.target.appendChild(o)}_prepareTemplate(e,t,i){const s=this._platform.document.createElement("template");if(this._addContentToTemplate(s,e.prepend,t),!this._addContentToTemplate(s,e.innerHTML??e.textContent,t))for(const r of i)s.content.append(r);return this._addContentToTemplate(s,e.append,t),s}_addContentToTemplate(e,t,i){if(t!=null){const s=this._platform.document.createElement("div");s.innerHTML=t;for(const r of Pa(s.childNodes))Reflect.set(r,i,!0),e.content.append(r);return!0}return!1}_ensureKeyExpression(){const e=this._keyExpression??(this._keyExpression=""),t=typeof e;if(t!=="string")throw Lf(4002,e,t)}}rs(Zn,null);zs(Zn);Hr(Zn,()=>"updateTranslations");class AU{constructor(e,t,i,s){this.accessor=e,this.v=t,this.el=i,this.attr=s}run(){this.accessor.setValue(this.v,this.el,this.attr)}}class sm{constructor(e,t,i){this.owner=e,this.ast=t,this.updater=i,this.isBound=!1,this.boundFn=!1,this.strict=!0,this.oL=e.oL,this.l=e.l}handleChange(e,t){this.isBound&&(this.obs.version++,this.value=it(this.ast,this._scope,this,this),this.obs.clear(),this.updater())}bind(e){this.isBound||(this._scope=e,ir(this.ast,e,this),this.value=it(this.ast,e,this,this),this.isBound=!0)}unbind(){this.isBound&&(yn(this.ast,this._scope,this),this._scope=void 0,this.obs.clearAll())}}rs(sm,null),zs(sm);var wI;const CI="tpt",bu="t-params.bind";class nm{[(wI=Symbol.metadata,bu)](e,t){return new mi(e,t,"",bu)}}nm[wI]={[Hs]:Ms.create([{pattern:bu,symbols:""}],nm)};class IU{constructor(e,t){this.from=e,this.to=t,this.type=CI,this.mode=iv}}class yI{constructor(){this.ignoreAttr=!1}build(e,t,i){const s=e.attr;let r=s.target;return e.bindable==null?r=i.map(e.node,r)??Rt(r):r=e.bindable.name,new IU(t.parse(s.rawValue,tv),r)}}yI.$au={type:"binding-command",name:bu};const RU=Mt(class{constructor(){this.target=CI}render(e,t,i,s,r,o){Zn.create({parser:r,observerLocator:o,context:e.container,controller:e,target:t,instruction:i,isParameterContext:!0,platform:s})}}),SI="tt";class OU{constructor(e,t){this.from=e,this.to=t,this.type=SI,this.mode=iv}}class xU{constructor(){this.ignoreAttr=!1}build(e,t,i){let s;return e.bindable==null?s=i.map(e.node,e.attr.target)??Rt(e.attr.target):s=e.bindable.name,new OU(new Pu(e.attr.rawValue),s)}}const PU=Mt(class{constructor(){this.target=SI}render(e,t,i,s,r,o){Zn.create({parser:r,observerLocator:o,context:e.container,controller:e,target:t,instruction:i,platform:s})}}),EI="tbt";class kU{constructor(e,t){this.from=e,this.to=t,this.type=EI,this.mode=iv}}class DU{constructor(){this.ignoreAttr=!1}build(e,t,i){let s;return e.bindable==null?s=i.map(e.node,e.attr.target)??Rt(e.attr.target):s=e.bindable.name,new kU(t.parse(e.attr.rawValue,tv),s)}}const LU=Mt(class{constructor(){this.target=EI}render(e,t,i,s,r,o){Zn.create({parser:r,observerLocator:o,context:e.container,controller:e,target:t,instruction:i,platform:s})}});class TI{constructor(){this.signals=[No.I18N_SIGNAL],this.i18n=$(Lr)}toView(e,t){return this.i18n.tr(e,t)}}Vu.define("t",TI);const NU=[TI,bI];function MU(n){const e=n.translationAttributeAliases,t=Array.isArray(e)?e:["t"],i=[],s=[],r=[],o=[];class a{}class l{}for(const h of t){i.push({pattern:h,symbols:""}),a.prototype[h]=function(u,p,f){return new mi(u,p,"",h)};const d=`${h}.bind`;s.push({pattern:d,symbols:"."}),l.prototype[d]=function(u,p,f){return new mi(u,p,f[1],d)},h!=="t"&&(r.push(h),o.push(d))}const c=[Ms.create(i,a),rg.define({name:"t",aliases:r},xU),PU,Ms.create(s,l),rg.define({name:"t.bind",aliases:o},DU),LU,nm,yI,RU];return{register(h){const d=n.i18nextWrapper!=null&&typeof n.i18nextWrapper=="object"?Ji.instance(im,n.i18nextWrapper):Ji.singleton(im,_U);return h.register(Ji.callback(pI,()=>n.initOptions),rc.activating(Lr,u=>u.initPromise),d,Ji.singleton(Lr,bU),...c,...NU)}}}const FU=[fI,uI],$U=[mI,gI],HU=[vI,_I];function AI(n){return{optionsProvider:n,register(e){const t={initOptions:Object.create(null)};return n(t),e.register(MU(t),...FU,...$U,...HU)},customize(e){return AI(e||n)}}}const BU=AI(()=>{});class VU{constructor(e=$(wm(Lr))){G(this,"i18n");this.i18n=e}getCurrentLanguage(){var e;return((e=this.i18n)==null?void 0:e.getLocale())||""}async use(e){var t;return(t=this.i18n)==null?void 0:t.setLocale(e)}translate(e){var t;return((t=this.i18n)==null?void 0:t.tr(e))||""}}function zU(n){if(Array.isArray(n))for(;n.length>0;){const e=n.pop();e!=null&&e.dispose?e.dispose():typeof(e==null?void 0:e.unsubscribe)=="function"&&e.unsubscribe()}return n}let WU=class{constructor(e){this.pubSubService=e,this.pluginName="RowDetailView",this._dataViewIdProperty="id",this._expandableOverride=null,this._expandedRowIds=new Set,this._gridRowBuffer=0,this._gridUid="",this._keyPrefix="",this._disposedRows=new Set,this._rowIdsOutOfViewport=new Set,this._renderedViewportRowIds=new Set,this._renderedIds=new Set,this._defaults={alwaysRenderColumn:!0,columnId:"_detail_selector",field:"_detail_selector",cssClass:"detailView-toggle",collapseAllOnSort:!0,collapsedClass:void 0,expandedClass:void 0,keyPrefix:"__",loadOnce:!1,maxRows:void 0,reorderable:!1,saveDetailViewOnScroll:!0,singleRowExpand:!1,toolTip:"",width:30},this._eventHandler=new gt,this.onAsyncEndUpdate=new K("onAsyncEndUpdate"),this.onAsyncResponse=new K("onAsyncResponse"),this.onAfterRowDetailToggle=new K("onAfterRowDetailToggle"),this.onBeforeRowDetailToggle=new K("onBeforeRowDetailToggle"),this.onBeforeRowOutOfViewportRange=new K("onBeforeRowOutOfViewportRange"),this.onRowBackToViewportRange=new K("onRowBackToViewportRange"),this.onRowOutOfViewportRange=new K("onRowOutOfViewportRange")}get addonOptions(){return this._addonOptions}get dataView(){var e;return(e=this._grid)==null?void 0:e.getData()}get dataViewIdProperty(){return this._dataViewIdProperty}get eventHandler(){return this._eventHandler}get gridOptions(){var e;return((e=this._grid)==null?void 0:e.getOptions())||{}}get gridUid(){var e;return this._gridUid||((e=this._grid)==null?void 0:e.getUID())||""}set rowIdsOutOfViewport(e){this._rowIdsOutOfViewport=new Set(e)}init(e){var t;if(!e)throw new Error('[Slickgrid-Universal] RowDetailView Plugin requires the Grid instance to be passed as argument to the "init()" method.');this._grid=e,this._gridUid=e.getUID(),this._addonOptions||(this._addonOptions=Qt(!0,{},this._defaults,this.gridOptions.rowDetailView)),this._keyPrefix=((t=this._addonOptions)==null?void 0:t.keyPrefix)||"__",k.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._gridRowBuffer=this.gridOptions.minRowBuffer||0,this.gridOptions.minRowBuffer=this._addonOptions.panelRows+3,this._eventHandler.subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onBeforeEditCell,()=>this.collapseAll()).subscribe(this._grid.onScroll,()=>this.recalculateOutOfRangeViews(!0,0)).subscribe(this._grid.onBeforeRemoveCachedRow,(i,s)=>this.handleRemoveRow(s.row)),this._addonOptions.collapseAllOnSort&&this.pubSubService.subscribe("onSortChanged",()=>this.collapseAll()),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{this._grid.updateRowCount(),this._grid.render()}),this._eventHandler.subscribe(this.dataView.onRowsChanged,(i,s)=>{const r=Object.keys(this._grid.getRowCache()).map(Number),o=[],a=s.rows.filter(l=>r.includes(l));this._expandedRowIds.forEach(l=>{const c=this.dataView.getRowById(l);c!==void 0&&a.includes(c)&&o.push(c)}),this._renderedIds.forEach(l=>{const c=this.dataView.getRowById(l);if(c!==void 0){const h=o.findIndex(d=>d===c);h>=0&&o.splice(h,1)}}),this._grid.invalidateRows(o),this._grid.render()}),this._eventHandler.subscribe(this.onAsyncResponse,this.handleOnAsyncResponse.bind(this)),this._eventHandler.subscribe(this.dataView.onSetItemsCalled,()=>{var i;this._dataViewIdProperty=((i=this.dataView)==null?void 0:i.getIdPropertyName())||"id"})}dispose(){var e;(e=this._eventHandler)==null||e.unsubscribeAll(),this._expandedRowIds.clear(),this._rowIdsOutOfViewport.clear(),this._renderedViewportRowIds.clear(),clearTimeout(this._backViewportTimer)}create(e,t){var i;if(!t.rowDetailView)throw new Error('[Slickgrid-Universal] The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(this._addonOptions=Qt(!0,{},this._defaults,t.rowDetailView),typeof this._addonOptions.expandableOverride=="function"&&this.expandableOverride(this._addonOptions.expandableOverride),Array.isArray(e)&&t){const s=this.getColumnDefinition();if(!e.some(r=>r.id===s.id)){const r=Array.isArray(e)&&e.find(l=>(l==null?void 0:l.behavior)==="selectAndMove"),o=r||s,a=((i=t==null?void 0:t.rowDetailView)==null?void 0:i.columnIndexPosition)??0;a>0?e.splice(a,0,o):e.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){var t;this._addonOptions=Qt(!0,{},this._addonOptions,e),(t=this._addonOptions)!=null&&t.singleRowExpand&&this.collapseAll()}collapseAll(){this.dataView.beginUpdate(),this._expandedRowIds.forEach(e=>{this.collapseDetailView(e,!0)}),this.dataView.endUpdate()}collapseDetailView(e,t=!1){t||this.dataView.beginUpdate();const i=this.dataView.getItemById(e);this._addonOptions.loadOnce&&this.saveDetailView(i),i[`${this._keyPrefix}collapsed`]=!0;for(let s=1;s<=i[`${this._keyPrefix}sizePadding`];s++)this.dataView.deleteItem(`${i[this._dataViewIdProperty]}.${s}`);i[`${this._keyPrefix}sizePadding`]=0,this.dataView.updateItem(i[this._dataViewIdProperty],i),this._expandedRowIds=new Set(Array.from(this._expandedRowIds).filter(s=>s!==i[this._dataViewIdProperty])),this._renderedIds.delete(i[this._dataViewIdProperty]),this.reevaluateRenderedRowIds(i),t||this.dataView.endUpdate()}expandDetailView(e){var i,s,r;(i=this._addonOptions)!=null&&i.singleRowExpand&&this.collapseAll();const t=this.dataView.getItemById(e);if(this.reevaluateRenderedRowIds(t),t[`${this._keyPrefix}collapsed`]=!1,this._expandedRowIds.add(e),t[`${this._keyPrefix}detailContent`]||(t[`${this._keyPrefix}detailViewLoaded`]=!1),!t[`${this._keyPrefix}detailViewLoaded`]||this._addonOptions.loadOnce!==!0)t[`${this._keyPrefix}detailContent`]=(r=(s=this._addonOptions)==null?void 0:s.preTemplate)==null?void 0:r.call(s,t);else{this.onAsyncResponse.notify({item:t,itemDetail:t,detailView:t[`${this._keyPrefix}detailContent`],grid:this._grid}),this.applyTemplateNewLineHeight(t),this.dataView.updateItem(t[this._dataViewIdProperty],t);return}this.applyTemplateNewLineHeight(t),this.dataView.updateItem(t[this._dataViewIdProperty],t),this._addonOptions.process(t)}resetRenderedRows(){this._renderedViewportRowIds.clear(),this._disposedRows.clear()}saveDetailView(e){if(this._addonOptions.loadOnce){const t=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(t){const i=t.innerHTML;i!==void 0&&(e[`${this._keyPrefix}detailContent`]=i)}}}handleOnAsyncResponse(e,t){var s,r;if(!t||!t.item&&!t.itemDetail){console.error('SlickRowDetailView plugin requires the onAsyncResponse() to supply "args.item" property.');return}const i=t.item||t.itemDetail;i[`${this._keyPrefix}detailContent`]=t.detailView??((r=(s=this._addonOptions)==null?void 0:s.postTemplate)==null?void 0:r.call(s,i)),i[`${this._keyPrefix}detailViewLoaded`]=!0,this.dataView.updateItem(i[this._dataViewIdProperty],i),this._renderedIds.add(i[this.dataViewIdProperty]),this.onAsyncEndUpdate.notify({grid:this._grid,item:i,itemDetail:i},e,this)}expandableOverride(e){this._expandableOverride=e}getExpandableOverride(){return this._expandableOverride}getColumnDefinition(){var t,i;const e=String(((t=this._addonOptions)==null?void 0:t.columnId)??this._defaults.columnId);return{id:e,field:e,name:"",alwaysRenderColumn:(i=this._addonOptions)==null?void 0:i.alwaysRenderColumn,cssClass:this._addonOptions.cssClass||"",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,formatter:this.detailSelectionFormatter.bind(this),reorderable:this._addonOptions.reorderable,resizable:!1,sortable:!1,toolTip:this._addonOptions.toolTip,width:this._addonOptions.width}}getExpandedRowIds(){return Array.from(this._expandedRowIds)}getOutOfViewportRows(){return Array.from(this._rowIdsOutOfViewport)}getFilterItem(e){return e[`${this._keyPrefix}isPadding`]&&e[`${this._keyPrefix}parent`]&&(e=e[`${this._keyPrefix}parent`]),e}resizeDetailView(e){if(!e)return;const t=document.querySelector(`.${this.gridUid} .detailViewContainer_${e[this._dataViewIdProperty]}`),i=document.querySelector(`.${this.gridUid} .cellDetailView_${e[this._dataViewIdProperty]}`),s=document.querySelector(`.${this.gridUid} .innerDetailView_${e[this._dataViewIdProperty]}`);if(!t||!i||!s)return;for(let d=1;d<=e[`${this._keyPrefix}sizePadding`];d++)this.dataView.deleteItem(`${e[this._dataViewIdProperty]}.${d}`);const r=this.gridOptions.rowHeight,o=13;t.style.minHeight="";const a=t.scrollHeight,l=Math.ceil(a/r);e[`${this._keyPrefix}sizePadding`]=Math.ceil(l*2*o/r),e[`${this._keyPrefix}height`]=a;let c=e[`${this._keyPrefix}sizePadding`]*r;this._addonOptions.maxRows!==void 0&&e[`${this._keyPrefix}sizePadding`]>this._addonOptions.maxRows&&(c=this._addonOptions.maxRows*r,e[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows),this.gridOptions.minRowBuffer<e[`${this._keyPrefix}sizePadding`]&&(this.gridOptions.minRowBuffer=e[`${this._keyPrefix}sizePadding`]+3),t.setAttribute("style",`min-height: ${e[this._keyPrefix+"height"]}px`),i&&i.setAttribute("style",`height: ${c}px; top: ${r}px`);const h=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let d=1;d<=e[`${this._keyPrefix}sizePadding`];d++)this.dataView.insertItem(h+d,this.getPaddingItem(e,d));this.saveDetailView(e)}recalculateOutOfRangeViews(e=!0,t){clearTimeout(this._backViewportTimer);const i=()=>this._expandedRowIds.forEach(s=>{var p,f;const r=this.dataView.getItemById(s),o=this.dataView.getRowById(s),a=Object.keys(this._grid.getRowCache()).map(Number),l=this._grid.getRenderedRange(),c=((p=this.gridOptions.rowDetailView)==null?void 0:p.panelRows)??0;this._visibleRenderedCell={startRow:l.top,endRow:l.bottom};let{startRow:h,endRow:d}=this._visibleRenderedCell;if(o>=h&&o<=d){const g=o+(((f=this.gridOptions.rowDetailView)==null?void 0:f.panelRows)??0);g>d&&(d=g)}const u=o+c;h>o&&o<u&&u>this._visibleRenderedCell.startRow+1&&(h=o),this._visibleRenderedCell={startRow:h,endRow:d},!this._renderedViewportRowIds.has(s)&&this._visibleRenderedCell&&o>=this._visibleRenderedCell.startRow&&o<=this._visibleRenderedCell.endRow&&a.includes(o)?(this._disposedRows.delete(o),this.notifyViewportChange(r,"add",e)):(this._disposedRows.has(o)&&!a.includes(o)||!a.includes(o)&&this._renderedViewportRowIds.has(s)&&this._visibleRenderedCell&&(o<this._visibleRenderedCell.startRow||o>this._visibleRenderedCell.endRow))&&this.notifyViewportChange(r,"remove",e)});t!==void 0?this._backViewportTimer=setTimeout(i,t):i()}applyTemplateNewLineHeight(e){const t=this._addonOptions.panelRows,i=13;e[`${this._keyPrefix}sizePadding`]=Math.ceil(t*2*i/this.gridOptions.rowHeight),e[`${this._keyPrefix}height`]=e[`${this._keyPrefix}sizePadding`]*this.gridOptions.rowHeight;const s=this.dataView.getIdxById(e[this._dataViewIdProperty]);for(let r=1;r<=e[`${this._keyPrefix}sizePadding`];r++)this.dataView.insertItem((s||0)+r,this.getPaddingItem(e,r))}notifyViewportChange(e,t,i=!0){if(e){const s=e[this._dataViewIdProperty];t==="add"?(this._renderedViewportRowIds.add(s),i&&this.notifyBackToViewportWhenDomExist(e)):t==="remove"&&(this._renderedViewportRowIds.delete(s),i&&this.notifyOutOfViewport(e))}}checkExpandableOverride(e,t,i){return typeof this._expandableOverride=="function"?this._expandableOverride(e,t,i):!0}getPaddingItem(e,t){const i={};return Object.keys(this.dataView).forEach(s=>{s&&(i[s]=null)}),i[this._dataViewIdProperty]=`${e[this._dataViewIdProperty]}.${t}`,i[`${this._keyPrefix}collapsed`]=!0,i[`${this._keyPrefix}isPadding`]=!0,i[`${this._keyPrefix}parent`]=e,i[`${this._keyPrefix}offset`]=t,i}detailSelectionFormatter(e,t,i,s,r,o){if(this.checkExpandableOverride(e,r,o)){if(r[`${this._keyPrefix}collapsed`]===void 0&&(r[`${this._keyPrefix}collapsed`]=!0,r[`${this._keyPrefix}sizePadding`]=0,r[`${this._keyPrefix}height`]=0,r[`${this._keyPrefix}isPadding`]=!1,r[`${this._keyPrefix}parent`]=void 0,r[`${this._keyPrefix}offset`]=0),!r[`${this._keyPrefix}isPadding`])if(r[`${this._keyPrefix}collapsed`]){let a=`${this._addonOptions.cssClass||""} expand `;return this._addonOptions.collapsedClass&&(a+=this._addonOptions.collapsedClass),I("div",{className:ht(a).join(" ")})}else{const a=this.gridOptions.rowHeight||0;let l=(r[`${this._keyPrefix}sizePadding`]||0)*this.gridOptions.rowHeight;this._addonOptions.maxRows!==null&&(r[`${this._keyPrefix}sizePadding`]||0)>this._addonOptions.maxRows&&(l=this._addonOptions.maxRows*a,r[`${this._keyPrefix}sizePadding`]=this._addonOptions.maxRows);let c=`${this._addonOptions.cssClass||""} collapse `;this._addonOptions.expandedClass&&(c+=this._addonOptions.expandedClass);const h=I("div",{className:`dynamic-cell-detail cellDetailView_${r[this._dataViewIdProperty]}`,style:{height:`${l}px`,top:`${a}px`}}),d=I("div",{className:`detail-container detailViewContainer_${r[this._dataViewIdProperty]}`}),u=I("div",{className:`innerDetailView_${r[this._dataViewIdProperty]}`});return r[`${this._keyPrefix}detailContent`]instanceof HTMLElement?u.appendChild(r[`${this._keyPrefix}detailContent`]):u.innerHTML=this._grid.sanitizeHtmlString(r[`${this._keyPrefix}detailContent`]),d.appendChild(u),h.appendChild(d),{html:I("div",{className:ht(c).join(" ")}),insertElementAfterTarget:h}}}else return"";return""}handleAccordionShowHide(e){if(e){const t=e[this._dataViewIdProperty];e[`${this._keyPrefix}collapsed`]?this.expandDetailView(t):this.collapseDetailView(t)}}handleClick(e,t){const i=this._grid.getDataItem(t.row);if(this.checkExpandableOverride(t.row,i,this._grid)){const s=this._grid.getColumns()[t.cell];if(this._addonOptions.useRowClick||s.id===this._addonOptions.columnId&&e.target.classList.contains(this._addonOptions.cssClass||"")){if(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()){e.preventDefault(),e.stopImmediatePropagation();return}if(this.onBeforeRowDetailToggle.notify({grid:this._grid,item:i},e,this,!0).getReturnValue()===!1)return;const o=[],a=this._grid.getRenderedRange();this._expandedRowIds.forEach(l=>{const c=this.dataView.getRowById(l);if(c!==void 0&&c>t.row&&c>=a.top&&c<=a.bottom){const h=this.dataView.getItemById(l);o.push(h),this.notifyOutOfViewport(h)}}),this.toggleRowSelection(t.row,i),this.onAfterRowDetailToggle.notify({grid:this._grid,item:i,expandedRows:Array.from(this._expandedRowIds).map(l=>this.dataView.getItemById(l))},e,this),o.forEach(l=>this.notifyViewportChange(l,"add",!0)),e.stopPropagation(),e.stopImmediatePropagation()}}}handleRemoveRow(e){const t=this.dataView.getItemByIdx(e),i=t[this.dataViewIdProperty];this._expandedRowIds.has(i)&&(this.onBeforeRowOutOfViewportRange.notify({grid:this._grid,item:t,rowId:i,rowIndex:e,expandedRows:Array.from(this._expandedRowIds).map(s=>this.dataView.getItemById(s)),rowIdsOutOfViewport:Array.from(this.syncOutOfViewportArray(i,!0))},null,this),this._disposedRows.add(e))}notifyOutOfViewport(e){const t=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]),i=e[this.dataViewIdProperty];this._renderedIds.delete(i),this.onRowOutOfViewportRange.notify({grid:this._grid,item:e,rowId:i,rowIndex:t,expandedRows:Array.from(this._expandedRowIds).map(s=>this.dataView.getItemById(s)),rowIdsOutOfViewport:Array.from(this.syncOutOfViewportArray(i,!0))},null,this)}notifyBackToViewportWhenDomExist(e){const t=e.rowIndex||this.dataView.getRowById(e[this._dataViewIdProperty]),i=e[this.dataViewIdProperty];document.querySelector(`.${this.gridUid} .cellDetailView_${e[this._dataViewIdProperty]}`)&&this.onRowBackToViewportRange.notify({grid:this._grid,item:e,rowId:i,rowIndex:t,expandedRows:Array.from(this._expandedRowIds).map(s=>this.dataView.getItemById(s)),rowIdsOutOfViewport:Array.from(this.syncOutOfViewportArray(i,!1))},null,this)}reevaluateRenderedRowIds(e){const t=this.dataView.getRowById(e[this._dataViewIdProperty]);this._renderedViewportRowIds.forEach(i=>{const s=this.dataView.getRowById(i);s!==void 0&&s>t&&this.notifyViewportChange(this.dataView.getItemById(i),"remove")})}syncOutOfViewportArray(e,t){const i=this._rowIdsOutOfViewport.has(e);return t&&!i?this._rowIdsOutOfViewport.add(e):!t&&i&&this._rowIdsOutOfViewport.delete(e),this._rowIdsOutOfViewport}toggleRowSelection(e,t){this.checkExpandableOverride(e,t,this._grid)&&(this.dataView.beginUpdate(),this.handleAccordionShowHide(t),this.dataView.endUpdate())}};const Zh="container_",Ty="container_loading";let Ay=(()=>{var r;let n=[vm()],e,t=[],i,s=WU;return r=class extends s{constructor(l=$(cI),c=$(uA),h=$(HTMLElement)){super(c);G(this,"aureliaUtilService");G(this,"eventPubSubService");G(this,"gridContainerElement");G(this,"_preloadViewModel");G(this,"_preloadController");G(this,"_slots",[]);G(this,"_subscriptions",[]);G(this,"_userProcessFn");G(this,"_viewModel");this.aureliaUtilService=l,this.eventPubSubService=c,this.gridContainerElement=h}get addonOptions(){return this.getOptions()}get datasetIdPropName(){return this.gridOptions.datasetIdPropertyName||"id"}get gridOptions(){var l;return((l=this._grid)==null?void 0:l.getOptions())||{}}get rowDetailViewOptions(){return this.gridOptions.rowDetailView}dispose(){this.disposeAllViewSlot(),x_(this._subscriptions),super.dispose()}disposeAllViewSlot(){do{const l=this._slots.pop();l&&this.disposeView(l)}while(this._slots.length>0)}getAddonInstance(){return this}init(l){this._grid=l,super.init(this._grid),this.register(l==null?void 0:l.getSelectionModel())}register(l){var c,h,d,u,p,f,g,m;if(typeof((c=this.gridOptions.rowDetailView)==null?void 0:c.process)=="function")this._userProcessFn=this.gridOptions.rowDetailView.process,this.addonOptions.process=_=>this.onProcessing(_);else throw new Error('[Aurelia-Slickgrid] You need to provide a "process" function for the Row Detail Extension to work properly');return this._grid&&((h=this.gridOptions)!=null&&h.rowDetailView)&&(this.gridOptions.rowDetailView.preTemplate||(this._preloadViewModel=(u=(d=this.gridOptions)==null?void 0:d.rowDetailView)==null?void 0:u.preloadViewModel,this.addonOptions.preTemplate=()=>I("div",{className:`${Ty}`})),this.gridOptions.rowDetailView.postTemplate||(this._viewModel=(f=(p=this.gridOptions)==null?void 0:p.rowDetailView)==null?void 0:f.viewModel,this.addonOptions.postTemplate=_=>I("div",{className:`${Zh}${_[this.datasetIdPropName]}`})),this._grid&&this.gridOptions&&((!l||!this._grid.getSelectionModel())&&(l=new cp(this.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this._grid.setSelectionModel(l)),this._grid&&this.rowDetailViewOptions&&(this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this),this._eventHandler.subscribe(this.onAsyncResponse,(_,b)=>{var C;typeof((C=this.rowDetailViewOptions)==null?void 0:C.onAsyncResponse)=="function"&&this.rowDetailViewOptions.onAsyncResponse(_,b)}),this._eventHandler.subscribe(this.onAsyncEndUpdate,async(_,b)=>{var C,v;(C=this._preloadController)==null||C.dispose(),await this.renderViewModel(b==null?void 0:b.item),typeof((v=this.rowDetailViewOptions)==null?void 0:v.onAsyncEndUpdate)=="function"&&this.rowDetailViewOptions.onAsyncEndUpdate(_,b)}),this._eventHandler.subscribe(this.onAfterRowDetailToggle,async(_,b)=>{var C;await this.renderPreloadView(),typeof((C=this.rowDetailViewOptions)==null?void 0:C.onAfterRowDetailToggle)=="function"&&this.rowDetailViewOptions.onAfterRowDetailToggle(_,b)}),this._eventHandler.subscribe(this.onBeforeRowDetailToggle,(_,b)=>{var C;return this.handleOnBeforeRowDetailToggle(_,b),typeof((C=this.rowDetailViewOptions)==null?void 0:C.onBeforeRowDetailToggle)=="function"?this.rowDetailViewOptions.onBeforeRowDetailToggle(_,b):!0}),this._eventHandler.subscribe(this.onRowBackToViewportRange,async(_,b)=>{var C;await this.handleOnRowBackToViewportRange(_,b),typeof((C=this.rowDetailViewOptions)==null?void 0:C.onRowBackToViewportRange)=="function"&&this.rowDetailViewOptions.onRowBackToViewportRange(_,b)}),this._eventHandler.subscribe(this.onBeforeRowOutOfViewportRange,(_,b)=>{var C;typeof((C=this.rowDetailViewOptions)==null?void 0:C.onBeforeRowOutOfViewportRange)=="function"&&this.rowDetailViewOptions.onBeforeRowOutOfViewportRange(_,b),this.disposeView(b.item)}),this._eventHandler.subscribe(this.onRowOutOfViewportRange,(_,b)=>{var C;typeof((C=this.rowDetailViewOptions)==null?void 0:C.onRowOutOfViewportRange)=="function"&&this.rowDetailViewOptions.onRowOutOfViewportRange(_,b)}),this._eventHandler.subscribe(this._grid.onColumnsReordered,this.redrawAllViewSlots.bind(this,!1)),(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,this.redrawAllViewSlots.bind(this,!1)),this._eventHandler.subscribe(this._grid.onSort,this.disposeAllViewSlot.bind(this)),this._subscriptions.push((g=this.eventPubSubService)==null?void 0:g.subscribe(["onFilterChanged","onGridMenuColumnsChanged","onColumnPickerColumnsChanged"],this.redrawAllViewSlots.bind(this,!1)),(m=this.eventPubSubService)==null?void 0:m.subscribe(["onGridMenuClearAllFilters","onGridMenuClearAllSorting"],()=>window.setTimeout(()=>this.redrawAllViewSlots())))))),this}async redrawAllViewSlots(l=!1){this.resetRenderedRows();const c=[];this._slots.forEach(h=>{var d;l&&((d=h.controller)==null||d.deactivate(h.controller,null)),c.push(this.redrawViewSlot(h))}),await Promise.all(c)}async renderAllViewModels(){const l=[];this._slots.filter(c=>c==null?void 0:c.dataContext).forEach(c=>l.push(this.renderViewModel(c.dataContext))),await Promise.all(l)}async redrawViewSlot(l){this.gridContainerElement.querySelector(`.${Zh}${l.id}`)&&await this.renderViewModel(l.dataContext)}async renderPreloadView(){const l=this.gridContainerElement.querySelector(`.${Ty}`);if(this._preloadViewModel&&l){const c=await this.aureliaUtilService.createAureliaViewModelAddToSlot(this._preloadViewModel,void 0,l);this._preloadController=c==null?void 0:c.controller}}async renderViewModel(l){var h;const c=this.gridContainerElement.querySelector(`.${Zh}${l[this.datasetIdPropName]}`);if(this._viewModel&&c){const d={model:l,addon:this,grid:this._grid,dataView:this.dataView,parent:(h=this.rowDetailViewOptions)==null?void 0:h.parent},u=await this.aureliaUtilService.createAureliaViewModelAddToSlot(this._viewModel,d,c),p=this._slots.find(f=>f.id===l[this.datasetIdPropName]);p&&u&&(p.controller=u.controller)}}disposeView(l,c=!1){const h=this._slots.findIndex(d=>d.id===l[this.datasetIdPropName]);h>=0&&this.disposeViewSlot(this._slots[h])&&c&&this._slots.splice(h,1)}disposeViewSlot(l){if(l!=null&&l.controller){const c=this.gridContainerElement.querySelector(`.${Zh}${l.id}`);if(c)return l.controller.deactivate(l.controller,null),c.textContent="",l}}handleOnBeforeRowDetailToggle(l,c){var h;if((h=c==null?void 0:c.item)!=null&&h.__collapsed){const d={id:c.item[this.datasetIdPropName],dataContext:c.item};NH(this._slots,d,this.datasetIdPropName)}else this.disposeView(c.item,!0)}async handleOnRowBackToViewportRange(l,c){const h=this._slots.find(d=>d.id===c.rowId);h&&this.redrawViewSlot(h)}notifyTemplate(l){this.onAsyncResponse.notify({item:l,itemDetail:l},new Ot,this)}async onProcessing(l){if(l&&typeof this._userProcessFn=="function"){let c;const d=await this._userProcessFn(l);if(d.hasOwnProperty(this.datasetIdPropName)?c=d:d instanceof Response&&typeof d.json=="function"?c=await d.json():d&&d.content&&(c=d.content),!c||!c.hasOwnProperty(this.datasetIdPropName))throw new Error(`[Aurelia-Slickgrid] could not process the Row Detail, please make sure that your "process" callback returns an item object that has an "${this.datasetIdPropName}" property`);this.notifyTemplate(c||{})}}},i=r,(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;ri(null,e={value:i},n,{kind:"class",name:i.name,metadata:l},null,t),i=e.value,l&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l}),Ze(i,t)})(),i})();const UU=1e4;let GU=(()=>{var L;let n=[Tn({name:"aurelia-slickgrid",template:`
<div id="slickGridContainer-\${gridId}" class="grid-pane">
  <!-- Header slot if you need to create a complex custom header -->
  <au-slot name="slickgrid-header"></au-slot>

  <div id.bind="gridId" class="slickgrid-container"
    ref="gridContainer">
  </div>

  <!-- Footer slot if you need to create a complex custom footer -->
  <au-slot name="slickgrid-footer"></au-slot>
</div>
`})],e,t=[],i,s,r=[],o=[],a,l=[],c=[],h,d=[],u=[],p,f=[],g=[],m,_=[],b=[],C,v=[],y=[],S,A=[],P=[],F,H=[],W=[],J,Y=[],ae=[],ue,te=[],V=[],re,Z=[],_e=[],ge,x=[],M=[],O,D=[],Ye=[];return L=class{constructor(E=$(cI),w=$(zo),T=$(Bs),B=$(HTMLElement),U=$(Mr),Q=$(GW),le=$(VU)){G(this,"aureliaUtilService");G(this,"observerLocator");G(this,"container");G(this,"elm");G(this,"globalEa");G(this,"containerService");G(this,"translaterService");G(this,"_columnDefinitions",[]);G(this,"_columnDefinitionObserver");G(this,"_columnDefinitionsSubscriber",{handleCollectionChange:this.columnDefinitionsHandler.bind(this)});G(this,"_currentDatasetLength",0);G(this,"_darkMode",!1);G(this,"_dataset",null);G(this,"_eventHandler");G(this,"_eventPubSubService");G(this,"_hideHeaderRowAfterPageLoad",!1);G(this,"_isAutosizeColsCalled",!1);G(this,"_isGridInitialized",!1);G(this,"_isDatasetInitialized",!1);G(this,"_isDatasetHierarchicalInitialized",!1);G(this,"_isPaginationInitialized",!1);G(this,"_isLocalGrid",!0);G(this,"_paginationOptions");G(this,"_registeredResources",[]);G(this,"_scrollEndCalled",!1);G(this,"backendServiceApi");G(this,"locales");G(this,"groupItemMetadataProvider");G(this,"metrics");G(this,"paginationData");G(this,"serviceList",[]);G(this,"showPagination",!1);G(this,"subscriptions",[]);G(this,"slickEmptyWarning");G(this,"slickFooter");G(this,"paginationComponent");G(this,"slickPagination");G(this,"slickRowDetailView");G(this,"backendUtilityService");G(this,"collectionService");G(this,"extensionService");G(this,"extensionUtility");G(this,"filterFactory");G(this,"filterService");G(this,"gridEventService");G(this,"gridService");G(this,"gridStateService");G(this,"headerGroupingService");G(this,"paginationService");G(this,"resizerService");G(this,"rxjs");G(this,"sharedService");G(this,"sortService");G(this,"treeDataService");G(this,"gridContainer");G(this,"columnDefinitions",Ze(this,r,[]));G(this,"element",(Ze(this,o),Ze(this,l,void 0)));G(this,"dataview",(Ze(this,c),Ze(this,d,void 0)));G(this,"grid",(Ze(this,u),Ze(this,f,void 0)));G(this,"paginationOptions",(Ze(this,g),Ze(this,_,void 0)));G(this,"totalItems",(Ze(this,b),Ze(this,v,0)));G(this,"extensions",(Ze(this,y),Ze(this,A,void 0)));G(this,"instances",(Ze(this,P),Ze(this,H,null)));G(this,"customDataView",(Ze(this,W),Ze(this,Y,void 0)));G(this,"dataset",(Ze(this,ae),Ze(this,te,[])));G(this,"datasetHierarchical",(Ze(this,V),Ze(this,Z,void 0)));G(this,"gridId",(Ze(this,_e),Ze(this,x,"")));G(this,"gridOptions",(Ze(this,M),Ze(this,D,{})));Ze(this,Ye),this.aureliaUtilService=E,this.observerLocator=w,this.container=T,this.elm=B,this.globalEa=U,this.containerService=Q,this.translaterService=le;const q=new zW;this._eventPubSubService=new uA(this.elm),this._eventPubSubService.eventNamingStyle=ps.camelCase,this.backendUtilityService=new CH,this.gridEventService=new Lz,this.sharedService=new Wz,this.collectionService=new sz(this.translaterService),this.extensionUtility=new oz(this.sharedService,this.backendUtilityService,this.translaterService),this.filterFactory=new Pz(q,this.translaterService,this.collectionService),this.filterService=new kz(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=new zz(this._eventPubSubService),this.sortService=new Uz(this.collectionService,this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=new iy(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=new Nz(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=new wz(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.translaterService,()=>this.gridService),this.gridStateService=new ey(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=new JC(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.headerGroupingService=new ty(this.extensionUtility),this.serviceList=[this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.headerGroupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.containerService.registerInstance("FilterService",this.filterService),this.containerService.registerInstance("CollectionService",this.collectionService),this.containerService.registerInstance("ExtensionService",this.extensionService),this.containerService.registerInstance("GridEventService",this.gridEventService),this.containerService.registerInstance("GridService",this.gridService),this.containerService.registerInstance("GridStateService",this.gridStateService),this.containerService.registerInstance("HeaderGroupingService",this.headerGroupingService),this.containerService.registerInstance("PaginationService",this.paginationService),this.containerService.registerInstance("ResizerService",this.resizerService),this.containerService.registerInstance("SharedService",this.sharedService),this.containerService.registerInstance("SortService",this.sortService),this.containerService.registerInstance("EventPubSubService",this._eventPubSubService),this.containerService.registerInstance("PubSubService",this._eventPubSubService),this.containerService.registerInstance("TranslaterService",this.translaterService),this.containerService.registerInstance("TreeDataService",this.treeDataService)}get backendService(){var E;return(E=this.gridOptions.backendServiceApi)==null?void 0:E.service}get eventHandler(){return this._eventHandler}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(E){this._isDatasetInitialized=E}set isDatasetHierarchicalInitialized(E){this._isDatasetHierarchicalInitialized=E}get registeredResources(){return this._registeredResources}attached(){var E;if(!this.columnDefinitions)throw new Error("Using `<aurelia-slickgrid>` requires `column-definitions.bind`, it seems that you might have forgot to provide the missing bindable model.");if(this._eventHandler=new gt,this.initialization(this._eventHandler),this._isGridInitialized=!0,(E=this.gridOptions)!=null&&E.enableEmptyDataWarningMessage){const w=this.dataset||[];if(Array.isArray(w)){const T=w.length;this.displayEmptyDataWarning(T<1)}}this.gridOptions.darkMode&&this.setDarkMode(!0),this.suggestDateParsingWhenHelpful()}initialization(E){var U,Q,le,q,Ie,fe,ke,Ue,Pt,Jt,mt,lt,Xe;if(!this.gridOptions||!this.columnDefinitions)throw new Error('Using `<aurelia-slickgrid>` requires `column-definitions.bind="columnDefinitions"` and `grid-options.bind="gridOptions"`, it seems that you might have forgot to provide them since at least of them is undefined.');if(this.gridOptions.translater=this.translaterService,this._eventHandler=E,this._isAutosizeColsCalled=!1,this.gridOptions&&(this.gridOptions.frozenRow!==void 0&&this.gridOptions.frozenRow>=0||this.gridOptions.frozenColumn!==void 0&&this.gridOptions.frozenColumn>=0)&&this.gridOptions.enableMouseWheelScrollHandler===void 0&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this._eventPubSubService.eventNamingStyle=((U=this.gridOptions)==null?void 0:U.eventNamingStyle)??ps.camelCase,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._dataset||(this._dataset=[]),this._currentDatasetLength=this._dataset.length,this.gridOptions=this.mergeGridOptions(this.gridOptions),this._paginationOptions=(Q=this.gridOptions)==null?void 0:Q.pagination,this.locales=((le=this.gridOptions)==null?void 0:le.locales)??Dt.locales,this.backendServiceApi=(q=this.gridOptions)==null?void 0:q.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.gridOptions.backendServiceApi&&!((Ie=this.gridOptions.backendServiceApi)!=null&&Ie.disableInternalPostProcess)&&this.createBackendApiInternalPostProcessCallback(this.gridOptions),!this.customDataView){const Ft=this.gridOptions.dataView&&this.gridOptions.dataView.inlineFilters||!1;let kt={...this.gridOptions.dataView,inlineFilters:Ft};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new mA,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,kt={...kt,groupItemMetadataProvider:this.groupItemMetadataProvider}),this.dataview=new bB(kt,this._eventPubSubService),this._eventPubSubService.publish("onDataviewCreated",this.dataview)}this.preRegisterResources(),this._columnDefinitions=this.loadSlickGridEditors(this._columnDefinitions),this.gridOptions.autoAddCustomEditorFormatter&&jC(this._columnDefinitions,this.gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),(fe=this.gridOptions.presets)!=null&&fe.pinning&&(this.gridOptions={...this.gridOptions,...this.gridOptions.presets.pinning}),this.grid=new jB(this.gridContainer,this.customDataView||this.dataview,this._columnDefinitions,this.gridOptions,this._eventPubSubService),this.sharedService.dataView=this.dataview,this.sharedService.slickGrid=this.grid,this.sharedService.gridContainerElement=this.elm,this.groupItemMetadataProvider&&this.grid.registerPlugin(this.groupItemMetadataProvider),this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.grid,this.gridOptions,this.dataview);const w=((ke=this.gridOptions)==null?void 0:ke.frozenColumn)??-1;w>=0&&w<=this._columnDefinitions.length&&this._columnDefinitions.length>0&&(this.sharedService.frozenVisibleColumnId=((Ue=this._columnDefinitions[w])==null?void 0:Ue.id)??""),this.registerResources(),this.grid.init();const T=this.elm.querySelector("div");if(T&&this.resizerService.init(this.grid,T),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&T&&(this.slickFooter=new WW(this.grid,this.gridOptions.customFooterOptions,this._eventPubSubService,this.translaterService),this.slickFooter.renderFooter(T)),!this.customDataView&&this.dataview){const Ft=(Pt=this.gridOptions)!=null&&Pt.enableTreeData?this.sortTreeDataset(this.dataset):this.dataset;if(Array.isArray(Ft)&&this.dataview.setItems(Ft,this.gridOptions.datasetIdPropertyName??"id"),(Jt=this.grid)!=null&&Jt.getSelectionModel()&&((mt=this.gridOptions)!=null&&mt.dataView)&&this.gridOptions.dataView.hasOwnProperty("syncGridSelection")){let kt=!1;this.gridOptions.backendServiceApi&&this.gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(kt=this.gridOptions.dataView.syncGridSelectionWithBackendService);const $t=this.gridOptions.dataView.syncGridSelection;if(typeof $t=="boolean"){let lr=$t;this._isLocalGrid||(lr=$t&&kt),this.dataview.syncGridSelection(this.grid,lr)}else typeof $t=="object"&&this.dataview.syncGridSelection(this.grid,$t.preserveHidden,$t.preserveHiddenOnSelectionChange)}this._dataset.length>0&&(!this._isDatasetInitialized&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this._eventPubSubService.publish("onGridCreated",this.grid),this.customDataView||this.executeAfterDataviewCreated(this.grid,this.gridOptions),this.bindResizeHook(this.grid,this.gridOptions),(lt=this.gridOptions)!=null&&lt.backendServiceApi&&this.bindBackendCallbackFunctions(this.gridOptions);const B={dataView:this.dataview,slickGrid:this.grid,dispose:this.disposeInstance.bind(this),backendService:this.backendService,eventPubSubService:this._eventPubSubService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.headerGroupingService,headerGroupingService:this.headerGroupingService,extensionService:this.extensionService,paginationComponent:this.slickPagination,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService};this.extensions=(Xe=this.extensionService)==null?void 0:Xe.extensionList,this.instances=B,this._eventPubSubService.publish("onAureliaGridCreated",B)}detaching(E=!1){var w,T,B,U,Q,le,q,Ie;if(this._eventPubSubService.publish("onBeforeGridDestroy",this.grid),(w=this._eventHandler)==null||w.unsubscribeAll(),E&&this.emptyGridContainerElm(),this._eventPubSubService.publish("onAfterGridDestroyed",!0),this.serviceList.forEach(fe=>{fe!=null&&fe.dispose&&fe.dispose()}),this.serviceList=[],(B=(T=this.backendService)==null?void 0:T.dispose)==null||B.call(T),this.disposeExternalResources(),(U=this.slickEmptyWarning)==null||U.dispose(),(Q=this.slickFooter)==null||Q.dispose(),(le=this.slickPagination)==null||le.dispose(),this.dataview&&(this.dataview.setItems&&this.dataview.setItems([]),this.dataview.destroy&&this.dataview.destroy()),(q=this.grid)!=null&&q.destroy&&this.grid.destroy(E),this.subscriptions=zU(this.subscriptions),(Ie=this._columnDefinitionObserver)==null||Ie.unsubscribe(this._columnDefinitionsSubscriber),this.backendServiceApi){for(const fe of Object.keys(this.backendServiceApi))this.backendServiceApi[fe]=null;this.backendServiceApi=void 0}for(const fe of Object.keys(this.columnDefinitions))this.columnDefinitions[fe]=null;for(const fe of Object.keys(this.sharedService))this.sharedService[fe]=null;this._dataset=null,this.datasetHierarchical=null,this._columnDefinitions=[]}emptyGridContainerElm(){var T;const E=((T=this.gridOptions)==null?void 0:T.gridContainerId)||"grid1",w=document.querySelector(`#${E}`);tt(w)}disposeInstance(E=!1){this.detaching(E)}disposeExternalResources(){if(Array.isArray(this._registeredResources))for(;this._registeredResources.length>0;){const E=this._registeredResources.pop();E!=null&&E.dispose&&E.dispose()}this._registeredResources=[]}bound(){this.gridOptions={...em,...this.gridOptions},this.columnDefinitionsChanged(),this.observeColumnDefinitions()}columnDefinitionsChanged(){this.columnDefinitionsHandler(),this.observeColumnDefinitions()}datasetChanged(E,w){var Q;const T=this._currentDatasetLength,B=_n(E,this._dataset||[]);let U=E;this.grid&&((Q=this.gridOptions)!=null&&Q.enableTreeData)&&Array.isArray(E)&&(E.length>0||E.length!==T||!B)&&(this._isDatasetHierarchicalInitialized=!1,U=this.sortTreeDataset(E,!B)),this._dataset=U,this.refreshGridData(U||[]),this._currentDatasetLength=(E||[]).length,this.grid&&this.gridOptions.autoFitColumnsOnFirstLoad&&(!w||w.length<1)&&!this._isAutosizeColsCalled&&(this.grid.autosizeColumns(),this._isAutosizeColsCalled=!0),this.suggestDateParsingWhenHelpful()}datasetHierarchicalChanged(E){var B,U,Q;const w=_n(E,((B=this.sharedService)==null?void 0:B.hierarchicalDataset)??[]),T=this._currentDatasetLength;this.sharedService.hierarchicalDataset=E,E&&this.columnDefinitions&&((U=this.filterService)!=null&&U.clearFilters)&&this.filterService.clearFilters(),E&&this.grid&&((Q=this.sortService)!=null&&Q.processTreeDataInitialSort)&&(this.sortService.processTreeDataInitialSort(),queueMicrotask(()=>{const le=this.dataview.getItemCount();le>0&&(le!==T||!w)&&this.filterService.refreshTreeDataFilters()}),this._isDatasetHierarchicalInitialized=!0)}createBackendApiInternalPostProcessCallback(E){const w=E==null?void 0:E.backendServiceApi;if(w!=null&&w.service){const T=w.service;typeof T.getDatasetName=="function"&&(w.internalPostProcess=B=>{const U=w&&T&&typeof T.getDatasetName=="function"?T.getDatasetName():"";if(B!=null&&B.data[U]){const Q=B.data[U].hasOwnProperty("nodes")?B.data[U].nodes:B.data[U],le=B.data[U].hasOwnProperty("totalCount")?B.data[U].totalCount:B.data[U].length;this.refreshGridData(Q,le||0)}})}}bindDifferentHooks(E,w,T){var B;if(w.enableTranslate&&this.extensionService.translateAllExtensions(),this.subscriptions.push(this.globalEa.subscribe("i18n:locale:changed",U=>{this._eventPubSubService.publish("onLanguageChange"),w.enableTranslate&&(this.extensionService.translateAllExtensions(U.newLocale),(w.createPreHeaderPanel&&w.createTopHeaderPanel||w.createPreHeaderPanel&&!w.enableDraggableGrouping)&&this.headerGroupingService.translateHeaderGrouping())})),w.backendServiceApi){const U=w.backendServiceApi;(B=U==null?void 0:U.service)!=null&&B.init&&U.service.init(U.options,w.pagination,this.grid,this.sharedService)}T&&E&&(this.gridEventService.bindOnBeforeEditCell(E),this.gridEventService.bindOnCellChange(E),this.gridEventService.bindOnClick(E),T&&E&&(w.enableSorting&&(w.backendServiceApi&&!w.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(E):this.sortService.bindLocalOnSort(E)),w.enableFiltering&&(this.filterService.init(E),w.backendServiceApi&&!w.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(E):this.filterService.bindLocalOnFilter(E)),this._eventHandler.subscribe(E.onColumnsReordered,(U,Q)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=Q.impactedColumns}),this._eventHandler.subscribe(E.onSetOptions,(U,Q)=>{Q.optionsBefore.darkMode!==Q.optionsAfter.darkMode&&this.sharedService.gridContainerElement&&this.setDarkMode(Q.optionsAfter.darkMode)}),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized(),this._eventHandler.subscribe(T.onRowCountChanged,(U,Q)=>{!w.enableRowDetailView||!Array.isArray(Q.changedRows)||Q.changedRows.length===Q.itemCount?E.invalidate():(E.invalidateRows(Q.changedRows),E.render()),this.handleOnItemCountChanged(T.getFilteredItemCount()||0,T.getItemCount()||0)}),this._eventHandler.subscribe(T.onSetItemsCalled,(U,Q)=>{var le;this.sharedService.isItemsDateParsed=!1,this.handleOnItemCountChanged(T.getFilteredItemCount()||0,Q.itemCount),Q.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!((le=this.gridOptions)!=null&&le.resizeByContentOnlyOnFirstLoad))}),w!=null&&w.enableFiltering&&!w.enableRowDetailView&&this._eventHandler.subscribe(T.onRowsChanged,(U,{calledOnRowCountChanged:Q,rows:le})=>{if(!Q&&Array.isArray(le)){const q=E.getRenderedRange();le.filter(Ie=>Ie>=q.top&&Ie<=q.bottom).forEach(Ie=>E.updateRow(Ie)),E.render()}}))),w!=null&&w.colspanCallback&&(T!=null&&T.getItem)&&(T!=null&&T.getItemMetadata)&&(T.getItemMetadata=U=>{let Q=null;return w.colspanCallback&&(Q=w.colspanCallback(T.getItem(U))),Q})}bindBackendCallbackFunctions(E){var Q,le,q;const w=E.backendServiceApi,T=w==null?void 0:w.service,B=(T==null?void 0:T.options)||{},U=B?B&&B.hasOwnProperty("executeProcessCommandOnInit")?B.executeProcessCommandOnInit:!0:!1;if(T){if(E!=null&&E.presets){if(T.updateFilters&&Array.isArray(E.presets.filters)&&E.presets.filters.length>0&&T.updateFilters(E.presets.filters,!0),T.updateSorters&&Array.isArray(E.presets.sorters)&&E.presets.sorters.length>0){const Ie=this.gridOptions.multiColumnSort?E.presets.sorters:E.presets.sorters.slice(0,1);T.updateSorters(void 0,Ie)}if(T.updatePagination&&E.presets.pagination&&!this.hasBackendInfiniteScroll()){const{pageNumber:Ie,pageSize:fe}=E.presets.pagination;T.updatePagination(Ie,fe)}}else{const Ie=this.filterService.getColumnFilters();Ie&&T.updateFilters&&T.updateFilters(Ie,!1)}if(w&&T&&(w.onInit||U)){const Ie=typeof T.buildQuery=="function"?T.buildQuery():"",fe=U?((Q=w.process)==null?void 0:Q.call(w,Ie))??null:((le=w.onInit)==null?void 0:le.call(w,Ie))??null;queueMicrotask(()=>{var Jt,mt,lt;const ke=this.backendUtilityService,Ue=new Date;w.preProcess&&w.preProcess();const Pt=((mt=(Jt=this.gridOptions)==null?void 0:Jt.pagination)==null?void 0:mt.totalItems)??0;fe instanceof Promise?fe.then(Xe=>ke.executeBackendProcessesCallback(Ue,Xe,w,Pt)).catch(Xe=>ke.onBackendError(Xe,w)):fe&&((lt=this.rxjs)!=null&&lt.isObservable(fe))&&this.subscriptions.push(fe.subscribe(Xe=>ke.executeBackendProcessesCallback(Ue,Xe,w,Pt),Xe=>ke.onBackendError(Xe,w)))})}(q=w.service.options)!=null&&q.infiniteScroll&&this.addBackendInfiniteScrollCallback()}}addBackendInfiniteScrollCallback(){var E;if(this.grid&&this.gridOptions.backendServiceApi&&this.hasBackendInfiniteScroll()&&!((E=this.gridOptions.backendServiceApi)!=null&&E.onScrollEnd)){const w=()=>{this.backendUtilityService.setInfiniteScrollBottomHit(!0),this.paginationService.goToNextPage().then(B=>{B||this.backendUtilityService.setInfiniteScrollBottomHit(!1)})};this.gridOptions.backendServiceApi.onScrollEnd=w,this._eventHandler.subscribe(this.grid.onScroll,(B,U)=>{var le;const Q=U.grid.getViewportNode();["mousewheel","scroll"].includes(U.triggeredBy||"")&&((le=this.paginationService)!=null&&le.totalItems)&&U.scrollTop>0&&Math.ceil(Q.offsetHeight+U.scrollTop)>=U.scrollHeight&&(this._scrollEndCalled||(w(),this._scrollEndCalled=!0))});const T=this.gridOptions.backendServiceApi.postProcess;this.gridOptions.backendServiceApi.postProcess=B=>{this._scrollEndCalled=!1,T&&T(B)}}}bindResizeHook(E,w){if(w.autoFitColumnsOnFirstLoad&&w.autosizeColumnsByCellContentOnFirstLoad||w.enableAutoSizeColumns&&w.enableAutoResizeColumnsByCellContent)throw new Error('[Aurelia-Slickgrid] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');w.gridHeight||w.gridWidth?this.resizerService.resizeGrid(0,{height:w.gridHeight,width:w.gridWidth}):this.resizerService.resizeGrid(),E&&(w!=null&&w.enableAutoResize)&&w.autoFitColumnsOnFirstLoad&&w.enableAutoSizeColumns&&!this._isAutosizeColsCalled&&(E.autosizeColumns(),this._isAutosizeColsCalled=!0)}executeAfterDataviewCreated(E,w){if(w.enableSorting&&w.presets&&Array.isArray(w.presets.sorters)){const T=this.gridOptions.multiColumnSort?w.presets.sorters:w.presets.sorters.slice(0,1);this.sortService.loadGridSorters(T)}}paginationChanged(E){var U,Q;const w=((U=this.gridStateService)==null?void 0:U.needToPreserveRowSelection())??!1;this.grid&&!w&&((Q=this.gridOptions)!=null&&Q.backendServiceApi)&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.grid.setSelectedRows([]);const{pageNumber:T,pageSize:B}=E;this.sharedService&&B!==void 0&&T!==void 0&&(this.sharedService.currentPagination={pageNumber:T,pageSize:B}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:T,pageSize:B},type:Ai.pagination},gridState:this.gridStateService.getCurrentGridState()})}paginationOptionsChanged(E){E&&this._paginationOptions?this._paginationOptions={...this._paginationOptions,...E}:this._paginationOptions=E,this.gridOptions.pagination=this._paginationOptions,this.paginationService.updateTotalItems((E==null?void 0:E.totalItems)??0,!0)}refreshGridData(E,w){var T,B,U,Q,le,q,Ie;if((T=this.gridOptions)!=null&&T.enablePagination&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(E)),(B=this.gridOptions)!=null&&B.enableEmptyDataWarningMessage&&Array.isArray(E)){const fe=w||E.length;this.displayEmptyDataWarning(fe<1)}if(Array.isArray(E)&&this.grid&&((U=this.dataview)!=null&&U.setItems)){if(this.dataview.setItems(E,this.gridOptions.datasetIdPropertyName??"id"),!this.gridOptions.backendServiceApi&&!this.gridOptions.enableTreeData&&this.dataview.reSort(),E.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),this.showPagination=!!(this.gridOptions&&(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&this.gridOptions.enablePagination===void 0)),this._paginationOptions&&((Q=this.gridOptions)!=null&&Q.pagination)&&((le=this.gridOptions)!=null&&le.backendServiceApi)){const fe=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions),ke=w!==void 0?w:(Ie=(q=this.gridOptions)==null?void 0:q.pagination)==null?void 0:Ie.totalItems;ke!==void 0&&ke!==this.totalItems&&(this.totalItems=+ke),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(fe)}if(this.grid&&this.gridOptions.enableAutoResize){const fe=this.gridOptions.autoResize&&this.gridOptions.autoResize.delay;this.resizerService.resizeGrid(fe||10)}}}showHeaderRow(E=!0){return this.grid.setHeaderRowVisibility(E),E===!0&&this._isGridInitialized&&this.grid.setColumns(this.columnDefinitions),E}setData(E,w=!1){w&&(this._isAutosizeColsCalled=!1,this._currentDatasetLength=0),this.dataset=E||[]}setPaginationOptionsWhenPresetDefined(E,w){var T;return(T=E.presets)!=null&&T.pagination&&E.pagination&&(this.hasBackendInfiniteScroll()?console.warn("[Aurelia-Slickgrid] `presets.pagination` is not supported with Infinite Scroll, reverting to first page."):(w.pageSize=E.presets.pagination.pageSize,w.pageNumber=E.presets.pagination.pageNumber)),w}setDarkMode(E=!1){var w,T;E?(w=this.sharedService.gridContainerElement)==null||w.classList.add("slick-dark-mode"):(T=this.sharedService.gridContainerElement)==null||T.classList.remove("slick-dark-mode")}updateColumnDefinitionsList(E){var w,T,B;E&&(E=this.loadSlickGridEditors(E),this.gridOptions.autoAddCustomEditorFormatter&&jC(E,this.gridOptions.autoAddCustomEditorFormatter),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(void 0,E):this.extensionService.renderColumnHeaders(E,!0),(w=this.gridOptions)!=null&&w.enableAutoSizeColumns?this.grid.autosizeColumns():(T=this.gridOptions)!=null&&T.enableAutoResizeColumnsByCellContent&&((B=this.resizerService)!=null&&B.resizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent())}columnDefinitionsHandler(){this._columnDefinitions=this.columnDefinitions,this._isGridInitialized&&this.updateColumnDefinitionsList(this.columnDefinitions),this._columnDefinitions.length>0&&this.copyColumnWidthsReference(this._columnDefinitions)}observeColumnDefinitions(){var E;(E=this._columnDefinitionObserver)==null||E.unsubscribe(this._columnDefinitionsSubscriber),this._columnDefinitionObserver=this.observerLocator.getArrayObserver(this.columnDefinitions),this._columnDefinitionObserver.subscribe(this._columnDefinitionsSubscriber)}copyColumnWidthsReference(E){E.forEach(w=>w.originalWidth=w.width)}displayEmptyDataWarning(E=!0){var w;(w=this.slickEmptyWarning)==null||w.showEmptyDataMessage(E)}handleOnItemCountChanged(E,w){var T;this._currentDatasetLength=w,this.metrics={startTime:new Date,endTime:new Date,itemCount:E,totalItemCount:w},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&((T=this.gridOptions)!=null&&T.enableEmptyDataWarningMessage)&&this.displayEmptyDataWarning(E===0),this.gridOptions.enableAutoResize&&this.resizerService.isAutoHeightEnabled&&E>0&&this.resizerService.resizeGrid()}initializePaginationService(E){this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.grid,E,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",w=>this.paginationChanged(w)),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",w=>{var T,B;this.showPagination=(w==null?void 0:w.visible)??!1,(T=this.gridOptions)!=null&&T.backendServiceApi&&((B=this.backendUtilityService)==null||B.refreshBackendDataset(this.gridOptions)),this.renderPagination(this.showPagination)})),this.renderPagination(),this._isPaginationInitialized=!0)}loadEditorCollectionAsync(E){var w;if(E!=null&&E.editor){const T=E.editor.collectionAsync;E.editor.disabled=!0,T instanceof Promise?T.then(B=>{Array.isArray(B)?this.updateEditorCollection(E,B):B instanceof Response&&typeof B.json=="function"?B.bodyUsed?console.warn("[Aurelia-SlickGrid] The response body passed to collectionAsync was already read. Either pass the dataset from the Response or clone the response first using response.clone()"):B.json().then(U=>this.updateEditorCollection(E,U)):B!=null&&B.content&&this.updateEditorCollection(E,B.content)}):(w=this.rxjs)!=null&&w.isObservable(T)&&queueMicrotask(()=>{this.subscriptions.push(T.subscribe(B=>this.updateEditorCollection(E,B)))})}}insertDynamicPresetColumns(E,w){if(this._columnDefinitions){const T=this._columnDefinitions.findIndex(B=>B.id===E);if(T>=0){const B=this._columnDefinitions[T];(B==null?void 0:B.id)===E&&!w.some(U=>U.id===E)&&(T>0?w.splice(T,0,B):w.unshift(B))}}}loadColumnPresetsWhenDatasetInitialized(){var E,w,T,B,U,Q;if(this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){const le=this.gridStateService.getAssociatedGridColumns(this.grid,this.gridOptions.presets.columns);if(le&&Array.isArray(le)&&le.length>0&&Array.isArray(this._columnDefinitions)){if(this.gridOptions.enableRowMoveManager){const q=((w=(E=this.gridOptions)==null?void 0:E.rowMoveManager)==null?void 0:w.columnId)??"_move";this.insertDynamicPresetColumns(q,le)}if(this.gridOptions.enableCheckboxSelector){const q=((B=(T=this.gridOptions)==null?void 0:T.checkboxSelector)==null?void 0:B.columnId)??"_checkbox_selector";this.insertDynamicPresetColumns(q,le)}if(this.gridOptions.enableRowDetailView){const q=((Q=(U=this.gridOptions)==null?void 0:U.rowDetailView)==null?void 0:Q.columnId)??"_detail_selector";this.insertDynamicPresetColumns(q,le)}le.forEach(q=>q.originalWidth=q.width),this.grid.setColumns(le),this.sharedService.visibleColumns=le}}}loadFilterPresetsWhenDatasetInitialized(){var E,w,T;this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&(Array.isArray(this.gridOptions.presets.filters)||Array.isArray((w=(E=this.gridOptions.presets)==null?void 0:E.treeData)==null?void 0:w.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets(((T=this.gridOptions.presets)==null?void 0:T.filters)||[])}loadLocalGridPagination(E){var w;if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(E)?E.length:0,this._paginationOptions&&((w=this.dataview)!=null&&w.getPagingInfo)){const B=this.dataview.getPagingInfo();B!=null&&B.hasOwnProperty("totalRows")&&this._paginationOptions.totalItems!==B.totalRows&&(this.totalItems=B.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;const T=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(T)}}loadRowSelectionPresetWhenExists(){var T,B;const E=(T=this.gridOptions)==null?void 0:T.presets;if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&((B=this.grid)!=null&&B.getSelectionModel())&&(E!=null&&E.rowSelection)&&(Array.isArray(E.rowSelection.gridRowIndexes)||Array.isArray(E.rowSelection.dataContextIds))){let U=E.rowSelection.dataContextIds,Q=E.rowSelection.gridRowIndexes;Array.isArray(U)&&U.length>0?Q=this.dataview.mapIdsToRows(U)||[]:Array.isArray(Q)&&Q.length>0&&(U=this.dataview.mapRowsToIds(Q)||[]),this.grid&&Array.isArray(Q)&&(this.grid.setSelectedRows(Q),this.dataview.setSelectedIds(U||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}hasBackendInfiniteScroll(E){var w,T;return!!((T=(w=(E||this.gridOptions).backendServiceApi)==null?void 0:w.service.options)!=null&&T.infiniteScroll)}mergeGridOptions(E){E.gridId=this.gridId,E.gridContainerId=`slickGridContainer-${this.gridId}`;const w=Qt(!0,{},em,E);return this.hasBackendInfiniteScroll(E)||(E.enablePagination=!!(E.backendServiceApi&&E.enablePagination===void 0||E.enablePagination)),w!=null&&w.pagination&&(E.enablePagination||E.backendServiceApi)&&E.pagination&&Array.isArray(E.pagination.pageSizes)&&(w.pagination.pageSizes=E.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=w.showHeaderRow===!1,w.enableFiltering&&!w.showHeaderRow&&(w.showHeaderRow=w.enableFiltering),w&&!w.enableFiltering&&w.enablePagination&&this._isLocalGrid&&(w.enableFiltering=!0,w.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),w}registerExternalResources(E,w=!1){w&&this.disposeExternalResources(),E.forEach(T=>this._registeredResources.push(T)),this.initializeExternalResources(E)}resetExternalResources(){this._registeredResources=[]}initializeExternalResources(E){if(Array.isArray(E))for(const w of E)this.grid&&typeof w.init=="function"&&w.init(this.grid,this.containerService)}preRegisterResources(){var E;if(this._registeredResources=((E=this.gridOptions)==null?void 0:E.externalResources)||[],Array.isArray(this._registeredResources))for(const w of this._registeredResources)(w==null?void 0:w.className)==="RxJsResource"&&this.registerRxJsResource(w);this.gridOptions.enableRowDetailView&&!this._registeredResources.some(w=>w instanceof Ay)&&(this.slickRowDetailView=new Ay(this.aureliaUtilService,this._eventPubSubService,this.elm),this.slickRowDetailView.create(this.columnDefinitions,this.gridOptions),this.extensionService.addExtensionToList(Ae.rowDetailView,{name:Ae.rowDetailView,instance:this.slickRowDetailView}))}registerResources(){Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.some(E=>E instanceof JC)||this._registeredResources.push(this.gridService),this._registeredResources.some(E=>E instanceof ey)||this._registeredResources.push(this.gridStateService),(this.gridOptions.createPreHeaderPanel&&this.gridOptions.createTopHeaderPanel||this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping)&&!this._registeredResources.some(E=>E instanceof ty)&&this._registeredResources.push(this.headerGroupingService),this.gridOptions.enableTreeData&&!this._registeredResources.some(E=>E instanceof iy)&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this._registeredResources.some(E=>E instanceof cy)||(this.slickEmptyWarning=new cy,this._registeredResources.push(this.slickEmptyWarning)),this.initializeExternalResources(this._registeredResources),this.gridOptions.enableRowDetailView&&this.slickRowDetailView&&this.slickRowDetailView.init(this.grid)}registerRxJsResource(E){this.rxjs=E,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.containerService.registerInstance("RxJsResource",this.rxjs)}async renderPagination(E=!0){var w,T,B,U;if(this.grid&&((w=this.gridOptions)!=null&&w.enablePagination)&&!this._isPaginationInitialized&&E){if(this.gridOptions.customPaginationComponent){const Q=document.createElement("section");this.elm.appendChild(Q);const le=await this.aureliaUtilService.createAureliaViewModelAddToSlot(this.gridOptions.customPaginationComponent,void 0,Q),q=(B=(T=le==null?void 0:le.controller)==null?void 0:T.children)==null?void 0:B[0].scope.bindingContext;q&&(this.instances.paginationComponent=q,this.slickPagination=q)}else this.slickPagination=new UW;this.slickPagination&&(this.slickPagination.init(this.grid,this.paginationService,this._eventPubSubService,this.translaterService),this.slickPagination.renderPagination(this.elm.querySelector("div")),this._isPaginationInitialized=!0)}else E||((U=this.slickPagination)==null||U.dispose(),this._isPaginationInitialized=!1)}sortTreeDataset(E,w=!1){const T=this._currentDatasetLength;let B,U=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(B=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),U=B.flat):Array.isArray(E)&&E.length>0&&(B=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(E,this._columnDefinitions,this.gridOptions),this.sharedService.hierarchicalDataset=B.hierarchical,U=B.flat),E.length>0&&(w||E.length!==T)&&this.filterService.refreshTreeDataFilters(U),U}loadSlickGridEditors(E){return E.some(w=>`${w.id}`.includes("."))&&console.error('[Aurelia-Slickgrid] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),E.map(w=>{var T;return(T=w.editor)!=null&&T.collectionAsync&&this.loadEditorCollectionAsync(w),{...w,editorClass:w.editor&&this.container.getFactory(w.editor.model).Type}})}suggestDateParsingWhenHelpful(){var E;((E=this.dataview)==null?void 0:E.getItemCount())>UU&&!this.gridOptions.silenceWarnings&&!this.gridOptions.preParseDateColumns&&this.grid.getColumns().some(w=>Lo(w.type))&&console.warn("[Slickgrid-Universal] For getting better perf, we suggest you enable the `preParseDateColumns` grid option, for more info visit => https://ghiscoding.gitbook.io/aurelia-slickgrid/column-functionalities/sorting#pre-parse-date-columns-for-better-perf")}updateEditorCollection(E,w){if(this.grid&&E.editor){E.editor.collection=w,E.editor.disabled=!1;const T=this.grid.getCellEditor();T!=null&&T.disable&&(T!=null&&T.renderDomElement)&&(T.destroy(),T.disable(!1),T.renderDomElement(w))}}},i=L,(()=>{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[ot({mode:Oi.twoWay})],a=[ot({mode:Oi.twoWay})],h=[ot({mode:Oi.twoWay})],p=[ot({mode:Oi.twoWay})],m=[ot({mode:Oi.twoWay})],C=[ot({mode:Oi.twoWay})],S=[ot({mode:Oi.fromView})],F=[ot({mode:Oi.fromView})],J=[ot()],ue=[ot()],re=[ot()],ge=[ot()],O=[ot()],ri(null,null,s,{kind:"field",name:"columnDefinitions",static:!1,private:!1,access:{has:w=>"columnDefinitions"in w,get:w=>w.columnDefinitions,set:(w,T)=>{w.columnDefinitions=T}},metadata:E},r,o),ri(null,null,a,{kind:"field",name:"element",static:!1,private:!1,access:{has:w=>"element"in w,get:w=>w.element,set:(w,T)=>{w.element=T}},metadata:E},l,c),ri(null,null,h,{kind:"field",name:"dataview",static:!1,private:!1,access:{has:w=>"dataview"in w,get:w=>w.dataview,set:(w,T)=>{w.dataview=T}},metadata:E},d,u),ri(null,null,p,{kind:"field",name:"grid",static:!1,private:!1,access:{has:w=>"grid"in w,get:w=>w.grid,set:(w,T)=>{w.grid=T}},metadata:E},f,g),ri(null,null,m,{kind:"field",name:"paginationOptions",static:!1,private:!1,access:{has:w=>"paginationOptions"in w,get:w=>w.paginationOptions,set:(w,T)=>{w.paginationOptions=T}},metadata:E},_,b),ri(null,null,C,{kind:"field",name:"totalItems",static:!1,private:!1,access:{has:w=>"totalItems"in w,get:w=>w.totalItems,set:(w,T)=>{w.totalItems=T}},metadata:E},v,y),ri(null,null,S,{kind:"field",name:"extensions",static:!1,private:!1,access:{has:w=>"extensions"in w,get:w=>w.extensions,set:(w,T)=>{w.extensions=T}},metadata:E},A,P),ri(null,null,F,{kind:"field",name:"instances",static:!1,private:!1,access:{has:w=>"instances"in w,get:w=>w.instances,set:(w,T)=>{w.instances=T}},metadata:E},H,W),ri(null,null,J,{kind:"field",name:"customDataView",static:!1,private:!1,access:{has:w=>"customDataView"in w,get:w=>w.customDataView,set:(w,T)=>{w.customDataView=T}},metadata:E},Y,ae),ri(null,null,ue,{kind:"field",name:"dataset",static:!1,private:!1,access:{has:w=>"dataset"in w,get:w=>w.dataset,set:(w,T)=>{w.dataset=T}},metadata:E},te,V),ri(null,null,re,{kind:"field",name:"datasetHierarchical",static:!1,private:!1,access:{has:w=>"datasetHierarchical"in w,get:w=>w.datasetHierarchical,set:(w,T)=>{w.datasetHierarchical=T}},metadata:E},Z,_e),ri(null,null,ge,{kind:"field",name:"gridId",static:!1,private:!1,access:{has:w=>"gridId"in w,get:w=>w.gridId,set:(w,T)=>{w.gridId=T}},metadata:E},x,M),ri(null,null,O,{kind:"field",name:"gridOptions",static:!1,private:!1,access:{has:w=>"gridOptions"in w,get:w=>w.gridOptions,set:(w,T)=>{w.gridOptions=T}},metadata:E},D,Ye),ri(null,e={value:i},n,{kind:"class",name:i.name,metadata:E},null,t),i=e.value,E&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E}),Ze(i,t)})(),i})();class jU{constructor(){G(this,"options");this.options=em}}const II={register(n){return n.register(GU)},customize(n){return{register(e){const t=e.get(jU);return n(t),II.register(e)}}}};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:RI,setPrototypeOf:Iy,isFrozen:KU,getPrototypeOf:YU,getOwnPropertyDescriptor:qU}=Object;let{freeze:Mi,seal:Ss,create:OI}=Object,{apply:rm,construct:om}=typeof Reflect<"u"&&Reflect;Mi||(Mi=function(e){return e});Ss||(Ss=function(e){return e});rm||(rm=function(e,t,i){return e.apply(t,i)});om||(om=function(e,t){return new e(...t)});const Jh=Fi(Array.prototype.forEach),XU=Fi(Array.prototype.lastIndexOf),Ry=Fi(Array.prototype.pop),xl=Fi(Array.prototype.push),QU=Fi(Array.prototype.splice),Ad=Fi(String.prototype.toLowerCase),Nf=Fi(String.prototype.toString),Oy=Fi(String.prototype.match),Pl=Fi(String.prototype.replace),ZU=Fi(String.prototype.indexOf),JU=Fi(String.prototype.trim),Os=Fi(Object.prototype.hasOwnProperty),Si=Fi(RegExp.prototype.test),kl=eG(TypeError);function Fi(n){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return rm(n,e,i)}}function eG(n){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return om(n,t)}}function Me(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ad;Iy&&Iy(n,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const r=t(s);r!==s&&(KU(e)||(e[i]=r),s=r)}n[s]=!0}return n}function tG(n){for(let e=0;e<n.length;e++)Os(n,e)||(n[e]=null);return n}function no(n){const e=OI(null);for(const[t,i]of RI(n))Os(n,t)&&(Array.isArray(i)?e[t]=tG(i):i&&typeof i=="object"&&i.constructor===Object?e[t]=no(i):e[t]=i);return e}function Dl(n,e){for(;n!==null;){const i=qU(n,e);if(i){if(i.get)return Fi(i.get);if(typeof i.value=="function")return Fi(i.value)}n=YU(n)}function t(){return null}return t}const xy=Mi(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Mf=Mi(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ff=Mi(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),iG=Mi(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),$f=Mi(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sG=Mi(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Py=Mi(["#text"]),ky=Mi(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Hf=Mi(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Dy=Mi(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ed=Mi(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),nG=Ss(/\{\{[\w\W]*|[\w\W]*\}\}/gm),rG=Ss(/<%[\w\W]*|[\w\W]*%>/gm),oG=Ss(/\$\{[\w\W]*/gm),aG=Ss(/^data-[\-\w.\u00B7-\uFFFF]+$/),lG=Ss(/^aria-[\-\w]+$/),xI=Ss(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),cG=Ss(/^(?:\w+script|data):/i),hG=Ss(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PI=Ss(/^html$/i),dG=Ss(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ly=Object.freeze({__proto__:null,ARIA_ATTR:lG,ATTR_WHITESPACE:hG,CUSTOM_ELEMENT:dG,DATA_ATTR:aG,DOCTYPE_NAME:PI,ERB_EXPR:rG,IS_ALLOWED_URI:xI,IS_SCRIPT_OR_DATA:cG,MUSTACHE_EXPR:nG,TMPLIT_EXPR:oG});const Ll={element:1,text:3,progressingInstruction:7,comment:8,document:9},uG=function(){return typeof window>"u"?null:window},pG=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(i=t.getAttribute(s));const r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},Ny=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function kI(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uG();const e=me=>kI(me);if(e.version="3.2.4",e.removed=[],!n||!n.document||n.document.nodeType!==Ll.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const i=t,s=i.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:u,trustedTypes:p}=n,f=l.prototype,g=Dl(f,"cloneNode"),m=Dl(f,"remove"),_=Dl(f,"nextSibling"),b=Dl(f,"childNodes"),C=Dl(f,"parentNode");if(typeof o=="function"){const me=t.createElement("template");me.content&&me.content.ownerDocument&&(t=me.content.ownerDocument)}let v,y="";const{implementation:S,createNodeIterator:A,createDocumentFragment:P,getElementsByTagName:F}=t,{importNode:H}=i;let W=Ny();e.isSupported=typeof RI=="function"&&typeof C=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:J,ERB_EXPR:Y,TMPLIT_EXPR:ae,DATA_ATTR:ue,ARIA_ATTR:te,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:Z}=Ly;let{IS_ALLOWED_URI:_e}=Ly,ge=null;const x=Me({},[...xy,...Mf,...Ff,...$f,...Py]);let M=null;const O=Me({},[...ky,...Hf,...Dy,...ed]);let D=Object.seal(OI(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ye=null,L=null,z=!0,E=!0,w=!1,T=!0,B=!1,U=!0,Q=!1,le=!1,q=!1,Ie=!1,fe=!1,ke=!1,Ue=!0,Pt=!1;const Jt="user-content-";let mt=!0,lt=!1,Xe={},Ft=null;const kt=Me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $t=null;const lr=Me({},["audio","video","img","source","image","track"]);let Ht=null;const fl=Me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),mh="http://www.w3.org/1998/Math/MathML",_h="http://www.w3.org/2000/svg",An="http://www.w3.org/1999/xhtml";let Yo=An,fp=!1,gp=null;const aO=Me({},[mh,_h,An],Nf);let vh=Me({},["mi","mo","mn","ms","mtext"]),bh=Me({},["annotation-xml"]);const lO=Me({},["title","style","font","a","script"]);let gl=null;const cO=["application/xhtml+xml","text/html"],hO="text/html";let ei=null,qo=null;const dO=t.createElement("form"),Nv=function(R){return R instanceof RegExp||R instanceof Function},mp=function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(qo&&qo===R)){if((!R||typeof R!="object")&&(R={}),R=no(R),gl=cO.indexOf(R.PARSER_MEDIA_TYPE)===-1?hO:R.PARSER_MEDIA_TYPE,ei=gl==="application/xhtml+xml"?Nf:Ad,ge=Os(R,"ALLOWED_TAGS")?Me({},R.ALLOWED_TAGS,ei):x,M=Os(R,"ALLOWED_ATTR")?Me({},R.ALLOWED_ATTR,ei):O,gp=Os(R,"ALLOWED_NAMESPACES")?Me({},R.ALLOWED_NAMESPACES,Nf):aO,Ht=Os(R,"ADD_URI_SAFE_ATTR")?Me(no(fl),R.ADD_URI_SAFE_ATTR,ei):fl,$t=Os(R,"ADD_DATA_URI_TAGS")?Me(no(lr),R.ADD_DATA_URI_TAGS,ei):lr,Ft=Os(R,"FORBID_CONTENTS")?Me({},R.FORBID_CONTENTS,ei):kt,Ye=Os(R,"FORBID_TAGS")?Me({},R.FORBID_TAGS,ei):{},L=Os(R,"FORBID_ATTR")?Me({},R.FORBID_ATTR,ei):{},Xe=Os(R,"USE_PROFILES")?R.USE_PROFILES:!1,z=R.ALLOW_ARIA_ATTR!==!1,E=R.ALLOW_DATA_ATTR!==!1,w=R.ALLOW_UNKNOWN_PROTOCOLS||!1,T=R.ALLOW_SELF_CLOSE_IN_ATTR!==!1,B=R.SAFE_FOR_TEMPLATES||!1,U=R.SAFE_FOR_XML!==!1,Q=R.WHOLE_DOCUMENT||!1,Ie=R.RETURN_DOM||!1,fe=R.RETURN_DOM_FRAGMENT||!1,ke=R.RETURN_TRUSTED_TYPE||!1,q=R.FORCE_BODY||!1,Ue=R.SANITIZE_DOM!==!1,Pt=R.SANITIZE_NAMED_PROPS||!1,mt=R.KEEP_CONTENT!==!1,lt=R.IN_PLACE||!1,_e=R.ALLOWED_URI_REGEXP||xI,Yo=R.NAMESPACE||An,vh=R.MATHML_TEXT_INTEGRATION_POINTS||vh,bh=R.HTML_INTEGRATION_POINTS||bh,D=R.CUSTOM_ELEMENT_HANDLING||{},R.CUSTOM_ELEMENT_HANDLING&&Nv(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(D.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&Nv(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(D.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(D.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),B&&(E=!1),fe&&(Ie=!0),Xe&&(ge=Me({},Py),M=[],Xe.html===!0&&(Me(ge,xy),Me(M,ky)),Xe.svg===!0&&(Me(ge,Mf),Me(M,Hf),Me(M,ed)),Xe.svgFilters===!0&&(Me(ge,Ff),Me(M,Hf),Me(M,ed)),Xe.mathMl===!0&&(Me(ge,$f),Me(M,Dy),Me(M,ed))),R.ADD_TAGS&&(ge===x&&(ge=no(ge)),Me(ge,R.ADD_TAGS,ei)),R.ADD_ATTR&&(M===O&&(M=no(M)),Me(M,R.ADD_ATTR,ei)),R.ADD_URI_SAFE_ATTR&&Me(Ht,R.ADD_URI_SAFE_ATTR,ei),R.FORBID_CONTENTS&&(Ft===kt&&(Ft=no(Ft)),Me(Ft,R.FORBID_CONTENTS,ei)),mt&&(ge["#text"]=!0),Q&&Me(ge,["html","head","body"]),ge.table&&(Me(ge,["tbody"]),delete Ye.tbody),R.TRUSTED_TYPES_POLICY){if(typeof R.TRUSTED_TYPES_POLICY.createHTML!="function")throw kl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof R.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw kl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=R.TRUSTED_TYPES_POLICY,y=v.createHTML("")}else v===void 0&&(v=pG(p,s)),v!==null&&typeof y=="string"&&(y=v.createHTML(""));Mi&&Mi(R),qo=R}},Mv=Me({},[...Mf,...Ff,...iG]),Fv=Me({},[...$f,...sG]),uO=function(R){let X=C(R);(!X||!X.tagName)&&(X={namespaceURI:Yo,tagName:"template"});const he=Ad(R.tagName),_t=Ad(X.tagName);return gp[R.namespaceURI]?R.namespaceURI===_h?X.namespaceURI===An?he==="svg":X.namespaceURI===mh?he==="svg"&&(_t==="annotation-xml"||vh[_t]):!!Mv[he]:R.namespaceURI===mh?X.namespaceURI===An?he==="math":X.namespaceURI===_h?he==="math"&&bh[_t]:!!Fv[he]:R.namespaceURI===An?X.namespaceURI===_h&&!bh[_t]||X.namespaceURI===mh&&!vh[_t]?!1:!Fv[he]&&(lO[he]||!Mv[he]):!!(gl==="application/xhtml+xml"&&gp[R.namespaceURI]):!1},Us=function(R){xl(e.removed,{element:R});try{C(R).removeChild(R)}catch{m(R)}},wh=function(R,X){try{xl(e.removed,{attribute:X.getAttributeNode(R),from:X})}catch{xl(e.removed,{attribute:null,from:X})}if(X.removeAttribute(R),R==="is")if(Ie||fe)try{Us(X)}catch{}else try{X.setAttribute(R,"")}catch{}},$v=function(R){let X=null,he=null;if(q)R="<remove></remove>"+R;else{const si=Oy(R,/^[\r\n\t ]+/);he=si&&si[0]}gl==="application/xhtml+xml"&&Yo===An&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");const _t=v?v.createHTML(R):R;if(Yo===An)try{X=new u().parseFromString(_t,gl)}catch{}if(!X||!X.documentElement){X=S.createDocument(Yo,"template",null);try{X.documentElement.innerHTML=fp?y:_t}catch{}}const li=X.body||X.documentElement;return R&&he&&li.insertBefore(t.createTextNode(he),li.childNodes[0]||null),Yo===An?F.call(X,Q?"html":"body")[0]:Q?X.documentElement:li},Hv=function(R){return A.call(R.ownerDocument||R,R,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_p=function(R){return R instanceof d&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof h)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"||typeof R.hasChildNodes!="function")},Bv=function(R){return typeof a=="function"&&R instanceof a};function In(me,R,X){Jh(me,he=>{he.call(e,R,X,qo)})}const Vv=function(R){let X=null;if(In(W.beforeSanitizeElements,R,null),_p(R))return Us(R),!0;const he=ei(R.nodeName);if(In(W.uponSanitizeElement,R,{tagName:he,allowedTags:ge}),R.hasChildNodes()&&!Bv(R.firstElementChild)&&Si(/<[/\w]/g,R.innerHTML)&&Si(/<[/\w]/g,R.textContent)||R.nodeType===Ll.progressingInstruction||U&&R.nodeType===Ll.comment&&Si(/<[/\w]/g,R.data))return Us(R),!0;if(!ge[he]||Ye[he]){if(!Ye[he]&&Wv(he)&&(D.tagNameCheck instanceof RegExp&&Si(D.tagNameCheck,he)||D.tagNameCheck instanceof Function&&D.tagNameCheck(he)))return!1;if(mt&&!Ft[he]){const _t=C(R)||R.parentNode,li=b(R)||R.childNodes;if(li&&_t){const si=li.length;for(let $i=si-1;$i>=0;--$i){const Gs=g(li[$i],!0);Gs.__removalCount=(R.__removalCount||0)+1,_t.insertBefore(Gs,_(R))}}}return Us(R),!0}return R instanceof l&&!uO(R)||(he==="noscript"||he==="noembed"||he==="noframes")&&Si(/<\/no(script|embed|frames)/i,R.innerHTML)?(Us(R),!0):(B&&R.nodeType===Ll.text&&(X=R.textContent,Jh([J,Y,ae],_t=>{X=Pl(X,_t," ")}),R.textContent!==X&&(xl(e.removed,{element:R.cloneNode()}),R.textContent=X)),In(W.afterSanitizeElements,R,null),!1)},zv=function(R,X,he){if(Ue&&(X==="id"||X==="name")&&(he in t||he in dO))return!1;if(!(E&&!L[X]&&Si(ue,X))){if(!(z&&Si(te,X))){if(!M[X]||L[X]){if(!(Wv(R)&&(D.tagNameCheck instanceof RegExp&&Si(D.tagNameCheck,R)||D.tagNameCheck instanceof Function&&D.tagNameCheck(R))&&(D.attributeNameCheck instanceof RegExp&&Si(D.attributeNameCheck,X)||D.attributeNameCheck instanceof Function&&D.attributeNameCheck(X))||X==="is"&&D.allowCustomizedBuiltInElements&&(D.tagNameCheck instanceof RegExp&&Si(D.tagNameCheck,he)||D.tagNameCheck instanceof Function&&D.tagNameCheck(he))))return!1}else if(!Ht[X]){if(!Si(_e,Pl(he,re,""))){if(!((X==="src"||X==="xlink:href"||X==="href")&&R!=="script"&&ZU(he,"data:")===0&&$t[R])){if(!(w&&!Si(V,Pl(he,re,"")))){if(he)return!1}}}}}}return!0},Wv=function(R){return R!=="annotation-xml"&&Oy(R,Z)},Uv=function(R){In(W.beforeSanitizeAttributes,R,null);const{attributes:X}=R;if(!X||_p(R))return;const he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M,forceKeepAttr:void 0};let _t=X.length;for(;_t--;){const li=X[_t],{name:si,namespaceURI:$i,value:Gs}=li,ml=ei(si);let yi=si==="value"?Gs:JU(Gs);if(he.attrName=ml,he.attrValue=yi,he.keepAttr=!0,he.forceKeepAttr=void 0,In(W.uponSanitizeAttribute,R,he),yi=he.attrValue,Pt&&(ml==="id"||ml==="name")&&(wh(si,R),yi=Jt+yi),U&&Si(/((--!?|])>)|<\/(style|title)/i,yi)){wh(si,R);continue}if(he.forceKeepAttr||(wh(si,R),!he.keepAttr))continue;if(!T&&Si(/\/>/i,yi)){wh(si,R);continue}B&&Jh([J,Y,ae],jv=>{yi=Pl(yi,jv," ")});const Gv=ei(R.nodeName);if(zv(Gv,ml,yi)){if(v&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!$i)switch(p.getAttributeType(Gv,ml)){case"TrustedHTML":{yi=v.createHTML(yi);break}case"TrustedScriptURL":{yi=v.createScriptURL(yi);break}}try{$i?R.setAttributeNS($i,si,yi):R.setAttribute(si,yi),_p(R)?Us(R):Ry(e.removed)}catch{}}}In(W.afterSanitizeAttributes,R,null)},pO=function me(R){let X=null;const he=Hv(R);for(In(W.beforeSanitizeShadowDOM,R,null);X=he.nextNode();)In(W.uponSanitizeShadowNode,X,null),Vv(X),Uv(X),X.content instanceof r&&me(X.content);In(W.afterSanitizeShadowDOM,R,null)};return e.sanitize=function(me){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=null,he=null,_t=null,li=null;if(fp=!me,fp&&(me="<!-->"),typeof me!="string"&&!Bv(me))if(typeof me.toString=="function"){if(me=me.toString(),typeof me!="string")throw kl("dirty is not a string, aborting")}else throw kl("toString is not a function");if(!e.isSupported)return me;if(le||mp(R),e.removed=[],typeof me=="string"&&(lt=!1),lt){if(me.nodeName){const Gs=ei(me.nodeName);if(!ge[Gs]||Ye[Gs])throw kl("root node is forbidden and cannot be sanitized in-place")}}else if(me instanceof a)X=$v("<!---->"),he=X.ownerDocument.importNode(me,!0),he.nodeType===Ll.element&&he.nodeName==="BODY"||he.nodeName==="HTML"?X=he:X.appendChild(he);else{if(!Ie&&!B&&!Q&&me.indexOf("<")===-1)return v&&ke?v.createHTML(me):me;if(X=$v(me),!X)return Ie?null:ke?y:""}X&&q&&Us(X.firstChild);const si=Hv(lt?me:X);for(;_t=si.nextNode();)Vv(_t),Uv(_t),_t.content instanceof r&&pO(_t.content);if(lt)return me;if(Ie){if(fe)for(li=P.call(X.ownerDocument);X.firstChild;)li.appendChild(X.firstChild);else li=X;return(M.shadowroot||M.shadowrootmode)&&(li=H.call(i,li,!0)),li}let $i=Q?X.outerHTML:X.innerHTML;return Q&&ge["!doctype"]&&X.ownerDocument&&X.ownerDocument.doctype&&X.ownerDocument.doctype.name&&Si(PI,X.ownerDocument.doctype.name)&&($i="<!DOCTYPE "+X.ownerDocument.doctype.name+`>
`+$i),B&&Jh([J,Y,ae],Gs=>{$i=Pl($i,Gs," ")}),v&&ke?v.createHTML($i):$i},e.setConfig=function(){let me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};mp(me),le=!0},e.clearConfig=function(){qo=null,le=!1},e.isValidAttribute=function(me,R,X){qo||mp({});const he=ei(me),_t=ei(R);return zv(he,_t,X)},e.addHook=function(me,R){typeof R=="function"&&xl(W[me],R)},e.removeHook=function(me,R){if(R!==void 0){const X=XU(W[me],R);return X===-1?void 0:QU(W[me],X,1)[0]}return Ry(W[me])},e.removeHooks=function(me){W[me]=[]},e.removeAllHooks=function(){W=Ny()},e}var fG=kI();class My{constructor(e,t,i,s){this.name=e,this.isOptional=t,this.isStar=i,this.pattern=s}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class gG{constructor(e,t,i){this.path=e,this.caseSensitive=t,this.handler=i}}class mG{get residualEndpoint(){return this._residualEndpoint}set residualEndpoint(e){if(this._residualEndpoint!==null)throw new Error("Residual endpoint is already set");this._residualEndpoint=e}constructor(e,t){this.route=e,this.params=t,this._residualEndpoint=null}equalsOrResidual(e){return e!=null&&this===e||this._residualEndpoint===e}}class _G{constructor(e,t){this.endpoint=e;const i=Object.create(null);for(const s in t){const r=t[s];i[s]=r!=null?decodeURIComponent(r):r}this.params=Object.freeze(i)}}class rv{constructor(e,t,i,s){var r;this.chars=e,this.states=t,this.skippedStates=i,this.result=s,this.params=null,this.isConstrained=!1,this.satisfiesConstraints=null,this.head=t[t.length-1],this.endpoint=(r=this.head)==null?void 0:r.endpoint}advance(e){const{chars:t,states:i,skippedStates:s,result:r}=this;let o=null,a=0;const l=i[i.length-1];function c(h,d){if(h.isMatch(e)&&(++a===1?o=h:r.add(new rv(t.concat(e),i.concat(h),d===null?s:s.concat(d),r))),l.segment===null&&h.isOptional&&h.nextStates!==null){if(h.nextStates.length>1)throw wu(`${h.nextStates.length} nextStates`);const u=h.nextStates[0];if(!u.isSeparator)throw wu("Not a separator");if(u.nextStates!==null)for(const p of u.nextStates)c(p,h)}}if(l.isDynamic&&c(l,null),l.nextStates!==null)for(const h of l.nextStates)c(h,null);o!==null&&(i.push(this.head=o),t.push(e),this.isConstrained=this.isConstrained||o.isDynamic&&o.segment.isConstrained,o.endpoint!==null&&(this.endpoint=o.endpoint)),a===0&&r.remove(this)}_finalize(){function e(t,i){const s=i.nextStates;if(s!==null){if(s.length===1&&s[0].segment===null)e(t,s[0]);else for(const r of s)if(r.isOptional&&r.endpoint!==null){if(t.push(r),r.nextStates!==null)for(const o of r.nextStates)e(t,o);break}}}return e(this.skippedStates,this.head),this.isConstrained?(this._getParams(),this.satisfiesConstraints):!0}_getParams(){var r;let e=this.params;if(e!=null)return e;const{states:t,chars:i,endpoint:s}=this;e={},this.satisfiesConstraints=!0;for(const o of s.params)e[o.name]=void 0;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(l.isDynamic){const c=l.segment,h=c.name;if(e[h]===void 0?e[h]=i[o]:e[h]+=i[o],!(l.isConstrained&&!Object.is((r=t[o+1])==null?void 0:r.segment,c)))continue;this.satisfiesConstraints=this.satisfiesConstraints&&l.satisfiesConstraint(e[h])}}return this.satisfiesConstraints&&(this.params=e),e}compareTo(e){const t=this.states,i=e.states;for(let l=0,c=0,h=Math.max(t.length,i.length);l<h;++l){let d=t[l];if(d===void 0)return 1;let u=i[c];if(u===void 0)return-1;let p=d.segment,f=u.segment;if(p===null){if(f===null){++c;continue}if((d=t[++l])===void 0)return 1;p=d.segment}else if(f===null){if((u=i[++c])===void 0)return-1;f=u.segment}if(p.kind<f.kind)return 1;if(p.kind>f.kind)return-1;++c}const s=this.skippedStates,r=e.skippedStates,o=s.length,a=r.length;if(o<a)return 1;if(o>a)return-1;for(let l=0;l<o;++l){const c=s[l],h=r[l];if(c.length<h.length)return 1;if(c.length>h.length)return-1}return 0}}function vG(n){return n.head.endpoint!==null}function bG(n,e){return n.compareTo(e)}class wG{get isEmpty(){return this.candidates.length===0}constructor(e){this.candidates=[],this.candidates=[new rv([""],[e],[],this)]}getSolution(){const e=this.candidates.filter(t=>vG(t)&&t._finalize());return e.length===0?null:(e.sort(bG),e[0])}add(e){this.candidates.push(e)}remove(e){this.candidates.splice(this.candidates.indexOf(e),1)}advance(e){const t=this.candidates.slice();for(const i of t)i.advance(e)}}const la="$$residue",Fy=/^:(?<name>[^?\s{}]+)(?:\{\{(?<constraint>.+)\}\})?(?<optional>\?)?$/g;let CG=class{constructor(){this.rootState=new ov(null,null,""),this.cache=new Map,this.endpointLookup=new Map}add(e,t=!1){var r,o;let i,s;if(e instanceof Array)for(const a of e)s=this.$add(a,!1),i=s.params,!(!t||(((r=i[i.length-1])==null?void 0:r.isStar)??!1))&&(s.residualEndpoint=this.$add({...a,path:`${a.path}/*${la}`},!0));else s=this.$add(e,!1),i=s.params,t&&!(((o=i[i.length-1])==null?void 0:o.isStar)??!1)&&(s.residualEndpoint=this.$add({...e,path:`${e.path}/*${la}`},!0));this.cache.clear()}$add(e,t){var h;const i=e.path,s=this.endpointLookup;if(s.has(i))throw wu(`Cannot add duplicate path '${i}'.`);const r=new gG(i,e.caseSensitive===!0,e.handler),o=i===""?[""]:i.split("/").filter(yG),a=[];let l=this.rootState;for(const d of o)switch(l=l.append(null,"/"),d.charAt(0)){case":":{Fy.lastIndex=0;const u=Fy.exec(d),{name:p,optional:f}=(u==null?void 0:u.groups)??{},g=f==="?";if(p===la)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${la}' is used.`);const m=(h=u==null?void 0:u.groups)==null?void 0:h.constraint,_=m!=null?new RegExp(m):null;a.push(new My(p,g,!1,_)),l=new EG(p,g,_).appendTo(l);break}case"*":{const u=d.slice(1);let p;if(u===la){if(!t)throw new Error(`Invalid parameter name; usage of the reserved parameter name '${la}' is used.`);p=1}else p=2;a.push(new My(u,!0,!0,null)),l=new TG(u,p).appendTo(l);break}default:{l=new SG(d,r.caseSensitive).appendTo(l);break}}const c=new mG(r,a);return l.setEndpoint(c),s.set(i,c),c}recognize(e){let t=this.cache.get(e);return t===void 0&&this.cache.set(e,t=this.$recognize(e)),t}$recognize(e){e=decodeURI(e),e.startsWith("/")||(e=`/${e}`),e.length>1&&e.endsWith("/")&&(e=e.slice(0,-1));const t=new wG(this.rootState);for(let o=0,a=e.length;o<a;++o){const l=e.charAt(o);if(t.advance(l),t.isEmpty)return null}const i=t.getSolution();if(i===null)return null;const{endpoint:s}=i,r=i._getParams();return new _G(s,r)}getEndpoint(e){return this.endpointLookup.get(e)??null}};class ov{constructor(e,t,i){switch(this.prevState=e,this.segment=t,this.value=i,this.nextStates=null,this.endpoint=null,this.isConstrained=!1,t==null?void 0:t.kind){case 3:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=t.optional,this.isConstrained=t.isConstrained;break;case 2:case 1:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 4:this.length=e.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=e===null?0:e.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1;break}}append(e,t){let i,s=this.nextStates;return s===null?(i=void 0,s=this.nextStates=[]):e===null?i=s.find(r=>r.value===t):i=s.find(r=>{var o;return(o=r.segment)==null?void 0:o.equals(e)}),i===void 0&&s.push(i=new ov(this,e,t)),i}setEndpoint(e){if(this.endpoint!==null)throw wu(`Cannot add ambiguous route. The pattern '${e.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=e,this.isOptional&&(this.prevState.setEndpoint(e),this.prevState.isSeparator&&this.prevState.prevState!==null&&this.prevState.prevState.setEndpoint(e))}isMatch(e){const t=this.segment;switch(t==null?void 0:t.kind){case 3:return!this.value.includes(e);case 2:case 1:return!0;case 4:case void 0:return this.value.includes(e)}}satisfiesConstraint(e){return this.isConstrained?this.segment.satisfiesPattern(e):!0}}function yG(n){return n.length>0}class SG{get kind(){return 4}constructor(e,t){this.value=e,this.caseSensitive=t}appendTo(e){const{value:t,value:{length:i}}=this;if(this.caseSensitive)for(let s=0;s<i;++s)e=e.append(this,t.charAt(s));else for(let s=0;s<i;++s){const r=t.charAt(s);e=e.append(this,r.toUpperCase()+r.toLowerCase())}return e}equals(e){return e.kind===4&&e.caseSensitive===this.caseSensitive&&e.value===this.value}}class EG{get kind(){return 3}constructor(e,t,i){if(this.name=e,this.optional=t,this.pattern=i,i===void 0)throw new Error("Pattern is undefined");this.isConstrained=i!==null}appendTo(e){return e=e.append(this,"/"),e}equals(e){return e.kind===3&&e.optional===this.optional&&e.name===this.name}satisfiesPattern(e){return this.pattern===null?!0:(this.pattern.lastIndex=0,this.pattern.test(e))}}class TG{constructor(e,t){this.name=e,this.kind=t}appendTo(e){return e=e.append(this,""),e}equals(e){return(e.kind===2||e.kind===1)&&e.name===this.name}}const wu=n=>new Error(n);let av=class{constructor(e,t,i,s={}){this.router=e,this.name=t,this.connectedCE=i,this.options=s,this.contents=[],this.transitionAction="",this.path=null}getContent(){return this.contents[0]}getNextContent(){return this.contents.length>1?this.contents[this.contents.length-1]:null}getTimeContent(e=1/0){return this.getContent()}getNavigationContent(e){return e instanceof Hc&&(e=e.navigation),e instanceof fi?this.contents.find(t=>t.navigation===e)??null:null}get activeContent(){return this.getNextContent()??this.getContent()}get connectedScope(){var e;return(e=this.activeContent)==null?void 0:e.connectedScope}get scope(){return this.connectedScope.scope}get owningScope(){return this.connectedScope.owningScope}get connectedController(){var e;return((e=this.connectedCE)==null?void 0:e.$controller)??null}get isViewport(){return this instanceof sn}get isViewportScope(){return this instanceof Gn}get isEmpty(){return!1}get pathname(){return this.connectedScope.pathname}toString(){throw new Error("Method 'toString' needs to be implemented in all endpoints!")}setNextContent(e,t){throw new Error("Method 'setNextContent' needs to be implemented in all endpoints!")}setConnectedCE(e,t){throw new Error("Method 'setConnectedCE' needs to be implemented in all endpoints!")}transition(e){throw new Error("Method 'transition' needs to be implemented in all endpoints!")}finalizeContentChange(e,t){throw new Error("Method 'finalizeContentChange' needs to be implemented in all endpoints!")}cancelContentChange(e,t=null){throw new Error("Method 'cancelContentChange' needs to be implemented in all endpoints!")}getRoutes(){throw new Error("Method 'getRoutes' needs to be implemented in all endpoints!")}getTitle(e){throw new Error("Method 'getTitle' needs to be implemented in all endpoints!")}removeEndpoint(e,t){return this.contents.forEach(i=>i.delete()),!0}canUnload(e,t){return!0}canLoad(e,t){return!0}unload(e,t){}load(e,t){}};class DI{constructor(e,t,i,s,r=ce.create(""),o=fi.create({instruction:"",fullStateInstruction:""})){var a;this.router=e,this.endpoint=t,this.instruction=r,this.navigation=o,this.completed=!1,this.connectedScope=new Nr(e,s,i,this),this.router.rootScope!==null&&(((a=this.endpoint.connectedScope)==null?void 0:a.parent)??this.router.rootScope.scope).addChild(this.connectedScope)}get isActive(){return this.endpoint.activeContent===this}delete(){var e;(e=this.connectedScope.parent)==null||e.removeChild(this.connectedScope)}}class Un{constructor(e=null,t="",i=[],s="",r={}){this.match=e,this.matching=t,this.instructions=i,this.remaining=s,this.params=r}get foundConfiguration(){return this.match!==null}get foundInstructions(){return this.instructions.some(e=>!e.component.none)}get hasRemaining(){return this.instructions.some(e=>e.hasNextScopeInstructions)}}class xs{static parse(e,t,i,s){if(!t)return{instructions:[],remaining:""};if(t.startsWith(e.sibling)&&!xs.isAdd(e,t))throw new Error(`Instruction parser error: Unnecessary siblings separator ${e.sibling} in beginning of instruction part "${t}".`);const r=[];let o=1e3;for(;t.length&&o;)if(o--,t.startsWith(e.scope)){if(r.length===0)throw new Error(`Instruction parser error: Children without parent in instruction part "(${t}" is not allowed.`);s=!1,t=t.slice(e.scope.length);const a=t.startsWith(e.groupStart);a&&(t=t.slice(e.groupStart.length),i=!0);const{instructions:l,remaining:c}=xs.parse(e,t,a,!1);r[r.length-1].nextScopeInstructions=l,t=c}else if(t.startsWith(e.groupStart)){t=t.slice(e.groupStart.length);const{instructions:a,remaining:l}=xs.parse(e,t,!0,s);r.push(...a),t=l}else if(t.startsWith(e.groupEnd)){i&&(t=t.slice(e.groupEnd.length));let a=0;const l=t.length;for(;a<l;a++){if(t.slice(a,a+e.sibling.length)===e.sibling)return{instructions:r,remaining:t};if(t.slice(a,a+e.groupEnd.length)!==e.groupEnd){if(r.length>1)throw new Error(`Instruction parser error: Children below scope ${e.groupStart}${e.groupEnd} in instruction part "(${t}" is not allowed.`);t=t.slice(a);break}}if(a>=l)return{instructions:r,remaining:t}}else if(t.startsWith(e.sibling)&&!xs.isAdd(e,t)){if(!i)return{instructions:r,remaining:t};t=t.slice(e.sibling.length)}else{const{instruction:a,remaining:l}=xs.parseOne(e,t);r.push(a),t=l}return{instructions:r,remaining:t}}static isAdd(e,t){return t===e.add||t.startsWith(`${e.add}${e.viewport}`)}static parseOne(e,t){const i=[e.parameters,e.viewport,e.noScope,e.groupEnd,e.scope,e.sibling];let s,r,o,a=!0,l,c;const h=t,d=[e.add,e.clear];for(const p of d)if(t===p){s=t,t="",i.shift(),i.shift(),l=e.viewport;break}if(s===void 0){for(const p of d)if(t.startsWith(`${p}${e.viewport}`)){s=p,t=t.slice(`${p}${e.viewport}`.length),i.shift(),i.shift(),l=e.viewport;break}}if(s===void 0&&({token:l,pos:c}=xs.findNextToken(t,i),s=c!==-1?t.slice(0,c):t,t=c!==-1?t.slice(c+l.length):"",i.shift(),l===e.parameters&&({token:l,pos:c}=xs.findNextToken(t,[e.parametersEnd]),r=t.slice(0,c),t=t.slice(c+l.length),{token:l}=xs.findNextToken(t,i),t=t.slice(l.length)),i.shift()),l===e.viewport&&({token:l,pos:c}=xs.findNextToken(t,i),o=c!==-1?t.slice(0,c):t,t=c!==-1?t.slice(c+l.length):""),i.shift(),l===e.noScope&&(a=!1),(l===e.groupEnd||l===e.scope||l===e.sibling)&&(t=`${l}${t}`),(s??"")==="")throw new Error(`Instruction parser error: No component specified in instruction part "${t}".`);const u=ce.create(s,o,r,a);return u.unparsed=h,{instruction:u,remaining:t}}static findNextToken(e,t){const i={};for(const r of t)e.indexOf(r)>-1&&(i[r]=e.indexOf(r));const s=Math.min(...Object.values(i));for(const r in i)if(i[r]===s)return{token:r,pos:s};return{token:"",pos:-1}}}class Cu{constructor(e="${componentTitles}${appTitleSeparator}Aurelia",t=" | ",i="top-down",s=" > ",r=!0,o="app-",a){this.appTitle=e,this.appTitleSeparator=t,this.componentTitleOrder=i,this.componentTitleSeparator=s,this.useComponentNames=r,this.componentPrefix=o,this.transformTitle=a}static create(e={}){return e=typeof e=="string"?{appTitle:e}:e,new Cu(e.appTitle,e.appTitleSeparator,e.componentTitleOrder,e.componentTitleSeparator,e.useComponentNames,e.componentPrefix,e.transformTitle)}static for(e){return tn.for(e).title}apply(e={}){e=typeof e=="string"?{appTitle:e}:e,this.appTitle=e.appTitle??this.appTitle,this.appTitleSeparator=e.appTitleSeparator??this.appTitleSeparator,this.componentTitleOrder=e.componentTitleOrder??this.componentTitleOrder,this.componentTitleSeparator=e.componentTitleSeparator??this.componentTitleSeparator,this.useComponentNames=e.useComponentNames??this.useComponentNames,this.componentPrefix=e.componentPrefix??this.componentPrefix,this.transformTitle="transformTitle"in e?e.transformTitle:this.transformTitle}}class pi{constructor(e="@",t="+",i="/",s="(",r=")",o="!",a="(",l=")",c=",",h="=",d="+",u="-",p="."){this.viewport=e,this.sibling=t,this.scope=i,this.groupStart=s,this.groupEnd=r,this.noScope=o,this.parameters=a,this.parametersEnd=l,this.parameterSeparator=c,this.parameterKeySeparator=h,this.add=d,this.clear=u,this.action=p}static create(e={}){return new pi(e.viewport,e.sibling,e.scope,e.groupStart,e.groupEnd,e.noScope,e.parameters,e.parametersEnd,e.parameterSeparator,e.parameterKeySeparator,e.add,e.clear,e.action)}static for(e){return tn.for(e).separators}apply(e={}){this.viewport=e.viewport??this.viewport,this.sibling=e.sibling??this.sibling,this.scope=e.scope??this.scope,this.groupStart=e.groupStart??this.groupStart,this.groupEnd=e.groupEnd??this.groupEnd,this.noScope=e.noScope??this.noScope,this.parameters=e.parameters??this.parameters,this.parametersEnd=e.parametersEnd??this.parametersEnd,this.parameterSeparator=e.parameterSeparator??this.parameterSeparator,this.parameterKeySeparator=e.parameterKeySeparator??this.parameterKeySeparator,this.add=e.add??this.add,this.clear=e.clear??this.clear,this.action=e.action??this.action}}class yu{constructor(e="active",t="navigating"){this.loadActive=e,this.viewportNavigating=t}static create(e={}){return new yu(e.loadActive,e.viewportNavigating)}static for(e){return tn.for(e).indicators}apply(e={}){this.loadActive=e.loadActive??this.loadActive,this.viewportNavigating=e.viewportNavigating??this.viewportNavigating}}class tn{constructor(e=pi.create(),t=yu.create(),i=!0,s=null,r=!0,o=0,a=!0,l=!0,c=!1,h=Cu.create(),d=["guardedUnload","swapped","completed"],u="attach-next-detach-current",p="",f="abort"){this.separators=e,this.indicators=t,this.useUrlFragmentHash=i,this.basePath=s,this.useHref=r,this.statefulHistoryLength=o,this.useDirectRouting=a,this.useConfiguredRoutes=l,this.completeStateNavigations=c,this.title=h,this.navigationSyncStates=d,this.swapOrder=u,this.fallback=p,this.fallbackAction=f,this.registrationHooks=[]}static create(e={}){return new tn(pi.create(e.separators),yu.create(e.indicators),e.useUrlFragmentHash,e.basePath,e.useHref,e.statefulHistoryLength,e.useDirectRouting,e.useConfiguredRoutes,e.completeStateNavigations,Cu.create(e.title),e.navigationSyncStates,e.swapOrder,e.fallback,e.fallbackAction)}static for(e){return e instanceof Ri||(e instanceof hn?e=e.configuration:e=e.get(Eu)),e.options}apply(e){e=e??{},this.separators.apply(e.separators),this.indicators.apply(e.indicators),this.useUrlFragmentHash=e.useUrlFragmentHash??this.useUrlFragmentHash,this.basePath=e.basePath??this.basePath,this.useHref=e.useHref??this.useHref,this.statefulHistoryLength=e.statefulHistoryLength??this.statefulHistoryLength,this.useDirectRouting=e.useDirectRouting??this.useDirectRouting,this.useConfiguredRoutes=e.useConfiguredRoutes??this.useConfiguredRoutes,this.completeStateNavigations=e.completeStateNavigations??this.completeStateNavigations,this.title.apply(e.title),this.navigationSyncStates=e.navigationSyncStates??this.navigationSyncStates,this.swapOrder=e.swapOrder??this.swapOrder,this.fallback=e.fallback??this.fallback,this.fallbackAction=e.fallbackAction??this.fallbackAction,Array.isArray(e.hooks)&&(this.routerConfiguration!==void 0?e.hooks.forEach(t=>this.routerConfiguration.addHook(t.hook,t.options)):this.registrationHooks=e.hooks)}setRouterConfiguration(e){this.routerConfiguration=e,this.registrationHooks.forEach(t=>this.routerConfiguration.addHook(t.hook,t.options)),this.registrationHooks.length=0}}class $a{constructor(){this.parametersString=null,this.parametersRecord=null,this.parametersList=null,this.parametersType="none"}get none(){return this.parametersType==="none"}static create(e){const t=new $a;return t.set(e),t}static parse(e,t,i=!1){if(t==null||t.length===0)return[];const s=pi.for(e),r=s.parameterSeparator,o=s.parameterKeySeparator;if(typeof t=="string"){const l=[],c=t.split(r);for(const h of c){let d,u;[d,u]=h.split(o),u===void 0?(u=i?decodeURIComponent(d):d,d=void 0):i&&(d=decodeURIComponent(d),u=decodeURIComponent(u)),l.push({key:d,value:u})}return l}if(Array.isArray(t))return t.map(l=>({key:void 0,value:l}));const a=Object.keys(t);return a.sort(),a.map(l=>({key:l,value:t[l]}))}get typedParameters(){switch(this.parametersType){case"string":return this.parametersString;case"array":return this.parametersList;case"object":return this.parametersRecord;default:return null}}static stringify(e,t,i=!1){if(!Array.isArray(t)||t.length===0)return"";const s=pi.for(e);return t.map(r=>{const o=r.key!==void 0&&i?encodeURIComponent(r.key):r.key,a=i?encodeURIComponent(r.value):r.value;return o!==void 0&&o!==a?o+s.parameterKeySeparator+a:a}).join(s.parameterSeparator)}static contains(e,t){return Object.keys(t).every(i=>t[i]===e[i])}parameters(e){return $a.parse(e,this.typedParameters)}set(e){this.parametersString=null,this.parametersList=null,this.parametersRecord=null,e==null||e===""?(this.parametersType="none",e=null):typeof e=="string"?(this.parametersType="string",this.parametersString=e):Array.isArray(e)?(this.parametersType="array",this.parametersList=e):(this.parametersType="object",this.parametersRecord=e)}get(e,t){if(t===void 0)return this.parameters(e);const i=this.parameters(e).filter(s=>s.key===t).map(s=>s.value);if(i.length!==0)return i.length===1?i[0]:i}addParameters(e){if(this.parametersType==="none")return this.set(e);if(this.parametersType!=="object")throw new Error("Can't add object parameters to existing non-object parameters!");this.set({...this.parametersRecord,...e})}toSpecifiedParameters(e,t){t=t??[];const i=this.parameters(e),s={};for(const o of t){let a=i.findIndex(l=>l.key===o);if(a>=0){const[l]=i.splice(a,1);s[o]=l.value}else if(a=i.findIndex(l=>l.key===void 0),a>=0){const[l]=i.splice(a,1);s[o]=l.value}}for(const o of i.filter(a=>a.key!==void 0))s[o.key]=o.value;let r=t.length;for(const o of i.filter(a=>a.key===void 0))s[r++]=o.value;return s}toSortedParameters(e,t){t=t||[];const i=this.parameters(e),s=[];for(const o of t){let a=i.findIndex(l=>l.key===o);if(a>=0){const l={...i.splice(a,1)[0]};l.key=void 0,s.push(l)}else if(a=i.findIndex(l=>l.key===void 0),a>=0){const l={...i.splice(a,1)[0]};s.push(l)}else s.push({value:void 0})}const r=i.filter(o=>o.key!==void 0);return r.sort((o,a)=>(o.key||"")<(a.key||"")?1:(a.key||"")<(o.key||"")?-1:0),s.push(...r),s.push(...i.filter(o=>o.key===void 0)),s}same(e,t,i){const s=i!==null?i.parameters:[],r=this.toSpecifiedParameters(e,s),o=t.toSpecifiedParameters(e,s);return Object.keys(r).every(a=>r[a]===o[a])&&Object.keys(o).every(a=>o[a]===r[a])}}class Je{constructor(){this.name=null,this.type=null,this.instance=null,this.promise=null,this.func=null}static create(e){const t=new Je;return t.set(e),t}static isName(e){return typeof e=="string"}static isDefinition(e){return Qe.isType(e.Type)}static isType(e){return Qe.isType(e)}static isInstance(e){return SL(e)}static isAppelation(e){return Je.isName(e)||Je.isType(e)||Je.isInstance(e)}static getName(e){return Je.isName(e)?e:Je.isType(e)?Qe.getDefinition(e).name:Je.getName(e.constructor)}static getType(e){return Je.isName(e)?null:Je.isType(e)?e:e.constructor}static getInstance(e){return Je.isName(e)||Je.isType(e)?null:e}set(e){let t=null,i=null,s=null,r=null,o=null;e instanceof Promise?r=e:Je.isName(e)?t=Je.getName(e):Je.isType(e)?(t=this.getNewName(e),i=Je.getType(e)):Je.isInstance(e)?(t=this.getNewName(Je.getType(e)),i=Je.getType(e),s=Je.getInstance(e)):typeof e=="function"&&(o=e),this.name=t,this.type=i,this.instance=s,this.promise=r,this.func=o}resolve(e){if(this.func!==null&&this.set(this.func(e)),this.promise instanceof Promise)return this.promise.then(t=>{if(Je.isAppelation(t)){this.set(t);return}if(t.default!=null){this.set(t.default);return}const i=Object.keys(t).filter(r=>!r.startsWith("__"));if(i.length===0)throw new Error("Failed to load component Type from resolved Promise since no export was specified.");if(i.length>1)throw new Error("Failed to load component Type from resolved Promise since no 'default' export was specified when having multiple exports.");const s=i[0];this.set(t[s])})}get none(){return!this.isName()&&!this.isType()&&!this.isInstance()&&!this.isFunction()&&!this.isPromise()}isName(){return this.name!=null&&this.name!==""&&!this.isType()&&!this.isInstance()}isType(){return this.type!==null&&!this.isInstance()}isInstance(){return this.instance!==null}isPromise(){return this.promise!==null}isFunction(){return this.func!==null}toType(e,t){if(this.resolve(t),this.type!==null)return this.type;if(this.name!==null&&typeof this.name=="string"){if(e===null)throw new Error(`No container available when trying to resolve component '${this.name}'!`);if(e.has(Qe.keyFrom(this.name),!0)){const i=e.getResolver(Qe.keyFrom(this.name));if(i!==null&&i.getFactory!==void 0){const s=i.getFactory(e);if(s)return s.Type}}}return null}toInstance(e,t,i,s){return Ee(this.resolve(s),()=>this.instance!==null?this.instance:e==null?null:this._createInstance(e,t,i,s))}same(e,t=!1){return t?this.type===e.type:this.name===e.name}getNewName(e){return this.name===null?Je.getName(e):this.name}_createInstance(e,t,i,s){const r=e.createChild(),o=this.isType()?this.type:r.getResolver(Qe.keyFrom(this.name)).getFactory(r).Type,a=r.invoke(o);if(a==null)throw console.warn("Failed to create instance when trying to resolve component",this.name,this.type,"=>",a),new Error(`Failed to create instance when trying to resolve component '${this.name}'!`);const l=Pi.$el(r,a,i,null);return l.parent=t,a}}function Xt(n,e){const t=[];let i=n.findIndex(e);for(;i>=0;)t.push(n.splice(i,1)[0]),i=n.findIndex(e);return t}function AG(n,e){Array.isArray(e)||(e=[e]);for(const t of e)n.includes(t)||n.push(t);return n}function $c(n,e=!1){return n.filter((t,i,s)=>(e||t!=null)&&s.indexOf(t)===i)}class Zt{constructor(e=""){this.description=e,this.isPending=!0,this.promise=new Promise((t,i)=>{this._resolve=t,this._reject=i,Zt.promises.push(this)})}resolve(e){this._resolve(e),this.isPending=!1,Zt.promises=Zt.promises.filter(t=>t!==this)}reject(e){this._reject(e),this.isPending=!1,Zt.promises=Zt.promises.filter(t=>t!==this)}}Zt.promises=[];class Ce{constructor(){this.isDone=!1,this.isCancelled=!1,this.isResolved=!1,this.isRejected=!1,this.isAsync=!1}static run(e,...t){if(t.length===0)return;let i=!1;(e===null||typeof e=="string")&&(e=new Xs(e),i=!0);const s=new Xs(t.shift());return Ce.connect(e,s,((e==null?void 0:e.runParallel)??!1)||i),t.length>0&&Ce.add(s,!1,...t),i?(Ce.process(e),e.result instanceof Promise&&this.runners.set(e.result,e),e.result):s}static runParallel(e,...t){if(((t==null?void 0:t.length)??0)===0)return[];let i=!1;return e===null?(e=new Xs,i=!0):e=Ce.connect(e,new Xs,!0),Ce.add(e,!0,...t),i&&Ce.process(e),e.result instanceof Promise&&this.runners.set(e.result,e),i?e.result??[]:e}static step(e){if(e instanceof Promise)return Ce.runners.get(e)}static cancel(e){const t=Ce.step(e);t!==void 0&&t.cancel()}static add(e,t,...i){let s=new Xs(i.shift(),t);e!==null&&(s=Ce.connect(e,s,t));const r=s;for(;i.length>0;)s=Ce.connect(s,new Xs(i.shift(),t),!1);return r}static connect(e,t,i){if(i){const s=e.child;e.child=t,t.parent=e,t.next=s,s!==null&&(s.parent=null,s.previous=t)}else{const s=e.next;e.next=t,t.previous=e,t.next=s,s!==null&&(s.previous=t,s.parent=null)}return t}static process(e){const t=e.root;for(;e!==null&&!e.isDoing&&!e.isDone;)if(t.current=e,e.isParallelParent){e.isDone=!0;let i=e.child;for(;i!==null;)Ce.process(i),i=i.next}else{for(e.isDoing=!0,e.value=e.step;e.value instanceof Function&&!e.isCancelled&&!e.isExited&&!e.isDone;)e.value=e.value(e);if(!e.isCancelled)if(e.value instanceof Promise){const i=e.value;Ce.ensurePromise(t),((s,r)=>{r.then(o=>{s.value=o,Ce.settlePromise(s),s.isDone=!0,s.isDoing=!1;const a=s.nextToDo();a!==null&&!s.isExited?Ce.process(a):(s.root.doneAll||s.isExited)&&Ce.settlePromise(s.root)}).catch(o=>{throw o})})(e,i)}else e.isDone=!0,e.isDoing=!1,e.isExited?e=null:e=e.nextToDo()}t.isCancelled?Ce.settlePromise(t,"reject"):(t.doneAll||t.isExited)&&Ce.settlePromise(t)}static ensurePromise(e){return e.finally===null?(e.finally=new Zt(`Runner: ${e.name}, ${e.previousValue}, ${e.value}, ${e.root.report}`),e.promise=e.finally.promise,!0):!1}static settlePromise(e,t="resolve"){var i,s,r;if(((i=e.finally)==null?void 0:i.isPending)??!1)switch(e.promise=null,t){case"resolve":(s=e.finally)==null||s.resolve(e.result);break;case"reject":(r=e.finally)==null||r.reject(e.result);break}}}Ce.runners=new WeakMap;Ce.roots={};class Xs{constructor(e=void 0,t=!1){this.step=e,this.runParallel=t,this.promise=null,this.previous=null,this.next=null,this.parent=null,this.child=null,this.current=null,this.finally=null,this.isDoing=!1,this.isDone=!1,this.isCancelled=!1,this.isExited=!1,this.exited=null,this.id="-1",this.id=`${Xs.id++}`,typeof e=="string"&&(this.id+=` ${e}`)}get isParallelParent(){var e;return((e=this.child)==null?void 0:e.runParallel)??!1}get result(){var t,i;if(this.promise!==null)return this.promise;if(this.child!==null)if(this.isParallelParent){const s=[];let r=this.child;for(;r!==null;)s.push(r.result),r=r.next;return s}else return this===this.root&&this.exited!==null?this.exited.result:(i=(t=this.child)==null?void 0:t.tail)==null?void 0:i.result;let e=this.value;for(;e instanceof Xs;)e=e.result;return e}get asValue(){return this.result}get previousValue(){var e,t,i,s;return this.runParallel?(i=(t=(e=this.head.parent)==null?void 0:e.parent)==null?void 0:t.previous)==null?void 0:i.result:(s=this.previous)==null?void 0:s.result}get name(){let e=`${this.id}`;return this.runParallel&&(e=`:${e}`),(this.value instanceof Promise||this.promise instanceof Promise)&&(e=`${e}*`),this.finally!==null&&(e=`${e}*`),this.child!==null&&(e=`${e}>`),this.isDone&&(e=`(${e})`),e}get root(){let e=this.head;for(;e.parent!==null;)e=e.parent.head;return e}get head(){let e=this;for(;e.previous!==null;)e=e.previous;return e}get tail(){let e=this;for(;e.next!==null;)e=e.next;return e}get done(){if(!this.isDone)return!1;let e=this.child;for(;e!==null;){if(!e.done)return!1;e=e.next}return!0}get doneAll(){return!(!this.isDone||this.child!==null&&!this.child.doneAll||this.next!==null&&!this.next.doneAll)}cancel(e=!0){var t,i;return e?this.root.cancel(!1):this.isCancelled?!1:(this.isCancelled=!0,(t=this.child)==null||t.cancel(!1),(i=this.next)==null||i.cancel(!1),!0)}exit(e=!0){var t,i;return e?(this.root.exited=this,this.root.exit(!1)):this.isExited?!1:(this.isExited=!0,(t=this.child)==null||t.exit(!1),(i=this.next)==null||i.exit(!1),!0)}nextToDo(){return this.child!==null&&!this.child.isDoing&&!this.child.isDone?this.child:this.runParallel&&!this.head.parent.done?null:this.nextOrUp()}nextOrUp(){let e=this.next;for(;e!==null;){if(!e.isDoing&&!e.isDone)return e;e=e.next}const t=this.head.parent??null;return t===null||!t.done?null:t.nextOrUp()}get path(){var e;return`${((e=this.head.parent)==null?void 0:e.path)??""}/${this.name}`}get tree(){let e="",t=this.head,i=t.parent,s="";for(;i!==null;)s=`${i.path}${s}`,i=i.head.parent;do{if(e+=`${s}/${t.name}
`,t===this)break;t=t.next}while(t!==null);return e}get report(){var t,i;let e=`${this.path}
`;return e+=((t=this.child)==null?void 0:t.report)??"",e+=((i=this.next)==null?void 0:i.report)??"",e}}Xs.id=0;const Lt=(n,...e)=>new Error(`AUR${String(n).padStart(4,"0")}: ${RG(n,...e)}`),IG={99:"Method {{0}} not implemented",2e3:"Router.start() called while the it has already been started.",2001:"Router.stop() has been called while it has not been started",2002:"Router failed to remove endpoint: {{0}}",2003:"Parameter instructions to checkActivate can not be a string ('{{0}}')!",2004:"Router failed to append routing instructions to coordinator",2005:"Router failed to find viewport when updating viewer paths.",2006:"{{0}} remaining instructions after 100 iterations; there is likely an infinite loop.",2007:"Browser navigation has already been started",2008:"Browser navigation has not been started",2009:`Failed to "{{0}}" state, probably due to unserializable data and/or parameters:
Serialization error: {{1}}
Original error: {originalError}`,2010:"Navigator has already been started",2011:"Navigator has not been started",2012:"Invalid route configuration: A component can't be specified in a component route configuration.",2013:"Invalid route configuration: The 'component' and 'instructions' properties can't be specified in a component route configuration.",2014:"Invalid route configuration: expected an object but got null/undefined.",2015:"Invalid route configuration: the 'instructions' property can't be used together with the 'component', 'viewport', 'parameters' or 'children' properties.",2016:"Invalid route configuration: either 'redirectTo' or 'instructions' need to be specified.",2017:`There was an error durating the instantiation of "{{0}}". "{{0}}" did not match any configured route or registered component name - did you forget to add the component "{{0}}" to the dependencies or to register it as a global dependency?
{{1:innerError}}`,2018:`Cannot find an element with the name "{{0}}", did you register it via "dependencies" option or <import> with convention?.
`,2019:"-- placeholder --",2020:"-- placeholder --",2021:"-- placeholder --",2022:"-- placeholder --",2023:"-- placeholder --",2024:"-- placeholder --",2025:"-- placeholder --",2026:"-- placeholder --"},RG=(n,...e)=>{var i;let t=IG[n];for(let s=0;s<e.length;++s){const r=new RegExp(`{{${s}(:.*)?}}`,"g");let o=r.exec(t);for(;o!=null;){const a=(i=o[1])==null?void 0:i.slice(1);let l=e[s];if(l!=null)switch(a){case"nodeName":l=l.nodeName.toLowerCase();break;case"name":l=l.name;break;case"typeof":l=typeof l;break;case"ctor":l=l.constructor.name;break;case"toString":l=Object.prototype.toString.call(l);break;case"join(!=)":l=l.join("!=");break;case"element":l=l==="*"?"all elements":`<${l} />`;break;case"innerError":l=`
Details:
${l}
${l instanceof Error&&l.cause!=null?`${String(l.cause)}
`:""}`;break;default:if(a!=null&&a.startsWith(".")){const c=a.slice(1).split(".");for(let h=0;h<c.length&&l!=null;++h)l=l[c[h]]}}t=t.slice(0,o.index)+String(l)+t.slice(r.lastIndex),o=r.exec(t)}}return t};class ui{constructor(e,t,i,s,r,o,a,l){this.path=e,this.id=t,this.redirectTo=i,this.instructions=s,this.caseSensitive=r,this.title=o,this.reloadBehavior=a,this.data=l}static configure(e,t){const i=ui.create(e,t);return Gi.define(i,t,ui.resourceKey),t}static getConfiguration(e){const t=Gi.get(ui.resourceKey,e)??{};return Array.isArray(e.parameters)&&(t.parameters=e.parameters),"title"in e&&(t.title=e.title),t instanceof ui?t:ui.create(t,e)}static create(e,t=null){t!==null&&(e=ui.transferTypeToComponent(e,t)),Qe.isType(e)?e=ui.getConfiguration(e):t===null&&(e={...e});const i=ui.transferIndividualIntoInstructions(e);ui.validateRouteConfiguration(i);let s=i.path;return Array.isArray(s)&&(s=s.join(",")),new ui(i.path??"",i.id??s??null,i.redirectTo??null,i.instructions??null,i.caseSensitive??!1,i.title??null,i.reloadBehavior??null,i.data??null)}static transferTypeToComponent(e,t){if(Qe.isType(e))throw Lt(2012);const i={...e};if("component"in i||"instructions"in i)throw Lt(2013);return"redirectTo"in i||(i.component=t),!("path"in i)&&!("redirectTo"in i)&&(i.path=Qe.getDefinition(t).name),i}static transferIndividualIntoInstructions(e){if(e==null)throw Lt(2014);if(e.component!=null||e.viewport!=null||e.parameters!=null||e.children!=null){if(e.instructions!=null)throw Lt(2015);e.instructions=[{component:e.component,viewport:e.viewport,parameters:e.parameters,children:e.children}]}return e}static validateRouteConfiguration(e){if(e.redirectTo===null&&e.instructions===null)throw Lt(2016)}}ui.resourceKey=er("route");const Cc={name:er("routes"),isConfigured(n){return Gi.has(Cc.name,n)||"routes"in n},configure(n,e){const t=n.map(i=>ui.create(i));return Gi.define(t,e,Cc.name),e},getConfiguration(n){const e=n,t=[],i=Gi.get(Cc.name,n);return Array.isArray(i)&&t.push(...i),Array.isArray(e.routes)&&t.push(...e.routes),t.map(s=>s instanceof ui?s:ui.create(s))}};class Bf extends DI{}class Gn extends av{constructor(e,t,i,s,r,o=null,a={catches:[],source:null}){super(e,t,i),this.rootComponentType=o,this.options=a,this.instruction=null,this.available=!0,this.sourceItem=null,this.sourceItemIndex=-1,this.remove=!1,this.add=!1,this.contents.push(new Bf(e,this,s,r)),this.catches.length>0&&(this.instruction=ce.create(this.catches[0],this.name))}get isEmpty(){return this.instruction===null}get passThroughScope(){return this.rootComponentType===null&&this.catches.length===0}get siblings(){const e=this.connectedScope.parent;return e===null?[this]:e.enabledChildren.filter(t=>t.isViewportScope&&t.endpoint.name===this.name).map(t=>t.endpoint)}get source(){return this.options.source??null}get catches(){let e=this.options.catches??[];return typeof e=="string"&&(e=e.split(",")),e}get default(){if(this.catches.length>0)return this.catches[0]}toString(){var i,s;const e=((i=this.instruction)==null?void 0:i.component.name)??"",t=((s=this.getNextContent())==null?void 0:s.instruction.component.name)??"";return`vs:${this.name}[${e}->${t}]`}setNextContent(e,t){return e.endpoint.set(this),this.remove=e.isClear(this.router)||e.isClearAll(this.router),this.add=e.isAdd(this.router)&&Array.isArray(this.source),this.add&&(e.component.name=null),this.default!==void 0&&e.component.name===null&&(e.component.name=this.default),this.contents.push(new Bf(this.router,this,this.owningScope,this.scope.hasScope,e,t)),"swap"}transition(e){Ce.run("viewport-scope.transition",t=>e.setEndpointStep(this,t.root),()=>e.addEndpointState(this,"guardedUnload"),()=>e.addEndpointState(this,"guardedLoad"),()=>e.addEndpointState(this,"guarded"),()=>e.addEndpointState(this,"loaded"),()=>e.addEndpointState(this,"unloaded"),()=>e.addEndpointState(this,"routed"),()=>e.addEndpointState(this,"swapped"),()=>e.addEndpointState(this,"completed"))}finalizeContentChange(e,t){const i=this.contents.findIndex(o=>o.navigation===e.navigation);let s=this.contents[i];if(this.remove){const o=new Bf(this.router,this,this.owningScope,this.scope.hasScope);this.contents.splice(i,1,o),s.delete(),s=o}s.completed=!0;let r=0;for(let o=0,a=i;o<a&&(this.contents[0].navigation.completed??!1);o++)r++;this.contents.splice(0,r),this.remove&&Array.isArray(this.source)&&this.removeSourceItem()}cancelContentChange(e,t=null){[...new Set(this.scope.children.map(s=>s.endpoint))].forEach(s=>s.cancelContentChange(e,t));const i=this.contents.findIndex(s=>s.navigation===e.navigation);if(!(i<0)&&(this.contents.splice(i,1),this.add)){const s=this.source.indexOf(this.sourceItem);this.source.splice(s,1),this.sourceItem=null}}acceptSegment(e){return!!(e===null&&e===void 0||e.length===0||e===ce.clear(this.router)||e===ce.add(this.router)||e===this.name||this.catches.length===0||this.catches.includes(e)||this.catches.filter(t=>t.includes("*")).length)}binding(){(this.source||[]).length>0&&this.sourceItem===null&&(this.sourceItem=this.getAvailableSourceItem())}unbinding(){this.sourceItem!==null&&this.source!==null&&Xt(this.source,e=>e===this.sourceItem),this.sourceItem=null}getAvailableSourceItem(){if(this.source===null)return null;const e=this.siblings;for(const t of this.source)if(e.every(i=>i.sourceItem!==t))return t;return null}addSourceItem(){const e={};return this.source.push(e),e}removeSourceItem(){this.sourceItemIndex=this.source.indexOf(this.sourceItem),this.sourceItemIndex>=0&&this.source.splice(this.sourceItemIndex,1)}getRoutes(){const e=[];if(this.rootComponentType!==null){const t=this.rootComponentType.constructor===this.rootComponentType.constructor.constructor?this.rootComponentType:this.rootComponentType.constructor;e.push(...Cc.getConfiguration(t)??[])}return e}}class OG{constructor(e={instruction:"",fullStateInstruction:""}){this.instruction=e.instruction,this.fullStateInstruction=e.fullStateInstruction,this.scope=e.scope,this.index=e.index,this.firstEntry=e.firstEntry,this.path=e.path,this.title=e.title,this.query=e.query,this.fragment=e.fragment,this.parameters=e.parameters,this.data=e.data}toStoredNavigation(){return{instruction:this.instruction,fullStateInstruction:this.fullStateInstruction,scope:this.scope,index:this.index,firstEntry:this.firstEntry,path:this.path,title:this.title,query:this.query,fragment:this.fragment,parameters:this.parameters,data:this.data}}}class LI{constructor(){this.first=!1,this.new=!1,this.refresh=!1,this.forward=!1,this.back=!1,this.replace=!1}}class fi extends OG{constructor(e={instruction:"",fullStateInstruction:""}){super(e),this.navigation=new LI,this.repeating=!1,this.previous=null,this.fromBrowser=!1,this.origin=null,this.replacing=!1,this.refreshing=!1,this.untracked=!1,this.process=null,this.completed=!0,this.fromBrowser=e.fromBrowser??this.fromBrowser,this.origin=e.origin??this.origin,this.replacing=e.replacing??this.replacing,this.refreshing=e.refreshing??this.refreshing,this.untracked=e.untracked??this.untracked,this.historyMovement=e.historyMovement??this.historyMovement,this.process=null,this.timestamp=Date.now()}get useFullStateInstruction(){return(this.navigation.back??!1)||(this.navigation.forward??!1)||(this.navigation.refresh??!1)}static create(e={instruction:"",fullStateInstruction:""}){return new fi(e)}}class lv{constructor(){this.map=new Map}set(e,t){const i=this.map.get(e);i instanceof Zt&&i.resolve(t),this.map.set(e,t)}delete(e){const t=this.map.get(e);t instanceof Zt&&t.reject(),this.map.delete(e)}await(e){if(!this.map.has(e)){const i=new Zt(`AwaitableMap: ${e}`);return this.map.set(e,i),i.promise}const t=this.map.get(e);return t instanceof Zt?t.promise:t}has(e){return this.map.has(e)&&!(this.map.get(e)instanceof Zt)}clone(){const e=new lv;return e.map=new Map(this.map),e}}class td extends DI{constructor(e,t,i,s,r=ce.create(""),o=fi.create({instruction:"",fullStateInstruction:""}),a=null){super(e,t,i,s,r,o),this.router=e,this.instruction=r,this.navigation=o,this.contentStates=new lv,this.fromCache=!1,this.fromHistory=!1,this.reload=!1,this.activatedResolve=null,!this.instruction.component.isType()&&(a==null?void 0:a.container)!=null&&(this.instruction.component.type=this.toComponentType(a.container))}get componentInstance(){return this.instruction.component.instance}get reloadBehavior(){var e,t;return this.instruction.route instanceof Un&&((e=this.instruction.route.match)==null?void 0:e.reloadBehavior)!==null?(t=this.instruction.route.match)==null?void 0:t.reloadBehavior:this.instruction.component.instance!==null&&"reloadBehavior"in this.instruction.component.instance&&this.instruction.component.instance.reloadBehavior!==void 0?this.instruction.component.instance.reloadBehavior:"default"}get controller(){var e;return(e=this.instruction.component.instance)==null?void 0:e.$controller}equalComponent(e){return this.instruction.sameComponent(this.router,e.instruction)}equalParameters(e){return this.instruction.sameComponent(this.router,e.instruction,!0)&&(this.navigation.query??"")===(e.navigation.query??"")}isCacheEqual(e){return this.instruction.sameComponent(this.router,e.instruction,!0)}contentController(e){return Pi.$el(e.container.createChild(),this.instruction.component.instance,e.element,null)}createComponent(e,t,i,s){if(!this.contentStates.has("created")){if(!this.fromCache&&!this.fromHistory)try{return Ee(this.toComponentInstance(t.container,t.controller,t.element),r=>{this.instruction.component.set(r),this.contentStates.set("created",void 0)})}catch(r){if(this._assertInstantiationError(r),(i??"")!==""){s==="process-children"?this.instruction.parameters.set([this.instruction.component.name]):(this.instruction.parameters.set([this.instruction.unparsed??this.instruction.component.name]),this.instruction.hasNextScopeInstructions&&(e.removeInstructions(this.instruction.nextScopeInstructions),this.instruction.nextScopeInstructions=null)),this.instruction.component.set(i);try{return Ee(this.toComponentInstance(t.container,t.controller,t.element),o=>{this.instruction.component.set(o),this.contentStates.set("created",void 0)})}catch(o){throw this._assertInstantiationError(o),Lt(2017,this.instruction.component.name,o)}}else throw Lt(2017,this.instruction.component.name)}this.contentStates.set("created",void 0)}}canLoad(){var o,a,l;if(!this.contentStates.has("created")||this.contentStates.has("checkedLoad")&&!this.reload)return!0;const e=this.instruction.component.instance;if(e==null)return!0;this.contentStates.set("checkedLoad",void 0);const t=(l=(a=(o=this.endpoint.parentViewport)==null?void 0:o.getTimeContent(this.navigation.timestamp))==null?void 0:a.instruction)==null?void 0:l.typeParameters(this.router),i=this.instruction.typeParameters(this.router),s={...this.navigation.parameters,...t,...i},r=this._getLifecycleHooks(e,"canLoad").map(c=>h=>(h==null?void 0:h.previousValue)!=null&&h.previousValue!==!0?(h.exit(),h.previousValue??!1):c(e,s,this.instruction,this.navigation));return e.canLoad!=null&&r.push(c=>((c==null?void 0:c.previousValue)??!0)===!1?!1:e.canLoad(s,this.instruction,this.navigation)),r.length===0?!0:r.length===1?r[0](null):Ce.run("canLoad",...r)}canUnload(e){if(this.contentStates.has("checkedUnload")&&!this.reload||(this.contentStates.set("checkedUnload",void 0),!this.contentStates.has("loaded")))return!0;const t=this.instruction.component.instance;e===null&&(e=fi.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this._getLifecycleHooks(t,"canUnload").map(s=>r=>((r==null?void 0:r.previousValue)??!0)===!1?!1:s(t,this.instruction,e));return t.canUnload!=null&&i.push(s=>{var r;return((s==null?void 0:s.previousValue)??!0)===!1?!1:(r=t.canUnload)==null?void 0:r.call(t,this.instruction,e)}),i.length===0?!0:i.length===1?i[0](null):Ce.run("canUnload",...i)}load(e){return Ce.run(e,()=>this.contentStates.await("checkedLoad"),()=>{var a,l,c;if(!this.contentStates.has("created")||this.contentStates.has("loaded")&&!this.reload)return;this.reload=!1,this.contentStates.set("loaded",void 0);const t=this.instruction.component.instance,i=(c=(l=(a=this.endpoint.parentViewport)==null?void 0:a.getTimeContent(this.navigation.timestamp))==null?void 0:l.instruction)==null?void 0:c.typeParameters(this.router),s=this.instruction.typeParameters(this.router),r={...this.navigation.parameters,...i,...s},o=this._getLifecycleHooks(t,"loading").map(h=>()=>h(t,r,this.instruction,this.navigation));if(o.push(...this._getLifecycleHooks(t,"load").map(h=>()=>(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),h(t,r,this.instruction,this.navigation)))),o.length!==0)return typeof t.loading=="function"&&o.push(()=>t.loading(r,this.instruction,this.navigation)),Zr(t,"load")&&(console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),o.push(()=>t.load(r,this.instruction,this.navigation))),Ce.run("load",...o);if(Zr(t,"loading"))return t.loading(r,this.instruction,this.navigation);if(Zr(t,"load"))return console.warn(`[Deprecated] Found deprecated hook name "load" in ${this.instruction.component.name}. Please use the new name "loading" instead.`),t.load(r,this.instruction,this.navigation)})}unload(e){if(!this.contentStates.has("loaded"))return;this.contentStates.delete("loaded");const t=this.instruction.component.instance;e===null&&(e=fi.create({instruction:"",fullStateInstruction:"",previous:this.navigation}));const i=this._getLifecycleHooks(t,"unloading").map(s=>()=>s(t,this.instruction,e));if(i.push(...this._getLifecycleHooks(t,"unload").map(s=>()=>(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),s(t,this.instruction,e)))),i.length!==0)return Zr(t,"unloading")&&i.push(()=>t.unloading(this.instruction,e)),Zr(t,"unload")&&(console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),i.push(()=>t.unload(this.instruction,e))),Ce.run("unload",...i);if(Zr(t,"unloading"))return t.unloading(this.instruction,e);if(Zr(t,"unload"))return console.warn(`[Deprecated] Found deprecated hook name "unload" in ${this.instruction.component.name}. Please use the new name "unloading" instead.`),t.unload(this.instruction,e)}activateComponent(e,t,i,s,r,o){return Ce.run(e,()=>this.contentStates.await("loaded"),()=>this.waitForParent(i),()=>{var a;if(!(this.contentStates.has("activating")||this.contentStates.has("activated")))return this.contentStates.set("activating",void 0),(a=this.controller)==null?void 0:a.activate(t??this.controller,i,void 0)},()=>{this.contentStates.set("activated",void 0)})}deactivateComponent(e,t,i,s,r=!1){if(!(!this.contentStates.has("activated")&&!this.contentStates.has("activating")))return Ce.run(e,()=>{var o;if(r&&s.element!==null){const a=Array.from(s.element.getElementsByTagName("*"));for(const l of a)(l.scrollTop>0||l.scrollLeft)&&l.setAttribute("au-element-scroll",`${l.scrollTop},${l.scrollLeft}`)}return this.contentStates.delete("activated"),this.contentStates.delete("activating"),(o=this.controller)==null?void 0:o.deactivate(t??this.controller,i)})}disposeComponent(e,t,i=!1){var s;if(!(!this.contentStates.has("created")||this.instruction.component.instance==null))if(i)t.push(this);else return this.contentStates.delete("created"),(s=this.controller)==null?void 0:s.dispose()}freeContent(e,t,i,s,r=!1){return Ce.run(e,()=>this.unload(i),o=>this.deactivateComponent(o,null,t.controller,t,r),()=>this.disposeComponent(t,s,r))}toComponentName(){return this.instruction.component.name}toComponentType(e){return this.instruction.component.none?null:this.instruction.component.toType(e,this.instruction)}toComponentInstance(e,t,i){return this.instruction.component.none?null:this.instruction.component.toInstance(e,t,i,this.instruction)}waitForParent(e){if(e!==null&&!e.isActive)return new Promise(t=>{this.endpoint.activeResolve=t})}_assertInstantiationError(e){if(!e.message.startsWith("AUR0009:"))throw e;{const t=this.instruction.component.name;console.warn(Lt(2017,t,e))}}_getLifecycleHooks(e,t){return(e.$controller.lifecycleHooks[t]??[]).map(s=>s.instance[t].bind(s.instance))}}function Zr(n,e){return typeof n[e]=="function"}class Su{constructor(e=!0,t=[],i="",s="",r="",o=!1,a=!1,l=!1,c=!1,h=!1){this.scope=e,this.usedBy=t,this.fallback=s,this.fallbackAction=r,this.noLink=o,this.noTitle=a,this.stateful=l,this.forceDescription=c,this.noHistory=h,this.default=void 0,this.default=i}static create(e){const t=new Su;return e!==void 0&&t.apply(e),t}apply(e){this.scope=e.scope??this.scope,this.usedBy=(typeof e.usedBy=="string"?e.usedBy.split(",").filter(t=>t.length>0):e.usedBy)??this.usedBy,this.default=e.default??this.default,this.fallback=e.fallback??this.fallback,this.fallbackAction=e.fallbackAction??this.fallbackAction,this.noLink=e.noLink??this.noLink,this.noTitle=e.noTitle??this.noTitle,this.stateful=e.stateful??this.stateful,this.forceDescription=e.forceDescription??this.forceDescription,this.noHistory=e.noHistory??this.noHistory}}class sn extends av{constructor(e,t,i,s,r,o){super(e,t,i),this.contents=[],this.forceRemove=!1,this.options=new Su,this.activeResolve=null,this.connectionResolve=null,this.clear=!1,this.coordinators=[],this.previousViewportState=null,this.cache=[],this.historyCache=[],this.contents.push(new td(e,this,s,r)),this.contents[0].completed=!0,o!==void 0&&this.options.apply(o)}getContent(){if(this.contents.length===1)return this.contents[0];let e;for(let t=0,i=this.contents.length;t<i&&(this.contents[t].completed??!1);t++)e=this.contents[t];return e}getNextContent(){if(this.contents.length===1)return null;const e=this.contents.indexOf(this.getContent());return this.contents.length>e?this.contents[e+1]:null}getTimeContent(e){let t=null;for(let i=0,s=this.contents.length;i<s&&!(this.contents[i].navigation.timestamp>e);i++)t=this.contents[i];return t}getNavigationContent(e){return super.getNavigationContent(e)}get parentViewport(){let e=this.connectedScope;for(;(e==null?void 0:e.parent)!=null;)if(e=e.parent,e.endpoint.isViewport)return e.endpoint;return null}get isEmpty(){return this.getContent().componentInstance===null}get doForceRemove(){let e=this.connectedScope;for(;e!==null;){if(e.isViewport&&e.endpoint.forceRemove)return!0;e=e.parent}return!1}isActiveNavigation(e){return this.coordinators[this.coordinators.length-1]===e}toString(){var i,s;const e=((i=this.getContent())==null?void 0:i.instruction.component.name)??"",t=((s=this.getNextContent())==null?void 0:s.instruction.component.name)??"";return`v:${this.name}[${e}->${t}]`}setNextContent(e,t){e.endpoint.set(this),this.clear=e.isClear(this.router);const i=this.getContent(),s=new td(this.router,this,this.owningScope,this.scope.hasScope,this.clear?void 0:e,t,this.connectedCE??null);if(this.contents.push(s),s.fromHistory=s.componentInstance!==null&&t.navigation!=null?!!t.navigation.back||!!t.navigation.forward:!1,this.options.stateful){const r=this.cache.find(o=>s.isCacheEqual(o));r!==void 0?(this.contents.splice(this.contents.indexOf(s),1,r),s.fromCache=!0):this.cache.push(s)}return s.componentInstance!==null&&i.componentInstance===s.componentInstance?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):!i.equalComponent(s)||t.navigation.refresh||i.reloadBehavior==="refresh"?this.transitionAction="swap":i.reloadBehavior==="disallow"?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):i.reloadBehavior==="reload"?(i.reload=!0,s.instruction.component.set(i.componentInstance),s.contentStates=i.contentStates.clone(),s.reload=i.reload,this.transitionAction="reload"):this.options.stateful&&i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):i.equalParameters(s)?(s.delete(),this.contents.splice(this.contents.indexOf(s),1),this.transitionAction="skip"):this.transitionAction="swap"}setConnectedCE(e,t){var s,r,o,a;t=t??{},this.connectedCE!==e&&(this.previousViewportState={...this},this.clearState(),this.connectedCE=e,this.options.apply(t),(s=this.connectionResolve)==null||s.call(this));const i=(((r=this.scope.parent)==null?void 0:r.endpoint.getRoutes())??[]).filter(l=>(Array.isArray(l.path)?l.path:[l.path]).includes("")).length>0;if(this.getContent().componentInstance===null&&((o=this.getNextContent())==null?void 0:o.componentInstance)==null&&(this.options.default||i)){const l=ce.parse(this.router,this.options.default??"");if(l.length===0&&i){const c=(a=this.scope.parent)==null?void 0:a.findInstructions([ce.create("")],!1,this.router.configuration.options.useConfiguredRoutes);c!=null&&c.foundConfiguration&&l.push(...c.instructions)}for(const c of l)c.endpoint.set(this),c.scope=this.owningScope,c.default=!0;this.router.load(l,{append:!0}).catch(c=>{throw c})}}remove(e,t){return this.connectedCE===t?Ce.run(e,i=>{var s;if(this.getContent().componentInstance!==null)return this.getContent().freeContent(i,this.connectedCE,((s=this.getNextContent())==null?void 0:s.navigation)??null,this.historyCache,this.doForceRemove?!1:this.router.statefulHistory||this.options.stateful)},i=>{if(this.doForceRemove){const s=[];for(const r of this.historyCache)s.push(o=>r.freeContent(o,null,null,this.historyCache,!1));return s.push(()=>{this.historyCache=[]}),Ce.run(i,...s)}return!0}):!1}async transition(e){var c,h,d,u;const t=this.router.configuration.options.indicators.viewportNavigating;for(this.coordinators.push(e);this.coordinators[0]!==e;)await this.coordinators[0].waitForSyncState("completed");let i=this.parentViewport;i!==null&&i.transitionAction!=="reload"&&i.transitionAction!=="swap"&&(i=null);const s=[p=>{if(this.isActiveNavigation(e))return this.canUnload(e,p)},p=>{this.isActiveNavigation(e)&&(p.previousValue??!0)===!1&&e.cancel()},p=>{if(this.isActiveNavigation(e))return ce.resolve([this.getNavigationContent(e).instruction])},p=>{if(this.isActiveNavigation(e)&&this.router.isRestrictedNavigation){const f=this.router.configuration.options;return this.getNavigationContent(e).createComponent(e,this.connectedCE,this.options.fallback||f.fallback,this.options.fallbackAction||f.fallbackAction)}},()=>e.addEndpointState(this,"guardedUnload"),()=>e.waitForSyncState("guardedUnload",this),()=>i!==null?e.waitForEndpointState(i,"guardedLoad"):void 0,p=>{if(this.isActiveNavigation(e))return this.canLoad(e,p)},p=>{var f;if(this.isActiveNavigation(e)){let g=p.previousValue??!0;if(typeof g=="boolean"){if(!g){e.cancel();const m=this.getNavigationContent(e).instruction;e.removeInstructions(m.dynasty),m.nextScopeInstructions=null;return}}else{const m=this.getNavigationContent(e).instruction;if(e.removeInstructions(m.dynasty),m.nextScopeInstructions=null,typeof g=="string"){const _=this.scope,b=this.router.configuration.options;let C=ce.parse(this.router,g);const v=(f=_.parent)==null?void 0:f.findInstructions(C,b.useDirectRouting,b.useConfiguredRoutes);(v!=null&&v.foundConfiguration||v!=null&&v.foundInstructions)&&(C=v.instructions);for(const y of C)y.endpoint.set(this),y.scope=_.owningScope;g=C}return Ce.run(p,()=>{this.router.load(g,{append:e})},_=>this.cancelContentChange(e,_),()=>ce.resolve(g),_=>_.exit())}}e.addEndpointState(this,"guardedLoad"),e.addEndpointState(this,"guarded")}],r=[()=>e.waitForSyncState("guarded",this),p=>{if(this.isActiveNavigation(e))return this.unload(e,p)},()=>e.addEndpointState(this,"unloaded"),()=>e.waitForSyncState("unloaded",this),()=>i!==null?e.waitForEndpointState(i,"loaded"):void 0,p=>{if(this.isActiveNavigation(e))return this.load(e,p)},()=>e.addEndpointState(this,"loaded"),()=>e.addEndpointState(this,"routed")],o=[()=>e.waitForSyncState("routed",this),()=>e.waitForEndpointState(this,"routed")];switch(this.router.configuration.options.swapOrder){case"detach-current-attach-next":o.push(p=>{if(this.isActiveNavigation(e))return this.removeContent(p,e)},p=>{if(this.isActiveNavigation(e))return this.addContent(p,e)});break;case"attach-next-detach-current":o.push(p=>{if(this.isActiveNavigation(e))return this.addContent(p,e)},p=>{if(this.isActiveNavigation(e))return this.removeContent(p,e)});break;case"detach-attach-simultaneously":o.push(p=>Ce.runParallel(p,f=>{if(this.isActiveNavigation(e))return this.removeContent(f,e)},f=>{if(this.isActiveNavigation(e))return this.addContent(f,e)}));break;case"attach-detach-simultaneously":o.push(p=>Ce.runParallel(p,f=>{if(this.isActiveNavigation(e))return this.addContent(f,e)},f=>{if(this.isActiveNavigation(e))return this.removeContent(f,e)}));break}o.push(()=>e.addEndpointState(this,"swapped")),(h=(c=this.connectedCE)==null?void 0:c.setActivity)==null||h.call(c,t,!0),(u=(d=this.connectedCE)==null?void 0:d.setActivity)==null||u.call(d,e.navigation.navigation,!0);const l=Ce.run("transition",p=>e.setEndpointStep(this,p.root),...s,...r,...o,()=>e.addEndpointState(this,"completed"),()=>e.waitForSyncState("bound"),()=>{var p,f,g,m;(f=(p=this.connectedCE)==null?void 0:p.setActivity)==null||f.call(p,t,!1),(m=(g=this.connectedCE)==null?void 0:g.setActivity)==null||m.call(g,e.navigation.navigation,!1)});l instanceof Promise&&l.catch(p=>{})}canUnload(e,t){return Ce.run(t,i=>this.getContent().connectedScope.canUnload(e,i),i=>(i.previousValue??!0)===!1?!1:this.getContent().canUnload(e.navigation))}canLoad(e,t){return this.clear?!0:Ce.run(t,()=>this.waitForConnected(),()=>{const i=this.router.configuration.options;return this.getNavigationContent(e).createComponent(e,this.connectedCE,this.options.fallback||i.fallback,this.options.fallbackAction||i.fallbackAction)},()=>this.getNavigationContent(e).canLoad())}load(e,t){if(!this.clear)return this.getNavigationContent(e).load(t)}addContent(e,t){return this.activate(e,null,this.connectedController,t)}removeContent(e,t){if(this.isEmpty)return;const i=this.router.statefulHistory||(this.options.stateful??!1);return Ce.run(e,()=>t.addEndpointState(this,"bound"),()=>t.waitForSyncState("bound"),s=>this.deactivate(s,null,this.connectedController),()=>i?this.dispose():void 0)}activate(e,t,i,s){if(this.activeContent.componentInstance!==null)return Ce.run(e,()=>this.activeContent.canLoad(),r=>this.activeContent.load(r),r=>this.activeContent.activateComponent(r,t,i,this.connectedCE,()=>s==null?void 0:s.addEndpointState(this,"bound"),s==null?void 0:s.waitForSyncState("bound")))}deactivate(e,t,i){var r;const s=this.getContent();if((s==null?void 0:s.componentInstance)!=null&&!s.reload&&s.componentInstance!==((r=this.getNextContent())==null?void 0:r.componentInstance))return s.deactivateComponent(e,t,i,this.connectedCE,this.router.statefulHistory||this.options.stateful)}unload(e,t){return Ce.run(t,i=>this.getContent().connectedScope.unload(e,i),()=>this.getContent().componentInstance!=null?this.getContent().unload(e.navigation??null):void 0)}dispose(){var e;this.getContent().componentInstance!==null&&!this.getContent().reload&&this.getContent().componentInstance!==((e=this.getNextContent())==null?void 0:e.componentInstance)&&this.getContent().disposeComponent(this.connectedCE,this.historyCache,this.router.statefulHistory||this.options.stateful)}finalizeContentChange(e,t){var l,c,h,d;const i=this.contents.findIndex(u=>u.navigation===e.navigation);let s=this.contents[i];const r=this.contents[i-1];if(this.clear){const u=new td(this.router,this,this.owningScope,this.scope.hasScope,void 0,s.navigation);this.contents.splice(i,1,u),s.delete(),s=u}else s.reload=!1;r.delete(),s.completed=!0,this.transitionAction="",s.contentStates.delete("checkedUnload"),s.contentStates.delete("checkedLoad"),this.previousViewportState=null;const o=this.router.configuration.options.indicators.viewportNavigating;(c=(l=this.connectedCE)==null?void 0:l.setActivity)==null||c.call(l,o,!1),(d=(h=this.connectedCE)==null?void 0:h.setActivity)==null||d.call(h,e.navigation.navigation,!1);let a=0;for(let u=0,p=i;u<p&&(this.contents[0].navigation.completed??!1);u++)a++;this.contents.splice(0,a),Xt(this.coordinators,u=>u===e)}cancelContentChange(e,t=null){var a;[...new Set(this.scope.children.map(l=>l.endpoint))].forEach(l=>l.cancelContentChange(e,t));const i=this.contents.findIndex(l=>l.navigation===e.navigation);if(i<0)return;const s=((a=e.getEndpointStep(this))==null?void 0:a.current)??null,r=this.contents[i],o=this.contents[i-1];return r.instruction.cancelled=!0,Ce.run(s,l=>r.freeContent(l,this.connectedCE,r.navigation,this.historyCache,this.router.statefulHistory||this.options.stateful),()=>{var c,h,d,u;this.previousViewportState&&Object.assign(this,this.previousViewportState),r==null||r.delete(),r!==null&&this.contents.splice(this.contents.indexOf(r),1),this.transitionAction="",o==null||o.contentStates.delete("checkedUnload"),o==null||o.contentStates.delete("checkedLoad");const l=this.router.configuration.options.indicators.viewportNavigating;(h=(c=this.connectedCE)==null?void 0:c.setActivity)==null||h.call(c,l,!1),(u=(d=this.connectedCE)==null?void 0:d.setActivity)==null||u.call(d,e.navigation.navigation,!1),e.removeEndpoint(this),Xt(this.coordinators,p=>p===e)},()=>{if(s!==t)return s==null?void 0:s.exit()})}wantComponent(e){return this.options.usedBy.includes(e)}acceptComponent(e){if(e==="-"||e===null)return!0;const t=this.options.usedBy;return!!(t.length===0||t.includes(e)||t.filter(i=>i.includes("*")).length)}freeContent(e,t){const i=this.historyCache.find(s=>s.componentInstance===t);if(i!==void 0)return Ce.run(e,s=>(this.forceRemove=!0,i.freeContent(s,null,null,this.historyCache,!1)),()=>{this.forceRemove=!1,Xt(this.historyCache,s=>s===i)})}getRoutes(){const e=[];let t=this.getComponentType();return t!=null&&(t=t.constructor===t.constructor.constructor?t:t.constructor,e.push(...Cc.getConfiguration(t)??[])),e}getTitle(e){if(this.options.noTitle)return"";const t=this.getComponentType();if(t===null)return"";let i="";const s=t.title;if(s!==void 0)if(typeof s=="string")i=s;else{const r=this.getComponentInstance();i=s.call(r,r,e)}else if(this.router.configuration.options.title.useComponentNames){let r=this.getContentInstruction().component.name??"";const o=this.router.configuration.options.title.componentPrefix??"";r.startsWith(o)&&(r=r.slice(o.length)),r=r.replace("-"," "),i=r.slice(0,1).toLocaleUpperCase()+r.slice(1)}return i}getComponentType(){let e=this.getContentInstruction().component.type??null;return e===null&&(e=Qe.for(this.connectedCE.element).container.componentType),e??null}getComponentInstance(){return this.getContentInstruction().component.instance??null}getContentInstruction(){var e;return((e=this.getNextContent())==null?void 0:e.instruction)??this.getContent().instruction??null}clearState(){this.options=Su.create();const e=this.owningScope,t=this.scope.hasScope;if(this.getContent().delete(),this.contents.shift(),this.contents.length<1)throw new Error("no content!");this.contents.push(new td(this.router,this,e,t)),this.cache=[]}waitForConnected(){if(this.connectedCE===null)return new Promise(e=>{this.connectionResolve=e})}}class yo{constructor(){this.name=null,this.instance=null,this.scope=null}get none(){return this.name===null&&this.instance===null}get endpointType(){return this.instance instanceof sn?"Viewport":this.instance instanceof Gn?"ViewportScope":null}static create(e){const t=new yo;return t.set(e),t}static isName(e){return typeof e=="string"}static isInstance(e){return e instanceof av}static getName(e){return yo.isName(e)?e:e?e.name:null}static getInstance(e){return yo.isName(e)?null:e}set(e){(e===void 0||e==="")&&(e=null),typeof e=="string"?(this.name=e,this.instance=null):(this.instance=e,e!==null&&(this.name=e.name,this.scope=e.owningScope))}toInstance(e){return this.instance!==null?this.instance:e.getEndpoint(this.endpointType,this.name)}same(e,t){return this.instance!==null&&e.instance!==null?this.instance===e.instance:this.endpointType!==null&&e.endpointType!==null&&this.endpointType===e.endpointType&&(!t||this.scope===e.scope)&&(this.instance!==null?this.instance.name:this.name)===(e.instance!==null?e.instance.name:e.name)}}const $y={excludeEndpoint:!1,endpointContext:!1,fullState:!1};class ce{constructor(e,t,i){this.ownsScope=!0,this.nextScopeInstructions=null,this.scope=null,this.scopeModifier="",this.needsEndpointDescribed=!1,this.route=null,this.routeStart=!1,this.default=!1,this.topInstruction=!1,this.unparsed=null,this.cancelled=!1,this.component=Je.create(e),this.endpoint=yo.create(t),this.parameters=$a.create(i)}static create(e,t,i,s=!0,r=null){const o=new ce(e,t,i);return o.ownsScope=s,o.nextScopeInstructions=r,o}static createClear(e,t){const i=ce.create(ce.clear(e),t);return i.scope=t.scope,i}static from(e,t){Array.isArray(t)||(t=[t]);const i=[];for(const s of t)if(typeof s=="string")i.push(...ce.parse(e,s));else if(s instanceof ce)i.push(s);else if(s instanceof Promise)i.push(ce.create(s));else if(Je.isAppelation(s))i.push(ce.create(s));else if(Je.isDefinition(s))i.push(ce.create(s.Type));else if("component"in s||"id"in s){const r=s,o=ce.create(r.component,r.viewport,r.parameters);o.route=s.id??null,r.children!==void 0&&r.children!==null&&(o.nextScopeInstructions=ce.from(e,r.children)),i.push(o)}else if(typeof s=="object"&&s!==null){const r=Qe.define(s);i.push(ce.create(r))}else i.push(ce.create(s));return i}static clear(e){return pi.for(e).clear}static add(e){return pi.for(e).add}static parse(e,t){const i=pi.for(e);let s="";const r=/^[./]+/.exec(t);Array.isArray(r)&&r.length>0&&(s=r[0],t=t.slice(s.length));const o=xs.parse(i,t,!0,!0).instructions;for(const a of o)a.scopeModifier=s;return o}static stringify(e,t,i={},s=!1){return typeof i=="boolean"&&(console.warn("[Deprecated] Boolean passed to RoutingInstruction.stringify. Please use the new interface instead: { excludeEndpoint: boolean; endpointContext: boolean; }"),i={excludeEndpoint:i,endpointContext:s}),i={...$y,...i},typeof t=="string"?t:t.map(r=>r.stringify(e,i)).filter(r=>r.length>0).join(pi.for(e).sibling)}static resolve(e){const t=e.filter(i=>i.isUnresolved).map(i=>i.resolve()).filter(i=>i instanceof Promise);if(t.length>0)return Promise.all(t)}static containsSiblings(e,t){return t===null?!1:t.filter(i=>!i.isClear(e)&&!i.isClearAll(e)).length>1?!0:t.some(i=>ce.containsSiblings(e,i.nextScopeInstructions))}static flat(e){const t=[];for(const i of e)t.push(i),i.hasNextScopeInstructions&&t.push(...ce.flat(i.nextScopeInstructions));return t}static clone(e,t=!1,i=!1){return e.map(s=>s.clone(t,i))}static contains(e,t,i,s){return i.every(r=>r.isIn(e,t,s))}get viewport(){return this.endpoint.instance instanceof sn||this.endpoint.endpointType===null?this.endpoint:null}get viewportScope(){return this.endpoint.instance instanceof Gn||this.endpoint.endpointType===null?this.endpoint:null}get previous(){var e,t;return(t=(e=this.endpoint.instance)==null?void 0:e.getContent())==null?void 0:t.instruction}isAdd(e){return this.component.name===pi.for(e).add}isClear(e){return this.component.name===pi.for(e).clear}isAddAll(e){var t;return this.isAdd(e)&&(((t=this.endpoint.name)==null?void 0:t.length)??0)===0}isClearAll(e){var t;return this.isClear(e)&&(((t=this.endpoint.name)==null?void 0:t.length)??0)===0}get hasNextScopeInstructions(){var e;return(((e=this.nextScopeInstructions)==null?void 0:e.length)??0)>0}get dynasty(){const e=[this];return this.hasNextScopeInstructions&&e.push(...this.nextScopeInstructions.map(t=>t.dynasty).flat()),e}get isUnresolved(){return this.component.isFunction()||this.component.isPromise()}resolve(){return this.component.resolve(this)}typeParameters(e){var t;return this.parameters.toSpecifiedParameters(e,((t=this.component.type)==null?void 0:t.parameters)??[])}sameRoute(e){var s,r;const t=(s=this.route)==null?void 0:s.match,i=(r=e.route)==null?void 0:r.match;return t==null||i==null?!1:typeof t=="string"||typeof i=="string"?t===i:t.id===i.id}sameComponent(e,t,i=!1,s=!1){return i&&!this.sameParameters(e,t,s)?!1:this.component.same(t.component,s)}sameEndpoint(e,t){return this.endpoint.same(e.endpoint,t)}sameParameters(e,t,i=!1){return this.component.same(t.component,i)?this.parameters.same(e,t.parameters,this.component.type):!1}stringify(e,t={},i=!1,s=!1){var d,u;typeof t=="boolean"?(console.warn("[Deprecated] Boolean passed to RoutingInstruction.stringify. Please use the new interface instead: { excludeEndpoint: boolean; endpointContext: boolean; }"),t={excludeEndpoint:t,endpointContext:i}):s=i,t={...$y,...t};const r=pi.for(e);let o=t.excludeEndpoint,a=!1;if(t.endpointContext){const p=((d=this.viewport)==null?void 0:d.instance)??null;if((p==null?void 0:p.options.noLink)??!1)return"";!this.needsEndpointDescribed&&(!((p==null?void 0:p.options.forceDescription)??!1)||((u=this.viewportScope)==null?void 0:u.instance)!=null)&&(o=!0),(p==null?void 0:p.options.fallback)===this.component.name&&(a=!0),(p==null?void 0:p.options.default)===this.component.name&&(a=!0)}const l=this.nextScopeInstructions;let c=this.scopeModifier;if(this.route instanceof Un&&!this.routeStart)return!s&&Array.isArray(l)?ce.stringify(e,l,t):"";const h=this.stringifyShallow(e,o,a,t.fullState);if(c+=h.endsWith(r.scope)?h.slice(0,-r.scope.length):h,!s&&Array.isArray(l)&&l.length>0){const p=ce.stringify(e,l,t);p.length>0&&(c+=r.scope,c+=l.length===1?p:`${r.groupStart}${p}${r.groupEnd}`)}return c}clone(e=!1,t=!1,i=!1){const s=ce.create(this.component.func??this.component.promise??this.component.type??this.component.name,this.endpoint.name,this.parameters.typedParameters??void 0);return e&&(s.component.set(this.component.instance??this.component.type??this.component.name),s.endpoint.set(this.endpoint.instance??this.endpoint.name)),s.component.name=this.component.name,s.needsEndpointDescribed=this.needsEndpointDescribed,s.route=this.route,s.routeStart=this.routeStart,s.default=this.default,t&&(s.scopeModifier=this.scopeModifier),s.scope=e?this.scope:null,this.hasNextScopeInstructions&&!i&&(s.nextScopeInstructions=ce.clone(this.nextScopeInstructions,e,t)),s}isIn(e,t,i){const s=t.filter(r=>{if(this.route!=null||r.route!=null){if(!r.sameRoute(this))return!1}else if(!r.sameComponent(e,this))return!1;const o=r.component.type??this.component.type,a=this.component.type??r.component.type,l=r.parameters.toSpecifiedParameters(e,o==null?void 0:o.parameters),c=this.parameters.toSpecifiedParameters(e,a==null?void 0:a.parameters);return $a.contains(l,c)?this.endpoint.none||r.sameEndpoint(this,!1):!1});return s.length===0?!1:!!(!i||!this.hasNextScopeInstructions||s.some(r=>ce.contains(e,r.nextScopeInstructions??[],this.nextScopeInstructions,i)))}getTitle(e){var t;if(this.route instanceof Un){const i=(t=this.route.match)==null?void 0:t.title;if(i!=null)return this.routeStart?typeof i=="string"?i:i(this,e):""}return this.endpoint.instance.getTitle(e)}toJSON(){return{component:this.component.name??void 0,viewport:this.endpoint.name??void 0,parameters:this.parameters.parametersRecord??void 0,children:this.hasNextScopeInstructions?this.nextScopeInstructions:void 0}}stringifyShallow(e,t=!1,i=!1,s=!1){if(!s&&this.route!=null)return(this.route instanceof Un?this.route.matching:this.route).split("/").map(h=>h.startsWith(":")?this.parameters.get(e,h.slice(1)):h).join("/");const r=pi.for(e);let o=!i||s?this.component.name??"":"";const a=this.component.type?this.component.type.parameters:null,l=$a.stringify(e,this.parameters.toSortedParameters(e,a));return l.length>0&&(o+=!i||s?`${r.parameters}${l}${r.parametersEnd}`:l),this.endpoint.name!=null&&(!t||s)&&(o+=`${r.viewport}${this.endpoint.name}`),this.ownsScope||(o+=r.noScope),o||""}}class Mo{constructor(e,t){this.eventName=e,this.navigation=t}static create(e){return new Mo(Mo.eventName,e)}}Mo.eventName="au:router:navigation-navigate";class xG{constructor(){this.lastNavigationIndex=-1,this.navigations=[],this.options={statefulHistoryLength:0},this.isActive=!1,this.uninitializedNavigation=fi.create({instruction:"NAVIGATOR UNINITIALIZED",fullStateInstruction:"",index:0,completed:!0}),this.ea=$(Mr),this.container=$(Bs)}start(e){if(this.isActive)throw Lt(2010);this.isActive=!0,this.options={...e}}stop(){if(!this.isActive)throw Lt(2011);this.isActive=!1}navigate(e){e instanceof fi||(e=fi.create(e));const t=new LI;return this.lastNavigationIndex===-1&&(this.loadState(),this.lastNavigationIndex!==-1?t.refresh=!0:(t.first=!0,t.new=!0,this.lastNavigationIndex=0,this.navigations=[fi.create({index:0,instruction:"",fullStateInstruction:""})])),e.index!==void 0&&!(e.replacing??!1)&&!(e.refreshing??!1)?(e.historyMovement=e.index-Math.max(this.lastNavigationIndex,0),e.instruction=this.navigations[e.index]!=null?this.navigations[e.index].fullStateInstruction:e.fullStateInstruction,e.replacing=!0,e.historyMovement>0?t.forward=!0:e.historyMovement<0&&(t.back=!0)):(e.refreshing??!1)||t.refresh?(e=this.navigations[this.lastNavigationIndex],e.replacing=!0,e.refreshing=!0):e.replacing??!1?(t.replace=!0,t.new=!0,e.index=this.lastNavigationIndex):(t.new=!0,e.index=this.lastNavigationIndex+1,this.navigations[e.index]=e),e.navigation=t,e.previous=this.navigations[Math.max(this.lastNavigationIndex,0)],e.process=new Zt(`navigation: ${e.path}`),this.lastNavigationIndex=e.index,this.notifySubscribers(e),e.process.promise}async finalize(e,t){if(e.untracked??!1)(e.fromBrowser??!1)&&this.options.store!=null&&await this.options.store.popNavigatorState();else if(e.replacing??!1)(e.historyMovement??0)===0&&(this.navigations[e.previous.index]=e),await this.saveState(e.index,!1);else{const i=e.index;if(t&&(this.navigations=this.navigations.slice(0,i)),this.navigations[i]=e,(this.options.statefulHistoryLength??0)>0){const s=this.navigations.length-(this.options.statefulHistoryLength??0);for(const r of this.navigations.slice(i))(typeof r.instruction!="string"||typeof r.fullStateInstruction!="string")&&await this.serializeNavigation(r,this.navigations.slice(s,i))}await this.saveState(e.index,!(e.fromBrowser??!1))}}async cancel(e){var t;this.options.store!=null&&((t=e.navigation)!=null&&t.new?(e.fromBrowser??!1)&&await this.options.store.popNavigatorState():(e.historyMovement??0)!==0&&await this.options.store.go(-e.historyMovement,!0))}async go(e){let t=this.lastNavigationIndex+e;t=Math.min(t,this.navigations.length-1),await this.options.store.go(e,!0);const i=this.navigations[t];return this.navigate(i)}getState(){const e=this.options.store!=null?{...this.options.store.state}:{},t=(e==null?void 0:e.navigations)??[],i=(e==null?void 0:e.navigationIndex)??-1;return{navigations:t,navigationIndex:i}}loadState(){const{navigations:e,navigationIndex:t}=this.getState();this.navigations=e.map(i=>fi.create(i)),this.lastNavigationIndex=t}async saveState(e,t){var s,r;for(let o=0;o<this.navigations.length;o++)this.navigations[o]=fi.create(this.navigations[o].toStoredNavigation());if((this.options.statefulHistoryLength??0)>0){const o=this.navigations.length-(this.options.statefulHistoryLength??0);for(let a=0;a<o;a++){const l=this.navigations[a];(typeof l.instruction!="string"||typeof l.fullStateInstruction!="string")&&await this.serializeNavigation(l,this.navigations.slice(o))}}if(this.options.store==null)return Promise.resolve();const i={navigations:(this.navigations??[]).map(o=>this.toStoreableNavigation(o)),navigationIndex:e};return t?(r=(s=this.options)==null?void 0:s.store)==null?void 0:r.pushNavigatorState(i):this.options.store.replaceNavigatorState(i)}async refresh(){if(this.lastNavigationIndex===-1)return Promise.reject();const e=this.navigations[this.lastNavigationIndex];return e.replacing=!0,e.refreshing=!0,this.navigate(e)}notifySubscribers(e){this.ea.publish(Mo.eventName,Mo.create(e))}toStoreableNavigation(e){const t=e instanceof fi?e.toStoredNavigation():e;return t.instruction=ce.stringify(this.container,t.instruction),t.fullStateInstruction=ce.stringify(this.container,t.fullStateInstruction,{endpointContext:!0,fullState:!0}),typeof t.scope!="string"&&(t.scope=null),t}async serializeNavigation(e,t){let i=[];for(const o of t)typeof o.instruction!="string"&&i.push(...ce.flat(o.instruction).filter(a=>a.endpoint.instance!==null).map(a=>a.component.instance)),typeof o.fullStateInstruction!="string"&&i.push(...ce.flat(o.fullStateInstruction).filter(a=>a.endpoint.instance!==null).map(a=>a.component.instance));i=$c(i);let s=[];typeof e.fullStateInstruction!="string"&&(s.push(...e.fullStateInstruction),e.fullStateInstruction=ce.stringify(this.container,e.fullStateInstruction,{endpointContext:!0,fullState:!0})),typeof e.instruction!="string"&&(s.push(...e.instruction),e.instruction=ce.stringify(this.container,e.instruction)),s=s.filter((o,a,l)=>o.component.instance!=null&&l.indexOf(o)===a);const r=[];for(const o of s)await this.freeInstructionComponents(o,i,r)}freeInstructionComponents(e,t,i){var o;const s=e.component.instance,r=((o=e.viewport)==null?void 0:o.instance)??null;if(!(s===null||r===null||i.some(a=>a===s))){if(!t.some(a=>a===s))return Ce.run("freeInstructionComponents",a=>r.freeContent(a,s),()=>{i.push(s)});if(e.hasNextScopeInstructions)for(const a of e.nextScopeInstructions)return this.freeInstructionComponents(a,t,i)}}}const PG=CG;class kG extends Array{constructor(){super(...arguments),this.currentIndex=-1}next(){return this.length>this.currentIndex+1?this[++this.currentIndex]:(this.currentIndex=-1,null)}removeCurrent(){this.splice(this.currentIndex--,1)}remove(e){Xt(this,t=>t===e)}}class Ii{static matchEndpoints(e,t,i,s=!1){const r=[],l=e.getOwnedRoutingScopes(1/0).map(d=>d.endpoint).filter(d=>d!==null&&!i.some(u=>d===u.endpoint.instance&&!u.cancelled&&!u.isClear(e.router))),c=new kG(...t.slice());let h=null;for(Ii.matchKnownEndpoints(e.router,"ViewportScope",c,l,r,!1),s||Ii.matchKnownEndpoints(e.router,"Viewport",c,l,r,!1),Ii.matchViewportScopeSegment(e.router,e,c,l,r);(h=c.next())!==null;)h.needsEndpointDescribed=!0;return Ii.matchViewportConfiguration(c,l,r),s||Ii.matchSpecifiedViewport(c,l,r,!1),Ii.matchLastViewport(c,l,r),s&&Ii.matchSpecifiedViewport(c,l,r,!1),{matchedInstructions:r,remainingInstructions:[...c]}}static matchKnownEndpoints(e,t,i,s,r,o=!1){let a;for(;(a=i.next())!==null;)a.endpoint.instance!==null&&!a.isAdd(e)&&a.endpoint.endpointType===t&&(Ii.matchEndpoint(a,a.endpoint.instance,o),r.push(a),Xt(s,l=>l===a.endpoint.instance),i.removeCurrent())}static matchViewportScopeSegment(e,t,i,s,r){let o;for(;(o=i.next())!==null;)for(let a of s)if(a instanceof Gn&&a.acceptSegment(o.component.name)){if(Array.isArray(a.source)){let l=s.find(c=>c instanceof Gn&&c.name===a.name);if(l===void 0||o.isAdd(e)){const c=a.addSourceItem();l=t.getOwnedScopes().filter(h=>h.isViewportScope).map(h=>h.endpoint).find(h=>h.sourceItem===c)}a=l}Ii.matchEndpoint(o,a,!1),r.push(o),Xt(s,l=>l===o.endpoint.instance),i.removeCurrent();break}}static matchViewportConfiguration(e,t,i){let s;for(;(s=e.next())!==null;)for(const r of t)if(r instanceof sn&&r!=null&&r.wantComponent(s.component.name)){Ii.matchEndpoint(s,r,!0),i.push(s),Xt(t,o=>o===s.endpoint.instance),e.removeCurrent();break}}static matchSpecifiedViewport(e,t,i,s){let r;for(;(r=e.next())!==null;){let o=r.endpoint.instance;if(o==null){const a=r.endpoint.name;if(((a==null?void 0:a.length)??0)===0)continue;for(const l of t)if(l instanceof sn&&a===l.name){o=l;break}}o!=null&&o.acceptComponent(r.component.name)&&(Ii.matchEndpoint(r,o,s),i.push(r),Xt(t,a=>a===r.endpoint.instance),e.removeCurrent())}}static matchLastViewport(e,t,i){let s;for(;(s=e.next())!==null;){const r=[];for(const o of t)o instanceof sn&&o.acceptComponent(s.component.name)&&r.push(o);if(r.length===1){const o=r[0];Ii.matchEndpoint(s,o,!0),i.push(s),Xt(t,a=>a===s.endpoint.instance),e.removeCurrent()}}}static matchEndpoint(e,t,i){e.endpoint.set(t),i&&(e.needsEndpointDescribed=!1),e.hasNextScopeInstructions&&e.nextScopeInstructions.forEach(s=>{s.scope===null&&(s.scope=t instanceof sn?t.scope:t.scope.scope)})}}class Nr{constructor(e,t,i,s){this.id=++Nr.lastId,this.parent=null,this.children=[],this.router=e,this.hasScope=t,this.owningScope=i??this,this.endpointContent=s}static for(e,t){if(e==null)return{scope:null,instruction:t};if(e instanceof Nr||e instanceof sn||e instanceof Gn)return{scope:e.scope,instruction:t};let i;if("res"in e)i=e;else if("container"in e)i=e.container;else if("$controller"in e)i=e.$controller.container;else{const o=Qe.for(e,{searchParents:!0});i=o==null?void 0:o.container}if(i==null)return console.warn("RoutingScope failed to find a container for provided origin",e),{scope:null,instruction:t};const s=i.has(hn.closestEndpointKey,!0)?i.get(hn.closestEndpointKey):null;let r=(s==null?void 0:s.scope)??null;if(r===null||t===void 0){const o=t??"";return{scope:r,instruction:o.startsWith("/")?o.slice(1):t}}if(t.startsWith("/"))return{scope:null,instruction:t.slice(1)};for(;t.startsWith(".");)if(t.startsWith("./"))t=t.slice(2);else if(t.startsWith("../"))r=r.parent??r,t=t.slice(3);else break;return{scope:r,instruction:t}}get scope(){return this.hasScope?this:this.owningScope.scope}get endpoint(){return this.endpointContent.endpoint}get isViewport(){return this.endpoint instanceof sn}get isViewportScope(){return this.endpoint instanceof Gn}get type(){return this.isViewport?"Viewport":"ViewportScope"}get enabled(){return this.endpointContent.isActive}get passThroughScope(){return this.isViewportScope&&this.endpoint.passThroughScope}get pathname(){return`${this.owningScope!==this?this.owningScope.pathname:""}/${this.endpoint.name}`}get path(){var s,r;const e=((s=this.parent)==null?void 0:s.path)??"",t=((r=this.routingInstruction)==null?void 0:r.stringify(this.router,{endpointContext:!0},!0))??"",i=this.routingInstruction?pi.for(this.router).scope:"";return`${e}${t}${i}`}toString(e=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}${e?`
`+this.children.map(t=>t.toString(!0)).join(""):""}`}toStringOwning(e=!1){return`${this.owningScope!==this?this.owningScope.toString():""}/${this.enabled?"":"("}${this.endpoint.toString()}#${this.id}${this.enabled?"":")"}${e?`
`+this.ownedScopes.map(t=>t.toStringOwning(!0)).join(""):""}`}get enabledChildren(){return this.children.filter(e=>e.enabled)}get hoistedChildren(){const e=this.enabledChildren;for(;e.some(t=>t.passThroughScope);)for(const t of e.slice())if(t.passThroughScope){const i=e.indexOf(t);e.splice(i,1,...t.enabledChildren)}return e}get ownedScopes(){return this.getOwnedScopes()}get routingInstruction(){return this.endpoint.isViewportScope?this.endpoint.instruction:this.isViewport?this.endpoint.activeContent.instruction:null}getOwnedScopes(e=!1){const t=this.allScopes(e).filter(i=>i.owningScope===this);for(const i of t.slice())if(i.passThroughScope){const s=t.indexOf(i);t.splice(s,1,...i.getOwnedScopes())}return t}findInstructions(e,t,i){const s=this.router;let r=new Un;if(i&&!ce.containsSiblings(s,e)){let o=e.filter(l=>l.isClear(s)||l.isClearAll(s));const a=e.filter(l=>!l.isClear(s)&&!l.isClearAll(s));if(a.length>0)for(const l of a){const c=typeof l.route=="string"?l.route:l.unparsed??ce.stringify(s,[l]),h=this.findMatchingRoute(c,l.parameters.parametersRecord??{});if(h.foundConfiguration)r=h,r.instructions=[...o,...r.instructions],o=[];else if(t)r.instructions=[...o,...r.instructions,l],o=[],r.remaining=ce.stringify(s,l.nextScopeInstructions??[]);else throw new Error(`No route found for: ${ce.stringify(s,e)}!`)}else r.instructions=[...o]}else if(t)r.instructions.push(...e);else throw new Error(`No way to process sibling viewport routes with direct routing disabled: ${ce.stringify(s,e)}!`);r.instructions=r.instructions.filter(o=>o.component.name!=="");for(const o of r.instructions)o.scope===null&&(o.scope=this);return r}matchEndpoints(e,t,i=!1){const s=[],r=e.filter(c=>(c.scope??this)===this),o=e.filter(c=>(c.scope??this)!==this),{matchedInstructions:a,remainingInstructions:l}=Ii.matchEndpoints(this,r,t,i);return s.push(...a),o.push(...l),{matchedInstructions:s,remainingInstructions:o}}addEndpoint(e,t,i,s={}){var o,a;let r=((o=this.getOwnedScopes().find(l=>l.type===e&&l.endpoint.name===t))==null?void 0:o.endpoint)??null;return i!=null&&(r==null?void 0:r.connectedCE)!=null&&r.connectedCE!==i&&(r=((a=this.getOwnedScopes(!0).find(l=>l.type===e&&l.endpoint.name===t&&l.endpoint.connectedCE===i))==null?void 0:a.endpoint)??null),r==null&&(r=e==="Viewport"?new sn(this.router,t,i,this.scope,!!s.scope,s):new Gn(this.router,t,i,this.scope,!0,null,s),this.addChild(r.connectedScope)),i!=null&&r.setConnectedCE(i,s),r}removeEndpoint(e,t,i){return(i??null)!==null||t.removeEndpoint(e,i)?(this.removeChild(t.connectedScope),!0):!1}addChild(e){this.children.some(t=>t===e)||(e.parent!==null&&e.parent.removeChild(e),this.children.push(e),e.parent=this)}removeChild(e){const t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=null)}allScopes(e=!1){const t=e?this.children.slice():this.enabledChildren;for(const i of t.slice())t.push(...i.allScopes(e));return t}reparentRoutingInstructions(){const e=this.hoistedChildren.filter(t=>t.routingInstruction!==null&&t.routingInstruction.component.name);if(!e.length)return null;for(const t of e){const i=t.reparentRoutingInstructions();t.routingInstruction.nextScopeInstructions=i!==null&&i.length>0?i:null}return e.map(t=>t.routingInstruction)}getChildren(e){return this.children.map(i=>i.endpoint.getTimeContent(e)).filter(i=>i!==null).map(i=>i.connectedScope)}getAllRoutingScopes(e){const t=this.getChildren(e);for(const i of t.slice())t.push(...i.getAllRoutingScopes(e));return t}getOwnedRoutingScopes(e){const t=this.getAllRoutingScopes(e).filter(i=>i.owningScope===this);for(const i of t.slice())if(i.passThroughScope){const s=t.indexOf(i);t.splice(s,1,...i.getOwnedRoutingScopes(e))}return $c(t)}getRoutingInstructions(e){const t=$c(this.getOwnedRoutingScopes(e).map(s=>s.endpoint)).map(s=>s.getTimeContent(e)).filter(s=>s!==null),i=[];for(const s of t){const r=s.instruction.clone(!0,!1,!1);(r.component.name??"")!==""&&(r.nextScopeInstructions=s.connectedScope.getRoutingInstructions(e),i.push(r))}return i}canUnload(e,t){return Ce.run(t,i=>Ce.runParallel(i,...this.children.map(s=>s.endpoint!==null?r=>s.endpoint.canUnload(e,r):r=>s.canUnload(e,r))),i=>i.previousValue.every(s=>s??!0))}unload(e,t){return Ce.runParallel(t,...this.children.map(i=>i.endpoint!==null?s=>i.endpoint.unload(e,s):s=>i.unload(e,s)))}matchScope(e,t=!1){const i=[];for(const s of e)s.scope===this?i.push(s):t&&s.hasNextScopeInstructions&&i.push(...this.matchScope(s.nextScopeInstructions,t));return i}findMatchingRoute(e,t){let i=new Un;if(this.isViewportScope&&!this.passThroughScope)i=this.findMatchingRouteInRoutes(e,this.endpoint.getRoutes(),t);else if(this.isViewport)i=this.findMatchingRouteInRoutes(e,this.endpoint.getRoutes(),t);else for(const s of this.enabledChildren)if(i=s.findMatchingRoute(e,t),i.foundConfiguration)break;return i.foundConfiguration?i:this.parent!=null?this.parent.findMatchingRoute(e,t):i}findMatchingRouteInRoutes(e,t,i){var l,c;const s=new Un;if(t.length===0)return s;t=t.map(h=>this.ensureProperRoute(h));const r=[];for(const h of t){const d=Array.isArray(h.path)?h.path:[h.path];for(const u of d)r.push({...h,path:u,handler:h}),u!==""&&r.push({...h,path:`${u}/*remainingPath`,handler:h})}(e.startsWith("/")||e.startsWith("+"))&&(e=e.slice(1));const o=t.find(h=>h.id===e);let a={params:{},endpoint:{}};if(o!=null)a.endpoint={route:{handler:o}},e=Array.isArray(o.path)?o.path[0]:o.path,e=e.split("/").map(d=>{if(d.startsWith(":")){const u=d.slice(1).replace(/\?$/,""),p=i[u];return a.params[u]=p,p}else return d}).join("/");else{const h=new PG;h.add(r),a=h.recognize(e)}if(a!=null){s.match=a.endpoint.route.handler,s.matching=e;const h={...a.params};if(h.remainingPath!=null&&(s.remaining=h.remainingPath,Reflect.deleteProperty(h,"remainingPath"),s.matching=s.matching.slice(0,s.matching.indexOf(s.remaining))),s.params=h,((l=s.match)==null?void 0:l.redirectTo)!=null){let d=(c=s.match)==null?void 0:c.redirectTo;return(s.remaining??"").length>0&&(d+=`/${s.remaining}`),this.findMatchingRouteInRoutes(d,t,i)}}if(s.foundConfiguration){s.instructions=ce.clone(s.match.instructions,!1,!0);const h=s.instructions.slice();for(;h.length>0;){const u=h.shift();u.parameters.addParameters(s.params),u.route=s,u.hasNextScopeInstructions&&h.unshift(...u.nextScopeInstructions)}s.instructions.length>0&&(s.instructions[0].routeStart=!0);const d=ce.parse(this.router,s.remaining);if(d.length>0){let u=s.instructions[0];for(;u.hasNextScopeInstructions;)u=u.nextScopeInstructions[0];u.nextScopeInstructions=d}}return s}ensureProperRoute(e){return e.id===void 0&&(e.id=Array.isArray(e.path)?e.path.join(","):e.path),e.instructions===void 0&&(e.instructions=[{component:e.component,viewport:e.viewport,parameters:e.parameters,children:e.children}]),e.redirectTo===null&&(e.instructions=ce.from(this.router,e.instructions)),e}}Nr.lastId=0;class Hy{constructor(e,t,i=0){this.taskQueue=e,this.item=t,this.cost=i,this.done=!1,this.promise=new Promise((s,r)=>{this.resolve=()=>{this.taskQueue.resolve(this,s)},this.reject=o=>{this.taskQueue.reject(this,r,o)}})}async execute(){"execute"in this.item?await this.item.execute(this):await this.item(this)}wait(){return this.promise}}class DG{get isActive(){return this.task!==null}constructor(e){this.callback=e,this.pending=[],this.processing=null,this.allowedExecutionCostWithinTick=null,this.currentExecutionCostInCurrentTick=0,this.platform=null,this.task=null,this.dequeue=t=>{this.processing===null&&(t!==void 0&&(this.currentExecutionCostInCurrentTick=0),this.pending.length!==0&&(this.allowedExecutionCostWithinTick!==null&&t===void 0&&this.currentExecutionCostInCurrentTick+(this.pending[0].cost||0)>this.allowedExecutionCostWithinTick||(this.processing=this.pending.shift()||null,this.processing&&(this.currentExecutionCostInCurrentTick+=this.processing.cost??0,this.callback!==void 0?this.callback(this.processing):this.processing.execute().catch(i=>{throw i})))))}}get length(){return this.pending.length}start(e){this.platform=e.platform,this.allowedExecutionCostWithinTick=e.allowedExecutionCostWithinTick,this.task=this.platform.domQueue.queueTask(this.dequeue,{persistent:!0})}stop(){this.task.cancel(),this.task=null,this.allowedExecutionCostWithinTick=null,this.clear()}enqueue(e,t){const i=Array.isArray(e),s=i?e:[e],r=s.map((a,l)=>Array.isArray(t)?t[l]:t).map(a=>a!==void 0?a:1),o=[];for(const a of s)o.push(a instanceof Hy?a:this.createQueueTask(a,r.shift()));return this.pending.push(...o),this.dequeue(),i?o:o[0]}createQueueTask(e,t){return new Hy(this,e,t)}clear(){this.pending.length=0}resolve(e,t){t(),this.processing=null,this.dequeue()}reject(e,t,i){t(i),this.processing=null,this.dequeue()}}class By{constructor(){this.allowedExecutionCostWithinTick=2,this.pendingCalls=new DG,this.isActive=!1,this.options={useUrlFragmentHash:!0},this.forwardedState={eventTask:null,suppressPopstate:!1},this.platform=$(ai),this.window=$(Yu),this.history=$(BL),this.location=$(HL),this.ea=$(Mr)}start(e){if(this.isActive)throw Lt(2007);this.isActive=!0,e.useUrlFragmentHash!=null&&(this.options.useUrlFragmentHash=e.useUrlFragmentHash),this.pendingCalls.start({platform:this.platform,allowedExecutionCostWithinTick:this.allowedExecutionCostWithinTick}),this.window.addEventListener("popstate",this)}stop(){if(!this.isActive)throw Lt(2008);this.window.removeEventListener("popstate",this),this.pendingCalls.stop(),this.options={useUrlFragmentHash:!0},this.isActive=!1}get length(){return this.history.length}get state(){return this.history.state}get viewerState(){const{pathname:e,search:t,hash:i}=this.location,s=this.options.useUrlFragmentHash??!1?i.slice(1):`${e}${t}`,r=this.options.useUrlFragmentHash??!1?i.slice(1).includes("#")?i.slice(i.slice(1).indexOf("#",1)):"":i.slice(1);return new LG(e,t.slice(1),r,s)}async go(e,t=!1){const i=this.pendingCalls.createQueueTask(s=>s.resolve(),1);return this.pendingCalls.enqueue([s=>{const r=i,o=t;this.forwardState({eventTask:r,suppressPopstate:o}),s.resolve()},s=>{const r=this.history,o=e;r.go(o),s.resolve()}],[0,1]),i.wait()}async pushNavigatorState(e){const{title:t,path:i}=e.navigations[e.navigationIndex],s=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(r=>{const o=this.history,a=e,l=t||"",c=`${s}${i}`;try{o.pushState(a,l,c),this.setTitle(l)}catch(h){const d=this.tryCleanState(a,"push",h);o.pushState(d,l,c),this.setTitle(l)}r.resolve()},1).wait()}async replaceNavigatorState(e,t,i){const s=e.navigations[e.navigationIndex];t??(t=s.title),i??(i=s.path);const r=this.options.useUrlFragmentHash?"#/":"";return this.pendingCalls.enqueue(o=>{const a=this.history,l=e,c=t||"",h=`${r}${i}`;try{a.replaceState(l,c,h),this.setTitle(c)}catch(d){const u=this.tryCleanState(l,"replace",d);a.replaceState(u,c,h),this.setTitle(c)}o.resolve()},1).wait()}async popNavigatorState(){const e=this.pendingCalls.createQueueTask(t=>t.resolve(),1);return this.pendingCalls.enqueue(async t=>{const i=e;await this.popState(i),t.resolve()},1),e.wait()}setTitle(e){this.window.document.title=e}handleEvent(e){this.handlePopStateEvent(e)}handlePopStateEvent(e){const{eventTask:t,suppressPopstate:i}=this.forwardedState;this.forwardedState={eventTask:null,suppressPopstate:!1},this.pendingCalls.enqueue(async s=>{i||this.notifySubscribers(e),t!==null&&await t.execute(),s.resolve()},1)}notifySubscribers(e){this.ea.publish(Fo.eventName,Fo.create(this.viewerState,e,this.history.state))}async popState(e){var s;await this.go(-1,!0);const t=this.history.state,i=(s=t==null?void 0:t.navigations)==null?void 0:s[(t==null?void 0:t.navigationIndex)??0];i!=null&&!i.firstEntry&&(await this.go(-1,!0),await this.pushNavigatorState(t)),await e.execute()}forwardState(e){this.forwardedState=e}tryCleanState(e,t,i){try{return JSON.parse(JSON.stringify(e))}catch(s){throw Lt(2009,t,s,i)}}}class LG{constructor(e,t,i,s){this.path=e,this.query=t,this.hash=i,this.instruction=s}}class Fo{constructor(e,t,i,s){this.eventName=e,this.viewerState=t,this.event=i,this.state=s}static create(e,t,i){return new Fo(Fo.eventName,e,t,i)}}Fo.eventName="au:router:navigation-state-change";class NG{constructor(e){this.endpoint=e,this.running=!1,this.states=new Map,this.checkedStates=[],this.syncingState=null,this.syncPromise=null,this.step=null}hasReachedState(e){return this.states.has(e)&&this.states.get(e)===null}}class Hc{constructor(e,t){this.router=e,this.navigation=t,this.instructions=[],this.matchedInstructions=[],this.processedInstructions=[],this.changedEndpoints=[],this.running=!1,this.completed=!1,this.cancelled=!1,this.hasAllEndpoints=!1,this.appendedInstructions=[],this.closed=!1,this.entities=[],this.syncStates=new Map,this.checkedSyncStates=new Set}static create(e,t,i){const s=new Hc(e,t);return i.syncStates.forEach(r=>s.addSyncState(r)),s}appendInstructions(e){this.instructions.push(...e),this.manageDefaults()}removeInstructions(e){this.instructions=this.instructions.filter(t=>!e.includes(t)),this.matchedInstructions=this.matchedInstructions.filter(t=>!e.includes(t))}manageDefaults(){const e=this.router;this.instructions=[...this.instructions.filter(i=>!i.default),...this.instructions.filter(i=>i.default)],this.instructions.forEach(i=>{var s;i.scope==null&&(i.scope=this.navigation.scope??((s=this.router.rootScope)==null?void 0:s.scope)??null)});const t=this.instructions.filter(i=>!i.isClear(e));for(;t.length>0;){const i=t.shift(),s=this.processedInstructions.some(a=>!a.isClear(e)&&!a.cancelled&&a.sameEndpoint(i,!0)),r=this.matchedInstructions.find(a=>!a.isClear(e)&&a.sameEndpoint(i,!0)),o=this.instructions.find(a=>!a.isClear(e)&&a.sameEndpoint(i,!0)&&a!==i);if(i.default&&(s||r!==void 0&&!r.default||o!==void 0&&!o.default)){Xt(this.instructions,a=>a===i);continue}if(r!==void 0){Xt(this.matchedInstructions,a=>a===r);continue}o!==void 0&&Xt(this.instructions,a=>a===o)}}async processInstructions(){const e=[];let t=100;for(;this.instructions.length>0;){if(!t--)throw console.error("processInstructions endless loop",this.navigation,this.instructions),new Error("Endless loop");this.instructions=[...this.instructions.filter(s=>!s.default),...this.instructions.filter(s=>s.default)];const i=this.instructions[0].scope;if(i==null)throw new Error("No scope for instruction");e.push(...await this.processInstructionsForScope(i))}return e}async processInstructionsForScope(e){var l,c;const t=this.router,i=t.configuration.options,s=this.getClearAllEndpoints(e),r=this.getInstructionsForScope(e).filter(h=>!(h.route instanceof ui));if(r.length>0){const h=e.findInstructions(r,i.useDirectRouting,i.useConfiguredRoutes);if(r.some(d=>!d.component.none||d.route!=null)&&!h.foundConfiguration&&!h.foundInstructions)throw this.createUnknownRouteError(r);this.instructions.splice(this.instructions.indexOf(r[0]),r.length,...h.instructions)}const o=ce.resolve(this.getInstructionsForScope(e));o instanceof Promise&&await o;for(const h of this.getInstructionsForScope(e).filter(d=>d.isAddAll(t)))h.endpoint.set(h.scope.endpoint.name),h.scope=h.scope.owningScope;let a=100;do{this.matchEndpoints(e),a--||t.unresolvedInstructionsError(this.navigation,this.instructions);const h=[],d=this.matchedInstructions.map(m=>m.endpoint.instance);this.matchedInstructions.push(...s.filter(m=>!d.includes(m)).map(m=>ce.createClear(t,m)));const u=await ts.invokeBeforeNavigation(this.matchedInstructions,this.navigation);if(u===!1)return t.cancelNavigation(this.navigation,this),[];u!==!0&&u!==this.matchedInstructions&&(this.matchedInstructions=u);for(const m of this.matchedInstructions){const _=m.endpoint.instance;if(_!==null){const b=_.setNextContent(m,this.navigation);b!=="skip"&&(h.push(_),this.addEndpoint(_));const C=[_];if(b==="swap"&&C.push(..._.getContent().connectedScope.allScopes(!0).map(v=>v.endpoint)),Xt(s,v=>C.includes(v)),Xt(this.matchedInstructions,v=>v!==m&&v.isClear(t)&&C.includes(v.endpoint.instance)),!m.isClear(t)&&((c=(l=m.scope)==null?void 0:l.parent)!=null&&c.isViewportScope)&&(Xt(s,v=>v===m.scope.parent.endpoint),Xt(this.matchedInstructions,v=>v!==m&&v.isClear(t)&&v.endpoint.instance===m.scope.parent.endpoint)),m.hasNextScopeInstructions){if(this.instructions.push(...m.nextScopeInstructions),b!=="skip")for(const v of m.nextScopeInstructions)v.scope=_.scope,v.endpoint.instance=null}else s.push(...m.endpoint.instance.scope.children.map(v=>v.endpoint))}}const p=this.matchedInstructions.filter(m=>{var _;return((_=m.endpoint.instance)==null?void 0:_.transitionAction)==="skip"}),f=p.filter(m=>m.hasNextScopeInstructions);if((p.length===0||f.length===0)&&(t.isRestrictedNavigation||this.finalEndpoint(),this.run(),this.hasAllEndpoints)){const m=this.waitForSyncState("guardedUnload");m instanceof Promise&&await m}if(this.cancelled)return t.cancelNavigation(this.navigation,this),[];if(AG(this.changedEndpoints,h),this.processedInstructions.push(...this.matchedInstructions.splice(0)),!t.isRestrictedNavigation&&(this.matchedInstructions.length>0||this.instructions.length>0)&&this.running){const m=this.waitForSyncState("swapped");m instanceof Promise&&await m}this.instructions.push(...s.map(m=>ce.createClear(t,m)));const g=ce.resolve(this.matchedInstructions);g instanceof Promise&&await g,this.changedEndpoints=this.changedEndpoints.filter(m=>{var _;return!(((_=[...this.processedInstructions].reverse().find(b=>b.endpoint.instance===m))==null?void 0:_.cancelled)??!1)})}while(this.matchedInstructions.length>0||this.getInstructionsForScope(e).length>0);return this.changedEndpoints}getInstructionsForScope(e){this.manageDefaults();const t=this.instructions.filter(i=>i.scope===e&&!i.default);return t.length>0?t:this.instructions.filter(i=>i.scope===e)}ensureClearStateInstruction(e){const t=this.router;if(!this.instructions.some(i=>i.scope===e&&i.isClearAll(t))){const i=ce.create(ce.clear(t));i.scope=e,this.instructions.unshift(i)}}matchEndpoints(e,t=!1){const i=this.getInstructionsForScope(e),s=Ii.matchEndpoints(e,i,[...this.processedInstructions,...this.matchedInstructions],t).matchedInstructions;this.matchedInstructions.push(...s),this.instructions=this.instructions.filter(r=>!s.includes(r))}run(){if(!this.running){this.running=!0;for(const e of this.entities)e.running||(e.running=!0,e.endpoint.transition(this))}}addSyncState(e){const t=new Zt(`addSyncState: ${e}`);this.syncStates.set(e,t)}addEndpoint(e){const t=new NG(e);return this.entities.push(t),this.recheckSyncStates(),this.running&&t.endpoint.transition(this),t}removeEndpoint(e){const t=this.entities.map(r=>r.endpoint),i=[e];let s=[e];for(;s.length>0;)s=t.filter(r=>(r==null?void 0:r.parentViewport)!=null&&s.includes(r.parentViewport)),i.push(...s);for(const r of i){const o=this.entities.find(a=>a.endpoint===r);o!==void 0&&Xt(this.entities,a=>a===o)}this.checkSyncState()}setEndpointStep(e,t){let i=this.entities.find(s=>s.endpoint===e);i===void 0&&(i=this.addEndpoint(e)),i.step=t}getEndpointStep(e){const t=this.entities.find(i=>i.endpoint===e);return(t==null?void 0:t.step)??null}addEndpointState(e,t){let i=this.entities.find(r=>r.endpoint===e);i===void 0&&(i=this.addEndpoint(e));const s=i.states.get(t);s instanceof Zt&&s.resolve(),i.states.set(t,null),this.checkSyncState(t)}waitForSyncState(e,t=null){if(this.entities.length===0)return;const i=this.syncStates.get(e);if(i!==void 0){if(t!==null){const s=this.entities.find(r=>r.endpoint===t);if((s==null?void 0:s.syncPromise)===null&&i.isPending)return s.syncingState=e,s.syncPromise=new Zt(`waitForSyncState: ${e}`),s.checkedStates.push(e),this.checkedSyncStates.add(e),Promise.resolve().then(()=>{this.checkSyncState(e)}).catch(r=>{throw r}),s.syncPromise.promise}return i.isPending?i.promise:void 0}}waitForEndpointState(e,t){if(!this.syncStates.has(t))return;let i=this.entities.find(r=>r.endpoint===e);if(i==null&&(i=this.addEndpoint(e)),i.hasReachedState(t))return;let s=i.states.get(t);return s==null&&(s=new Zt(`waitForEndpointState: ${t}`),i.states.set(t,s)),s.promise}finalEndpoint(){this.hasAllEndpoints=!0,this.syncStates.forEach((e,t)=>this.checkSyncState(t))}finalize(){this.entities.forEach(e=>e.endpoint.finalizeContentChange(this,null)),this.completed=!0,this.navigation.completed=!0,this.syncStates.clear()}cancel(){this.cancelled=!0,this.instructions=[],this.matchedInstructions=[],this.entities.forEach(e=>{const t=e.endpoint.cancelContentChange(this);t instanceof Promise&&t.catch(i=>{throw i})}),this.router.navigator.cancel(this.navigation).then(()=>{var e;(e=this.navigation.process)==null||e.resolve(!1)}).catch(e=>{throw e}),this.completed=!0,this.navigation.completed=!0,[...this.syncStates.values()].forEach(e=>{e.isPending&&e.resolve()}),this.syncStates.clear()}checkSyncState(e){var i;if(e===void 0){this.syncStates.forEach((s,r)=>this.checkSyncState(r));return}const t=this.syncStates.get(e);if(t!==void 0&&this.hasAllEndpoints&&t.isPending&&this.entities.every(s=>s.hasReachedState(e))&&(!this.checkedSyncStates.has(e)||this.entities.every(s=>s.checkedStates.includes(e)))){for(const s of this.entities)s.syncingState===e&&((i=s.syncPromise)==null||i.resolve(),s.syncPromise=null,s.syncingState=null);t.resolve()}}recheckSyncStates(){this.syncStates.forEach((e,t)=>{!e.isPending&&!this.entities.every(i=>i.hasReachedState(t))&&this.addSyncState(t)})}getClearAllEndpoints(e){const t=this.router;let i=[];return this.instructions.some(s=>(s.scope??e)===e&&s.isClearAll(t))&&(i=e.enabledChildren.filter(s=>!s.endpoint.isEmpty).map(s=>s.endpoint),this.instructions=this.instructions.filter(s=>!((s.scope??e)===e&&s.isClearAll(t)))),i}createUnknownRouteError(e){const t=this.router.configuration.options,i=ce.stringify(this.router,e);return e[0].route!=null?t.useConfiguredRoutes?new Error(`No matching configured route found for '${i}'.`):new Error(`Can not match '${i}' since the router is configured to not use configured routes.`):t.useConfiguredRoutes&&t.useDirectRouting?new Error(`No matching configured route or component found for '${i}'.`):t.useConfiguredRoutes?new Error(`No matching configured route found for '${i}'.`):new Error(`No matching route/component found for '${i}'.`)}}class ts{constructor(e,t,i){this.hook=e,this.id=i,this.type="beforeNavigation",this.includeTargets=[],this.excludeTargets=[],t.type!==void 0&&(this.type=t.type);for(const s of t.include??[])this.includeTargets.push(new Vy(s));for(const s of t.exclude??[])this.excludeTargets.push(new Vy(s))}static add(e,t){const i=new ts(e,t??{},++this.lastIdentity);return this.hooks[i.type].push(i),this.lastIdentity}static remove(e){for(const t in this.hooks)if(Object.prototype.hasOwnProperty.call(this.hooks,t)){const i=this.hooks[t].findIndex(s=>s.id===e);i>=0&&this.hooks[t].splice(i,1)}}static removeAll(){for(const e in this.hooks)this.hooks[e]=[]}static async invokeBeforeNavigation(e,t){return this.invoke("beforeNavigation",t,e)}static async invokeTransformFromUrl(e,t){return this.invoke("transformFromUrl",t,e)}static async invokeTransformToUrl(e,t){return this.invoke("transformToUrl",t,e)}static async invokeTransformTitle(e,t){return this.invoke("transformTitle",t,e)}static async invoke(e,t,i){let s=i;for(const r of this.hooks[e])if(!r.wantsMatch||r.matches(i))if(s=await r.invoke(t,i),typeof s=="boolean"){if(!s)return!1}else i=s;return s}get wantsMatch(){return this.includeTargets.length>0||this.excludeTargets.length>0}matches(e){return!(this.includeTargets.length&&!this.includeTargets.some(t=>t.matches(e))||this.excludeTargets.length&&this.excludeTargets.some(t=>t.matches(e)))}invoke(e,t){return this.hook(t,e)}}ts.hooks={beforeNavigation:[],transformFromUrl:[],transformToUrl:[],transformTitle:[]};ts.lastIdentity=0;class Vy{constructor(e){if(this.componentType=null,this.componentName=null,this.viewport=null,this.viewportName=null,typeof e=="string")this.componentName=e;else if(Je.isType(e))this.componentType=e,this.componentName=Je.getName(e);else{const t=e;t.component!=null&&(this.componentType=Je.isType(t.component)?Je.getType(t.component):null,this.componentName=Je.getName(t.component)),t.viewport!=null&&(this.viewport=yo.isInstance(t.viewport)?t.viewport:null,this.viewportName=yo.getName(t.viewport))}}matches(e){const t=e.slice();t.length||t.push(ce.create(""));for(const i of t)if(this.componentName!==null&&this.componentName===i.component.name||this.componentType!==null&&this.componentType===i.component.type||this.viewportName!==null&&this.viewportName===i.endpoint.name||this.viewport!==null&&this.viewport===i.endpoint.instance)return!0;return!1}}class xa{static async getTitle(e,t,i){let s=await ts.invokeTransformTitle(e,t);if(typeof s!="string"){const r=xa.stringifyTitles(s,t,i);s=i.appTitle,s=s.replace(/\${componentTitles}/g,r),s=s.replace(/\${appTitleSeparator}/g,r!==""?i.appTitleSeparator:"")}return s=await ts.invokeTransformTitle(s,t),s}static stringifyTitles(e,t,i){return e.map(r=>xa.stringifyTitle(r,t,i)).filter(r=>((r==null?void 0:r.length)??0)>0).join(" + ")}static stringifyTitle(e,t,i){const s=e.nextScopeInstructions;let r=xa.resolveTitle(e,t,i);if(Array.isArray(s)&&s.length>0){let o=xa.stringifyTitles(s,t,i);o.length>0&&(s.length!==1&&(o=`[ ${o} ]`),r.length>0?r=i.componentTitleOrder==="top-down"?r+i.componentTitleSeparator+o:o+i.componentTitleSeparator+r:r=o)}return r}static resolveTitle(e,t,i){let s=e.getTitle(t);return i.transformTitle!=null&&(s=i.transformTitle(s,e,t)),s}}const jn=wi.createInterface("IRouter",n=>n.singleton(hn));class hn{constructor(){this.rootScope=null,this.activeComponents=[],this.appendedInstructions=[],this.isActive=!1,this.coordinators=[],this.loadedFirst=!1,this._isProcessingNav=!1,this._logger=$(Tr),this.container=$(Bs),this.ea=$(Mr),this.navigator=$(xG),this.viewer=$(By),this.store=$(By),this.configuration=$(Eu),this.handleNavigatorNavigateEvent=e=>{this._doHandleNavigatorNavigateEvent(e)},this.handleNavigatorStateChangeEvent=e=>{var t;if(((t=e.state)==null?void 0:t.navigationIndex)!=null){const i=fi.create(e.state.navigations[e.state.navigationIndex]);i.instruction=e.viewerState.instruction,i.fromBrowser=!0,this.navigator.navigate(i).catch(s=>{throw s})}else this.load(e.viewerState.instruction,{fromBrowser:!0}).catch(i=>{throw i})},this.processNavigation=async e=>{this.loadedFirst=!0;const t=this.configuration.options,i=Hc.create(this,e,{syncStates:this.configuration.options.navigationSyncStates});this.coordinators.push(i),i.appendInstructions(this.appendedInstructions.splice(0)),this.ea.publish(Vc.eventName,Vc.create(e));let s;if(e.useFullStateInstruction){s=e.fullStateInstruction;let a={};({instructions:s,options:a}=this._extractFragmentAndQuery(s,a)),e.fragment=a.fragment??e.fragment,e.query=a.query??e.query,e.parameters=a.parameters??e.parameters}else s=typeof e.instruction=="string"?await ts.invokeTransformFromUrl(e.instruction,i.navigation):e.instruction;const r=t.basePath;r!==null&&typeof s=="string"&&s.startsWith(r)&&!t.useUrlFragmentHash&&(s=s.slice(r.length)),s==="/"&&(s=""),typeof s=="string"&&(s===""?(s=[new ce("")],s[0].default=!0):s==="-"?(s=[new ce("-"),new ce("")],s[1].default=!0):s=ce.parse(this,s)),e.scope??(e.scope=this.rootScope.scope),i.appendInstructions(s),t.completeStateNavigations&&$c(s,!1).map(a=>a.scope).forEach(a=>i.ensureClearStateInstruction(a));let o=100;do o--||this.unresolvedInstructionsError(e,i.instructions),await i.processInstructions();while(i.instructions.length>0);return Ce.run("processNavigation",()=>(i.closed=!0,i.finalEndpoint(),i.waitForSyncState("completed")),()=>(i.finalize(),this.updateNavigation(e)),()=>{e.navigation.new&&!e.navigation.first&&!e.repeating&&i.changedEndpoints.every(a=>a.options.noHistory)&&(e.untracked=!0)},async()=>{var a;for(;this.coordinators.length>0&&this.coordinators[0].completed;){const l=this.coordinators.shift();await this.navigator.finalize(l.navigation,!1),this.ea.publish(Wc.eventName,Wc.create(l.navigation)),this.ea.publish(Ds.eventName,Ds.create(l.navigation)),(a=l.navigation.process)==null||a.resolve(!0)}})}}get isNavigating(){return this.coordinators.length>0}get hasOpenNavigation(){return this.coordinators.filter(e=>!e.closed).length>0}get isRestrictedNavigation(){const e=this.configuration.options.navigationSyncStates;return e.includes("guardedLoad")||e.includes("unloaded")||e.includes("loaded")||e.includes("guarded")||e.includes("routed")}get statefulHistory(){return this.configuration.options.statefulHistoryLength!==void 0&&this.configuration.options.statefulHistoryLength>0}start(){if(this.isActive)throw Lt(2e3);this.isActive=!0;const e=this.container.get(Pc);this.rootScope=new Gn(this,"rootScope",e.controller.viewModel,null,!0,e.config.component);const t=this.configuration.options;if(t.basePath===null){const i=new URL(e.host.baseURI);t.basePath=i.pathname}t.basePath.endsWith("/")&&(t.basePath=t.basePath.slice(0,-1)),this.navigator.start({store:this.store,viewer:this.viewer,statefulHistoryLength:this.configuration.options.statefulHistoryLength}),this._navigatorStateChangeEventSubscription=this.ea.subscribe(Fo.eventName,this.handleNavigatorStateChangeEvent),this._navigatorNavigateEventSubscription=this.ea.subscribe(Mo.eventName,this.handleNavigatorNavigateEvent),this.viewer.start({useUrlFragmentHash:this.configuration.options.useUrlFragmentHash}),this.ea.publish(Ja.eventName,Ja.create())}stop(){if(!this.isActive)throw Lt(2001);this.ea.publish(Bc.eventName,Bc.create()),this.navigator.stop(),this.viewer.stop(),this._navigatorStateChangeEventSubscription.dispose(),this._navigatorNavigateEventSubscription.dispose()}async initialLoad(){const{instruction:e,hash:t}=this.viewer.viewerState,i=this.load(e,{fragment:t,replacing:!0,fromBrowser:!1});return this.loadedFirst=!0,i}async _doHandleNavigatorNavigateEvent(e){var t,i;if(this._isProcessingNav){this._pendingNavigation&&((t=this._pendingNavigation.navigation.process)==null||t.resolve(!1)),this._pendingNavigation=e;return}this._isProcessingNav=!0;try{await this.processNavigation(e.navigation)}catch(s){(i=e.navigation.process)==null||i.reject(s)}finally{this._isProcessingNav=!1}if(this._pendingNavigation){const s=this._pendingNavigation;this._pendingNavigation=void 0,await this._doHandleNavigatorNavigateEvent(s)}}get isProcessingNav(){return this._isProcessingNav||this._pendingNavigation!=null}getEndpoint(e,t){return this.allEndpoints(e).find(i=>i.name===t)??null}allEndpoints(e,t=!1){return this.rootScope.scope.allScopes(t).filter(i=>e===null||i.type===e).map(i=>i.endpoint)}addEndpoint(e,...t){throw Lt(99,"addEndPoint")}connectEndpoint(e,t,i,s,r){const o=i.container,l=(o.has(hn.closestEndpointKey,!0)?o.get(hn.closestEndpointKey):this.rootScope).connectedScope;return e===null&&(e=l.addEndpoint(t,s,i,r),Ji.instance(hn.closestEndpointKey,e).register(o)),e}disconnectEndpoint(e,t,i){if(!t.connectedScope.parent.removeEndpoint(e,t,i))throw Lt(2002,t.name)}async load(e,t){({instructions:e,options:t}=this._extractFragmentAndQuery(e,t??{}));let i=null;({instructions:e,scope:i}=this.applyLoadOptions(e,t));const s=t.append??!1;if(s!==!1){if(s instanceof Hc){if(!s.closed)return e=ce.from(this,e),this.appendInstructions(e,i,s),Promise.resolve()}else if(!this.loadedFirst||this.hasOpenNavigation)return e=ce.from(this,e),this.appendInstructions(e,i),Promise.resolve()}const r=fi.create({instruction:e,fullStateInstruction:"",scope:i,title:t.title,data:t.data,query:t.query,fragment:t.fragment,parameters:t.parameters,replacing:(t.replacing??!1)||t.replace,repeating:(t.append??!1)!==!1,fromBrowser:t.fromBrowser??!1,origin:t.origin,completed:!1});return this.navigator.navigate(r)}applyLoadOptions(e,t,i=!0){t=t??{},"origin"in t&&!("context"in t)&&(t.context=t.origin);const{scope:s,instruction:r}=Nr.for(t.context??null,typeof e=="string"?e:void 0);if(typeof e=="string")if(i)e=r;else{e=ce.from(this,r);for(const o of e)o.scope===null&&(o.scope=s)}else{e=ce.from(this,e);for(const o of e)o.scope===null&&(o.scope=s)}return{instructions:e,scope:s}}refresh(){return this.navigator.refresh()}back(){return this.navigator.go(-1)}forward(){return this.navigator.go(1)}go(e){return this.navigator.go(e)}checkActive(e,t){if(typeof e=="string")throw Lt(2003,e);t=t??{},{instructions:e}=this.applyLoadOptions(e,t),e.forEach(s=>s.scope??(s.scope=this.rootScope.scope));const i=$c(e.map(s=>s.scope));for(const s of i){const r=s.matchScope(e,!1),o=s.matchScope(this.activeComponents,!0);if(!ce.contains(this,o,r,!0))return!1}return!0}unresolvedInstructionsError(e,t){throw this.ea.publish(Uc.eventName,Uc.create(e)),this.ea.publish(Ds.eventName,Ds.create(e)),MG(t,this._logger)}cancelNavigation(e,t){t.cancel(),this.ea.publish(zc.eventName,zc.create(e)),this.ea.publish(Ds.eventName,Ds.create(e))}appendInstructions(e,t=null,i=null){t===null&&(t=this.rootScope.scope);for(const s of e)s.scope===null&&(s.scope=t);if(i===null){for(let s=this.coordinators.length-1;s>=0;s--)if(!this.coordinators[s].closed){i=this.coordinators[s];break}}if(i===null)if(!this.loadedFirst)this.appendedInstructions.push(...e);else throw Lt(2004);i==null||i.appendInstructions(e)}async updateNavigation(e){var h,d,u;this.rootScope.scope.reparentRoutingInstructions();const t=this.rootScope.scope.getRoutingInstructions(e.timestamp);let{matchedInstructions:i}=this.rootScope.scope.matchEndpoints(t,[],!0),s=100;for(;i.length>0;){if(s--===0)throw Lt(2005);i=i.map(p=>{const{matchedInstructions:f}=p.endpoint.instance.scope.matchEndpoints(p.nextScopeInstructions??[],[],!0);return f}).flat()}e.timestamp>=(((h=this.activeNavigation)==null?void 0:h.timestamp)??0)&&(this.activeNavigation=e,this.activeComponents=t);let r=await ts.invokeTransformToUrl(t,e);if(typeof r!="string"&&(r=ce.stringify(this,r,{endpointContext:!0})),r=await ts.invokeTransformToUrl(r,e),e.query==null&&e.parameters!=null){const p=new URLSearchParams;for(let[f,g]of Object.entries(e.parameters)){f=encodeURIComponent(f),Array.isArray(g)||(g=[g]);for(const m of g)p.append(f,encodeURIComponent(m))}e.query=p.toString()}let o=`${this.configuration.options.basePath}/`;(o===null||r!==""&&r[0]==="/"||this.configuration.options.useUrlFragmentHash)&&(o="");const a=(((d=e.query)==null?void 0:d.length)??0)>0?"?"+e.query:"",l=(((u=e.fragment)==null?void 0:u.length)??0)>0?"#"+e.fragment:"";e.path=o+r+a+l;const c=e.path.slice(o.length);if(e.fullStateInstruction=ce.clear(this)+(c.length>0?pi.for(this).sibling:"")+c,(e.title??null)===null){const p=await xa.getTitle(t,e,this.configuration.options.title);p!==null&&(e.title=p)}return Promise.resolve()}_extractFragmentAndQuery(e,t){if(t={...t},typeof e=="string"&&t.fragment==null){const[i,s]=e.split("#");e=i,t.fragment=s}if(typeof e=="string"&&t.query==null){const[i,s]=e.split("?");e=i,t.query=s}return typeof t.parameters=="string"&&t.query==null&&(t.query=t.parameters,t.parameters=void 0),typeof t.query=="string"&&t.query.length>0&&(t.parameters??(t.parameters={}),new URLSearchParams(t.query).forEach((s,r)=>{r=decodeURIComponent(r),s=decodeURIComponent(s),r in t.parameters?(Array.isArray(t.parameters[r])||(t.parameters[r]=[t.parameters[r]]),t.parameters[r].push(s)):t.parameters[r]=s})),{instructions:e,options:t}}}hn.closestEndpointKey=mm.annotation.keyFor("closest-endpoint");function MG(n,e){const t=Lt(2006,n.length);return t.remainingInstructions=n,e.warn(t,t.remainingInstructions),console.log(t,t.remainingInstructions),t}class NI{constructor(e){this.eventName=e}}class Ja extends NI{static create(){return new Ja(this.eventName)}}Ja.eventName="au:router:router-start";class Bc extends NI{static create(){return new Bc(this.eventName)}}Bc.eventName="au:router:router-stop";class ch{constructor(e,t){this.eventName=e,this.navigation=t}}class Vc extends ch{static create(e){return new Vc(this.eventName,e)}}Vc.eventName="au:router:navigation-start";class Ds extends ch{static create(e){return new Ds(this.eventName,e)}}Ds.eventName="au:router:navigation-end";class zc extends ch{static create(e){return new zc(this.eventName,e)}}zc.eventName="au:router:navigation-cancel";class Wc extends ch{static create(e){return new Wc(this.eventName,e)}}Wc.eventName="au:router:navigation-complete";class Uc extends ch{static create(e){return new Uc(this.eventName,e)}}Uc.eventName="au:router:navigation-error";const MI=wi.createInterface("ILinkHandler",n=>n.singleton(FG));class FG{constructor(){this.window=$(Yu),this.router=$(jn)}handleEvent(e){this.handleClick(e)}handleClick(e){if(e.button!==0||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;const t=e.currentTarget;if(t.hasAttribute("external"))return;const i=t.getAttribute("target")??"";if(i.length>0&&i!==this.window.name&&i!=="_self")return;const s=nr.for(t,"load"),r=s!==void 0?s.viewModel.value:null,o=this.router.configuration.options.useHref&&t.hasAttribute("href")?t.getAttribute("href"):null;if((r===null||r.length===0)&&(o===null||o.length===0))return;e.preventDefault();let a=r??o??"";typeof a=="string"&&a.startsWith("#")&&(a=a.slice(1),a.startsWith("/")||(a=`/${a}`)),this.router.load(a,{origin:t}).catch(l=>{throw l})}}function Ks(n,e,t,i,s=!1){if(s)return e==="";if(t)return e;const r=i.getAttribute(n)??"";return r.length>0?r:e}function zy(n,e){if(!n.isActive)return new Promise(t=>{const i=e.subscribe(Ja.eventName,()=>{t(),i.dispose()})})}function FI(n,e,t,i){var a,l;let s=(l=(a=nr.for(t,"considered-active"))==null?void 0:a.viewModel)==null?void 0:l.value;s===void 0&&(s=i);const r=n.applyLoadOptions(s,{context:e}),o=ce.from(n,r.instructions);for(const c of o)c.scope===null&&(c.scope=r.scope);return o}function $I(n){let e=n.parentElement;for(;e!=null;){if(e.tagName==="AU-VIEWPORT"){e=null;break}if(e.hasAttribute("load-active"))break;e=e.parentElement}return e??(e=n),e}const cv=Oi.toView,HI=Qe.createInjectable();class BI{constructor(){this.name="default",this.usedBy="",this.default="",this.fallback="",this.fallbackAction="",this.noScope=!1,this.noLink=!1,this.noTitle=!1,this.noHistory=!1,this.stateful=!1,this.endpoint=null,this.pendingChildren=[],this.pendingPromise=null,this.isBound=!1,this.router=$(jn),this.element=$(Vr),this.container=$(Bs),this.ea=$(Mr),this.parentViewport=$(HI),this.instruction=$(Vo)}hydrated(e){this.controller=e,this.instruction.props.filter(i=>i.to==="default").length>0&&this.parentViewport!=null&&(this.parentViewport.pendingChildren.push(this),this.parentViewport.pendingPromise===null&&(this.parentViewport.pendingPromise=new Zt("hydrated: ViewportCustomElement"))),Ce.run(null,()=>zy(this.router,this.ea),()=>{this.router.isRestrictedNavigation&&this.connect()})}binding(e,t){return this.isBound=!0,Ce.run("binding",()=>zy(this.router,this.ea),()=>{this.router.isRestrictedNavigation||this.connect()},()=>{var i;((i=this.endpoint)==null?void 0:i.activeResolve)!=null&&(this.endpoint.activeResolve(),this.endpoint.activeResolve=null)},()=>{var i;if(this.endpoint!==null&&this.endpoint.getNextContent()===null)return(i=this.endpoint.activate(null,e,this.controller,void 0))==null?void 0:i.asValue})}detaching(e,t){if(this.endpoint!==null)return this.isBound=!1,this.endpoint.deactivate(null,e,t)}unbinding(e,t){if(this.endpoint!==null)return this.disconnect(null)}dispose(){var e;(e=this.endpoint)==null||e.dispose(),this.endpoint=null}connect(){const{isBound:e,element:t}=this,i=Ks("name",this.name,e,t),s={};s.scope=!Ks("no-scope",this.noScope,!1,t,!0),s.usedBy=Ks("used-by",this.usedBy,e,t),s.default=Ks("default",this.default,e,t),s.fallback=Ks("fallback",this.fallback,e,t),s.fallbackAction=Ks("fallback-action",this.fallbackAction,e,t),s.noLink=Ks("no-link",this.noLink,e,t,!0),s.noTitle=Ks("no-title",this.noTitle,e,t,!0),s.noHistory=Ks("no-history",this.noHistory,e,t,!0),s.stateful=Ks("stateful",this.stateful,e,t,!0),Object.keys(s).forEach(o=>{s[o]===void 0&&delete s[o]}),this.endpoint=this.router.connectEndpoint(this.endpoint,"Viewport",this,i,s);const r=this.parentViewport;r!=null&&(Xt(r.pendingChildren,o=>o===this),r.pendingChildren.length===0&&r.pendingPromise!==null&&(r.pendingPromise.resolve(),r.pendingPromise=null))}disconnect(e){this.endpoint!==null&&this.router.disconnectEndpoint(e,this.endpoint,this)}setActivity(e,t){const i=this.router.configuration.options.indicators.viewportNavigating;if(typeof e=="string")this.element.classList.toggle(e,t);else for(const s in e)this.element.classList.toggle(`${i}-${s}`,t&&e[s])}}Qe.define({name:"au-viewport",injectable:HI,bindables:["name","usedBy","default","fallback","fallbackAction","noScope","noLink","noTitle","noHistory","stateful"]},BI);const VI=Qe.createInjectable();class zI{constructor(){this.name="default",this.catches="",this.collection=!1,this.source=null,this.viewportScope=null,this.isBound=!1,this.router=$(jn),this.element=$(Vr),this.container=$(Bs),this.parent=$(VI),this.parentController=$(Jc)}hydrated(e){this.controller=e}bound(e,t){this.isBound=!0,this.$controller.scope=this.parentController.scope,this.connect(),this.viewportScope!==null&&this.viewportScope.binding()}unbinding(e,t){return this.viewportScope!==null&&this.viewportScope.unbinding(),Promise.resolve()}connect(){if(this.router.rootScope===null)return;const e=this.getAttribute("name",this.name),t={};let i=this.getAttribute("catches",this.catches);i!==void 0&&(t.catches=i),i=this.getAttribute("collection",this.collection,!0),i!==void 0&&(t.collection=i),t.source=this.source??null,this.viewportScope=this.router.connectEndpoint(this.viewportScope,"ViewportScope",this,e,t)}disconnect(){this.viewportScope&&this.router.disconnectEndpoint(null,this.viewportScope,this),this.viewportScope=null}getAttribute(e,t,i=!1){if(this.isBound)return t;if(this.element.hasAttribute(e)){if(i)return!0;if(t=this.element.getAttribute(e),t.length>0)return t}}}Qe.define({name:"au-viewport-scope",template:"<template></template>",containerless:!1,injectable:VI,bindables:["name","catches","collection","source"]},zI);class hv{constructor(){this._separateProperties=!1,this.hasHref=null,this.element=$(Vr),this.router=$(jn),this.linkHandler=$(MI),this.ea=$(Mr),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=e=>{this.updateActive()}}binding(){this.value==null&&(this._separateProperties=!0),this.element.addEventListener("click",this.linkHandler),this.updateValue(),this.updateActive(),this.routerNavigationSubscription=this.ea.subscribe(Ds.eventName,this.navigationEndHandler)}unbinding(){this.element.removeEventListener("click",this.linkHandler),this.routerNavigationSubscription.dispose()}valueChanged(e){this.updateValue(),this.updateActive()}updateValue(){if(this._separateProperties&&(this.value={component:this.component,parameters:this.parameters,viewport:this.viewport,id:this.id}),this.hasHref===null&&(this.hasHref=this.element.hasAttribute("href")),!this.hasHref){let e=this.value;if(typeof e!="string"){const r=ce.from(this.router,e).shift(),o=this._findRoute(e);o.foundConfiguration&&(r.route=o.matching),e=ce.stringify(this.router,[r])}const{scope:t,instruction:i}=Nr.for(this.element,e);e=`${(t==null?void 0:t.path)??""}${i??""}`,this.router.configuration.options.useUrlFragmentHash&&!e.startsWith("#")&&(e=`#/${e}`),this.element.setAttribute("href",e)}}async updateActive(){const e=nr.for(this.element,"load").parent,t=typeof this.value=="string"?{id:this.value,path:this.value}:this.value,i=this._findRoute(t),s=i.foundConfiguration?i.instructions:FI(this.router,e,this.element,this.value);$I(this.element).classList.toggle(this.activeClass,this.router.checkActive(s,{context:e}))}_findRoute(e){if(typeof e=="string")return new Un;const t=Nr.for(this.element).scope??this.router.rootScope.scope;if(e.id!=null)return t.findMatchingRoute(e.id,e.parameters??{});const i=e.path;return i!=null?t.findMatchingRoute(i,e.parameters??{}):new Un}}nr.define({name:"load",bindables:{value:{mode:cv},component:{},parameters:{},viewport:{},id:{}}},hv);class WI{constructor(){this.element=$(Vr),this.router=$(jn),this.linkHandler=$(MI),this.ea=$(Mr),this.activeClass=this.router.configuration.options.indicators.loadActive,this.navigationEndHandler=e=>{this.updateActive()}}binding(){this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")&&(this.element.addEventListener("click",this.linkHandler),this.routerNavigationSubscription=this.ea.subscribe(Ds.eventName,this.navigationEndHandler)),this.updateValue(),this.updateActive()}unbinding(){var e;this.element.removeEventListener("click",this.linkHandler),(e=this.routerNavigationSubscription)==null||e.dispose()}valueChanged(){this.updateValue(),this.updateActive()}updateValue(){this.element.setAttribute("href",this.value)}updateActive(){if(this.router.configuration.options.useHref&&!this.hasLoad()&&!this.element.hasAttribute("external")){const e=nr.for(this.element,"href").parent,t=FI(this.router,e,this.element,this.value);$I(this.element).classList.toggle(this.activeClass,this.router.checkActive(t,{context:e}))}}hasLoad(){const t=this.$controller.parent.children;return(t==null?void 0:t.some(i=>i.vmKind==="customAttribute"&&i.viewModel instanceof hv))??!1}}WI.$au={type:"custom-attribute",name:"href",noMultiBindings:!0,bindables:{value:{mode:cv}}};class UI{}nr.define({name:"considered-active",bindables:{value:{mode:cv}}},UI);const Eu=wi.createInterface("IRouterConfiguration",n=>n.singleton(Ri)),$G=jn,HG=[$G],BG=[BI,zI,hv,WI,UI];class Ri{static register(e){const t=e.get(Eu);return t.options=Ri.options,t.options.setRouterConfiguration(t),Ri.options=tn.create(),e.register(...HG,...BG,rc.activating(jn,Ri.configurationCall),rc.activated(jn,i=>i.initialLoad()),rc.deactivated(jn,i=>i.stop()))}static customize(e){return e===void 0?(Ri.options=tn.create(),Ri.configurationCall=t=>{t.start()}):e instanceof Function?Ri.configurationCall=e:(Ri.options=tn.create(),Ri.options.apply(e)),Ri}static createContainer(){return this.register(wi.createContainer())}static for(e){return e instanceof hn?e.configuration:e.get(Eu)}apply(e,t=!1){t&&(this.options=tn.create()),this.options.apply(e)}addHook(e,t){return ts.add(e,t)}removeHook(e){return ts.remove(e)}removeAllHooks(){return ts.removeAll()}}Ri.options=tn.create();Ri.configurationCall=n=>{n.start()};const VG="modulepreload",zG=function(n,e){return new URL(n,e).href},Wy={},Te=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=zG(c,i),c in Wy)return;Wy[c]=!0;const h=c.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(!!i)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===c&&(!h||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":VG,h||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((f,g)=>{p.addEventListener("load",f),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},GI="my-app",am=`<div>
  <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand ms-2" href="https://github.com/ghiscoding/aurelia-slickgrid">
      <i class="mdi mdi-github"></i>
      <span>Aurelia-Slickgrid</span>
    </a>
    <img src.bind="aureliaLogo" class="logo" height="35" alt="image">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-target="#navbarContent"
            aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="github-button-container">
      <a href="https://github.com/ghiscoding/aurelia-slickgrid">
        <img src="https://img.shields.io/github/stars/ghiscoding/aurelia-slickgrid?style=social">
      </a>
    </div>

    <div class="navbar-collapse collapse justify-content-end me-2" id="navbarContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item">
          <a class="nav-link" href="#/home">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://ghiscoding.gitbook.io/aurelia-slickgrid/" target="_blank">
            Documentation
          </a>
        </li>
        <li class="loader" if.bind="router.isNavigating">
          <i class="mdi mdi-sync mdi-spin mdi-20px"></i>
        </li>
      </ul>
    </div>
  </nav>

  <div class="panel-wm">
    <section id="panel-left" class="panel-wm-left au-animate">
      <ul class="well nav nav-pills nav-stacked">
        <li class="nav-item fw-bold nav-docs">
          <a class="nav-link" href="https://ghiscoding.gitbook.io/aurelia-slickgrid/" target="_blank">
            📘 Documentation
          </a>
        </li>
        <li repeat.for="r of routes" class="nav-item">
          <a if.bind="r.path !== 'home'" load.bind="r.path" class="nav-link \${r.isActive ? 'active' : ''}">\${r.title}</a>
        </li>
      </ul>
    </section>
    <section class="panel-wm-content">
      <div id="demo-container">
        <au-viewport></au-viewport>
      </div>
    </section>
  </div>
</div>
`,jI=[],KI={};let Vf;function WG(n){Vf||(Vf=Qe.define({name:GI,template:am,dependencies:jI,bindables:KI})),n.register(Vf)}const UG=Object.freeze(Object.defineProperty({__proto__:null,bindables:KI,default:am,dependencies:jI,name:GI,register:WG,template:am},Symbol.toStringTag,{value:"Module"})),GG=""+new URL("aurelia-logo-9YSzF-gF.png",import.meta.url).href;var jG=Object.create,dv=Object.defineProperty,KG=Object.getOwnPropertyDescriptor,YG=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),YI=n=>{throw TypeError(n)},qI=(n,e,t)=>e in n?dv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qG=(n,e)=>dv(n,"name",{value:e,configurable:!0}),XG=n=>[,,,jG(null)],QG=["class","method","getter","setter","accessor","field","value","get","set"],XI=n=>n!==void 0&&typeof n!="function"?YI("Function expected"):n,ZG=(n,e,t,i,s)=>({kind:QG[n],name:e,metadata:i,addInitializer:r=>t._?YI("Already initialized"):s.push(XI(r||null))}),JG=(n,e)=>qI(e,YG("metadata"),n[3]),e2=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},t2=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&KG(s,t));qG(s,t);for(var f=i.length-1;f>=0;f--)l=ZG(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,XI(o)&&(s=o);return JG(n,s),p&&dv(s,t,p),h?c^4?r:p:s},lm=(n,e,t)=>qI(n,typeof e!="symbol"?e+"":e,t),QI,uv;QI=[Tn(UG)];let Gc=class ZI{constructor(){lm(this,"aureliaLogo",GG),lm(this,"routes",ZI.routes)}attached(){this.addGitHubStarsLogo(),window.setTimeout(()=>{const e=document.querySelector(".nav-link.active");e==null||e.scrollIntoView({block:"nearest"})},45)}addGitHubStarsLogo(){if(decodeURIComponent(document.cookie)!=="serve-mode=cypress"){const t=document.createElement("a");t.href="https://github.com/ghiscoding/aurelia-slickgrid";const i=document.createElement("img");i.src="https://img.shields.io/github/stars/ghiscoding/aurelia-slickgrid?style=social";const s=document.querySelector(".github-button-container");s&&!s.querySelector("a")&&(t.appendChild(i),s.appendChild(t))}}};uv=XG();Gc=t2(uv,0,"MyApp",QI,Gc);lm(Gc,"routes",[{path:"",redirectTo:"example1"},{path:"example1",component:()=>Te(()=>import("./example1-bn8f_Y5k.js"),[],import.meta.url),title:"1- Basic Grid / 2 Grids"},{path:"example2",component:()=>Te(()=>import("./example2-Cc9jK5Wh.js"),[],import.meta.url),title:"2- Formatters"},{path:"example3",component:()=>Te(()=>import("./example3-DF9rGx7Q.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url),title:"3- Editors / Delete"},{path:"example4",component:()=>Te(()=>import("./example4-CHIA5W77.js"),__vite__mapDeps([5,1,6,7,3]),import.meta.url),title:"4- Client Side Sort/Filter"},{path:"example5",component:()=>Te(()=>import("./example5-C9ZDSkW7.js"),__vite__mapDeps([8,1,9,10]),import.meta.url),title:"5- Backend OData Service"},{path:"example6",component:()=>Te(()=>import("./example6-BFSUp_kE.js"),__vite__mapDeps([11,12,13]),import.meta.url),title:"6- Backend GraphQL Service"},{path:"example7",component:()=>Te(()=>import("./example7-BVE35PqP.js"),__vite__mapDeps([14,15]),import.meta.url),title:"7- Header Button Plugin"},{path:"example8",component:()=>Te(()=>import("./example8-DeQYYAAK.js"),__vite__mapDeps([16,17]),import.meta.url),title:"8- Header Menu Plugin"},{path:"example9",component:()=>Te(()=>import("./example9-DRLSKJy8.js"),__vite__mapDeps([18,19]),import.meta.url),title:"9- Grid Menu Control"},{path:"example10",component:()=>Te(()=>import("./example10-D1HRtlR1.js"),__vite__mapDeps([20,21]),import.meta.url),title:"10- Row Selection / 2 Grids"},{path:"example11",component:()=>Te(()=>import("./example11-GDX8aTm3.js"),__vite__mapDeps([22,2,23]),import.meta.url),title:"11- Add/Update Grid Item"},{path:"example12",component:()=>Te(()=>import("./example12-oe-_MCkE.js"),__vite__mapDeps([24,6,7,25]),import.meta.url),title:"12- Localization (i18n)"},{path:"example13",component:()=>Te(()=>import("./example13-BCtLsCY2.js"),__vite__mapDeps([26,6,7,25,27]),import.meta.url),title:"13- Grouping & Aggregators"},{path:"example14",component:()=>Te(()=>import("./example14-Buj3ezde.js"),__vite__mapDeps([28,6,7,29]),import.meta.url),title:"14- Column Span & Header Grouping"},{path:"example15",component:()=>Te(()=>import("./example15-Bcr15GrA.js"),[],import.meta.url),title:"15- Grid State & Local Storage"},{path:"example16",component:()=>Te(()=>import("./example16-B_7_LLUd.js"),[],import.meta.url),title:"16- Row Move Plugin"},{path:"example17",component:()=>Te(()=>import("./example17-Bqc2PfKh.js"),__vite__mapDeps([30,6,7]),import.meta.url),title:"17- Grid from CSV"},{path:"example18",component:()=>Te(()=>import("./example18-g9RvbmJy.js"),__vite__mapDeps([31,6,7,25,27]),import.meta.url),title:"18- Draggable Grouping"},{path:"example19",component:()=>Te(()=>import("./example19-BlqpMFPz.js"),__vite__mapDeps([32,2]),import.meta.url),title:"19- Row Detail View"},{path:"example20",component:()=>Te(()=>import("./example20-B5bP4-2G.js"),__vite__mapDeps([33,2,29]),import.meta.url),title:"20- Pinned Columns/Rows"},{path:"example21",component:()=>Te(()=>import("./example21-kd5VHoge.js"),__vite__mapDeps([34,35]),import.meta.url),title:"21- Grid AutoHeight (full height)"},{path:"example22",component:()=>Te(()=>import("./example22-Dx691lyQ.js"),__vite__mapDeps([36,1,10,37]),import.meta.url),title:"22- with Bootstrap Tabs"},{path:"example23",component:()=>Te(()=>import("./example23-9BwcWKWJ.js"),__vite__mapDeps([38,12,39,6,7,3]),import.meta.url),title:"23- Filter by Range of Values"},{path:"example24",component:()=>Te(()=>import("./example24-Zu7GHk1V.js"),__vite__mapDeps([40,6,7,41]),import.meta.url),title:"24- Cell & Context Menu"},{path:"example25",component:()=>Te(()=>import("./example25-C1XAQN0a.js"),__vite__mapDeps([42,1,13,43]),import.meta.url),title:"25- GraphQL without Pagination"},{path:"example26",component:()=>Te(()=>import("./example26-DuMfqDKd.js"),__vite__mapDeps([44,2]),import.meta.url),title:"26- Use of Aurelia Components"},{path:"example27",component:()=>Te(()=>import("./example27-B4Aefg3V.js"),__vite__mapDeps([45,6,7,46]),import.meta.url),title:"27- Tree Data (Parent/Child)"},{path:"example28",component:()=>Te(()=>import("./example28-DvmdS_Fd.js"),__vite__mapDeps([47,6,7,27,48]),import.meta.url),title:"28- Tree Data (Hierarchical set)"},{path:"example29",component:()=>Te(()=>import("./example29-BbPxaERF.js"),[],import.meta.url),title:"29- Grid with header and footer slots"},{path:"example30",component:()=>Te(()=>import("./example30-Aj2ZYj9y.js"),__vite__mapDeps([49,1,6,7,39,2,4,50]),import.meta.url),title:"30- Composite Editor Modal"},{path:"example31",component:()=>Te(()=>import("./example31-DXY0Sq3q.js"),__vite__mapDeps([51,9,2,1,10]),import.meta.url),title:"31- Backend OData with RxJS"},{path:"example32",component:()=>Te(()=>import("./example32-jc9iYEcO.js"),__vite__mapDeps([52,1,6,7,2,4,53]),import.meta.url),title:"32- Columns Resize by Content"},{path:"example33",component:()=>Te(()=>import("./example33-DUSjN4YK.js"),__vite__mapDeps([54,39,6,7,2,55]),import.meta.url),title:"33- Regular & Custom Tooltip"},{path:"example34",component:()=>Te(()=>import("./example34-1rzxnMDJ.js"),__vite__mapDeps([56,57,27,7,58]),import.meta.url),title:"34- Real-Time Trading Platform"},{path:"example35",component:()=>Te(()=>import("./example35-BGs_mPsL.js"),__vite__mapDeps([59,2,39,60]),import.meta.url),title:"35- Row Based Editing"},{path:"example36",component:()=>Te(()=>import("./example36-IfZ14n5x.js"),__vite__mapDeps([61,27,2,7,6,62]),import.meta.url),title:"36- Excel Export Formulas"},{path:"example37",component:()=>Te(()=>import("./example37-PRrGuGnf.js"),__vite__mapDeps([63,2]),import.meta.url),title:"37- Footer Totals Row"},{path:"example38",component:()=>Te(()=>import("./example38-DmshXpKW.js"),__vite__mapDeps([64,1,9,27,10,65]),import.meta.url),title:"38- Infinite Scroll with OData"},{path:"example39",component:()=>Te(()=>import("./example39-BWSVvqNd.js"),__vite__mapDeps([66,1,13,10,67]),import.meta.url),title:"39- Infinite Scroll with GraphQL"},{path:"example40",component:()=>Te(()=>import("./example40-DgLLiXNy.js"),__vite__mapDeps([68,27]),import.meta.url),title:"40- Infinite Scroll from JSON data"},{path:"example41",component:()=>Te(()=>import("./example41-BHyoawRM.js"),__vite__mapDeps([69,70]),import.meta.url),title:"41- Drag & Drop"},{path:"example42",component:()=>Te(()=>import("./example42-36HwMCX2.js"),[],import.meta.url),title:"42- Custom Pagination"},{path:"example43",component:()=>Te(()=>import("./example43-BPuzPb3x.js"),__vite__mapDeps([71,6,7,2,72]),import.meta.url),title:"43- Colspan/Rowspan (timesheets)"},{path:"example44",component:()=>Te(()=>import("./example44-BtQBgHqG.js"),__vite__mapDeps([73,6,7,74]),import.meta.url),title:"44- Colspan/Rowspan (large data)"},{path:"example45",component:()=>Te(()=>import("./example45-CCJlvEWe.js"),__vite__mapDeps([75,57]),import.meta.url),title:"45- Row Detail with inner Grid"},{path:"home",component:()=>Te(()=>import("./home-page-BMuQoYuU.js"),[],import.meta.url),title:"Home"}]);e2(uv,1,Gc);let i2=Gc;var s2=Object.create,pv=Object.defineProperty,n2=Object.getOwnPropertyDescriptor,r2=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),JI=n=>{throw TypeError(n)},o2=(n,e,t)=>e in n?pv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,a2=(n,e)=>pv(n,"name",{value:e,configurable:!0}),l2=n=>[,,,s2(null)],c2=["class","method","getter","setter","accessor","field","value","get","set"],eR=n=>n!==void 0&&typeof n!="function"?JI("Function expected"):n,h2=(n,e,t,i,s)=>({kind:c2[n],name:e,metadata:i,addInitializer:r=>t._?JI("Already initialized"):s.push(eR(r||null))}),d2=(n,e)=>o2(e,r2("metadata"),n[3]),u2=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},p2=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&n2(s,t));a2(s,t);for(var f=i.length-1;f>=0;f--)l=h2(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,eR(o)&&(s=o);return d2(n,s),p&&pv(s,t,p),h?c^4?r:p:s},tR,fv;tR=[Zm("dateFormat")];class Tu{toView(e,t){return Wi(e,t)}}fv=l2();Tu=p2(fv,0,"DateFormatValueConverter",tR,Tu);u2(fv,1,Tu);var f2=Object.create,gv=Object.defineProperty,g2=Object.getOwnPropertyDescriptor,m2=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),iR=n=>{throw TypeError(n)},_2=(n,e,t)=>e in n?gv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,v2=(n,e)=>gv(n,"name",{value:e,configurable:!0}),b2=n=>[,,,f2(null)],w2=["class","method","getter","setter","accessor","field","value","get","set"],sR=n=>n!==void 0&&typeof n!="function"?iR("Function expected"):n,C2=(n,e,t,i,s)=>({kind:w2[n],name:e,metadata:i,addInitializer:r=>t._?iR("Already initialized"):s.push(sR(r||null))}),y2=(n,e)=>_2(e,m2("metadata"),n[3]),S2=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},E2=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&g2(s,t));v2(s,t);for(var f=i.length-1;f>=0;f--)l=C2(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,sR(o)&&(s=o);return y2(n,s),p&&gv(s,t,p),h?c^4?r:p:s},nR,mv;nR=[Zm("decimal")];class Au{toView(e,t){const i=typeof t=="string"?parseInt(t,10):2,s=typeof e<"u"?parseFloat(e).toFixed(i):e;return e&&`${s}`}}mv=b2();Au=E2(mv,0,"DecimalValueConverter",nR,Au);S2(mv,1,Au);var T2=Object.create,_v=Object.defineProperty,A2=Object.getOwnPropertyDescriptor,I2=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),rR=n=>{throw TypeError(n)},R2=(n,e,t)=>e in n?_v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O2=(n,e)=>_v(n,"name",{value:e,configurable:!0}),x2=n=>[,,,T2(null)],P2=["class","method","getter","setter","accessor","field","value","get","set"],oR=n=>n!==void 0&&typeof n!="function"?rR("Function expected"):n,k2=(n,e,t,i,s)=>({kind:P2[n],name:e,metadata:i,addInitializer:r=>t._?rR("Already initialized"):s.push(oR(r||null))}),D2=(n,e)=>R2(e,I2("metadata"),n[3]),L2=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},N2=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&A2(s,t));O2(s,t);for(var f=i.length-1;f>=0;f--)l=k2(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,oR(o)&&(s=o);return D2(n,s),p&&_v(s,t,p),h?c^4?r:p:s},aR,vv;aR=[Zm("stringify")];class Iu{toView(e){return JSON.stringify(e,null,4)}}vv=x2();Iu=N2(vv,0,"StringifyValueConverter",aR,Iu);L2(vv,1,Iu);var M2=Object.create,bv=Object.defineProperty,F2=Object.getOwnPropertyDescriptor,$2=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),hh=n=>{throw TypeError(n)},lR=(n,e,t)=>e in n?bv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Uy=(n,e)=>bv(n,"name",{value:e,configurable:!0}),H2=n=>[,,,M2(null)],cR=["class","method","getter","setter","accessor","field","value","get","set"],Vl=n=>n!==void 0&&typeof n!="function"?hh("Function expected"):n,B2=(n,e,t,i,s)=>({kind:cR[n],name:e,metadata:i,addInitializer:r=>t._?hh("Already initialized"):s.push(Vl(r||null))}),V2=(n,e)=>lR(e,$2("metadata"),n[3]),cm=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},hR=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=cR[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&F2(d<4?s:{get[t](){return Gy(this,r)},set[t](v){return jy(this,r,v)}},t));d?p&&d<4&&Uy(r,(d>2?"set ":d>1?"get ":"")+t):Uy(s,t);for(var C=i.length-1;C>=0;C--)c=B2(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>z2(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?Gy:W2)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>jy(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?Vl(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?hh("Object expected"):(Vl(o=a.get)&&(b.get=o),Vl(o=a.set)&&(b.set=o),Vl(o=a.init)&&m.unshift(o));return d||V2(n,s),b&&bv(s,t,b),p?d^4?r:b:s},ca=(n,e,t)=>lR(n,typeof e!="symbol"?e+"":e,t),wv=(n,e,t)=>e.has(n)||hh("Cannot "+t),z2=(n,e)=>Object(e)!==e?hh('Cannot use the "in" operator on this value'):n.has(e),Gy=(n,e,t)=>(wv(n,e,"read from private field"),t?t.call(n):e.get(n)),jy=(n,e,t,i)=>(wv(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),W2=(n,e,t)=>(wv(n,e,"access private method"),t),dR,uR,el;uR=[Tn({name:"custom-pager",template:`<div class="custom-pagination">
  <span class="custom-pagination-settings">
    <span class="custom-pagination-count">
      <span class="page-info-from-to">
        <span class="item-from" aria-label="Page Item From" data-test="item-from">
        \${currentPagination?.dataFrom}
        </span>-
        <span class="item-to" aria-label="Page Item To" data-test="item-to">
        \${currentPagination?.dataTo}
        </span>
      of
      </span>
      <span class="page-info-total-items">
        <span class="total-items" aria-label="Total Items" data-test="total-items">\${currentPagination?.totalItems}</span>
        <span class="text-items"> items</span>
      </span>
    </span>
  </span>
<div class="custom-pagination-nav">
<nav aria-label="Page navigation">
  <ul class="custom-pagination-ul">
    <li class="li page-item seek-first" disabled.class="isLeftPaginationDisabled">
      <a class="pagination-link mdi mdi-page-first icon-seek-first mdi-22px" aria-label="First Page" role="button" click.trigger="onFirstPageClicked($event)"></a>
    </li>
    <li class="li page-item seek-prev" disabled.class="isLeftPaginationDisabled">
      <a class="pagination-link icon-seek-prev mdi mdi-chevron-down mdi-22px mdi-rotate-90" aria-label="Previous Page" role="button" click.trigger="onPreviousPageClicked($event)"></a>
    </li>
  </ul>
</nav>
<div class="page-number">
  <span class="text-page">Page</span>
  <span class="page-number" aria-label="Page Number" data-test="page-number-label">\${currentPagination?.pageNumber}</span>
  of
  <span class="page-count" data-test="page-count">\${currentPagination?.pageCount}</span>
</div>
<nav aria-label="Page navigation">
  <ul class="custom-pagination-ul">
    <li class="li page-item seek-next" disabled.class="isRightPaginationDisabled" click.trigger="onNextPageClicked($event)">
      <a class="pagination-link icon-seek-next mdi mdi-chevron-down mdi-22px mdi-rotate-270" aria-label="Next Page" role="button" ></a>
    </li>
    <li class="li page-item seek-end"  disabled.class="isRightPaginationDisabled">
      <a class="pagination-link icon-seek-end mdi mdi-page-last mdi-22px" aria-label="Last Page" role="button" click.trigger="onLastPageClicked($event)"></a>
    </li>
  </ul>
</nav>
</div>
</div>`})],dR=[ot()];class jc{constructor(e=$(HTMLElement)){this.elm=e,ca(this,"_paginationElement"),ca(this,"_subscriptions",[]),ca(this,"_grid"),ca(this,"_paginationService"),ca(this,"_pubSubService"),ca(this,"currentPagination",cm(el,8,this,{})),cm(el,11,this)}get isLeftPaginationDisabled(){return this.currentPagination.pageNumber===1||this.currentPagination.totalItems===0}get isRightPaginationDisabled(){return this.currentPagination.pageNumber===this.currentPagination.pageCount||this.currentPagination.totalItems===0}init(e,t,i){this._grid=e,this._paginationService=t,this._pubSubService=i,this.currentPagination=this._paginationService.getFullPagination(),this._subscriptions.push(this._pubSubService.subscribe("onPaginationRefreshed",s=>{this.currentPagination.dataFrom=s.dataFrom,this.currentPagination.dataTo=s.dataTo,this.currentPagination.pageCount=s.pageCount,this.currentPagination.pageNumber=s.pageNumber,this.currentPagination.pageSize=s.pageSize,this.currentPagination.pageSizes=s.pageSizes,this.currentPagination.totalItems=s.totalItems}))}dispose(){this._pubSubService.unsubscribeAll(this._subscriptions),this.disposeElement()}disposeElement(){var e;(e=this._paginationElement)==null||e.remove()}renderPagination(e,t="top"){this._paginationElement=this.elm,this._paginationElement.id="pager",this._paginationElement.className=`pagination-container pager ${this._grid.getUID()}`,this._paginationElement.style.width="100%",t==="top"?(this._paginationElement.classList.add("top"),e.prepend(this._paginationElement)):(this._paginationElement.classList.add("bottom"),e.appendChild(this._paginationElement))}onFirstPageClicked(e){this.isLeftPaginationDisabled||this._paginationService.goToFirstPage(e)}onLastPageClicked(e){this.isRightPaginationDisabled||this._paginationService.goToLastPage(e)}onNextPageClicked(e){this.isRightPaginationDisabled||this._paginationService.goToNextPage(e)}onPreviousPageClicked(e){this.isLeftPaginationDisabled||this._paginationService.goToPreviousPage(e)}}el=H2();hR(el,5,"currentPagination",dR,jc);jc=hR(el,0,"CustomPagerComponent",uR,jc);cm(el,1,jc);var U2=Object.create,Cv=Object.defineProperty,G2=Object.getOwnPropertyDescriptor,j2=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),dh=n=>{throw TypeError(n)},pR=(n,e,t)=>e in n?Cv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ky=(n,e)=>Cv(n,"name",{value:e,configurable:!0}),K2=n=>[,,,U2(null)],fR=["class","method","getter","setter","accessor","field","value","get","set"],zl=n=>n!==void 0&&typeof n!="function"?dh("Function expected"):n,Y2=(n,e,t,i,s)=>({kind:fR[n],name:e,metadata:i,addInitializer:r=>t._?dh("Already initialized"):s.push(zl(r||null))}),q2=(n,e)=>pR(e,j2("metadata"),n[3]),hm=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},gR=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=fR[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&G2(d<4?s:{get[t](){return Yy(this,r)},set[t](v){return qy(this,r,v)}},t));d?p&&d<4&&Ky(r,(d>2?"set ":d>1?"get ":"")+t):Ky(s,t);for(var C=i.length-1;C>=0;C--)c=Y2(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>Q2(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?Yy:Z2)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>qy(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?zl(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?dh("Object expected"):(zl(o=a.get)&&(b.get=o),zl(o=a.set)&&(b.set=o),zl(o=a.init)&&m.unshift(o));return d||q2(n,s),b&&Cv(s,t,b),p?d^4?r:b:s},X2=(n,e,t)=>pR(n,e+"",t),yv=(n,e,t)=>e.has(n)||dh("Cannot "+t),Q2=(n,e)=>Object(e)!==e?dh('Cannot use the "in" operator on this value'):n.has(e),Yy=(n,e,t)=>(yv(n,e,"read from private field"),t?t.call(n):e.get(n)),qy=(n,e,t,i)=>(yv(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Z2=(n,e,t)=>(yv(n,e,"access private method"),t),mR,_R,tl;_R=[Tn({name:"custom-title-formatter",template:'<span style="font-weight: bold" innerhtml.bind="model.assignee.name"></span></template>'})],mR=[ot()];class Kc{constructor(){X2(this,"model",hm(tl,8,this)),hm(tl,11,this)}}tl=K2();gR(tl,5,"model",mR,Kc);Kc=gR(tl,0,"CustomTitleFormatter",_R,Kc);hm(tl,1,Kc);const vR="editor-select",dm=`<div>
  <span if.bind="model.collection">
    <select class="form-control form-select" value.bind="selectedItem" matcher.bind="itemMatcher">
      <option repeat.for="item of model.collection" model.bind="item">
        \${item.name}
      </option>
    </select>
  </span>
</div>
`,bR=[],wR={};let zf;function J2(n){zf||(zf=Qe.define({name:vR,template:dm,dependencies:bR,bindables:wR})),n.register(zf)}const ej=Object.freeze(Object.defineProperty({__proto__:null,bindables:wR,default:dm,dependencies:bR,name:vR,register:J2,template:dm},Symbol.toStringTag,{value:"Module"}));var tj=Object.create,Sv=Object.defineProperty,ij=Object.getOwnPropertyDescriptor,sj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),uh=n=>{throw TypeError(n)},CR=(n,e,t)=>e in n?Sv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xy=(n,e)=>Sv(n,"name",{value:e,configurable:!0}),nj=n=>[,,,tj(null)],yR=["class","method","getter","setter","accessor","field","value","get","set"],Wl=n=>n!==void 0&&typeof n!="function"?uh("Function expected"):n,rj=(n,e,t,i,s)=>({kind:yR[n],name:e,metadata:i,addInitializer:r=>t._?uh("Already initialized"):s.push(Wl(r||null))}),oj=(n,e)=>CR(e,sj("metadata"),n[3]),ro=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},up=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=yR[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&ij(d<4?s:{get[t](){return Qy(this,r)},set[t](v){return Zy(this,r,v)}},t));d?p&&d<4&&Xy(r,(d>2?"set ":d>1?"get ":"")+t):Xy(s,t);for(var C=i.length-1;C>=0;C--)c=rj(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>aj(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?Qy:lj)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>Zy(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?Wl(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?uh("Object expected"):(Wl(o=a.get)&&(b.get=o),Wl(o=a.set)&&(b.set=o),Wl(o=a.init)&&m.unshift(o));return d||oj(n,s),b&&Sv(s,t,b),p?d^4?r:b:s},id=(n,e,t)=>CR(n,typeof e!="symbol"?e+"":e,t),Ev=(n,e,t)=>e.has(n)||uh("Cannot "+t),aj=(n,e)=>Object(e)!==e?uh('Cannot use the "in" operator on this value'):n.has(e),Qy=(n,e,t)=>(Ev(n,e,"read from private field"),t?t.call(n):e.get(n)),Zy=(n,e,t,i)=>(Ev(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),lj=(n,e,t)=>(Ev(n,e,"access private method"),t),SR,ER,TR,AR,gs;AR=[Tn(ej)],TR=[ot()],ER=[ot()],SR=[ot];class $o{constructor(e=$(HTMLElement)){this.elm=e,id(this,"model",ro(gs,8,this)),ro(gs,11,this),id(this,"grid",ro(gs,12,this)),ro(gs,15,this),id(this,"selectedItem",ro(gs,16,this)),ro(gs,19,this),id(this,"itemMatcher",(t,i)=>t&&i&&t.id===i.id)}focus(){var e;(e=this.elm.querySelector("select"))==null||e.focus()}hide(){this.elm.style.display="none"}show(){this.elm.style.display="block"}selectedItemChanged(){}}gs=nj();up(gs,5,"model",TR,$o);up(gs,5,"grid",ER,$o);up(gs,5,"selectedItem",SR,$o);$o=up(gs,0,"EditorSelect",AR,$o);ro(gs,1,$o);const IR="filter-select",um=`<div>
  <span if.bind="model.collection">
    <select class="form-control form-select" value.bind="selectedItem" matcher.bind="itemMatcher">
      <option repeat.for="item of model.collection" model.bind="item">
        \${item.name}
      </option>
    </select>
  </span>
</div>
`,RR=[],OR={};let Wf;function cj(n){Wf||(Wf=Qe.define({name:IR,template:um,dependencies:RR,bindables:OR})),n.register(Wf)}const hj=Object.freeze(Object.defineProperty({__proto__:null,bindables:OR,default:um,dependencies:RR,name:IR,register:cj,template:um},Symbol.toStringTag,{value:"Module"}));var dj=Object.create,Tv=Object.defineProperty,uj=Object.getOwnPropertyDescriptor,pj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),ph=n=>{throw TypeError(n)},xR=(n,e,t)=>e in n?Tv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Jy=(n,e)=>Tv(n,"name",{value:e,configurable:!0}),fj=n=>[,,,dj(null)],PR=["class","method","getter","setter","accessor","field","value","get","set"],Ul=n=>n!==void 0&&typeof n!="function"?ph("Function expected"):n,gj=(n,e,t,i,s)=>({kind:PR[n],name:e,metadata:i,addInitializer:r=>t._?ph("Already initialized"):s.push(Ul(r||null))}),mj=(n,e)=>xR(e,pj("metadata"),n[3]),oo=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},pp=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=PR[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&uj(d<4?s:{get[t](){return eS(this,r)},set[t](v){return tS(this,r,v)}},t));d?p&&d<4&&Jy(r,(d>2?"set ":d>1?"get ":"")+t):Jy(s,t);for(var C=i.length-1;C>=0;C--)c=gj(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>_j(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?eS:vj)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>tS(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?Ul(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?ph("Object expected"):(Ul(o=a.get)&&(b.get=o),Ul(o=a.set)&&(b.set=o),Ul(o=a.init)&&m.unshift(o));return d||mj(n,s),b&&Tv(s,t,b),p?d^4?r:b:s},sd=(n,e,t)=>xR(n,typeof e!="symbol"?e+"":e,t),Av=(n,e,t)=>e.has(n)||ph("Cannot "+t),_j=(n,e)=>Object(e)!==e?ph('Cannot use the "in" operator on this value'):n.has(e),eS=(n,e,t)=>(Av(n,e,"read from private field"),t?t.call(n):e.get(n)),tS=(n,e,t,i)=>(Av(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),vj=(n,e,t)=>(Av(n,e,"access private method"),t),kR,DR,LR,NR,ms;NR=[Tn(hj)],LR=[ot()],DR=[ot()],kR=[ot];class Ho{constructor(e=$(HTMLElement)){this.elm=e,sd(this,"model",oo(ms,8,this)),oo(ms,11,this),sd(this,"grid",oo(ms,12,this)),oo(ms,15,this),sd(this,"selectedItem",oo(ms,16,this)),oo(ms,19,this),sd(this,"itemMatcher",(t,i)=>t&&i&&t.id===i.id)}focus(){var e;(e=this.elm.querySelector("select"))==null||e.focus()}selectedItemChanged(){}}ms=fj();pp(ms,5,"model",LR,Ho);pp(ms,5,"grid",DR,Ho);pp(ms,5,"selectedItem",kR,Ho);Ho=pp(ms,0,"FilterSelect",NR,Ho);oo(ms,1,Ho);const MR="example19-detail-view",pm=`<div class="container-fluid" style="margin-top: 10px">
  <h3>\${model.title}</h3>
  <div class="row">
    <div class="col-3 detail-label"><label>Assignee:</label> <input class="form-control" value.bind="model.assignee" /></div>
    <div class="col-3 detail-label"><label>Reporter:</label> <span>\${model.reporter}</span></div>
    <div class="col-3 detail-label"><label>Duration:</label> <span>\${model.duration | decimal: 2}</span></div>
    <div class="col-3 detail-label"><label>% Complete:</label> <span>\${model.percentComplete}</span></div>
  </div>

  <div class="row">
    <div class="col-3 detail-label"><label>Start:</label> <span>\${model.start | dateFormat: 'YYYY-MM-DD'}</span></div>
    <div class="col-3 detail-label"><label>Finish:</label> <span>\${model.finish | dateFormat: 'YYYY-MM-DD'}</span></div>
    <div class="col-3 detail-label"><label>Effort Driven:</label> <i class.bind="model.effortDriven ? 'mdi mdi-check' : ''"></i>
    </div>
  </div>

  <hr>

  <div class="col-sm-8">
    <h4>
      Find out who is the Assignee
      <small>
        <button class="btn btn-primary btn-sm" click.trigger="alertAssignee(model.assignee)" data-test="assignee-btn">
          Click Me
        </button>
      </small>
    </h4>
  </div>

  <div class="col-sm-4">
    <button class="btn btn-primary btn-danger btn-sm" click.trigger="deleteRow(model)" data-test="delete-btn">
      Delete Row
    </button>
    <button class="btn btn-outline-secondary btn-sm" click.trigger="callParentMethod(model)" data-test="parent-btn">
      Call Parent Method
    </button>
  </div>
</div>
`,FR=[],$R={};let Uf;function bj(n){Uf||(Uf=Qe.define({name:MR,template:pm,dependencies:FR,bindables:$R})),n.register(Uf)}const wj=Object.freeze(Object.defineProperty({__proto__:null,bindables:$R,default:pm,dependencies:FR,name:MR,register:bj,template:pm},Symbol.toStringTag,{value:"Module"}));var Cj=Object.create,Iv=Object.defineProperty,yj=Object.getOwnPropertyDescriptor,Sj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),fh=n=>{throw TypeError(n)},HR=(n,e,t)=>e in n?Iv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,iS=(n,e)=>Iv(n,"name",{value:e,configurable:!0}),Ej=n=>[,,,Cj(null)],BR=["class","method","getter","setter","accessor","field","value","get","set"],Gl=n=>n!==void 0&&typeof n!="function"?fh("Function expected"):n,Tj=(n,e,t,i,s)=>({kind:BR[n],name:e,metadata:i,addInitializer:r=>t._?fh("Already initialized"):s.push(Gl(r||null))}),Aj=(n,e)=>HR(e,Sj("metadata"),n[3]),Rs=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},pl=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=BR[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&yj(d<4?s:{get[t](){return sS(this,r)},set[t](v){return nS(this,r,v)}},t));d?p&&d<4&&iS(r,(d>2?"set ":d>1?"get ":"")+t):iS(s,t);for(var C=i.length-1;C>=0;C--)c=Tj(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>Ij(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?sS:Rj)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>nS(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?Gl(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?fh("Object expected"):(Gl(o=a.get)&&(b.get=o),Gl(o=a.set)&&(b.set=o),Gl(o=a.init)&&m.unshift(o));return d||Aj(n,s),b&&Iv(s,t,b),p?d^4?r:b:s},Nl=(n,e,t)=>HR(n,typeof e!="symbol"?e+"":e,t),Rv=(n,e,t)=>e.has(n)||fh("Cannot "+t),Ij=(n,e)=>Object(e)!==e?fh('Cannot use the "in" operator on this value'):n.has(e),sS=(n,e,t)=>(Rv(n,e,"read from private field"),t?t.call(n):e.get(n)),nS=(n,e,t,i)=>(Rv(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Rj=(n,e,t)=>(Rv(n,e,"access private method"),t),VR,zR,WR,UR,GR,jR,ti;jR=[Tn(wj)],GR=[ot()],UR=[ot()],WR=[ot()],zR=[ot()],VR=[ot()];class Jn{constructor(){Nl(this,"model",Rs(ti,8,this)),Rs(ti,11,this),Nl(this,"addon",Rs(ti,12,this)),Rs(ti,15,this),Nl(this,"grid",Rs(ti,16,this)),Rs(ti,19,this),Nl(this,"dataView",Rs(ti,20,this)),Rs(ti,23,this),Nl(this,"parent",Rs(ti,24,this)),Rs(ti,27,this)}alertAssignee(e){alert(typeof e=="string"?`Assignee on this task is: ${e.toUpperCase()}`:"No one is assigned to this task.")}deleteRow(e){confirm(`Are you sure that you want to delete ${e.title}?`)&&(this.addon.collapseAll(),this.dataView.deleteItem(e.rowId),this.parent.showFlashMessage(`Deleted row with ${e.title}`,"danger"))}callParentMethod(e){this.parent.showFlashMessage(`We just called Parent Method from the Row Detail Child Component on ${e.title}`)}}ti=Ej();pl(ti,5,"model",GR,Jn);pl(ti,5,"addon",UR,Jn);pl(ti,5,"grid",WR,Jn);pl(ti,5,"dataView",zR,Jn);pl(ti,5,"parent",VR,Jn);Jn=pl(ti,0,"Example19DetailView",jR,Jn);Rs(ti,1,Jn);var Oj=Object.create,Ov=Object.defineProperty,xj=Object.getOwnPropertyDescriptor,Pj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),KR=n=>{throw TypeError(n)},kj=(n,e,t)=>e in n?Ov(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dj=(n,e)=>Ov(n,"name",{value:e,configurable:!0}),Lj=n=>[,,,Oj(null)],Nj=["class","method","getter","setter","accessor","field","value","get","set"],YR=n=>n!==void 0&&typeof n!="function"?KR("Function expected"):n,Mj=(n,e,t,i,s)=>({kind:Nj[n],name:e,metadata:i,addInitializer:r=>t._?KR("Already initialized"):s.push(YR(r||null))}),Fj=(n,e)=>kj(e,Pj("metadata"),n[3]),$j=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},Hj=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&xj(s,t));Dj(s,t);for(var f=i.length-1;f>=0;f--)l=Mj(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,YR(o)&&(s=o);return Fj(n,s),p&&Ov(s,t,p),h?c^4?r:p:s},qR,xv;qR=[Tn({name:"example19-preload",template:`<div class="container-fluid d-flex align-items-center" style="margin-top: 10px">
    <i class="mdi mdi-sync mdi-spin mdi-50px"></i>
    <h4>Loading...</h4>
  </div>`})];class Ru{dispose(){console.log("preload detaching")}}xv=Lj();Ru=Hj(xv,0,"Example19Preload",qR,Ru);$j(xv,1,Ru);const XR="example45-detail-view",fm=`<div class.bind="innerGridClass">
  <h4>\${ model.companyName } - Order Details (id: \${ model.id })</h4>
  <div class="container-fluid">
    <aurelia-slickgrid
      if.bind="showGrid"
      class="innergrid"
      grid-id.bind="gridId"
      column-definitions.bind="innerColDefs"
      grid-options.bind="innerGridOptions"
      dataset.bind="innerDataset"
      instances.bind="aureliaGrid"
      on-aurelia-grid-created.trigger="aureliaGridReady($event.detail)"
      on-before-grid-destroy.trigger="handleBeforeGridDestroy()">
    </aurelia-slickgrid>
  </div>
</div>
`,QR=[],ZR={};let Gf;function Bj(n){Gf||(Gf=Qe.define({name:XR,template:fm,dependencies:QR,bindables:ZR})),n.register(Gf)}const Vj=Object.freeze(Object.defineProperty({__proto__:null,bindables:ZR,default:fm,dependencies:QR,name:XR,register:Bj,template:fm},Symbol.toStringTag,{value:"Module"}));var zj=Object.create,Pv=Object.defineProperty,Wj=Object.getOwnPropertyDescriptor,Uj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),gh=n=>{throw TypeError(n)},JR=(n,e,t)=>e in n?Pv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rS=(n,e)=>Pv(n,"name",{value:e,configurable:!0}),Gj=n=>[,,,zj(null)],eO=["class","method","getter","setter","accessor","field","value","get","set"],jl=n=>n!==void 0&&typeof n!="function"?gh("Function expected"):n,jj=(n,e,t,i,s)=>({kind:eO[n],name:e,metadata:i,addInitializer:r=>t._?gh("Already initialized"):s.push(jl(r||null))}),Kj=(n,e)=>JR(e,Uj("metadata"),n[3]),gm=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)e&1?r[s].call(t):i=r[s].call(t,i);return i},tO=(n,e,t,i,s,r)=>{var o,a,l,c,h,d=e&7,u=!!(e&8),p=!!(e&16),f=d>3?n.length+1:d?u?1:2:0,g=eO[d+5],m=d>3&&(n[f-1]=[]),_=n[f]||(n[f]=[]),b=d&&(!p&&!u&&(s=s.prototype),d<5&&(d>3||!p)&&Wj(d<4?s:{get[t](){return oS(this,r)},set[t](v){return aS(this,r,v)}},t));d?p&&d<4&&rS(r,(d>2?"set ":d>1?"get ":"")+t):rS(s,t);for(var C=i.length-1;C>=0;C--)c=jj(d,t,l={},n[3],_),d&&(c.static=u,c.private=p,h=c.access={has:p?v=>Yj(s,v):v=>t in v},d^3&&(h.get=p?v=>(d^1?oS:qj)(v,s,d^4?r:b.get):v=>v[t]),d>2&&(h.set=p?(v,y)=>aS(v,s,y,d^4?r:b.set):(v,y)=>v[t]=y)),a=(0,i[C])(d?d<4?p?r:b[g]:d>4?void 0:{get:b.get,set:b.set}:s,c),l._=1,d^4||a===void 0?jl(a)&&(d>4?m.unshift(a):d?p?r=a:b[g]=a:s=a):typeof a!="object"||a===null?gh("Object expected"):(jl(o=a.get)&&(b.get=o),jl(o=a.set)&&(b.set=o),jl(o=a.init)&&m.unshift(o));return d||Kj(n,s),b&&Pv(s,t,b),p?d^4?r:b:s},ur=(n,e,t)=>JR(n,typeof e!="symbol"?e+"":e,t),kv=(n,e,t)=>e.has(n)||gh("Cannot "+t),Yj=(n,e)=>Object(e)!==e?gh('Cannot use the "in" operator on this value'):n.has(e),oS=(n,e,t)=>(kv(n,e,"read from private field"),t?t.call(n):e.get(n)),aS=(n,e,t,i)=>(kv(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),qj=(n,e,t)=>(kv(n,e,"access private method"),t),iO,sO,il;sO=[Tn(Vj)],iO=[ot()];class Yc{constructor(){ur(this,"model",gm(il,8,this)),gm(il,11,this),ur(this,"innerColDefs",[]),ur(this,"innerGridOptions"),ur(this,"aureliaGrid"),ur(this,"innerDataset",[]),ur(this,"showGrid",!1),ur(this,"gridId",""),ur(this,"innerGridClass","")}attached(){this.gridId=`innergrid-${this.model.id}`,this.innerGridClass=`row-detail-${this.model.id}`,this.defineGrid(),this.innerDataset=[...this.model.orderData],this.showGrid=!0}aureliaGridReady(e){this.aureliaGrid=e}defineGrid(){let e;if(this.model.isUsingInnerGridStatePresets){const t=sessionStorage.getItem(`gridstate_${this.innerGridClass}`);t&&(e=JSON.parse(t))}this.innerColDefs=[{id:"orderId",field:"orderId",name:"Order ID",filterable:!0,sortable:!0},{id:"shipCity",field:"shipCity",name:"Ship City",filterable:!0,sortable:!0},{id:"freight",field:"freight",name:"Freight",filterable:!0,sortable:!0,type:"number"},{id:"shipName",field:"shipName",name:"Ship Name",filterable:!0,sortable:!0}],this.innerGridOptions={autoResize:{container:`.${this.innerGridClass}`,rightPadding:30,minHeight:200},enableFiltering:!0,enableSorting:!0,rowHeight:33,enableCellNavigation:!0,datasetIdPropertyName:"orderId",presets:e}}handleBeforeGridDestroy(){if(console.log("handleBeforeGridDestroy",this.model),this.model.isUsingInnerGridStatePresets){const e=this.aureliaGrid.gridStateService.getCurrentGridState();sessionStorage.setItem(`gridstate_${this.innerGridClass}`,JSON.stringify(e))}}}il=Gj();tO(il,5,"model",iO,Yc);Yc=tO(il,0,"Example45DetailView",sO,Yc);gm(il,1,Yc);var Xj=Object.create,Dv=Object.defineProperty,Qj=Object.getOwnPropertyDescriptor,Zj=(n,e)=>(e=Symbol[n])?e:Symbol.for("Symbol."+n),nO=n=>{throw TypeError(n)},Jj=(n,e,t)=>e in n?Dv(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eK=(n,e)=>Dv(n,"name",{value:e,configurable:!0}),tK=n=>[,,,Xj(null)],iK=["class","method","getter","setter","accessor","field","value","get","set"],rO=n=>n!==void 0&&typeof n!="function"?nO("Function expected"):n,sK=(n,e,t,i,s)=>({kind:iK[n],name:e,metadata:i,addInitializer:r=>t._?nO("Already initialized"):s.push(rO(r||null))}),nK=(n,e)=>Jj(e,Zj("metadata"),n[3]),rK=(n,e,t,i)=>{for(var s=0,r=n[e>>1],o=r&&r.length;s<o;s++)r[s].call(t);return i},oK=(n,e,t,i,s,r)=>{var o,a,l,c=e&7,h=!1,d=0,u=n[d]||(n[d]=[]),p=c&&(s=s.prototype,c<5&&(c>3||!h)&&Qj(s,t));eK(s,t);for(var f=i.length-1;f>=0;f--)l=sK(c,t,a={},n[3],u),o=(0,i[f])(s,l),a._=1,rO(o)&&(s=o);return nK(n,s),p&&Dv(s,t,p),h?c^4?r:p:s},oO,Lv;oO=[Tn({name:"example45-preload",template:`<div class="container-fluid d-flex align-items-center" style="margin-top: 10px">
    <i class="mdi mdi-sync mdi-spin mdi-50px"></i>
    <h4>Loading...</h4>
  </div>`})];class Ou{dispose(){console.log("preload detaching")}}Lv=tK();Ou=oK(Lv,0,"Example45Preload",oO,Ou);rK(Lv,1,Ou);const aK="All Selected",lK="All {{x}} records selected",cK="Apply Mass Update",hK="Update Selection",dK="Cancel",uK="Clear all Filters",pK="Clear all Grouping",fK="Clear all Sorting",gK="Unfreeze Columns/Rows",mK="Clone",_K="Collapse all Groups",vK="Columns",bK="Resize by Content",wK="Commands",CK="Contains",yK="Copy",SK="No data to display.",EK="Ends With",TK="Equals",AK="Equal to",IK="Expand all Groups",RK="Export in CSV format",OK="Export to Excel",xK="Export in Text format (Tab delimited)",PK="Export in Text format",kK="Filter Shortcuts",DK="{{from}}-{{to}} of {{totalItems}} items",LK="Force fit columns",NK="Freeze Columns",MK="The number must be valid and have a maximum of {{maxDecimal}} decimals.",FK="Greater than",$K="Greater than or equal to",HK="Group by",BK="Hide Column",VK="Search items in a collection, must be separated by a comma (a,b)",zK="items",WK="items per page",UK="items selected",GK="No elements found",jK="Last Update",KK="Less than",YK="Less than or equal to",qK="Not contains",XK="Not equal to",QK="Search items not in a collection, must be separated by a comma (a,b)",ZK="of",JK="OK",eY="Page",tY="page {{x}} of {{y}}",iY="Refresh Dataset",sY="Remove Filter",nY="Remove Sort",rY="Reset Input Value",oY="Reset Form",aY="Save",lY="Select All",cY="Sort Ascending",hY="Sort Descending",dY="Starts With",uY="Synchronous resize",pY="Toggle Filter Row",fY="Toggle Pre-Header Row",gY="# of % selected",mY="{{x}} of {{y}} selected",_Y={ADDRESS:{STREET:"Billing Address Street",ZIP:"Billing Address Zip"},INFORMATION:"Billing Information"},vY="Blank Values",bY="Non-Blank Values",wY="Custom Commands",CY="Duration",yY="Company",SY="Completed",EY="Change Completed Flag",TY="Change Priority",AY="Customer Information",IY="Delete Row",RY="Disabled Command",OY="False",xY="Female",PY="Finish",kY="Future",DY="Gender",LY="Help",NY="High",MY="Low",FY="Medium",$Y="Male",HY="Name",BY="Next 20 days",VY="None",zY="Past",WY="% Complete",UY="Priority",GY="Start",jY="Task {{x}}",KY="Title",YY="Today",qY="True",XY="{{x}} day{{plural}}",QY="Update the current row",ZY="Cancel changes of the current row",JY={ALL_SELECTED:aK,ALL_X_RECORDS_SELECTED:lK,APPLY_MASS_UPDATE:cK,APPLY_TO_SELECTION:hK,CANCEL:dK,CLEAR_ALL_FILTERS:uK,CLEAR_ALL_GROUPING:pK,CLEAR_ALL_SORTING:fK,CLEAR_PINNING:gK,CLONE:mK,COLLAPSE_ALL_GROUPS:_K,COLUMNS:vK,COLUMN_RESIZE_BY_CONTENT:bK,COMMANDS:wK,CONTAINS:CK,COPY:yK,EMPTY_DATA_WARNING_MESSAGE:SK,ENDS_WITH:EK,EQUALS:TK,EQUAL_TO:AK,EXPAND_ALL_GROUPS:IK,EXPORT_TO_CSV:RK,EXPORT_TO_EXCEL:OK,EXPORT_TO_TAB_DELIMITED:xK,EXPORT_TO_TEXT_FORMAT:PK,FILTER_SHORTCUTS:kK,FROM_TO_OF_TOTAL_ITEMS:DK,FORCE_FIT_COLUMNS:LK,FREEZE_COLUMNS:NK,INVALID_FLOAT:MK,GREATER_THAN:FK,GREATER_THAN_OR_EQUAL_TO:$K,GROUP_BY:HK,HIDE_COLUMN:BK,IN_COLLECTION_SEPERATED_BY_COMMA:VK,ITEMS:zK,ITEMS_PER_PAGE:WK,ITEMS_SELECTED:UK,NO_ELEMENTS_FOUND:GK,LAST_UPDATE:jK,LESS_THAN:KK,LESS_THAN_OR_EQUAL_TO:YK,NOT_CONTAINS:qK,NOT_EQUAL_TO:XK,NOT_IN_COLLECTION_SEPERATED_BY_COMMA:QK,OF:ZK,OK:JK,PAGE:eY,PAGE_X_OF_Y:tY,REFRESH_DATASET:iY,REMOVE_FILTER:sY,REMOVE_SORT:nY,RESET_INPUT_VALUE:rY,RESET_FORM:oY,SAVE:aY,SELECT_ALL:lY,SORT_ASCENDING:cY,SORT_DESCENDING:hY,STARTS_WITH:dY,SYNCHRONOUS_RESIZE:uY,TOGGLE_FILTER_ROW:pY,TOGGLE_PRE_HEADER_ROW:fY,X_OF_Y_SELECTED:gY,X_OF_Y_MASS_SELECTED:mY,BILLING:_Y,BLANK_VALUES:vY,NON_BLANK_VALUES:bY,CUSTOM_COMMANDS:wY,DURATION:CY,COMPANY:yY,COMPLETED:SY,CHANGE_COMPLETED_FLAG:EY,CHANGE_PRIORITY:TY,CUSTOMER_INFORMATION:AY,DELETE_ROW:IY,DISABLED_COMMAND:RY,FALSE:OY,FEMALE:xY,FINISH:PY,FUTURE:kY,GENDER:DY,HELP:LY,HIGH:NY,LOW:MY,MEDIUM:FY,MALE:$Y,NAME:HY,NEXT_20_DAYS:BY,NONE:VY,PAST:zY,PERCENT_COMPLETE:WY,PRIORITY:UY,START:GY,TASK_X:jY,TITLE:KY,TODAY:YY,TRUE:qY,X_DAY_PLURAL:XY,RBE_BTN_UPDATE:QY,RBE_BTN_CANCEL:ZY},e3="Tout sélectionnés",t3="Sur tous les {{x}} éléments",i3="Mettre à jour en masse",s3="Mettre à jour la sélection",n3="Annuler",r3="Supprimer tous les filtres",o3="Supprimer tous les groupes",a3="Supprimer tous les tris",l3="Dégeler les colonnes/rangées",c3="Cloner",h3="Réduire tous les groupes",d3="Colonnes",u3="Redimensionner par contenu",p3="Commandes",f3="Contient",g3="Copier",m3="Aucune donnée à afficher.",_3="Se termine par",v3="Égale",b3="Égal à",w3="Étendre tous les groupes",C3="Exporter en format CSV",y3="Exporter vers Excel",S3="Exporter en format texte (délimité par tabulation)",E3="Exporter en format texte",T3="Raccourcis de filtre",A3="{{from}}-{{to}} de {{totalItems}} éléments",I3="Ajustement forcé des colonnes",R3="Geler les colonnes",O3="Plus grand que",x3="Plus grand ou égal à",P3="Grouper par",k3="Cacher la colonne",D3="Recherche incluant certain éléments d'une collection, doit être séparé par une virgule (a,b)",L3="Le nombre doit être valide et avoir un maximum de {{maxDecimal}} décimales.",N3="éléments",M3="éléments par page",F3="éléments sélectionnés",$3="Dernière mise à jour",H3="Plus petit que",B3="Plus petit ou égal à",V3="Aucun élément trouvé",z3="Ne contient pas",W3="Non égal à",U3="Recherche excluant certain éléments d'une collection, doit être séparé par une virgule (a,b)",G3="de",j3="Terminé",K3="Page",Y3="page {{x}} de {{y}}",q3="Rafraîchir les données",X3="Supprimer le filtre",Q3="Supprimer le tri",Z3="Réinitialiser la valeur",J3="Réinitialiser le formulaire",eq="Sauvegarder",tq="Sélectionner tout",iq="Trier par ordre croissant",sq="Trier par ordre décroissant",nq="Commence par",rq="Redimension synchrone",oq="Basculer la ligne des filtres",aq="Basculer la ligne de pré-en-tête",lq="# de % sélectionnés",cq="{{x}} de {{y}} sélectionnés",hq={ADDRESS:{STREET:"Adresse de facturation",ZIP:"Code zip de facturation"},INFORMATION:"Information de Facturation"},dq="Valeurs nulles",uq="Valeurs non-nulles",pq="Durée",fq="Compagnie",gq="Terminé",mq="Changer l'indicateur terminé",_q="Changer la priorité",vq="Commandes Personnalisées",bq="Information Client",wq="Supprimer la ligne",Cq="Commande désactivée",yq="Faux",Sq="Féminin",Eq="Fin",Tq="Future",Aq="Sexe",Iq="Aide",Rq="Haut",Oq="Bas",xq="Moyen",Pq="Masculin",kq="Nom",Dq="20 prochain jours",Lq="Aucun",Nq="Passé",Mq="% Achevée",Fq="Priorité",$q="Début",Hq="Tâche {{x}}",Bq="Titre",Vq="Aujourd'hui",zq="Vrai",Wq="{{x}} journée{{plural}}",Uq="Mettre à jour la ligne actuelle",Gq="Annuler la ligne actuelle",jq={ALL_SELECTED:e3,ALL_X_RECORDS_SELECTED:t3,APPLY_MASS_UPDATE:i3,APPLY_TO_SELECTION:s3,CANCEL:n3,CLEAR_ALL_FILTERS:r3,CLEAR_ALL_GROUPING:o3,CLEAR_ALL_SORTING:a3,CLEAR_PINNING:l3,CLONE:c3,COLLAPSE_ALL_GROUPS:h3,COLUMNS:d3,COLUMN_RESIZE_BY_CONTENT:u3,COMMANDS:p3,CONTAINS:f3,COPY:g3,EMPTY_DATA_WARNING_MESSAGE:m3,ENDS_WITH:_3,EQUALS:v3,EQUAL_TO:b3,EXPAND_ALL_GROUPS:w3,EXPORT_TO_CSV:C3,EXPORT_TO_EXCEL:y3,EXPORT_TO_TAB_DELIMITED:S3,EXPORT_TO_TEXT_FORMAT:E3,FILTER_SHORTCUTS:T3,FROM_TO_OF_TOTAL_ITEMS:A3,FORCE_FIT_COLUMNS:I3,FREEZE_COLUMNS:R3,GREATER_THAN:O3,GREATER_THAN_OR_EQUAL_TO:x3,GROUP_BY:P3,HIDE_COLUMN:k3,IN_COLLECTION_SEPERATED_BY_COMMA:D3,INVALID_FLOAT:L3,ITEMS:N3,ITEMS_PER_PAGE:M3,ITEMS_SELECTED:F3,LAST_UPDATE:$3,LESS_THAN:H3,LESS_THAN_OR_EQUAL_TO:B3,NO_ELEMENTS_FOUND:V3,NOT_CONTAINS:z3,NOT_EQUAL_TO:W3,NOT_IN_COLLECTION_SEPERATED_BY_COMMA:U3,OF:G3,OK:j3,PAGE:K3,PAGE_X_OF_Y:Y3,REFRESH_DATASET:q3,REMOVE_FILTER:X3,REMOVE_SORT:Q3,RESET_INPUT_VALUE:Z3,RESET_FORM:J3,SAVE:eq,SELECT_ALL:tq,SORT_ASCENDING:iq,SORT_DESCENDING:sq,STARTS_WITH:nq,SYNCHRONOUS_RESIZE:rq,TOGGLE_FILTER_ROW:oq,TOGGLE_PRE_HEADER_ROW:aq,X_OF_Y_SELECTED:lq,X_OF_Y_MASS_SELECTED:cq,BILLING:hq,BLANK_VALUES:dq,NON_BLANK_VALUES:uq,DURATION:pq,COMPANY:fq,COMPLETED:gq,CHANGE_COMPLETED_FLAG:mq,CHANGE_PRIORITY:_q,CUSTOM_COMMANDS:vq,CUSTOMER_INFORMATION:bq,DELETE_ROW:wq,DISABLED_COMMAND:Cq,FALSE:yq,FEMALE:Sq,FINISH:Eq,FUTURE:Tq,GENDER:Aq,HELP:Iq,HIGH:Rq,LOW:Oq,MEDIUM:xq,MALE:Pq,NAME:kq,NEXT_20_DAYS:Dq,NONE:Lq,PAST:Nq,PERCENT_COMPLETE:Mq,PRIORITY:Fq,START:$q,TASK_X:Hq,TITLE:Bq,"TITLE.NAME":"Nom du Titre",TODAY:Vq,TRUE:zq,X_DAY_PLURAL:Wq,RBE_BTN_UPDATE:Uq,RBE_BTN_CANCEL:Gq};lc.register(Ri.customize({useHref:!1}),Kc,jc,Jn,Ru,Yc,Ou,$o,Ho).register(BU.customize(n=>{n.translationAttributeAliases=["i18n","tr"],n.initOptions={resources:{en:{translation:JY},fr:{translation:jq}},lng:"en",fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1}}})).register(II.customize(n=>{n.options.gridMenu.iconCssClass="mdi mdi-menu",n.options.sanitizer=e=>fG.sanitize(e,{ADD_ATTR:["level"],RETURN_TRUSTED_TYPE:!0})})).register(Au,Iu,Tu).app(i2).start();export{L5 as $,or as A,cI as B,Qe as C,kr as D,Ae as E,O5 as F,$o as G,Ho as H,Lr as I,Kc as J,Ai as K,af as L,gi as M,qd as N,de as O,Gt as P,as as Q,FH as R,Fh as S,Qd as T,WH as U,Dr as V,I as W,ht as X,I5 as Y,N5 as Z,ly as _,N as a,P5 as a0,M5 as a1,D5 as a2,Jg as a3,k5 as a4,F5 as a5,wi as a6,Yq as a7,Bs as a8,nl as a9,S5 as aA,C5 as aB,R_ as aC,Nc as aD,E5 as aE,P_ as aF,A5 as aG,jc as aH,Yc as aI,Ou as aJ,wg as aK,uc as aa,Ot as ab,k_ as ac,Jd as ad,dB as ae,pC as af,Ia as ag,eu as ah,ys as ai,tz as aj,gC as ak,uB as al,va as am,$g as an,sz as ao,_n as ap,rz as aq,lh as ar,y5 as as,jr as at,xn as au,Lo as av,_d as aw,qw as ax,Xw as ay,R5 as az,lI as b,Tn as c,nu as d,Ys as e,Wi as f,ot as g,mn as h,ct as i,se as j,Qt as k,T5 as l,Ko as m,qq as n,Xa as o,Zd as p,fz as q,$ as r,Js as s,$H as t,sC as u,Jn as v,Ru as w,gt as x,Gr as y,tt as z};
//# sourceMappingURL=index-Bz3uuwsZ.js.map
