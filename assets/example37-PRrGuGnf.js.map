{"version":3,"file":"example37-PRrGuGnf.js","sources":["../../src/examples/slickgrid/example37.$au.ts","../../src/examples/slickgrid/example37.ts"],"sourcesContent":["import { CustomElement } from '@aurelia/runtime-html';\nexport const name = \"example37\";\nexport const template = \"<h2>\\n  ${title}\\n  <button class=\\\"btn btn-outline-secondary btn-sm btn-icon\\\" click.trigger=\\\"toggleDarkMode()\\\" data-test=\\\"toggle-dark-mode\\\">\\n    <i class=\\\"mdi mdi-theme-light-dark\\\"></i>\\n    <span>Toggle Dark Mode</span>\\n  </button>\\n  <span class=\\\"float-end\\\">\\n    <a style=\\\"font-size: 18px\\\" target=\\\"_blank\\\"\\n      href=\\\"https://github.com/ghiscoding/aurelia-slickgrid/blob/master/packages/demo/src/examples/slickgrid/example37.ts\\\">\\n      <span class=\\\"mdi mdi-link-variant\\\"></span> code\\n    </a>\\n  </span>\\n  <button\\n      class=\\\"ms-2 btn btn-outline-secondary btn-sm btn-icon\\\"\\n      type=\\\"button\\\"\\n      data-test=\\\"toggle-subtitle\\\"\\n      click.trigger=\\\"toggleSubTitle()\\\"\\n    >\\n      <span class=\\\"mdi mdi-information-outline\\\" title=\\\"Toggle example sub-title details\\\"></span>\\n    </button>\\n</h2>\\n\\n<div class=\\\"subtitle\\\"  hidden.bind=\\\"hideSubTitle\\\"></div>\\n\\n<aurelia-slickgrid\\n  grid-id=\\\"grid37\\\"\\n  column-definitions.bind=\\\"columnDefinitions\\\"\\n  grid-options.bind=\\\"gridOptions\\\"\\n  dataset.bind=\\\"dataset\\\"\\n  instances.bind=\\\"aureliaGrid\\\"\\n  on-cell-change.trigger=\\\"handleOnCellChange($event.detail.eventData, $event.detail.args)\\\"\\n  on-columns-reordered.trigger=\\\"handleOnColumnsReordered()\\\">\\n</aurelia-slickgrid>\\n\";\nexport default template;\nexport const dependencies = [  ];\nexport const bindables = {};\nlet _e;\nexport function register(container) {\n  if (!_e) {\n    _e = CustomElement.define({ name, template, dependencies, bindables });\n  }\n  container.register(_e);\n}\n","import {\n  type AureliaGridInstance,\n  type Column,\n  FieldType,\n  type GridOption,\n  Editors,\n  type OnCellChangeEventArgs,\n} from 'aurelia-slickgrid';\n\nconst NB_ITEMS = 100;\n\nexport class Example37 {\n  private _darkMode = false;\n\n  title = 'Example 37: Footer Totals Row';\n  subTitle = `Display a totals row at the end of the grid.`;\n\n  aureliaGrid!: AureliaGridInstance;\n  gridOptions!: GridOption;\n  columnDefinitions: Column[] = [];\n  dataset: any[] = [];\n  hideSubTitle = false;\n  resizerPaused = false;\n\n  constructor() {\n    // define the grid options & columns and then create the grid itself\n    this.defineGrid();\n  }\n\n  attached() {\n    // populate the dataset once the grid is ready\n    this.dataset = this.loadData(NB_ITEMS);\n    this.updateAllTotals();\n  }\n\n  detaching() {\n    document.querySelector('.panel-wm-content')!.classList.remove('dark-mode');\n    document.querySelector<HTMLDivElement>('#demo-container')!.dataset.bsTheme = 'light';\n  }\n\n  /* Define grid Options and Columns */\n  defineGrid() {\n    const columnDefs: Column[] = [];\n    for (let i = 0; i < 10; i++) {\n      columnDefs.push({\n        id: i,\n        name: String.fromCharCode('A'.charCodeAt(0) + i),\n        field: String(i),\n        type: FieldType.number,\n        width: 58,\n        editor: { model: Editors.integer }\n      });\n    }\n    this.columnDefinitions = columnDefs;\n\n    this.gridOptions = {\n      autoEdit: true,\n      autoCommitEdit: true,\n      editable: true,\n      darkMode: this._darkMode,\n      gridHeight: 450,\n      gridWidth: 800,\n      enableCellNavigation: true,\n      rowHeight: 30,\n      createFooterRow: true,\n      showFooterRow: true,\n      footerRowHeight: 28,\n    };\n  }\n\n  loadData(itemCount: number) {\n    // mock a dataset\n    const datasetTmp: any[] = [];\n    for (let i = 0; i < itemCount; i++) {\n      const d = (datasetTmp[i] = {} as any);\n      d.id = i;\n      for (let j = 0; j < this.columnDefinitions.length; j++) {\n        d[j] = Math.round(Math.random() * 10);\n      }\n    }\n\n    return datasetTmp;\n  }\n\n  handleOnCellChange(_e: Event, args: OnCellChangeEventArgs) {\n    this.updateTotal(args.cell);\n  }\n\n  handleOnColumnsReordered() {\n    this.updateAllTotals();\n  }\n\n  toggleDarkMode() {\n    this._darkMode = !this._darkMode;\n    this.toggleBodyBackground();\n    this.aureliaGrid.slickGrid?.setOptions({ darkMode: this._darkMode });\n    this.updateAllTotals();\n  }\n\n  toggleBodyBackground() {\n    if (this._darkMode) {\n      document.querySelector<HTMLDivElement>('.panel-wm-content')!.classList.add('dark-mode');\n      document.querySelector<HTMLDivElement>('#demo-container')!.dataset.bsTheme = 'dark';\n    } else {\n      document.querySelector('.panel-wm-content')!.classList.remove('dark-mode');\n      document.querySelector<HTMLDivElement>('#demo-container')!.dataset.bsTheme = 'light';\n    }\n  }\n\n  updateAllTotals() {\n    let columnIdx = this.aureliaGrid.slickGrid?.getColumns().length || 0;\n    while (columnIdx--) {\n      this.updateTotal(columnIdx);\n    }\n  }\n\n  updateTotal(cell: number) {\n    const columnId = this.aureliaGrid.slickGrid?.getColumns()[cell].id as number;\n\n    let total = 0;\n    let i = this.dataset.length;\n    while (i--) {\n      total += (parseInt(this.dataset[i][columnId], 10) || 0);\n    }\n    const columnElement = this.aureliaGrid.slickGrid?.getFooterRowColumn(columnId);\n    if (columnElement) {\n      columnElement.textContent = `Sum: ${total}`;\n    }\n  }\n\n  toggleSubTitle() {\n    this.hideSubTitle = !this.hideSubTitle;\n    const action = this.hideSubTitle ? 'add' : 'remove';\n    document.querySelector('.subtitle')?.classList[action]('hidden');\n    this.aureliaGrid.resizerService.resizeGrid(0);\n  }\n}\n"],"names":["name","template","dependencies","bindables","_e","register","container","CustomElement","_Example37_decorators","_init","NB_ITEMS","customElement","__au2ViewDef","Example37","__publicField","columnDefs","i","FieldType","Editors","itemCount","datasetTmp","d","j","args","_a","columnIdx","cell","columnId","total","columnElement","_b","action","__decoratorStart","__decorateElement","__runInitializers"],"mappings":"sGACO,MAAMA,EAAO,YACPC,EAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAEXC,EAAe,CAAG,EAClBC,EAAY,CAAC,EAC1B,IAAIC,EACG,SAASC,EAASC,EAAW,CAC7BF,IACHA,EAAKG,EAAc,OAAO,CAAE,KAAAP,EAAM,SAAAC,EAAU,aAAAC,EAAc,UAAAC,EAAW,GAEvEG,EAAU,SAASF,CAAE,CACvB,4lCCZAI,EAAAC,EASA,MAAMC,EAAW,IAAIF,EAAA,CAAAG,EAAAC,CAAA,CAAA,EAEd,MAAMC,CAAU,CAarB,aAAc,CAZdC,EAAA,KAAQ,YAAY,EAAA,EAEZA,EAAA,KAAA,QAAA,+BAAA,EACGA,EAAA,KAAA,WAAA,8CAAA,EAEXA,EAAA,KAAA,aAAA,EACAA,EAAA,KAAA,aAAA,EACAA,EAAA,KAAA,oBAA8B,EAAC,EAC/BA,EAAA,KAAA,UAAiB,EAAC,EACHA,EAAA,KAAA,eAAA,EAAA,EACCA,EAAA,KAAA,gBAAA,EAAA,EAId,KAAK,WAAW,CAAA,CAGlB,UAAW,CAEJ,KAAA,QAAU,KAAK,SAASJ,CAAQ,EACrC,KAAK,gBAAgB,CAAA,CAGvB,WAAY,CACV,SAAS,cAAc,mBAAmB,EAAG,UAAU,OAAO,WAAW,EACzE,SAAS,cAA8B,iBAAiB,EAAG,QAAQ,QAAU,OAAA,CAI/E,YAAa,CACX,MAAMK,EAAuB,CAAC,EAC9B,QAASC,EAAI,EAAGA,EAAI,GAAIA,IACtBD,EAAW,KAAK,CACd,GAAIC,EACJ,KAAM,OAAO,aAAa,GAAoBA,CAAC,EAC/C,MAAO,OAAOA,CAAC,EACf,KAAMC,EAAU,OAChB,MAAO,GACP,OAAQ,CAAE,MAAOC,EAAQ,OAAQ,CAAA,CAClC,EAEH,KAAK,kBAAoBH,EAEzB,KAAK,YAAc,CACjB,SAAU,GACV,eAAgB,GAChB,SAAU,GACV,SAAU,KAAK,UACf,WAAY,IACZ,UAAW,IACX,qBAAsB,GACtB,UAAW,GACX,gBAAiB,GACjB,cAAe,GACf,gBAAiB,EACnB,CAAA,CAGF,SAASI,EAAmB,CAE1B,MAAMC,EAAoB,CAAC,EAC3B,QAASJ,EAAI,EAAGA,EAAIG,EAAWH,IAAK,CAClC,MAAMK,EAAKD,EAAWJ,CAAC,EAAI,CAAC,EAC5BK,EAAE,GAAKL,EACP,QAASM,EAAI,EAAGA,EAAI,KAAK,kBAAkB,OAAQA,IACjDD,EAAEC,CAAC,EAAI,KAAK,MAAM,KAAK,SAAW,EAAE,CACtC,CAGK,OAAAF,CAAA,CAGT,mBAAmBhB,EAAWmB,EAA6B,CACpD,KAAA,YAAYA,EAAK,IAAI,CAAA,CAG5B,0BAA2B,CACzB,KAAK,gBAAgB,CAAA,CAGvB,gBAAiB,OACV,KAAA,UAAY,CAAC,KAAK,UACvB,KAAK,qBAAqB,GAC1BC,EAAA,KAAK,YAAY,YAAjB,MAAAA,EAA4B,WAAW,CAAE,SAAU,KAAK,YACxD,KAAK,gBAAgB,CAAA,CAGvB,sBAAuB,CACjB,KAAK,WACP,SAAS,cAA8B,mBAAmB,EAAG,UAAU,IAAI,WAAW,EACtF,SAAS,cAA8B,iBAAiB,EAAG,QAAQ,QAAU,SAE7E,SAAS,cAAc,mBAAmB,EAAG,UAAU,OAAO,WAAW,EACzE,SAAS,cAA8B,iBAAiB,EAAG,QAAQ,QAAU,QAC/E,CAGF,iBAAkB,OAChB,IAAIC,IAAYD,EAAA,KAAK,YAAY,YAAjB,YAAAA,EAA4B,aAAa,SAAU,EACnE,KAAOC,KACL,KAAK,YAAYA,CAAS,CAC5B,CAGF,YAAYC,EAAc,SACxB,MAAMC,GAAWH,EAAA,KAAK,YAAY,YAAjB,YAAAA,EAA4B,aAAaE,GAAM,GAEhE,IAAIE,EAAQ,EACRZ,EAAI,KAAK,QAAQ,OACrB,KAAOA,KACKY,GAAA,SAAS,KAAK,QAAQZ,CAAC,EAAEW,CAAQ,EAAG,EAAE,GAAK,EAEvD,MAAME,GAAgBC,EAAA,KAAK,YAAY,YAAjB,YAAAA,EAA4B,mBAAmBH,GACjEE,IACYA,EAAA,YAAc,YAC9B,CAGF,gBAAiB,OACV,KAAA,aAAe,CAAC,KAAK,aACpB,MAAAE,EAAS,KAAK,aAAe,MAAQ,UAC3CP,EAAA,SAAS,cAAc,WAAW,IAAlC,MAAAA,EAAqC,UAAUO,GAAQ,UAClD,KAAA,YAAY,eAAe,WAAW,CAAC,CAAA,CAEhD,CA7HOtB,EAAAuB,EAAA,EAAMnB,EAANoB,kBAFczB,EAERK,CAAA,EAANqB,EAAMzB,EAAA,EAAAI,CAAA"}