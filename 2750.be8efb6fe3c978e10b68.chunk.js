"use strict";(self.webpackChunkau_slickgrid_demo=self.webpackChunkau_slickgrid_demo||[]).push([[2750],{1098:(e,t,s)=>{s.d(t,{A:()=>h});var i=s(3267),a=s.n(i),n=s(3484),r=s.n(n)()(a());r.push([e.id,".tab-content{padding:10px}",""]);const h=r},2184:(e,t,s)=>{var i=s(3267),a=s.n(i),n=s(3484);s.n(n)()(a()).push([e.id,".tab-content{padding:10px}",""])},2750:(e,t,s)=>{s.r(t),s.d(t,{Example22:()=>D});var i={};s.r(i),s.d(i,{bindables:()=>l,default:()=>o,dependencies:()=>c,name:()=>r,register:()=>u,template:()=>h});var a=s(5959),n=s(7414);s(2184);const r="example22",h='<h2>\n  ${title}\n  <span class="float-end">\n    <a style="font-size: 18px"\n        target="_blank"\n        href="https://github.com/ghiscoding/aurelia-slickgrid/blob/master/packages/demo/src/examples/slickgrid/example22.ts">\n      <span class="mdi mdi-link-variant"></span> code\n    </a>\n  </span>\n</h2>\n<div class="subtitle"\n      innerhtml.bind="subTitle"></div>\n\n<div>\n  <nav>\n    <div class="nav nav-tabs" id="nav-tab" role="tablist">\n      <button\n          class="nav-link active"\n          id="javascript-tab"\n          data-bs-toggle="tab"\n          data-bs-target="#javascript"\n          type="button"\n          role="tab"\n          aria-controls="javascript"\n          aria-selected="true">\n        JavaScript\n      </button>\n      <button\n          class="nav-link"\n          id="fetch-tab"\n          data-bs-toggle="tab"\n          data-bs-target="#fetch"\n          type="button"\n          role="tab"\n          aria-controls="fetch"\n          aria-selected="false"\n          click.trigger="resizeGrid2()">\n        Fetch-Client\n      </button>\n    </div>\n  </nav>\n  <div class="tab-content" id="nav-tabContent">\n    <div class="tab-pane fade show active" id="javascript" role="tabpanel" aria-labelledby="javascript-tab" tabindex="0">\n      <h4>Grid 1 - Load Local Data</h4>\n      <aurelia-slickgrid grid-id="grid1"\n                          column-definitions.bind="columnDefinitions1"\n                          grid-options.bind="gridOptions1"\n                          dataset.bind="dataset1">\n      </aurelia-slickgrid>\n    </div>\n    <div class="tab-pane fade" id="fetch" role="tabpanel" aria-labelledby="fetch-tab" tabindex="0">\n      <h4>Grid 2 - Load a JSON dataset through Fetch-Client</h4>\n      <aurelia-slickgrid grid-id="grid2"\n                          column-definitions.bind="columnDefinitions2"\n                          grid-options.bind="gridOptions2"\n                          dataset.bind="dataset2"\n                          on-aurelia-grid-created.trigger="aureliaGrid2Ready($event.detail)">\n      </aurelia-slickgrid>\n    </div>\n  </div>\n</div>\n',o=h,c=[],l={};let d;function u(e){d||(d=n.K9.define({name:r,template:h,dependencies:c,bindables:l})),e.register(d)}var f=s(7694),p=s(6824),g=s(971),b=s(5388),m=s.n(b),v=s(1125),y=s.n(v),C=s(5687),R=s.n(C),k=s(8644),w=s.n(k),T=s(9552),S=s.n(T),x=s(3325),I=s.n(x),q=s(1098),j={};j.styleTagTransform=I(),j.setAttributes=w(),j.insert=R().bind(null,"head"),j.domAPI=y(),j.insertStyleElement=S(),m()(q.A,j),q.A&&q.A.locals&&q.A.locals,s(1376);let D=(()=>{let e,t,s=[(0,n.EM)(i)],r=[];return class{static{t=this}static{const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;(0,a.G4)(null,e={value:t},s,{kind:"class",name:t.name,metadata:i},null,r),t=e.value,i&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i}),(0,a.zF)(t,r)}http;title="Example 22: Grids in Bootstrap Tabs";subTitle='This example demonstrate the creation of multiple grids in Bootstrap Tabs\n   <ol>\n    <li>Regular mocked data with javascript</li>\n    <li>Load dataset through Fetch-Client. Also note we need to call a "resizeGrid()" after focusing on this tab</li>\n  </ol>';aureliaGrid2;gridOptions1;gridOptions2;columnDefinitions1=[];columnDefinitions2=[];dataset1=[];dataset2=[];constructor(e=(0,p.hd)((0,p.pn)(f.xl))){this.http=e,this.defineGrid1(),this.defineGrid2()}aureliaGrid2Ready(e){this.aureliaGrid2=e}async attached(){this.dataset1=this.mockData();const e=await this.http.fetch("assets/data/customers_100.json");this.dataset2=await e.json()}defineGrid1(){this.columnDefinitions1=[{id:"title",name:"Title",field:"title",sortable:!0,minWidth:100},{id:"duration",name:"Duration (days)",field:"duration",sortable:!0,minWidth:100},{id:"%",name:"% Complete",field:"percentComplete",sortable:!0,minWidth:100},{id:"start",name:"Start",field:"start",minWidth:100},{id:"finish",name:"Finish",field:"finish",minWidth:100},{id:"effort-driven",name:"Effort Driven",field:"effortDriven",sortable:!0,minWidth:100}],this.gridOptions1={enableAutoResize:!0,autoResize:{container:"#demo-container",rightPadding:10},enableSorting:!0}}defineGrid2(){this.columnDefinitions2=[{id:"name",name:"Name",field:"name",filterable:!0,sortable:!0},{id:"gender",name:"Gender",field:"gender",filterable:!0,sortable:!0,filter:{model:g.CuW.singleSelect,collection:[{value:"",label:""},{value:"male",label:"male"},{value:"female",label:"female"}]}},{id:"company",name:"Company",field:"company",filterable:!0,sortable:!0}],this.gridOptions2={enableAutoResize:!0,autoResize:{container:"#demo-container",rightPadding:10},enableFiltering:!0,enableSorting:!0}}mockData(){const e=[];for(let t=0;t<1e3;t++){const s=2e3+Math.floor(10*Math.random()),i=Math.floor(11*Math.random()),a=Math.floor(29*Math.random()),n=Math.round(100*Math.random());e[t]={id:t,title:"Task "+t,duration:Math.round(100*Math.random())+"",percentComplete:n,start:`${i}/${a}/${s}`,finish:`${i}/${a}/${s}`,effortDriven:t%5==0}}return e}resizeGrid2(){this.aureliaGrid2.resizerService.resizeGrid(10)}},t})()},7694:(e,t,s)=>{s.d(t,{Pq:()=>a,xl:()=>u});var i=s(6824);function a(e,t){return JSON.stringify(void 0!==e?e:{},t)}class n{constructor(){this.cache=new Map,this.delete=e=>this.cache.delete(e),this.has=e=>this.cache.has(e),this.set=(e,t)=>this.cache.set(e,t),this.get=e=>this.cache.get(e),this.clear=()=>this.cache.clear()}}const r=i.DI.createInterface((e=>e.singleton(n)));class h{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null,this.c=(0,i.hd)(i.p7)}withBaseUrl(e){return this.baseUrl=e,this}withDefaults(e){return this.defaults=e,this}withInterceptor(e){return this.interceptors.push(e),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:o})}withRetry(e){const t=this.c.invoke(I,[e]);return this.withInterceptor(t)}withDispatcher(e){return this.dispatcher=e,this}}function o(e){if(!e.ok)throw e;return e}const c=(e,...t)=>new Error(`AUR${String(e).padStart(4,"0")}:${t.map(String)}`),l=/^([a-z][a-z0-9+\-.]*:)?\/\//i,d=i.DI.createInterface("fetch",(e=>{if("function"!=typeof fetch)throw c(5e3);return e.instance(fetch)})),u=i.DI.createInterface("IHttpClient",(e=>e.aliasTo(f)));class f{constructor(){this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.t=[],this.i=null,this.h=(0,i.hd)((0,i.P9)(h)),this.u=(0,i.hd)(d)}get interceptors(){return this.t.slice(0)}configure(e){let t;if("object"==typeof e)t={defaults:e};else{if("function"!=typeof e)throw c(5002,typeof e);{t=this.h(),t.baseUrl=this.baseUrl,t.defaults={...this.defaults},t.interceptors=this.t,t.dispatcher=this.i;const s=e(t);if(null!=s){if("object"!=typeof s)throw c(5001,typeof s);t=s}}}const s=t.defaults;if(s?.headers instanceof Headers)throw c(5003);const i=t.interceptors;if(i?.length>0){if(i.filter((e=>e instanceof I)).length>1)throw c(5004);const e=i.findIndex((e=>e instanceof I));if(e>=0&&e!==i.length-1)throw c(5005)}return this.baseUrl=t.baseUrl,this.defaults=s,this.t=t.interceptors??[],this.i=t.dispatcher,this.isConfigured=!0,this}fetch(e,t){this.C();let s=this.buildRequest(e,t);return this.processRequest(s,this.t).then((e=>{let t;if(e instanceof Response)t=Promise.resolve(e);else{if(!(e instanceof Request))throw c(5006,e);s=e,t=this.u.call(void 0,s)}return this.processResponse(t,this.t,s)})).then((e=>e instanceof Request?this.fetch(e):e)).then((e=>(this.R(),e)),(e=>{throw this.R(),e}))}buildRequest(e,t){const s=this.defaults??{};let i,a,n;const r=function(e){const t={},s=e??{};for(const e of Object.keys(s))t[e]="function"==typeof s[e]?s[e]():s[e];return t}(s.headers);if(e instanceof Request)i=e,n=new Headers(i.headers).get("Content-Type");else{t||(t={}),a=t.body;const r=void 0!==a?{body:a}:null,h={...s,headers:{},...t,...r};n=new Headers(h.headers).get("Content-Type"),i=new Request(p(this.baseUrl,e),h)}return n||(new Headers(r).has("content-type")?i.headers.set("Content-Type",new Headers(r).get("content-type")):void 0!==a&&function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(a)&&i.headers.set("Content-Type","application/json")),function(e,t){const s=t??{};for(const t of Object.keys(s))e.has(t)||e.set(t,s[t])}(i.headers,r),a instanceof Blob&&a.type&&i.headers.set("Content-Type",a.type),i}get(e,t){return this.fetch(e,t)}post(e,t,s){return this.I(e,t,s,"POST")}put(e,t,s){return this.I(e,t,s,"PUT")}patch(e,t,s){return this.I(e,t,s,"PATCH")}delete(e,t,s){return this.I(e,t,s,"DELETE")}dispose(){this.t.forEach((e=>e.dispose?.())),this.t.length=0,this.i=null}C(){this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!=this.i&&m(this.i,v.started)}R(){this.isRequesting=!! --this.activeRequestCount,this.isRequesting||null==this.i||m(this.i,v.drained)}processRequest(e,t){return this.B(e,t,"request","requestError",Request,this)}processResponse(e,t,s){return this.B(e,t,"response","responseError",Response,s,this)}B(e,t,s,i,a,...n){return(t??[]).reduce(((e,t)=>{const r=t[s],h=t[i];return e.then(r?e=>e instanceof a?r.call(t,e,...n):e:g,h?e=>h.call(t,e,...n):b)}),Promise.resolve(e))}I(e,t,s,i){return s||(s={}),s.method=i,null!=t&&(s.body=t),this.fetch(e,s)}}function p(e,t){return l.test(t)?t:(e??"")+t}function g(e){return e}function b(e){throw e}function m(e,t){const s=new e.ownerDocument.defaultView.CustomEvent(t,{bubbles:!0,cancelable:!0});setTimeout((()=>{e.dispatchEvent(s)}),1)}const v=Object.freeze({started:"aurelia-fetch-client-request-started",drained:"aurelia-fetch-client-requests-drained"}),y=i.DI.createInterface((e=>e.singleton(R))),C=Object.freeze({Set:"au:fetch:cache:set",Get:"au:fetch:cache:get",Clear:"au:fetch:cache:clear",Reset:"au:fetch:cache:reset",Dispose:"au:fetch:cache:dispose",CacheHit:"au:fetch:cache:hit",CacheMiss:"au:fetch:cache:miss",CacheStale:"au:fetch:cache:stale",CacheStaleRefreshed:"au:fetch:cache:stale:refreshed",CacheExpired:"au:fetch:cache:expired",CacheBackgroundRefreshed:"au:fetch:cache:background:refreshed",CacheBackgroundRefreshing:"au:fetch:cache:background:refreshing",CacheBackgroundStopped:"au:fetch:cache:background:stopped"});class R{constructor(){this.storage=(0,i.hd)(r),this.p=(0,i.hd)(i.r_),this.ea=(0,i.hd)(i.xe),this.q=(0,i.hd)(u),this.H=[],this.O=-1,this.j=[],this.T=new Map}subscribe(e,t){const s=this.ea.subscribe(e,t);return this.H.push(s),s}subscribeOnce(e,t){const s=this.ea.subscribeOnce(e,t);return this.H.push(s),s}setStaleTimer(e,t,s){const i=this.p.setTimeout((async()=>{this.delete(e),await this.q.get(s);const t=this.getItem(e);this.ea.publish(C.CacheStaleRefreshed,{key:e,value:t}),this.N(i)}),t);this.j.push(i)}startBackgroundRefresh(e){!e||this.O>-1||(this.O=this.p.setInterval((()=>{this.ea.publish(C.CacheBackgroundRefreshing),this.T.forEach(((e,t)=>{this.delete(t),this.q.get(e).then((()=>{const e=this.getItem(t);this.ea.publish(C.CacheBackgroundRefreshed,{key:t,value:e})}))}))}),e))}stopBackgroundRefresh(){this.p.clearInterval(this.O),this.O=-1,this.ea.publish(C.CacheBackgroundStopped)}set(e,t,s,i){const a={data:t,...s};this.setItem(e,a,i)}get(e){return this.getItem(e)?.data}setItem(e,t,s){t.lastCached=Date.now(),this.storage.set(e,t),this.T.set(e,s),this.ea.publish(C.Set,{key:e,value:t})}getItem(e){if(!this.storage.has(e))return void this.ea.publish(C.CacheMiss,{key:e});const t=this.storage.get(e);if(!t?.staleTime||!t?.lastCached)return this.ea.publish(C.CacheHit,{key:e,value:t}),t;const s=Date.now();if(s>t.lastCached+(t.staleTime??0))this.ea.publish(C.CacheStale,{key:e,value:t});else{if(!(s>t.lastCached+(t.cacheTime??0)))return this.ea.publish(C.CacheHit,{key:e,value:t}),t;this.ea.publish(C.CacheExpired,{key:e,value:t})}}delete(e){this.storage.delete(e),this.ea.publish(C.Clear,{key:e})}clear(){this.storage.clear(),this.T.clear(),this.ea.publish(C.Reset),this.stopBackgroundRefresh(),this.j.forEach((e=>{this.p.clearTimeout(e)})),this.j.length=0}dispose(){this.clear(),this.H.forEach((e=>e.dispose())),this.ea.publish(C.Dispose)}N(e){this.p.clearTimeout(e);const t=this.j.indexOf(e);t>-1&&this.j.splice(t,1)}}const k={cacheTime:3e5,staleTime:0,refreshStaleImmediate:!1,refreshInterval:0};class w{constructor(e){this.P=(0,i.hd)(y),this.cf={...k,...e??{}}}request(e){if(this.P.startBackgroundRefresh(this.cf.refreshInterval),"GET"!==e.method)return e;const t=this.P.get(this.key(e));return this.mark(t)??e}response(e,t){if(!t)return e;if(e.headers.has(w.cacheHeader))return e;const s=this.key(t);return this.P.setItem(s,{data:e,...this.cf},t),this.cf?.refreshStaleImmediate&&this.cf.staleTime>0&&this.P.setStaleTimer(s,this.cf.staleTime,t),e}dispose(){this.P.stopBackgroundRefresh()}key(e){return`${w.prefix}${e.url}`}mark(e){return e?.headers.set(w.cacheHeader,"hit"),e}}w.prefix="au:interceptor:",w.cacheHeader="x-au-fetch-cache";class T{constructor(){this.cache=(0,i.hd)(i.r_).globalThis.indexedDB,this.getStore=()=>this.database.transaction(T.cacheName,"readwrite").objectStore(T.cacheName),this.delete=e=>{this.getStore().delete(e)},this.has=e=>this.getStore().count(e).result>0,this.set=(e,t)=>this.getStore().put(t,e),this.get=e=>this.getStore().get(e).result,this.clear=()=>{const e=this.getStore();e.getAllKeys().result.forEach((t=>{e.delete(t)}))},this.database=this.cache.open(T.cacheName).result}}T.cacheName="au-cache";const S=Object.freeze({fixed:0,incremental:1,exponential:2,random:3}),x={maxRetries:3,interval:1e3,strategy:S.fixed};class I{constructor(e){if(this.p=(0,i.hd)(i.r_),this.retryConfig={...x,...e??{}},this.retryConfig.strategy===S.exponential&&this.retryConfig.interval<=1e3)throw c(5007,this.retryConfig.interval)}request(e){return e.retryConfig||(e.retryConfig={...this.retryConfig},e.retryConfig.counter=0),e.retryConfig.requestClone=e.clone(),e}response(e,t){return delete t.retryConfig,e}responseError(e,t,s){const{retryConfig:i}=t,{requestClone:a}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const n=null==i.doRetry||i.doRetry(e,t);return Promise.resolve(n).then((n=>{if(n){i.counter++;const e=function(e){const{interval:t,strategy:s,minRandomInterval:i,maxRandomInterval:a,counter:n}=e;if("function"==typeof s)return e.strategy(n);switch(s){case S.fixed:return q[S.fixed](t);case S.incremental:return q[S.incremental](n,t);case S.exponential:return q[S.exponential](n,t);case S.random:return q[S.random](n,t,i,a);default:throw c(5008,s)}}(i);return new Promise((t=>this.p.setTimeout(t,isNaN(e)?0:e))).then((()=>{const e=a.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(e,s):e})).then((e=>{const t={...e,retryConfig:i};return s.fetch(t)}))}throw delete t.retryConfig,e}))}throw delete t.retryConfig,e}))}}const q=[e=>e,(e,t)=>t*e,(e,t)=>1===e?t:t**e/1e3,(e,t,s=0,i=6e4)=>Math.random()*(i-s)+s]}}]);