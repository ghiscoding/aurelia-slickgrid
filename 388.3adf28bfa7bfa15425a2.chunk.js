"use strict";(self.webpackChunkau_slickgrid_demo=self.webpackChunkau_slickgrid_demo||[]).push([[388],{1351:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(1157),i=n.n(a),l=n(8614),r=n.n(l)()(i());r.push([e.id,"#grid27 .slick-cell{display:inline-flex;align-items:center;gap:4px}",""]);const o=r},7388:(e,t,n)=>{n.r(t),n.d(t,{Example27:()=>k});var a={};n.r(a),n.d(a,{default:()=>s,dependencies:()=>d,name:()=>r,register:()=>m,template:()=>o});var i=n(3399),l=n(1351);const r="example27",o='<h2>\n  <span innerhtml.bind="title"></span>\n  <span class="float-end">\n    <a style="font-size: 18px"\n        target="_blank"\n        href="https://github.com/ghiscoding/aurelia-slickgrid/blob/master/packages/demo/src/examples/slickgrid/example27.ts">\n      <span class="mdi mdi-link mdi-v-align-sub"></span> code\n    </a>\n  </span>\n</h2>\n<div class="subtitle" innerhtml.bind="subTitle"></div>\n\n<div class="row" style="margin-bottom: 4px;">\n  <div class="col-md-12">\n    <button class="btn btn-outline-secondary btn-xs btn-icon" data-test="add-500-rows-btn" click.trigger="loadData(500)">\n      500 rows\n    </button>\n    <button class="btn btn-outline-secondary btn-xs btn-icon" data-test="add-50k-rows-btn" click.trigger="loadData(25000)">\n      25k rows\n    </button>\n    <button click.trigger="dynamicallyChangeFilter()" class="btn btn-outline-secondary btn-xs btn-icon"\n            data-test="change-filter-dynamically">\n      <span class="mdi mdi-filter-outline"></span>\n      <span>Dynamically Change Filter (% complete &lt; 40)</span>\n    </button>\n    <button click.trigger="collapseAllWithoutEvent()" class="btn btn-outline-secondary btn-xs btn-icon"\n            data-test="collapse-all-noevent-btn">\n      <span class="mdi mdi-arrow-collapse"></span>\n      <span>Collapse All (without triggering event)</span>\n    </button>\n    <button click.trigger="dynamicallyToggledFirstParent()" class="btn btn-outline-secondary btn-xs btn-icon"\n            data-test="dynamically-toggle-first-parent-btn">\n      <span>Dynamically Toggle First Parent</span>\n    </button>\n    <button click.trigger="reapplyToggledItems()" data-test="reapply-toggled-items-btn"\n            class="btn btn-outline-secondary btn-xs btn-icon"\n            disabled.bind="hasNoExpandCollapseChanged">\n      <span class="mdi mdi-history"></span>\n      <span>Reapply Previous Toggled Items</span>\n    </button>\n    <div class.bind="loadingClass"></div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-md-12">\n    <button click.trigger="addNewRow()" data-test="add-item-btn" class="btn btn-primary btn-xs btn-icon">\n      <span class="mdi mdi-plus color-white"></span>\n      <span>Add New Item (in 1st group)</span>\n    </button>\n    <button click.trigger="updateFirstRow()" data-test="update-item-btn" class="btn btn-outline-secondary btn-xs btn-icon">\n      <span class="icon mdi mdi-pencil"></span>\n      <span>Update 1st Row Item</span>\n    </button>\n    <button click.trigger="collapseAll()" data-test="collapse-all-btn" class="btn btn-outline-secondary btn-xs btn-icon">\n      <span class="mdi mdi-arrow-collapse"></span>\n      <span>Collapse All</span>\n    </button>\n    <button click.trigger="expandAll()" data-test="expand-all-btn" class="btn btn-outline-secondary btn-xs btn-icon">\n      <span class="mdi mdi-arrow-expand"></span>\n      <span>Expand All</span>\n    </button>\n    <button click.trigger="logFlatStructure()" class="btn btn-outline-secondary btn-xs btn-icon"\n            title="console.log of the Flat dataset">\n      <span>Log Flat Structure</span>\n    </button>\n    <button click.trigger="logHierarchicalStructure()" class="btn btn-outline-secondary btn-xs btn-icon"\n            title="console.log of the Hierarchical Tree dataset">\n      <span>Log Hierarchical Structure</span>\n    </button>\n  </div>\n</div>\n\n<br />\n\n<div id="grid-container" class="col-sm-12">\n  <aurelia-slickgrid grid-id="grid27"\n                      column-definitions.bind="columnDefinitions"\n                      grid-options.bind="gridOptions"\n                      dataset.bind="dataset"\n                      instances.bind="aureliaGrid"\n                      on-before-filter-change.trigger="showSpinner()"\n                      on-filter-changed.trigger="hideSpinner()"\n                      on-before-filter-clear.trigger="showSpinner()"\n                      on-filter-cleared.trigger="hideSpinner()"\n                      on-before-sort-change.trigger="showSpinner()"\n                      on-sort-changed.trigger="hideSpinner()"\n                      on-before-toggle-tree-collapse.trigger="showSpinner()"\n                      on-toggle-tree-collapsed.trigger="hideSpinner()"\n                      on-tree-full-toggle-start.trigger="showSpinner()"\n                      on-tree-full-toggle-end.trigger="handleOnTreeFullToggleEnd($event.detail)"\n                      on-tree-item-toggled.trigger="handleOnTreeItemToggled($event.detail)">\n  </aurelia-slickgrid>\n</div>\n',s=o,d=[];let c;function m(e){c||(c=i.K94.define({name:r,template:o,dependencies:d})),e.register(c)}var p=n(4603),g=n(4792),u=n(3957),h=n.n(u),b=n(1794),f=n.n(b),C=n(8866),y=n.n(C),v=n(621),x=n.n(v),w=n(3897),D=n.n(w),T=n(5462),S=n.n(T),I={};I.styleTagTransform=S(),I.setAttributes=x(),I.insert=y().bind(null,"head"),I.domAPI=f(),I.insertStyleElement=D(),h()(l.A,I),l.A&&l.A.locals&&l.A.locals,n(1125);class k{title='Example 27: Tree Data <small> <span class="mdi mdi-file-tree mdi-27px"></span> (from a flat dataset with <code>parentId</code> references - <a href="https://ghiscoding.gitbook.io/aurelia-slickgrid/grid-functionalities/tree-data-grid" target="_blank">Wiki</a>)</small>';subTitle='<ul>\n    <li>It is assumed that your dataset will have Parent/Child references AND also Tree Level (indent) property.</li>\n    <ul>\n      <li>If you do not have the Tree Level (indent), you could call "convertParentChildArrayToHierarchicalView()" then call "convertHierarchicalViewToParentChildArray()"</li>\n      <li>You could also pass the result of "convertParentChildArrayToHierarchicalView()" to "dataset-hierarchical.bind" as defined in the next Hierarchical Example</li>\n    </ul>\n  </ul>';aureliaGrid;gridOptions;columnDefinitions=[];dataset=[];datasetHierarchical=[];loadingClass="";isLargeDataset=!1;hasNoExpandCollapseChanged=!0;treeToggleItems=[];constructor(){this.defineGrid()}attached(){this.dataset=this.loadData(500)}defineGrid(){this.columnDefinitions=[{id:"title",name:"Title",field:"title",width:220,cssClass:"cell-title",filterable:!0,sortable:!0,exportWithFormatter:!1,queryFieldSorter:"id",type:g.PUO.string,formatter:g._tQ.tree,exportCustomFormatter:g._tQ.treeExport},{id:"duration",name:"Duration",field:"duration",minWidth:90,filterable:!0},{id:"percentComplete",name:"% Complete",field:"percentComplete",minWidth:120,maxWidth:200,exportWithFormatter:!1,sortable:!0,filterable:!0,filter:{model:g.CuW.compoundSlider,operator:">="},formatter:g._tQ.percentCompleteBarWithText,type:g.PUO.number},{id:"start",name:"Start",field:"start",minWidth:60,type:g.PUO.dateIso,filterable:!0,sortable:!0,filter:{model:g.CuW.compoundDate},formatter:g._tQ.dateIso},{id:"finish",name:"Finish",field:"finish",minWidth:60,type:g.PUO.dateIso,filterable:!0,sortable:!0,filter:{model:g.CuW.compoundDate},formatter:g._tQ.dateIso},{id:"effortDriven",name:"Effort Driven",width:80,minWidth:20,maxWidth:80,cssClass:"cell-effort-driven",field:"effortDriven",exportWithFormatter:!1,formatter:g._tQ.checkmarkMaterial,cannotTriggerInsert:!0,filterable:!0,filter:{collection:[{value:"",label:""},{value:!0,label:"True"},{value:!1,label:"False"}],model:g.CuW.singleSelect}}],this.gridOptions={autoResize:{container:"#demo-container",rightPadding:10},enableAutoSizeColumns:!0,enableAutoResize:!0,enableFiltering:!0,enableTreeData:!0,treeDataOptions:{columnId:"title",parentPropName:"parentId",levelPropName:"treeLevel",indentMarginLeft:15,initiallyCollapsed:!0,initialSort:{columnId:"title",direction:"ASC"},titleFormatter:(e,t,n,a,i)=>{let l="";return i.treeLevel>0&&(l='<span class="mdi mdi-subdirectory-arrow-right mdi-v-align-sub color-se-secondary"></span>'),`${l}<span class="bold">${n}</span> <span style="font-size:11px; margin-left: 15px;">(parentId: ${i.parentId})</span>`}},multiColumnSort:!1,showCustomFooter:!0,headerRowHeight:45,rowHeight:40,presets:{filters:[{columnId:"percentComplete",searchTerms:[25],operator:">="}]},enableExcelExport:!0,excelExportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},externalResources:[new p.N],contextMenu:{iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download"},gridMenu:{iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-swap-vertical",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical"},headerMenu:{iconClearFilterCommand:"mdi mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-swap-vertical",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-flip-v mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close"}}}addNewRow(){const e=this.aureliaGrid.dataView.getItemCount(),t=this.dataset.find((e=>1===e.treeLevel)),n=this.aureliaGrid.dataView.getItemByIdx(t.parentId);if(t&&n){const t={id:e,parentId:n.id,title:`Task ${e}`,duration:"1 day",percentComplete:99,start:new Date,finish:new Date,effortDriven:!1};this.aureliaGrid.gridService.addItem(t)}}updateFirstRow(){const e=this.aureliaGrid.dataView.getItemById(0);this.aureliaGrid.gridService.updateItem({...e,duration:"11 days",percentComplete:77,start:new Date,finish:new Date,effortDriven:!1})}collapseAll(){this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!0)}collapseAllWithoutEvent(){this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!0,!1)}expandAll(){this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!1)}dynamicallyChangeFilter(){this.aureliaGrid.filterService.updateFilters([{columnId:"percentComplete",operator:"<",searchTerms:[40]}])}logHierarchicalStructure(){console.log("exploded array",this.aureliaGrid.treeDataService.datasetHierarchical)}logFlatStructure(){console.log("flat array",this.aureliaGrid.treeDataService.dataset)}hideSpinner(){setTimeout((()=>this.loadingClass=""),200)}showSpinner(){this.isLargeDataset&&(this.loadingClass="mdi mdi-load mdi-spin-1s mdi-24px color-alt-success")}loadData(e){this.isLargeDataset=e>5e3;let t=0;const n=[],a=[];for(let i=0;i<e;i++){const e=2e3+Math.floor(10*Math.random()),l=Math.floor(11*Math.random()),r=Math.floor(29*Math.random()),o=a[i]={};let s;1!==i&&0!==i||(t=0,n.pop()),3===i?t=1:2===i||4===i||Math.random()>.8&&i>0&&t<3&&i-1!=0&&i-1!=2?(t++,n.push(i-1)):Math.random()<.3&&t>0&&(t--,n.pop()),s=n.length>0?n[n.length-1]:null,o.id=i,o.parentId=s,o.title=`Task ${i}`,o.duration="5 days",o.percentComplete=Math.round(100*Math.random()),o.start=new Date(e,l,r),o.finish=new Date(e,l+1,r),o.effortDriven=i%5==0}return this.dataset=a,a}handleOnTreeFullToggleEnd(e){console.log("Tree Data changes",e),this.hideSpinner()}handleOnTreeItemToggled(e){this.hasNoExpandCollapseChanged=!1,this.treeToggleItems=e.toggledItems,console.log("Tree Data changes",e)}handleOnGridStateChanged(e){this.hasNoExpandCollapseChanged=!1,e?.change?.type===g.yf6.treeData&&(console.log("Tree Data gridStateChange",e?.gridState?.treeData),this.treeToggleItems=e?.gridState?.treeData?.toggledItems)}logTreeDataToggledItems(){console.log(this.aureliaGrid.treeDataService.getToggledItems())}dynamicallyToggledFirstParent(){const e=this.dataset.find((e=>1===e.treeLevel)),t=this.aureliaGrid.dataView.getItemByIdx(e.parentId);e&&t&&this.aureliaGrid.treeDataService.dynamicallyToggleItemState([{itemId:t.id,isCollapsed:!t.__collapsed}])}reapplyToggledItems(){this.aureliaGrid.treeDataService.applyToggledItemStateChanges(this.treeToggleItems)}}i.K94.define(a,k)}}]);