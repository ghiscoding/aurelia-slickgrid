(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{TbeM:function(t,e,i){"use strict";var r=i("ss7G");i.d(e,"a",(function(){return r.a}))},ss7G:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return a}));var r=i("uaPe"),s=i("MG25");const o={delimiter:s.z.comma,filename:"export",format:s.M.csv,useUtf8WithBom:!0};class a{constructor(){this._delimiter=",",this._exportQuoteWrapper="",this._fileFormat=s.M.csv,this._lineCarriageReturn="\n",this._hasGroupedItems=!1,this.className="TextExportService"}get _datasetIdPropName(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"}get _dataView(){var t;return(null===(t=this._grid)||void 0===t?void 0:t.getData)&&this._grid.getData()}get _gridOptions(){var t;return(null===(t=this._grid)||void 0===t?void 0:t.getOptions)?this._grid.getOptions():{}}init(t,e){var i;if(this._grid=t,this._pubSubService=e.get("PubSubService"),this._locales=this._gridOptions&&this._gridOptions.locales||s.t.locales,this._translaterService=null===(i=this._gridOptions)||void 0===i?void 0:i.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToFile(e){if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableTextExport"?');return new t(t=>{var i;null===(i=this._pubSubService)||void 0===i||i.publish("onBeforeExportToTextFile",!0),this._exportOptions=Object(s.rc)(Object.assign(Object.assign(Object.assign(Object.assign({},o),this._gridOptions.exportOptions),this._gridOptions.textExportOptions),e)),this._delimiter=this._exportOptions.delimiterOverride||this._exportOptions.delimiter||"",this._fileFormat=this._exportOptions.format||s.M.csv;const r=this.getDataOutput();setTimeout(()=>{var e;const i={filename:`${this._exportOptions.filename}.${this._fileFormat}`,format:this._fileFormat||s.M.csv,mimeType:this._exportOptions.mimeType||"text/plain",useUtf8WithBom:!this._exportOptions||!this._exportOptions.hasOwnProperty("useUtf8WithBom")||this._exportOptions.useUtf8WithBom};this.startDownloadFile(Object.assign(Object.assign({},i),{content:r})),null===(e=this._pubSubService)||void 0===e||e.publish("onAfterExportToTextFile",i),t(!0)},0)})}startDownloadFile(t){const e=Object(s.Oc)(t.content);let i;i=t.format===s.M.csv?new r.TextEncoder("utf-8").encode(e):e;const o=new Blob([t.useUtf8WithBom?"\ufeff":"",i],{type:t.mimeType});if("function"==typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(o,t.filename);else{const e=document.createElement("a"),i=URL.createObjectURL(o);e.textContent="download",e.href=i,e.setAttribute("download",t.filename),e.style.visibility="hidden",document.body.appendChild(e),e.click(),document.body.removeChild(e)}}getDataOutput(){const t=this._grid.getColumns()||[];let e=this._exportOptions.groupingColumnHeaderTitle;!e&&this._gridOptions.enableTranslate&&this._translaterService&&this._translaterService.translate&&this._translaterService.getCurrentLanguage&&this._translaterService.getCurrentLanguage()?e=this._translaterService.translate(Object(s.Kc)(this._gridOptions)+"GROUP_BY"):e||(e=this._locales&&this._locales.TEXT_GROUP_BY),this._exportQuoteWrapper=this._fileFormat===s.M.csv?'"':"";let i="";const r=this._dataView.getGrouping();if(r&&Array.isArray(r)&&r.length>0?(this._hasGroupedItems=!0,i+=this._fileFormat===s.M.csv?`"${e}"${this._delimiter}`:`${e}${this._delimiter}`):this._hasGroupedItems=!1,this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping&&(this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(t)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0)){i+=this._groupedColumnHeaders.map(t=>`${this._exportQuoteWrapper}${t.title}${this._exportQuoteWrapper}`).join(this._delimiter)+this._lineCarriageReturn}if(this._columnHeaders=this.getColumnHeaders(t)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0){i+=this._columnHeaders.map(t=>`${this._exportQuoteWrapper}${t.title}${this._exportQuoteWrapper}`).join(this._delimiter)+this._lineCarriageReturn}return i+=this.getAllGridRowData(t,this._lineCarriageReturn),i}getAllGridRowData(t,e){const i=[],r=this._dataView.getLength();for(let e=0;e<r;e++){const r=this._dataView.getItem(e);r&&(null!==r[this._datasetIdPropName]&&void 0!==r[this._datasetIdPropName]?i.push(this.readRegularRowData(t,e,r)):this._hasGroupedItems&&void 0===r.__groupTotals?i.push(this.readGroupedTitleRow(r)):r.__groupTotals&&i.push(this.readGroupedTotalRow(t,r)))}return i.join(e)}getColumnGroupedHeaderTitles(t){const e=[];return t&&Array.isArray(t)&&t.forEach(t=>{let i="";i=t.columnGroupKey&&this._gridOptions.enableTranslate&&this._translaterService&&this._translaterService.translate&&this._translaterService.getCurrentLanguage&&this._translaterService.getCurrentLanguage()?this._translaterService.translate(t.columnGroupKey):t.columnGroup||"";const r=t.excludeFromExport||!1;(void 0===t.width||t.width>0)&&!r&&e.push({key:t.field||t.id,title:i||""})}),e}getColumnHeaders(t){const e=[];return t&&Array.isArray(t)&&t.forEach(t=>{let i="";i=(t.nameKey||t.nameKey)&&this._gridOptions.enableTranslate&&this._translaterService&&this._translaterService.translate&&this._translaterService.getCurrentLanguage&&this._translaterService.getCurrentLanguage()?this._translaterService.translate(t.nameKey||t.nameKey):t.name||Object(s.Gd)(t.field);const r=t.excludeFromExport||!1;(void 0===t.width||t.width>0)&&!r&&e.push({key:t.field||t.id,title:i||""})}),e}readRegularRowData(t,e,i){let r=0;const o=[],a=this._exportQuoteWrapper;for(let n=0,l=t.length;n<l;n++){const l=t[n];if(l.excludeFromExport)continue;if(this._hasGroupedItems&&0===r){const t=this._fileFormat===s.M.csv?'""':"";o.push(t)}let d=Object(s.Cc)(e,n,i,l,this._grid,this._exportOptions);(l.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(d=Object(s.rd)(d)),this._fileFormat===s.M.csv&&d&&(d=d.toString().replace(/"/gi,'""'));const h=l&&l.exportCsvForceToKeepAsString?"=":"";o.push(h+a+d+a),r++}return o.join(this._delimiter)}readGroupedTitleRow(t){let e=Object(s.rd)(t.title);const i=this._exportQuoteWrapper;return e=Object(s.Qb)(5*t.level)+e,this._fileFormat===s.M.csv&&(e=e.toString().replace(/"/gi,'""')),i+e+i}readGroupedTotalRow(t,e){const i=this._exportOptions.delimiter,r=this._exportOptions.format,o=this._exportOptions.groupingAggregatorRowText||"",a=this._exportQuoteWrapper,n=[`${a}${o}${a}`];return t.forEach(t=>{let i="";const o=t.excludeFromExport||!1;t.groupTotalsFormatter&&(i=t.groupTotalsFormatter(e,t,this._grid)),(t.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(i=Object(s.rd)(i)),r===s.M.csv&&(i=i.toString().replace(/"/gi,'""')),(void 0===t.width||t.width>0)&&!o&&n.push(a+i+a)}),n.join(i)}}}).call(this,i("CW7D"))},uEsh:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var r=i("MG25");class s{constructor(){this._odataOptions={filterQueue:[],orderBy:""},this._defaultSortBy="",this._columnFilters={}}buildQuery(){if(!this._odataOptions)throw new Error('Odata Service requires certain options like "top" for it to work');this._odataOptions.filterQueue=[];const t=[];if(this._odataOptions&&!0===this._odataOptions.enableCount){const e=this._odataOptions.version&&this._odataOptions.version>=4?"$count=true":"$inlinecount=allpages";t.push(e)}if(this._odataOptions.top&&t.push("$top="+this._odataOptions.top),this._odataOptions.skip&&t.push("$skip="+this._odataOptions.skip),this._odataOptions.orderBy){let e="";e=Array.isArray(this._odataOptions.orderBy)?this._odataOptions.orderBy.join(","):this._odataOptions.orderBy,t.push("$orderby="+e)}if(this._odataOptions.filterBy||this._odataOptions.filter){const t=this._odataOptions.filter||this._odataOptions.filterBy;if(t){this._filterCount=1,this._odataOptions.filterQueue=[];let e=t;Array.isArray(t)&&(this._filterCount=t.length,e=t.join(` ${this._odataOptions.filterBySeparator||"and"} `)),"string"==typeof e&&("("!==e[0]||")"!==e.slice(-1)?this.addToFilterQueueWhenNotExists(`(${e})`):this.addToFilterQueueWhenNotExists(e))}}if(this._odataOptions.filterQueue.length>0){const e=this._odataOptions.filterQueue.join(` ${this._odataOptions.filterBySeparator||"and"} `);this._odataOptions.filter=e,t.push("$filter="+e)}return t.join("&")}getFilterCount(){return this._filterCount}get columnFilters(){return this._columnFilters}get options(){return this._odataOptions}set options(t){this._odataOptions=t}removeColumnFilter(t){this._columnFilters&&this._columnFilters.hasOwnProperty(t)&&delete this._columnFilters[t]}saveColumnFilter(t,e,i){this._columnFilters[t]={search:i,value:e}}updateOptions(t){for(const e of Object.keys(t))if(t.hasOwnProperty(e)&&(this._odataOptions[e]=t[e]),"orderBy"===e||"sortBy"===e){let i=t[e];this._odataOptions.caseType===r.g.pascalCase&&(Array.isArray(i)?i.forEach((t,e,i)=>{i[e]=Object(r.Gd)(t)}):i=Object(r.Gd)(t[e])),this._odataOptions.orderBy=i,this._defaultSortBy=i}}addToFilterQueueWhenNotExists(t){this._odataOptions.filterQueue&&-1===this._odataOptions.filterQueue.indexOf(t)&&this._odataOptions.filterQueue.push(t)}}class o{constructor(){this._currentFilters=[],this._currentSorters=[],this.defaultOptions={top:25,orderBy:"",caseType:r.g.pascalCase},this._odataService=new s}get columnDefinitions(){return this._columnDefinitions}get odataService(){return this._odataService}get _gridOptions(){var t;return(null===(t=this._grid)||void 0===t?void 0:t.getOptions)?this._grid.getOptions():{}}init(t,e,i){this._grid=i;const r=Object.assign(Object.assign({},this.defaultOptions),t);if(this._gridOptions&&!this._gridOptions.enablePagination)this._odataService.options=Object.assign(Object.assign({},r),{top:void 0}),this._currentPagination=null;else{const t=e&&e.pageSize?e.pageSize:this.defaultOptions.top;this._odataService.options=Object.assign(Object.assign({},r),{top:t}),this._currentPagination={pageNumber:1,pageSize:this._odataService.options.top||this.defaultOptions.top||20}}this.options=this._odataService.options,this.pagination=e,(null==i?void 0:i.getColumns)&&(this._columnDefinitions=i.getColumns()||[],this._columnDefinitions=this._columnDefinitions.filter(t=>!t.excludeFromQuery))}buildQuery(){return this._odataService.buildQuery()}clearFilters(){this._currentFilters=[],this.updateFilters([])}clearSorters(){this._currentSorters=[],this.updateSorters([])}updateOptions(t){this.options=Object.assign(Object.assign({},this.options),t),this._odataService.options=this.options}removeColumnFilter(t){this._odataService.removeColumnFilter(t)}getCurrentFilters(){return this._currentFilters}getCurrentPagination(){return this._currentPagination}getCurrentSorters(){return this._currentSorters}mapOdataOperator(t){let e="";switch(t){case"<":e="lt";break;case"<=":e="le";break;case">":e="gt";break;case">=":e="ge";break;case"<>":case"!=":e="ne";break;case"=":case"==":default:e="eq"}return e}resetPaginationOptions(){this._odataService.updateOptions({skip:0})}saveColumnFilter(t,e,i){this._odataService.saveColumnFilter(t,e,i)}processOnFilterChanged(t,e){if(void 0===this._gridOptions.backendServiceApi)throw new Error('Something went wrong in the GridOdataService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(e.columnFilters),!e||!e.grid)throw new Error('Something went wrong when trying create the GridOdataService, it seems that "args" is not populated correctly');return this.updateFilters(e.columnFilters),this.resetPaginationOptions(),this._odataService.buildQuery()}processOnPaginationChanged(t,e){const i=+(e.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(e.newPage,i),this._odataService.buildQuery()}processOnSortChanged(t,e){const i=e.multiColumnSort?e.sortCols:new Array({columnId:e.sortCol.id,sortCol:e.sortCol,sortAsc:e.sortAsc});return this.updateSorters(i),this._odataService.buildQuery()}updateFilters(t,e){var i;let s="";const o=[],a=this._odataService&&this._odataService.options&&this._odataService.options.version||2;e&&(this._currentFilters=this.castFilterToColumnFilters(t));for(const n in t)if(t.hasOwnProperty(n)){const l=t[n];let d;if(d=e&&Array.isArray(this._columnDefinitions)?this._columnDefinitions.find(t=>t.id===l.columnId):l.columnDef,!d)throw new Error("[GridOData Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");let h=(null===(i=d.filter)||void 0===i?void 0:i.queryField)||d.queryFieldFilter||d.queryField||d.field||d.name||"";const u=d.type||r.L.string;let c=(l&&l.searchTerms?[...l.searchTerms]:null)||[],p=Array.isArray(c)&&1===c.length?c[0]:"";if(void 0===p&&(p=""),!h)throw new Error('GridOData filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield").');p=""+p;const g=p.match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/);let _=l.operator||(g?g[1]:""),m=g?g[2]:"";const f=g?g[3]:"*z"===_||_===r.sb.endsWith?"*":"",O=l.bypassBackendQuery||!1;if(h&&""===m&&c.length<=1){this.removeColumnFilter(h);continue}if(Array.isArray(c)&&1===c.length&&"string"==typeof c[0]&&c[0].indexOf("..")>=0&&(_||(_=this._gridOptions.defaultFilterRangeOperator),c=c[0].split("..",2),""===c[0]?(_=_===r.sb.rangeInclusive?"<=":_===r.sb.rangeExclusive?"<":_,c=c.slice(1),m=c[0]):""===c[1]&&(_=_===r.sb.rangeInclusive?">=":_===r.sb.rangeExclusive?">":_,c=c.slice(0,1),m=c[0])),!_&&d.filter&&(_=d.filter.operator),!_&&Array.isArray(c)&&2===c.length&&c[0]&&c[1]&&(_=this._gridOptions.defaultFilterRangeOperator),(_===r.sb.rangeInclusive||r.sb.rangeExclusive)&&Array.isArray(c)&&1===c.length&&u===r.L.date&&(_=r.sb.equal),_||(_=Object(r.Wc)(u)),O)h&&this.saveColumnFilter(h,p,c);else{if(m=this.normalizeSearchValue(u,m,a),Array.isArray(c)&&c.forEach((t,e)=>{c[e]=this.normalizeSearchValue(u,c[e],a)}),s="",this._odataService.options.caseType===r.g.pascalCase&&(h=Object(r.Gd)(h||"")),c&&c.length>1&&("IN"===_||"NIN"===_||"NOTIN"===_||"NOT IN"===_||"NOT_IN"===_)){const t=[];if("IN"===_){for(let e=0,i=c.length;e<i;e++)t.push(`${h} eq ${c[e]}`);s=t.join(" or ")}else{for(let e=0,i=c.length;e<i;e++)t.push(`${h} ne ${c[e]}`);s=t.join(" and ")}"string"==typeof s&&"("===s[0]&&")"===s.slice(-1)||(s=`(${s})`)}else"*"===_||"a*"===_||"*z"===_||"*"===f||_===r.sb.startsWith||_===r.sb.endsWith?s="*"===_||"*z"===_||_===r.sb.endsWith?`endswith(${h}, ${m})`:`startswith(${h}, ${m})`:_===r.sb.rangeExclusive||_===r.sb.rangeInclusive?s=this.filterBySearchTermRange(h,_,c):""!==_&&_!==r.sb.contains&&_!==r.sb.notContains||u!==r.L.string&&u!==r.L.text&&u!==r.L.readonly?s=`${h} ${this.mapOdataOperator(_)} ${m}`:(s=a>=4?`contains(${h}, ${m})`:`substringof(${m}, ${h})`,_===r.sb.notContains&&(s="not "+s));""!==s&&(o.push(s.trim()),this.saveColumnFilter(h||"",p,m))}}this._odataService.updateOptions({filter:o.length>0?o.join(" and "):"",skip:void 0})}updatePagination(t,e){this._currentPagination={pageNumber:t,pageSize:e},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this._odataService.updateOptions({top:e,skip:(t-1)*e})}updateSorters(t,e){let i=[];const s=[];if(!t&&e){i=e,i.forEach(t=>t.direction=t.direction.toLowerCase());const t=i.map(t=>{const e=this._columnDefinitions.find(e=>e.id===t.columnId);return s.push({field:e?(e.queryFieldSorter||e.queryField||e.field)+"":t.columnId+"",direction:t.direction}),e?{columnId:t.columnId,sortAsc:t.direction.toUpperCase()===r.Hb.ASC}:null});Array.isArray(t)&&this._grid&&this._grid.setSortColumns(t)}else if(t&&!e)if(0===(null==t?void 0:t.length));else if(t)for(const e of t)if(e.sortCol){let t=(e.sortCol.queryFieldSorter||e.sortCol.queryField||e.sortCol.field)+"",o=(e.sortCol.field||e.sortCol.id)+"",a=(e.sortCol.queryFieldSorter||e.sortCol.queryField||e.sortCol.field||"")+"";this._odataService.options.caseType===r.g.pascalCase&&(t=Object(r.Gd)(t),o=Object(r.Gd)(o),a=Object(r.Gd)(a)),""!==o&&i.push({columnId:o,direction:e.sortAsc?"asc":"desc"}),""!==a&&s.push({field:a,direction:e.sortAsc?r.Hb.ASC:r.Hb.DESC})}i=i||[];const o=s.map(t=>{let e="";if(t&&t.field){e=`${this._odataService.options.caseType===r.g.pascalCase?Object(r.Gd)(t.field):t.field} ${t&&t.direction&&t.direction.toLowerCase()||""}`}return e}).join(",");return this._odataService.updateOptions({orderBy:o}),this._currentSorters=i,this._odataService.buildQuery()}castFilterToColumnFilters(t){const e="object"==typeof t?Object.keys(t).map(e=>t[e]):t;return Array.isArray(e)?e.map(t=>{const e={columnId:t.columnId||""};return t.operator&&(e.operator=t.operator),Array.isArray(t.searchTerms)&&(e.searchTerms=t.searchTerms),e}):[]}filterBySearchTermRange(t,e,i){let s="";return Array.isArray(i)&&2===i.length&&(e===r.sb.rangeInclusive?(s=`(${t} ge ${i[0]}`,""!==i[1]&&(s+=` and ${t} le ${i[1]}`),s+=")"):e===r.sb.rangeExclusive&&(s=`(${t} gt ${i[0]}`,""!==i[1]&&(s+=` and ${t} lt ${i[1]}`),s+=")")),s}normalizeSearchValue(t,e,i){switch(t){case r.L.date:e=Object(r.jd)(e,!0),e=i>=4?e:`DateTime'${e}'`;break;case r.L.string:case r.L.text:case r.L.readonly:"string"==typeof e&&(e=e.replace(/'/g,"''"),e=`'${e=encodeURIComponent(e)}'`);break;case r.L.integer:case r.L.number:case r.L.float:"string"==typeof e&&(""!==(e=(e=(e=(e=(e=e.replace(/\.\./g,".")).replace(/\.+$/g,"")).replace(/^\.+/g,"0.")).replace(/^\-+\.+/g,"-0.")).replace(/(?!^\-)[^\d\.]/g,""))&&"-"!==e||(e="0"))}return e}}}}]);
//# sourceMappingURL=vendors~826d49cf.91dcc62fd65dd9347fac.bundle.map