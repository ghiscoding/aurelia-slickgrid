"use strict";(self.webpackChunkaurelia_slickgrid=self.webpackChunkaurelia_slickgrid||[]).push([[918],{89292:(e,t,r)=>{r.d(t,{z:()=>s});var i=r(33067);class s{constructor(){this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.operator=i.$MC.equal}get columnFilter(){return this.columnDef?.filter??{}}get gridOptions(){return this.grid?.getOptions()??{}}init(e){this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[];const t=Array.isArray(this.searchTerms)&&this.searchTerms.length>0?this.searchTerms[0]:"";this.filterElm=this.createDomElement(t),this.filterElm.addEventListener("keyup",this.handleKeyup.bind(this))}handleKeyup(e){let t=e.target?.value??"";const r=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;"string"==typeof t&&r&&(t=t.trim()),this._clearFilterTriggered?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.filterElm.classList.remove("filled")):(""===t?this.filterElm.classList.remove("filled"):this.filterElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,searchTerms:[t],shouldTriggerQuery:this._shouldTriggerQuery})),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}clear(e=!0){this.filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.filterElm.value="",this.filterElm.dispatchEvent(new Event("keyup")))}destroy(){this.filterElm&&(this.filterElm.removeEventListener("keyup",this.handleKeyup),this.filterElm.remove())}setValues(e){e&&(this.filterElm.value=e)}createDomElement(e){const t=this.grid.getHeaderRowColumn(this.columnDef.id);(0,i.EUQ)(t);let r=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(r=this.columnFilter.placeholder);const s=document.createElement("input");s.className="form-control search-filter",s.placeholder=r;const n=e;return s.value=n,s.dataset.columnid=`${this.columnDef.id}`,t&&t.appendChild(s),s}}},8918:(e,t,r)=>{r.r(t),r.d(t,{Example4:()=>b});var i={};r.r(i),r.d(i,{default:()=>a,dependencies:()=>c,name:()=>o,register:()=>d,template:()=>l});var s=r(97582),n=r(71542);const o="example4",l='<template>\n  <h2>\n    ${title}\n    <span class="float-end">\n      <a style="font-size: 18px"\n         target="_blank"\n         href="https://github.com/ghiscoding/aurelia-slickgrid/blob/master/src/examples/slickgrid/example4.ts">\n        <span class="fa fa-link"></span> code\n      </a>\n    </span>\n  </h2>\n  <div class="subtitle" innerhtml.bind="subTitle"></div>\n\n  <br />\n  <span if.bind="metrics">\n    <b>Metrics:</b> ${metrics.endTime | dateFormat: \'DD MMM, h:mm:ss a\'} | ${metrics.itemCount} of\n    ${metrics.totalItemCount}\n    items\n  </span>\n\n  <div class="btn-group" role="group" aria-label="...">\n    <button class="btn btn-sm btn-outline-secondary" data-test="scroll-top-btn" click.trigger="scrollGridTop()">\n      <i class="fa fa-arrow-up"></i>\n    </button>\n    <button class="btn btn-sm btn-outline-secondary" data-test="scroll-bottom-btn" click.trigger="scrollGridBottom()">\n      <i class="fa fa-arrow-down"></i>\n    </button>\n  </div>\n\n  <button class="btn btn-outline-secondary btn-sm" data-test="clear-filters"\n          click.trigger="aureliaGrid.filterService.clearFilters()">\n    Clear Filters\n  </button>\n  <button class="btn btn-outline-secondary btn-sm" data-test="clear-sorting"\n          click.trigger="aureliaGrid.sortService.clearSorting()">\n    Clear Sorting\n  </button>\n  <button class="btn btn-outline-secondary btn-sm" data-test="set-dynamic-filter"\n          click.trigger="setFiltersDynamically()">\n    Set Filters Dynamically\n  </button>\n  <button class="btn btn-outline-secondary btn-sm" data-test="set-dynamic-sorting"\n          click.trigger="setSortingDynamically()">\n    Set Sorting Dynamically\n  </button>\n\n  <aurelia-slickgrid grid-id="grid4"\n                     column-definitions.bind="columnDefinitions"\n                     grid-options.bind="gridOptions"\n                     dataset.bind="dataset"\n                     on-aurelia-grid-created.trigger="aureliaGridReady($event.detail)"\n                     on-grid-state-changed.trigger="gridStateChanged($event.detail)"\n                     on-row-count-changed.trigger="refreshMetrics($event.detail.eventData, $event.detail.args)">\n  </aurelia-slickgrid>\n</template>\n',a=l,c=[];let u;function d(e){u||(u=n.b_N.define({name:o,template:l,dependencies:c})),e.register(u)}var h=r(96340),p=r(39344),f=r(83537),m=r(89292),g=r(33067);function y(e,t){return Math.floor(Math.random()*(t-e+1)+e)}r(31932);let b=class{constructor(e){this.http=e,this.title="Example 4: Client Side Sort/Filter",this.subTitle='\n  Sort/Filter on client side only using SlickGrid DataView (<a href="https://ghiscoding.gitbook.io/aurelia-slickgrid/column-functionalities/sorting" target="_blank">Wiki docs</a>)\n  <br/>\n  <ul class="small">\n    <li>Support multi-sort (by default), hold "Shift" key and click on the next column to sort.</li>\n    <li>All column types support the following operators: (>, >=, <, <=, <>, !=, =, ==, *)</li>\n    <ul>\n      <li>Example: >100 ... >=2001-01-01 ... >02/28/17</li>\n      <li><b>Note:</b> For filters to work properly (default is string), make sure to provide a FieldType (type is against the dataset, not the Formatter)</li>\n    </ul>\n    <li>Date Filters</li>\n    <ul>\n      <li>\n        FieldType of dateUtc/date (from dataset) can use an extra option of "filterSearchType" to let user filter more easily.\n        For example, in the "UTC Date" field below, you can type "&gt;02/28/2017", also when dealing with UTC you have to take the time difference in consideration.\n      </li>\n    </ul>\n    <li>On String filters, (*) can be used as startsWith (Hello* => matches "Hello Word") ... endsWith (*Doe => matches: "John Doe")</li>\n    <li>Custom Filter are now possible, "Description" column below, is a customized InputFilter with different placeholder. See <a href="https://ghiscoding.gitbook.io/aurelia-slickgrid/column-functionalities/filters/custom-filter" target="_blank">Wiki - Custom Filter</a></li>\n  </ul>\n',this.columnDefinitions=[],this.dataset=[],this.defineGrid()}attached(){this.dataset=this.mockData(1500)}detaching(){this.saveCurrentGridState()}aureliaGridReady(e){this.aureliaGrid=e}defineGrid(){this.columnDefinitions=[{id:"title",name:"Title",field:"title",filterable:!0,sortable:!0,type:g.fSu.string,minWidth:45,filter:{model:g.x$p.compoundInputText}},{id:"description",name:"Description",field:"description",filterable:!0,sortable:!0,minWidth:80,type:g.fSu.string,filter:{model:new m.z,enableTrimWhiteSpace:!0}},{id:"duration",name:"Duration (days)",field:"duration",sortable:!0,type:g.fSu.number,exportCsvForceToKeepAsString:!0,minWidth:55,filterable:!0,filter:{model:g.x$p.multipleSelect,collectionAsync:this.http.fetch("assets/data/collection_500_numbers.json"),collectionFilterBy:[{property:"value",operator:g.$MC.notEqual,value:360},{property:"value",operator:g.$MC.notEqual,value:365}],collectionSortBy:{property:"value",sortDesc:!0,fieldType:g.fSu.number},customStructure:{value:"value",label:"label",optionLabel:"value",labelSuffix:"text"},collectionOptions:{separatorBetweenTextLabels:" ",filterResultAfterEachPass:"chain"},filterOptions:{maxHeight:250,width:175,useSelectOptionLabelToHtml:!0}}},{id:"complete",name:"% Complete",field:"percentComplete",formatter:g.UgU.percentCompleteBar,minWidth:70,type:g.fSu.number,sortable:!0,filterable:!0,filter:{model:g.x$p.compoundInputNumber}},{id:"start",name:"Start",field:"start",formatter:g.UgU.dateIso,sortable:!0,minWidth:75,type:g.fSu.date,filterable:!0,filter:{model:g.x$p.compoundDate}},{id:"usDateShort",name:"US Date Short",field:"usDateShort",sortable:!0,minWidth:70,width:70,type:g.fSu.dateUsShort,filterable:!0,filter:{model:g.x$p.compoundDate}},{id:"utcDate",name:"UTC Date",field:"utcDate",formatter:g.UgU.dateTimeIsoAmPm,sortable:!0,minWidth:115,type:g.fSu.dateUtc,outputType:g.fSu.dateTimeIsoAmPm,filterable:!0,filter:{model:g.x$p.compoundDate,filterOptions:{minDate:"today"}}},{id:"effort-driven",name:"Effort Driven",field:"effortDriven.isEffort",minWidth:85,maxWidth:95,type:g.fSu.boolean,sortable:!0,formatter:g.UgU.multiple,params:{formatters:[g.UgU.complexObject,g.UgU.checkmark]},filterable:!0,filter:{collection:["","True","False"],model:g.x$p.singleSelect,filterOptions:{maxHeight:250}}}],this.gridOptions={autoResize:{container:"#demo-container",rightPadding:10},enableExcelExport:!0,enableExcelCopyBuffer:!0,enableFiltering:!0,showCustomFooter:!0,presets:{filters:[{columnId:"duration",searchTerms:[10,98]},{columnId:"usDateShort",operator:"<",searchTerms:["4/20/25"]}],sorters:[{columnId:"duration",direction:"DESC"},{columnId:"complete",direction:"ASC"}]},externalResources:[new f.U]}}mockData(e,t=0){const r=[];for(let i=t;i<t+e;i++){const e=Math.round(100*Math.random()),t=y(2e3,2035),s=y(10,35),n=y(1,12),o=n<10?`0${n}`:n,l=y(10,28),a=y(0,100),c=y(10,23),u=y(10,59),d=`${y(1,9)}${y(10,99)}`,h=i%3==0;r.push({id:i,title:"Task "+i,description:i%5?"desc "+i:null,duration:e,percentComplete:a,percentCompleteNumber:a,start:i%4?null:new Date(t,n,l),usDateShort:`${n}/${l}/${s}`,utcDate:`${t}-${o}-${l}T${c}:${u}:${u}.${d}Z`,effortDriven:{isEffort:h,label:h?"Effort":"NoEffort"}})}return r}gridStateChanged(e){console.log("Client sample, Grid State changed:: ",e)}saveCurrentGridState(){console.log("Client sample, current Grid State:: ",this.aureliaGrid.gridStateService.getCurrentGridState())}setFiltersDynamically(){this.aureliaGrid.filterService.updateFilters([{columnId:"duration",searchTerms:[2,25,48,50]},{columnId:"complete",searchTerms:[95],operator:"<"},{columnId:"effort-driven",searchTerms:[!0]},{columnId:"start",operator:">=",searchTerms:["2001-02-28"]}])}setSortingDynamically(){this.aureliaGrid.sortService.updateSorting([{columnId:"duration",direction:"ASC"},{columnId:"start",direction:"DESC"}])}refreshMetrics(e,t){t&&t.current>=0&&setTimeout((()=>{this.metrics={startTime:new Date,endTime:new Date,itemCount:t&&t.current||0,totalItemCount:this.dataset.length||0}}))}scrollGridBottom(){this.aureliaGrid.slickGrid.navigateBottom()}scrollGridTop(){this.aureliaGrid.slickGrid.navigateTop()}};b=(0,s.gn)([(0,n.MoW)(i),(0,s.fM)(0,(0,p.pZ)(h.tL)),(0,s.w6)("design:paramtypes",[Object])],b)},96340:(e,t,r)=>{r.d(t,{AV:()=>s,tL:()=>h});var i=r(39344);function s(e,t){return JSON.stringify(void 0!==e?e:{},t)}const n={maxRetries:3,interval:1e3,strategy:0};class o{constructor(e){if(this.retryConfig={...n,...void 0!==e?e:{}},2===this.retryConfig.strategy&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(e){return e.retryConfig||(e.retryConfig={...this.retryConfig},e.retryConfig.counter=0),e.retryConfig.requestClone=e.clone(),e}response(e,t){return Reflect.deleteProperty(t,"retryConfig"),e}responseError(e,t,r){const{retryConfig:i}=t,{requestClone:s}=i;return Promise.resolve().then((()=>{if(i.counter<i.maxRetries){const n=void 0===i.doRetry||i.doRetry(e,t);return Promise.resolve(n).then((n=>{if(n){i.counter++;const e=l(i);return new Promise((t=>setTimeout(t,isNaN(e)?0:e))).then((()=>{const e=s.clone();return"function"==typeof i.beforeRetry?i.beforeRetry(e,r):e})).then((e=>{const t={...e,retryConfig:i};return r.fetch(t)}))}throw Reflect.deleteProperty(t,"retryConfig"),e}))}throw Reflect.deleteProperty(t,"retryConfig"),e}))}}function l(e){const{interval:t,strategy:r,minRandomInterval:i,maxRandomInterval:s,counter:n}=e;if("function"==typeof r)return e.strategy(n);switch(r){case 0:return a[0](t);case 1:return a[1](n,t);case 2:return a[2](n,t);case 3:return a[3](n,t,i,s);default:throw new Error("Unrecognized retry strategy")}}const a=[e=>e,(e,t)=>t*e,(e,t)=>1===e?t:t**e/1e3,(e,t,r=0,i=6e4)=>Math.random()*(i-r)+r];class c{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null}withBaseUrl(e){return this.baseUrl=e,this}withDefaults(e){return this.defaults=e,this}withInterceptor(e){return this.interceptors.push(e),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:u})}withRetry(e){const t=new o(e);return this.withInterceptor(t)}withDispatcher(e){return this.dispatcher=e,this}}function u(e){if(!e.ok)throw e;return e}const d=/^([a-z][a-z0-9+\-.]*:)?\/\//i,h=i.DI.createInterface("IHttpClient",(e=>e.singleton(p)));class p{constructor(){this.dispatcher=null,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(e){let t;if("object"==typeof e)t={defaults:e};else{if("function"!=typeof e)throw new Error("invalid config");{t=new c,t.baseUrl=this.baseUrl,t.defaults={...this.defaults},t.interceptors=this.interceptors,t.dispatcher=this.dispatcher;const r=e(t);Object.prototype.isPrototypeOf.call(c.prototype,r)&&(t=r)}}const r=t.defaults;if(void 0!==r&&Object.prototype.isPrototypeOf.call(Headers.prototype,r.headers))throw new Error("Default headers must be a plain object.");const i=t.interceptors;if(void 0!==i&&i.length){if(i.filter((e=>Object.prototype.isPrototypeOf.call(o.prototype,e))).length>1)throw new Error("Only one RetryInterceptor is allowed.");const e=i.findIndex((e=>Object.prototype.isPrototypeOf.call(o.prototype,e)));if(e>=0&&e!==i.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=t.baseUrl,this.defaults=r,this.interceptors=void 0!==t.interceptors?t.interceptors:[],this.dispatcher=t.dispatcher,this.isConfigured=!0,this}fetch(e,t){this.trackRequestStart();let r=this.buildRequest(e,t);return this.processRequest(r,this.interceptors).then((e=>{let t;if(Object.prototype.isPrototypeOf.call(Response.prototype,e))t=Promise.resolve(e);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,e))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${e}]`);r=e,t=fetch(r)}return this.processResponse(t,this.interceptors,r)})).then((e=>Object.prototype.isPrototypeOf.call(Request.prototype,e)?this.fetch(e):e)).then((e=>(this.trackRequestEnd(),e)),(e=>{throw this.trackRequestEnd(),e}))}buildRequest(e,t){const r=null!==this.defaults?this.defaults:{};let i,s,n;const o=function(e){const t={},r=void 0!==e?e:{};for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[e]="function"==typeof r[e]?r[e]():r[e]);return t}(r.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,e))i=e,n=new Headers(i.headers).get("Content-Type");else{t||(t={}),s=t.body;const o=void 0!==s?{body:s}:null,l={...r,headers:{},...t,...o};n=new Headers(l.headers).get("Content-Type"),i=new Request(f(this.baseUrl,e),l)}return n||(new Headers(o).has("content-type")?i.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==s&&function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(s)&&i.headers.set("Content-Type","application/json")),function(e,t){const r=void 0!==t?t:{};for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&!e.has(t)&&e.set(t,r[t])}(i.headers,o),void 0!==s&&Object.prototype.isPrototypeOf.call(Blob.prototype,s)&&s.type&&i.headers.set("Content-Type",s.type),i}get(e,t){return this.fetch(e,t)}post(e,t,r){return this.callFetch(e,t,r,"POST")}put(e,t,r){return this.callFetch(e,t,r,"PUT")}patch(e,t,r){return this.callFetch(e,t,r,"PATCH")}delete(e,t,r){return this.callFetch(e,t,r,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!==this.dispatcher){const e=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(e)}),1)}}trackRequestEnd(){if(this.isRequesting=!! --this.activeRequestCount,!this.isRequesting&&null!==this.dispatcher){const e=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(e)}),1)}}processRequest(e,t){return this.applyInterceptors(e,t,"request","requestError",this)}processResponse(e,t,r){return this.applyInterceptors(e,t,"response","responseError",r,this)}applyInterceptors(e,t,r,i,...s){return(void 0!==t?t:[]).reduce(((e,t)=>{const n=t[r],o=t[i];return e.then(n?e=>n.call(t,e,...s):m,o?e=>o.call(t,e,...s):g)}),Promise.resolve(e))}callFetch(e,t,r,i){return r||(r={}),r.method=i,t&&(r.body=t),this.fetch(e,r)}}function f(e,t){return d.test(t)?t:(void 0!==e?e:"")+t}function m(e){return e}function g(e){throw e}}}]);